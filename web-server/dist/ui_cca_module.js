(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{235:function(t,e,o){"use strict";(function(t){d(o(298)),d(o(281)),d(o(282)),d(o(284)),d(o(285)),d(o(288)),d(o(407));var e=d(o(18)),n=d(o(1)),a=d(o(28)),i=s(o(6)),r=d(o(24)),l=s(o(280));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}o(410),o(411),o(412),o(413),o(414),o(415),o(278),o(297),o(299),o(63),t(document).ready(function(){var o={_id:(0,r.default)(window.location).segment(-1)},s=null,d=null,c=null,u=null,p=null,h=null,g=null,f=null,b=null,m=null,v=null,_=null,w=null,y=null,x=!1,C=!1,k=!1,T=!1,A=!1,S=!1,z="";function H(){t(".load-status").css("display","none"),i.dialog({title:"Load Error",message:"Oops, there was a problem retrieving data from the model. This likely means that there was a problem during computation."})}function R(){if(x&&w){var t=w["row-count"];g=new Int32Array(t);for(var e=0;e!=t;++e)g[e]=e;V()}}function I(){if(u&&w){var t=w["column-count"]-1;if("variable-selection"in u&&(t=u["variable-selection"]),t==w["column-count"]-1){var n=w["row-count"];m=new Float64Array(n);for(var a=0;a!=n;++a)m[a]=a;V()}else l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"data-table",array:0,attribute:t,success:function(t){m=t,V()},error:H})}}function V(){if(!A&&u&&w){A=!0,t("#legend-pane .load-status").css("display","none");var a=void 0!==u.colormap?u.colormap:"night";t("#legend-pane").css("background",t("#color-switcher").colorswitcher("get_background",a).toString());var i=w["column-count"]-1;"variable-selection"in u&&(i=u["variable-selection"]),t("#legend").legend({width:t("#legend-pane").width(),height:t("#legend-pane").height(),gradient:t("#color-switcher").colorswitcher("get_gradient_data",a),label:w["column-names"][i],min:w["column-min"][i],max:w["column-max"][i]})}if(!C&&u&&w&&v&&_&&p&&h){C=!0,t("#barplot-pane .load-status").css("display","none");var r=void 0!==u["cca-component"]?u["cca-component"]:0;t("#barplot-table").barplot({metadata:w,inputs:s,outputs:d,r2:v,wilks:_,x_loadings:p,y_loadings:h,component:r}),"variable-selection"in u&&t("#barplot-table").barplot("option","variable",u["variable-selection"]),t("#barplot-table").bind("component-changed",function(t,e){!function(t){n.default.post_event({path:"models/"+o._id+"/select/component/"+t}),c.updateState({"cca-component":t})}(e)}),t("#barplot-table").bind("component-sort-changed",function(t,e,a){!function(t,e){n.default.post_event({path:"models/"+o._id+"/sort/component/"+t+"/"+e}),c.updateState({"sort-cca-component":t,"sort-direction-cca-component":e})}(e,a)}),"sort-cca-component"in u&&"sort-direction-cca-component"in u&&t("#barplot-table").barplot("option",{sort:[u["sort-cca-component"],u["sort-direction-cca-component"]]})}if(!k&&u&&g&&f&&b&&m&&null!==y){k=!0,t("#scatterplot-pane .load-status").css("display","none");r=void 0!==u["cca-component"]?u["cca-component"]:0,a=void 0!==u.colormap?u.colormap:"night";t("#scatterplot-pane").css("background",t("#color-switcher").colorswitcher("get_background",a).toString()),t("#scatterplot").scatterplot({indices:g,x:f[r],y:b[r],v:m,width:t("#scatterplot-pane").width(),height:t("#scatterplot-pane").height(),color:t("#color-switcher").colorswitcher("get_color_scale",a),selection:y}),t("#scatterplot").bind("selection-changed",function(e,o){y=o,t("#table").table("option","row-selection",y),L(y)}),t("#barplot-table").bind("component-changed",function(e,o){t("#scatterplot").scatterplot("option",{x:f[o],y:b[o]})})}if(!T&&u&&w&&null!==y){T=!0,t("#table-pane .load-status").css("display","none");for(var l=[],x=0;x!=w["column-count"]-1;++x)-1==t.inArray(x,s)&&-1==t.inArray(x,d)&&l.push(x);var z={api_root:e.default,mid:o._id,aid:"data-table",metadata:w,inputs:s,outputs:d,others:l,"row-selection":y};a=void 0!==u.colormap?u.colormap:"night";z.colormap=t("#color-switcher").colorswitcher("get_color_scale",a),"sort-variable"in u&&"sort-order"in u&&(z["sort-variable"]=u["sort-variable"],z["sort-order"]=u["sort-order"]),z["variable-selection"]="variable-selection"in u?[u["variable-selection"]]:[w["column-count"]-1],t("#table").table(z),t("#table").bind("variable-sort-changed",function(t,e,a){!function(t,e){n.default.post_event({path:"models/"+o._id+"/select/sort-order/"+t+"/"+e}),c.updateState({"sort-variable":t,"sort-order":e})}(e,a)}),t("#table").bind("row-selection-changed",function(e,o){for(var n=[],a=0;a!=o.length;++a)n.push(o[a]);y=n,t("#scatterplot").scatterplot("option","selection",y),L(y)})}if(!S&&u&&w&&null!=y){S=!0;var H=[];H.push(w["column-count"]-1);for(x=0;x<s.length;x++)H.push(s[x]);for(x=0;x<d.length;x++)H.push(d[x]);for(x=0;x!=w["column-count"]-1;++x)-1==t.inArray(x,s)&&-1==t.inArray(x,d)&&"string"!=w["column-types"][x]&&H.push(x);var R=w["column-count"]-1;"variable-selection"in u&&(R=[u["variable-selection"]]),t("#controls-pane #controls").controls({mid:o._id,model_name:window.model_name,aid:"data-table",metadata:w,color_variables:H,"color-variable":R,selection:y})}}function M(t){n.default.post_event({path:"models/"+o._id+"/select/variable/"+t}),c.updateState({"variable-selection":t})}function L(e){t("#controls").controls("option","selection",e),n.default.post_event({path:"models/"+o._id+"/select/simulation/count/"+e.length}),c.updateState({"simulation-selection":e})}function N(n){if(n==w["column-count"]-1){for(var a=m.length,i=0;i!=a;++i)m[i]=i;t("#scatterplot").scatterplot("option",{v:m})}else l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"data-table",array:0,attribute:n,success:function(e){m=e,t("#scatterplot").scatterplot("option",{v:m})},error:H})}!function r(){n.default.get_model({mid:o._id,success:function(i){o=i,""===z&&(z=o.state),c=a.default.create(o.project,o._id),s=o["artifact:input-columns"],d=o["artifact:output-columns"],o["artifact:scale-inputs"],"waiting"!==o.state&&"running"!==o.state?"closed"===o.state&&null===o.result||"failed"!==o.result&&(t(".slycat-navbar-alert").remove(),"waiting"!=o.state&&"running"!=o.state&&("closed"==o.state&&null===o.result||"failed"!=o.result&&(t(".load-status").text("Loading data."),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"input-structure-correlation",array:0,attribute:0,success:function(t){p=t,V()},error:H}),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"output-structure-correlation",array:0,attribute:0,success:function(t){h=t,V()},error:H}),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"cca-statistics",array:0,attribute:0,success:function(t){v=t,V()},error:H}),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"cca-statistics",array:0,attribute:1,success:function(t){_=t,V()},error:H}),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"canonical-indices",array:0,attribute:0,success:function(t){g=t,V()},error:function(){x=!0,R()}}),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"canonical-variables",array:0,attribute:0,success:function(t){f=t,V()},error:H}),l.get_model_array_attribute({api_root:e.default,mid:o._id,aid:"canonical-variables",array:0,attribute:1,success:function(t){b=t,V()},error:H}),n.default.get_model_table_metadata({mid:o._id,aid:"data-table",index:"Index",success:function(t){w=t,R(),I(),V()},error:H}),c.getState(function(e){y=void 0!==(u=e)["simulation-selection"]?u["simulation-selection"]:[],function(){var e=void 0!==u.colormap?u.colormap:"night";t("#color-switcher").colorswitcher({colormap:e})}(),I(),V()})))):setTimeout(r,5e3)},error:i.ajax_error("Error retrieving model.")})}(),t("#cca-model").layout({applyDefaultStyles:!1,north:{size:28,resizable:!1},west:{size:t("#cca-model").width()/2,resizeWhileDragging:!1,onresize:function(){t("#barplot-table").barplot("resize_canvas")}},center:{resizeWhileDragging:!1,onresize:function(){t("#scatterplot").scatterplot("option",{width:t("#scatterplot-pane").width(),height:t("#scatterplot-pane").height()})}},east:{size:130,resizeWhileDragging:!1,onresize:function(){t("#legend").legend("option",{width:t("#legend-pane").width(),height:t("#legend-pane").height()})}},south:{size:t("body").height()/2,resizeWhileDragging:!1,onresize:function(){t("#table").css("height",t("#table-pane").height()),t("#table").table("resize_canvas")}}}),t("#barplot-table").bind("variable-changed",function(e,o){M(o),t("#legend").legend("option",{min:w["column-min"][o],max:w["column-max"][o],label:w["column-names"][o]}),N(o),t("#table").table("option","variable-selection",[o]),t("#controls").controls("option","color-variable",o)}),t("#color-switcher").bind("colormap-changed",function(e,a){!function(t){n.default.post_event({path:"models/"+o._id+"/select/colormap/"+t}),c.updateState({colormap:t})}(a),t("#legend-pane").css("background",t("#color-switcher").colorswitcher("get_background",a).toString()),t("#legend").legend("option",{gradient:t("#color-switcher").colorswitcher("get_gradient_data",a)}),t("#scatterplot-pane").css("background",t("#color-switcher").colorswitcher("get_background",a).toString()),t("#scatterplot").scatterplot("option",{color:t("#color-switcher").colorswitcher("get_color_scale",a)}),t("#table").table("option","colormap",t("#color-switcher").colorswitcher("get_color_scale",a))}),t("#table").bind("variable-selection-changed",function(e,o){M(o[0]),t("#barplot-table").barplot("option","variable",o[0]),N(o[0]),t("#controls").controls("option","color-variable",o[0]),t("#legend").legend("option",{min:w["column-min"][o[0]],max:w["column-max"][o[0]],label:w["column-names"][o[0]]})}),t("#controls").bind("color-selection-changed",function(e,o){M(o),t("#barplot-table").barplot("option","variable",o),t("#legend").legend("option",{min:w["column-min"][o],max:w["column-max"][o],label:w["column-names"][o]}),N(o),t("#table").table("option","variable-selection",[Number(o)])})})}).call(this,o(2))},280:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.is_little_endian=o,e.get_model_array_attribute_metadata=n,e.cast_array_buffer=a,e.get_model_array_attribute=function(e){var i=t.Deferred();void 0===e.metadata?(e.metadataSuccess=r,n(e,i)):r(e);return i;function r(t){var e=[],n="",r=t.metadata,l=t.attribute,s="string"==r.attributes[l].type,d="&byteorder="+(o()?"little":"big");for(var c in s&&(d=""),r.dimensions)n="",n+=r.dimensions[c].begin,n+=":",n+=r.dimensions[c].end,e.push(n);e=e.join("|");var u=new XMLHttpRequest;u.open("GET",t.api_root+"models/"+t.mid+"/arraysets/"+t.aid+"/data?hyperchunks="+t.array+"/"+t.attribute+"/"+e+d),s||(u.responseType="arraybuffer"),u.success=t.success,u.attribute=t.attribute,u.metadata=r,u.isStringAttribute=s,u.onload=function(t){var e=this.response,o=this.metadata,n=this.metadata.attributes[this.attribute];if(1==o.dimensions.length)s=this.isStringAttribute?JSON.parse(this.responseText):a(e,n.type);else if(2==o.dimensions.length)for(var r=o.dimensions[0].end-o.dimensions[0].begin,l=o.dimensions[1].end-o.dimensions[1].begin,s=[],d=0;d!=r;++d)s.push(a(e,n.type,d*l,l));else window.alert("Can't handle array with "+o.dimensions.length+" dimensions.");this.success(s),i.resolve()},u.send()}};e.arrayset_metadata_cache={};function o(){return void 0===window.result&&(window.result=67305985===new Uint32Array(new Uint8Array([1,2,3,4]).buffer)[0]),window.result}function n(e,o){return t.ajax({url:e.api_root+"models/"+e.mid+"/arraysets/"+e.aid+"/metadata?arrays="+e.array,contentType:"application/json",success:function(t){e.metadata=t.arrays[0],void 0!==e.metadataSuccess?e.metadataSuccess(e):e.success(e)},error:function(t,o,n){e.error&&e.error(t,o,n)},always:function(){o.resolve()}})}function a(t,e,o,n){return"int32"==e?void 0!==o?new Int32Array(t,4*o,n):new Int32Array(t):"int16"==e?void 0!==o?new Int16Array(t,2*o,n):new Int16Array(t):"int8"==e?void 0!==o?new Int8Array(t,o,n):new Int8Array(t):"uint32"==e?void 0!==o?new Uint32Array(t,4*o,n):new Uint32Array(t):"uint16"==e?void 0!==o?new Uint16Array(t,2*o,n):new Uint16Array(t):"uint8"==e?void 0!==o?new Uint8Array(t,o,n):new Uint8Array(t):"float64"==e?void 0!==o?new Float64Array(t,8*o,n):new Float64Array(t):"float32"==e?void 0!==o?new Float32Array(t,4*o,n):new Float32Array(t):void console.error("Unknown array buffer type: "+e)}}).call(this,o(2))},288:function(t,e,o){var n=o(289);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o(36)(n,a);n.locals&&(t.exports=n.locals)},289:function(t,e,o){(t.exports=o(35)(!1)).push([t.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract\n DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government\n retains certain rights in this software. */\n\n.vertical {\n  -ms-transform: rotate(-90deg);\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n}\n\n.unvertical {\n  -ms-transform: rotate(90deg);\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n\n.light-border-right {\n  border-right: 2px solid rgb(231, 231, 231);\n}\n\n.affix-top-right {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n\n.fill-parent-width {\n  width: 100%;\n}\n\n.link-cursor {\n  cursor: pointer;\n}\n\n.default-cursor {\n  cursor: inherit;\n}\n\n.info-panel {\n  border-left: 2px solid #1b809e !important;\n}\n\n.vertical-toggle-pane-resizer {\n  right-border: 2px solid rgb(231,231,231);\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n",""])},296:function(t,e,o){"use strict";(function(t){!function(t){t.extend(!0,window,{Slick:{Slycateditors:{Text:function(e){var o,n;this.init=function(){o=t("<INPUT type=text class='editor-text' />").appendTo(e.container).bind("keydown.nav",function(e){e.keyCode!==t.ui.keyCode.LEFT&&e.keyCode!==t.ui.keyCode.RIGHT||e.stopImmediatePropagation()}).focus().select()},this.destroy=function(){o.remove()},this.focus=function(){o.focus()},this.getValue=function(){return o.val()},this.setValue=function(t){o.val(t)},this.loadValue=function(t){n=t[e.column.field]||"",o.val(n),o[0].defaultValue=n,o.select()},this.serializeValue=function(){return o.val()},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return!(""==o.val()&&null==n)&&o.val()!=n},this.validate=function(){if(e.column.validator){var t=e.column.validator(o.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()},Integer:function(e){var o,n;this.init=function(){(o=t("<INPUT type=text class='editor-text' />")).bind("keydown.nav",function(e){e.keyCode!==t.ui.keyCode.LEFT&&e.keyCode!==t.ui.keyCode.RIGHT||e.stopImmediatePropagation()}),o.appendTo(e.container),o.focus().select()},this.destroy=function(){o.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){n=t[e.column.field],o.val(n),o[0].defaultValue=n,o.select()},this.serializeValue=function(){return parseInt(o.val(),10)||0},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return!(""==o.val()&&null==n)&&o.val()!=n},this.validate=function(){return isNaN(o.val())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}},this.init()},Date:function(e){var o,n,a=!1;this.init=function(){(o=t("<INPUT type=text class='editor-text' />")).appendTo(e.container),o.focus().select(),o.datepicker({showOn:"button",buttonImageOnly:!0,buttonImage:"../images/calendar.gif",beforeShow:function(){a=!0},onClose:function(){a=!1}}),o.width(o.width()-18)},this.destroy=function(){t.datepicker.dpDiv.stop(!0,!0),o.datepicker("hide"),o.datepicker("destroy"),o.remove()},this.show=function(){a&&t.datepicker.dpDiv.stop(!0,!0).show()},this.hide=function(){a&&t.datepicker.dpDiv.stop(!0,!0).hide()},this.position=function(e){a&&t.datepicker.dpDiv.css("top",e.top+30).css("left",e.left)},this.focus=function(){o.focus()},this.loadValue=function(t){n=t[e.column.field],o.val(n),o[0].defaultValue=n,o.select()},this.serializeValue=function(){return o.val()},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return!(""==o.val()&&null==n)&&o.val()!=n},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoSelect:function(e){var o,n;this.init=function(){(o=t("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>")).appendTo(e.container),o.focus()},this.destroy=function(){o.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){o.val((n=t[e.column.field])?"yes":"no"),o.select()},this.serializeValue=function(){return"yes"==o.val()},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return o.val()!=n},this.validate=function(){return{valid:!0,msg:null}},this.init()},Checkbox:function(e){var o,n;this.init=function(){(o=t("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(e.container),o.focus()},this.destroy=function(){o.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){(n=!!t[e.column.field])?o.prop("checked",!0):o.prop("checked",!1)},this.serializeValue=function(){return o.prop("checked")},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return this.serializeValue()!==n},this.validate=function(){return{valid:!0,msg:null}},this.init()},PercentComplete:function(e){var o,n,a;this.init=function(){(o=t("<INPUT type=text class='editor-percentcomplete' />")).width(t(e.container).innerWidth()-25),o.appendTo(e.container),(n=t("<div class='editor-percentcomplete-picker' />").appendTo(e.container)).append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>"),n.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>"),o.focus().select(),n.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:a,slide:function(t,e){o.val(e.value)}}),n.find(".editor-percentcomplete-buttons button").bind("click",function(e){o.val(t(this).attr("val")),n.find(".editor-percentcomplete-slider").slider("value",t(this).attr("val"))})},this.destroy=function(){o.remove(),n.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){o.val(a=t[e.column.field]),o.select()},this.serializeValue=function(){return parseInt(o.val(),10)||0},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return!(""==o.val()&&null==a)&&(parseInt(o.val(),10)||0)!=a},this.validate=function(){return isNaN(parseInt(o.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}},this.init()},LongText:function(e){var o,n,a,i=this;this.init=function(){var a=t("body");n=t("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(a),o=t("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(n),t("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(n),n.find("button:first").bind("click",this.save),n.find("button:last").bind("click",this.cancel),o.bind("keydown",this.handleKeyDown),i.position(e.position),o.focus().select()},this.handleKeyDown=function(o){o.which==t.ui.keyCode.ENTER&&o.ctrlKey?i.save():o.which==t.ui.keyCode.ESCAPE?(o.preventDefault(),i.cancel()):o.which==t.ui.keyCode.TAB&&o.shiftKey?(o.preventDefault(),e.grid.navigatePrev()):o.which==t.ui.keyCode.TAB&&(o.preventDefault(),e.grid.navigateNext())},this.save=function(){e.commitChanges()},this.cancel=function(){o.val(a),e.cancelChanges()},this.hide=function(){n.hide()},this.show=function(){n.show()},this.position=function(t){n.css("top",t.top-5).css("left",t.left-5)},this.destroy=function(){n.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){o.val(a=t[e.column.field]),o.select()},this.serializeValue=function(){return o.val()},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return!(""==o.val()&&null==a)&&o.val()!=a},this.validate=function(){return{valid:!0,msg:null}},this.init()},Rating:function(e){var o,n;this.init=function(){(o=t("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(e.container),o.focus()},this.destroy=function(){o.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){(n=!!t[e.column.field])?o.prop("checked",!0):o.prop("checked",!1)},this.serializeValue=function(){return o.prop("checked")},this.applyValue=function(t,o){t[e.column.field]=o},this.isValueChanged=function(){return this.serializeValue()!==n},this.validate=function(){return{valid:!0,msg:null}},this.init()}}}})}(t)}).call(this,o(2))},299:function(t,e,o){"use strict";(function(t){!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={duration:"fast",direction:"both"},n=/^(?:html)$/i,a=function(e){var o=t(window),a=n.test(e[0].nodeName);return{border:a?{top:0,left:0,bottom:0,right:0}:function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),a={top:parseFloat(n?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(n?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(n?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(n?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:a.top,left:a.left,bottom:a.bottom,right:a.right,vertical:a.top+a.bottom,horizontal:a.left+a.right}}(e[0]),scroll:{top:(a?o:e).scrollTop(),left:(a?o:e).scrollLeft()},scrollbar:{right:a?0:e.innerWidth()-e[0].clientWidth,bottom:a?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:a?0:t.top,left:a?0:t.left,bottom:a?e[0].clientHeight:t.bottom,right:a?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollintoview:function(i){(i=t.extend({},o,i)).direction=e["string"==typeof i.direction&&i.direction.toLowerCase()]||e.both;var r="";!0===i.direction.x&&(r="horizontal"),!0===i.direction.y&&(r=r?"both":"vertical");var l=this.eq(0),s=l.closest(":scrollable("+r+")");if(s.length>0){s=s.eq(0);var d={e:a(l),s:a(s)},c={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},u={};!0===i.direction.y&&(c.top<0?u.scrollTop=d.s.scroll.top+c.top:c.top>0&&c.bottom<0&&(u.scrollTop=d.s.scroll.top+Math.min(c.top,-c.bottom))),!0===i.direction.x&&(c.left<0?u.scrollLeft=d.s.scroll.left+c.left:c.left>0&&c.right<0&&(u.scrollLeft=d.s.scroll.left+Math.min(c.left,-c.right))),t.isEmptyObject(u)?t.isFunction(i.complete)&&i.complete.call(s[0]):(n.test(s[0].nodeName)&&(s=t("html,body")),s.animate(u,i.duration).eq(0).queue(function(e){t.isFunction(i.complete)&&i.complete.call(s[0]),e()}))}return this}});var i={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,a,r){var l=e["string"==typeof a[3]&&a[3].toLowerCase()]||e.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:i[s.overflowX.toLowerCase()]||!1,y:i[s.overflowY.toLowerCase()]||!1,isRoot:n.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var c={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return l.y&&c.scrollableY()||l.x&&c.scrollableX()}})}(t)}).call(this,o(2))},407:function(t,e,o){var n=o(408);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o(36)(n,a);n.locals&&(t.exports=n.locals)},408:function(t,e,o){var n=o(37);(t.exports=o(35)(!1)).push([t.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n.ui-layout-resizer\n{\n  background-color: #ddc;\n}\n\n.ui-layout-toggler\n{\n  background-color: #ccb;\n}\n\n.ui-layout-resizer-open.ui-layout-resizer-hover, .ui-layout-resizer-dragging, .ui-layout-toggler-hover\n{\n  background-color: #fc6;\n}\n\n.ui-layout-pane, .ui-layout-container\n{\n  padding: 0;\n  border: 0;\n  margin: 0;\n}\n#controls-pane\n{\n  z-index: 3 !important; /* Required to make bootstrap dropdowns appear over lower panes */\n}\n.center\n{\n  text-align: center;\n}\n#color-switcher ul.dropdown-menu\n{\n  background-color: #F2F2F2;\n}\n.bootstrap-styles #color-switcher .dropdown-menu > li > a:hover\n{\n  background-color: #E4E4E4;\n}\n.bootstrap-styles #color-switcher .dropdown-menu > .active > a:hover\n{\n  background-color: #337AB7;\n}\n\n#table\n{\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n}\n\n/* New CCA table styles */\n#barplot-table {\n  /*height: 250px;*/\n  overflow: hidden;\n}\n.barplotHeader {\n  /*overflow: hidden;*/\n  white-space: nowrap;\n}\n.barplotHeaderColumns {\n  /*outline: 1px solid blue;*/\n  white-space: nowrap;\n  display: inline-block;\n}\n.barplotHeaderColumn {\n  text-align: right !important;\n  display: inline-block;\n  /*padding: 3px;*/\n  cursor: pointer;\n  /*outline: 1px solid red;*/\n}\n.wrapper {\n  /*No longer using box-sizing since we are sizing cells based on an wrapper div inside them*/\n/*  box-sizing: border-box;\n  -moz-box-sizing: border-box;*/\n}\n.barplotHeaderColumn .wrapper {\n  padding: 3px;\n}\n.mask\n{\n  background-color: white;\n  position: relative; /* needed to get this cell to cover scrolling header row */\n  z-index: 1;\n}\n.mask .wrapper {\n  padding: 3px;\n}\n.barplotViewport {\n\n}\n.barplotGroup {\n  overflow: hidden;\n  width: auto !important; /* Need to force auto width since jQuery Resizable Widget sets static width on resize, which then breaks horizontal expansion/contraction on pane resize */\n}\n.barplotColumn {\n  float: left;\n  clear: left;\n}\n.barplotGroup.inputs,\n.barplotHeader,\n.barplotColumn,\n.mask,\n.inputs .ui-resizable-s\n{\n  border-color: #C0C0C0;\n  border-style: solid;\n  border-width: 0;\n}\n/*.barplotGroup.inputs,*/\n.barplotHeader\n{\n  border-bottom-width: 1px;\n}\n.barplotColumn,\n.mask\n{\n  border-right-width: 1px;\n}\n.inputs .ui-resizable-s {\n  bottom: 0;\n  height: 3px;\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  background-color: #DDDDCC;\n}\n.inputs .ui-resizable-s.ui-resizable-hover {\n  background-color: #FFCC66;\n}\n.noVerticalResize .ui-resizable-s {\n  display: none !important;\n}\n.toggle-control-s {\n  width: 50px;\n  height: 100%;\n  margin: 0 auto;\n  background-color: #CCCCBB;\n}\n.toggle-control-s.toggle-control-hover {\n  cursor: pointer;\n  background-color: #FFCC66;\n}\n/*.barplotGroup.inputs {\n  border-bottom: 7px solid red;\n}*/\n.barplotColumn .barplotCell {\n  display: block;\n}\n.barplotCanvas {\n  /*overflow: auto;*/\n  /*display: relative;*/ /* Only needed if using DOM's scrollIntoView() function instead of jQuery plugin */\n  height: 100%;\n}\n.barplotCanvas.input {\n  overflow-x: hidden;\n  /*overflow-y: auto;*/\n}\n.barplotRow {\n  white-space: nowrap;\n}\n.barplotCell {\n  display: inline-block;\n  text-align: right;\n}\n#rsquared-label sup {\n  position: absolute;\n  margin-top: -3px;\n}\n.rowInput,\n.rowOutput\n{\n  cursor: pointer;\n}\n#barplot-table .inputLabel .wrapper,\n#barplot-table .outputLabel .wrapper\n{\n  padding: 3px;\n}\n#barplot-table .inputLabel,\n#barplot-table .outputLabel,\n.barplotCell.col0,\n.barplotHeaderColumn\n{\n  font-weight: bold;\n  text-align: center;\n}\n#barplot-table .inputLabel\n{\n  background: #eeffe0;\n}\n#barplot-table .inputLabel.selected-variable,\n#barplot-table .barplotRow.rowInput.selected-variable,\n#barplot-table .barplotCell.rowInput.selected-variable\n{\n  background: #3ca654;\n  color: white;\n}\n#barplot-table .outputLabel\n{\n  background: #eeeeff;\n}\n#barplot-table .outputLabel.selected-variable,\n#barplot-table .barplotRow.rowOutput.selected-variable,\n#barplot-table .barplotCell.rowOutput.selected-variable\n{\n  background: #7767b0;\n  color: white;\n}\n.barplotHeaderColumnLabelWrapper,\n.selectCCAComponent,\n.wrapper,\n.barplotCellValue,\n.selected-component .spacer,\n.negative,\n.positive\n{\n  display: inline-block;\n}\n.barplotCellValue\n{\n  padding: 3px 23px 3px 18px;\n  width: 40px;\n}\n.selected-component .barplotCellValue,\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  background-color: #DDDDDD;\n  border-width: 0px 1px;\n  border-style: solid;\n  border-color: #808080;\n  color: #666655;\n}\n.barplotHeaderColumn.selected-component .wrapper {\n  padding: 0;\n}\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  padding: 3px 3px 3px 3px;\n  width: 75px;\n}\n.spacer\n{\n  width: 100px;\n  display: none;\n}\n.negativeSpacer\n{\n  text-align: right;\n}\n.positiveSpacer\n{\n  text-align: left;\n}\n.negative,\n.positive\n{\n  height: 12px;\n}\n.negative\n{\n  background-color: blue;\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n}\n.positive\n{\n  background-color: red;\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n#barplot-table span.sortCCAComponent \n{\n  width: 15px;\n  height: 15px;\n  display: inline-block;\n  border: 1px solid transparent;\n  cursor: pointer;\n  position: relative;\n  top: 3px;\n  margin-left: 3px;\n}\n#barplot-table .barplotHeaderColumn:hover .icon-sort-off,\n.icon-sort-off:hover \n{\n  background: transparent url("+n(o(409))+") no-repeat center center;\n}\n.icon-sort-off:hover \n{\n  border: 1px solid #C7C7C7 !important;\n}\n.icon-sort-ascending:hover,\n.icon-sort-descending:hover\n{\n  border: 1px solid #878787 !important;\n}\n.barplotHeaderColumn.mask.col0 {\n  vertical-align: top;\n}\n.legend-axis path,\n.legend-axis line\n{\n  fill: none;\n  stroke: black;\n}\na\n{\n  cursor: pointer;\n}\n.bootstrap-styles .btn-default:hover,\n.bootstrap-styles .btn-default.focus,\n.bootstrap-styles .btn-default:focus\n{\n    background-color: white;\n}\n.bootstrap-styles .btn-default:active, \n.bootstrap-styles .btn-default.active,\n.bootstrap-styles .btn-default.focus.active,\n.bootstrap-styles .open > .btn-default.dropdown-toggle,\n.bootstrap-styles .open > .btn-default.dropdown-toggle:hover\n{\n    background-color: #E6E6E6;\n}\n#controls-pane .bootstrap-styles .dropdown-menu\n{\n  max-height: 500px;\n  overflow-y: auto;\n}\n#controls-pane .center {\n  margin: 2px 0;\n}",""])},409:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FAQEMDLbpJFQAAAAvSURBVAjXYzx+/Ph/BgKAkYGBgQGfQktLS0ZGGAebQktLS0a4SdgUwhRgBdhMBAAtJBKt7XgY+AAAAABJRU5ErkJggg=="},410:function(t,e,o){"use strict";(function(t){var e=function(t){return t&&t.__esModule?t:{default:t}}(o(279));o(278),t.widget("cca.legend",{options:{width:300,height:300,metadata:null,label:"Label",min:null,max:null,border:25},_create:function(){this.svg=e.default.select(this.element.get(0)).append("svg"),this.legend_layer=this.svg.append("g").attr("class","legend"),this.legend_axis_layer=this.legend_layer.append("g").attr("class","legend-axis"),this.updates={},this.update_timer=null,this._schedule_update({update_width:!0,update_height:!0,render_legend:!0,update_legend_colors:!0,update_legend_position:!0,update_legend_axis:!0,update_label:!0})},_setOption:function(t,e){this.options[t]=e,"v"==t?this._schedule_update({update_color_domain:!0,render_data:!0,render_selection:!0,update_legend_axis:!0}):"width"==t?this._schedule_update({update_width:!0}):"height"==t?this._schedule_update({update_height:!0,update_legend_position:!0,update_legend_axis:!0,update_label:!0}):"gradient"==t?this._schedule_update({update_legend_colors:!0}):"min"==t||"max"==t?this._schedule_update({update_legend_axis:!0}):"label"==t&&this._schedule_update({update_label:!0})},_schedule_update:function(t){var e=this;for(var o in t)e.updates[o]=t[o];e.update_timer||(e.update_timer=window.setTimeout(function(){e._update()},0))},_update:function(){if(this.update_timer=null,this.updates.update_width&&(this.element.attr("width",this.options.width),this.svg.attr("width",this.options.width)),this.updates.update_height&&(this.element.attr("height",this.options.height),this.svg.attr("height",this.options.height)),this.updates.render_legend){this.legend_layer.append("defs").append("linearGradient").attr("id","color-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");this.legend_layer.append("rect").classed("color",!0).attr("width",10).attr("height",200).attr("x",0).attr("y",0).style("fill","url(#color-gradient)")}if(this.updates.update_legend_colors){var t=this.legend_layer.select("#color-gradient").selectAll("stop").data(this.options.gradient);t.exit().remove(),t.enter().append("stop"),t.attr("offset",function(t){return t.offset+"%"}).attr("stop-color",function(t){return t.color})}if(this.updates.update_legend_position){this.element.width();var o=this.element.height(),n=parseInt(o-2*this.options.border),a=this.options.border+28,i=this.options.border;this.legend_layer.attr("transform","translate("+a+","+i+")").attr("data-transx",a).attr("data-transy",i),this.legend_layer.select("rect.color").attr("height",n)}if(this.updates.update_legend_axis){this.legend_scale=e.default.scale.linear().domain([this.options.max,this.options.min]).range([0,parseInt(this.legend_layer.select("rect.color").attr("height"))]),this.legend_axis=e.default.svg.axis().scale(this.legend_scale).orient("right"),this.legend_axis_layer.attr("transform","translate("+(parseInt(this.legend_layer.select("rect.color").attr("width"))+1)+",0)").call(this.legend_axis);this.legend_layer.select("rect.color").style("fill","url(#color-gradient)")}if(this.updates.update_label){this.legend_layer.selectAll(".label").remove();var r=(n=parseInt(this.legend_layer.select("rect.color").attr("height")))/2;this.legend_layer.append("text").attr("class","label").attr("x",-15).attr("y",r).attr("transform","rotate(-90,-15,"+r+")").style("text-anchor","middle").style("font-weight","bold").text(this.options.label)}this.updates={}}})}).call(this,o(2))},411:function(t,e,o){"use strict";(function(t){var e=function(t){return t&&t.__esModule?t:{default:t}}(o(279));o(278),o(290),o(291),o(292),o(293),o(294),o(295),o(296);var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(280));t.widget("cca.table",{options:{api_root:"",mid:null,aid:null,metadata:null,inputs:[],outputs:[],others:[],"row-selection":[],"variable-selection":[],"sort-variable":null,"sort-order":null,colormap:null},_create:function(){var t=this;function o(t){return null==t?"&nbsp;":(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(t,n,a,i,r){return i.colormap?"<div class='highlightWrapper"+(null==a?" null":"")+(e.default.hcl(i.colormap(a)).l>50?" light":" dark")+"' style='background:"+i.colormap(a)+"'>"+o(a)+"</div>":null==a?"<div class='highlightWrapper"+(null==a?" null":"")+"'>"+o(a)+"</div>":o(a)}function a(e,o){t.data.set_sort(e,o),t.data.get_indices("sorted",t.options["row-selection"],function(n){t.grid.invalidate(),t.trigger_row_selection=!1,t.grid.setSelectedRows(n),t.grid.resetActiveCell(),n.length&&t.grid.scrollRowToTop(Math.min.apply(Math,n)),t.element.trigger("variable-sort-changed",[e,o])})}function i(e,o,a){return{id:e,field:e,name:t.options.metadata["column-names"][e],sortable:!1,headerCssClass:o,cssClass:a,formatter:n,header:{buttons:[{cssClass:t.options["sort-variable"]==e?"ascending"==t.options["sort-order"]?"icon-sort-ascending":"icon-sort-descending":"icon-sort-off",tooltip:t.options["sort-variable"]==e&&"ascending"==t.options["sort-order"]?"Sort descending":"Sort ascending",command:t.options["sort-variable"]==e&&"ascending"==t.options["sort-order"]?"sort-descending":"sort-ascending"}]}}}for(var r in t.columns=[],t.columns.push(i(t.options.metadata["column-count"]-1,"headerSimId","rowSimId")),t.options.inputs)t.columns.push(i(t.options.inputs[r],"headerInput","rowInput"));for(var r in t.options.outputs)t.columns.push(i(t.options.outputs[r],"headerOutput","rowOutput"));for(var r in t.options.others)t.columns.push(i(t.options.others[r],"headerOther","rowOther"));t.data=new t._data_provider({api_root:t.options.api_root,mid:t.options.mid,aid:t.options.aid,metadata:t.options.metadata,sort_column:t.options["sort-variable"],sort_order:t.options["sort-order"],inputs:t.options.inputs,outputs:t.options.outputs}),t.trigger_row_selection=!0,t.grid=new Slick.Grid(t.element,t.data,t.columns,{explicitInitialization:!0,enableColumnReorder:!1}),t.data.onDataLoaded.subscribe(function(e,o){for(var n=o.from;n<=o.to;n++)t.grid.invalidateRow(n);t.grid.render()});var l=new Slick.Plugins.HeaderButtons;l.onCommand.subscribe(function(e,o){var n=o.column,i=o.button,r=o.command,l=o.grid;for(var s in t.columns)t.columns[s].header.buttons[0].cssClass="icon-sort-off",t.columns[s].header.buttons[0].tooltip="Sort ascending",t.columns[s].header.buttons[0].command="sort-ascending",l.updateColumnHeader(t.columns[s].id);"sort-ascending"==r?(i.cssClass="icon-sort-ascending",i.command="sort-descending",i.tooltip="Sort descending",a(n.id,"ascending")):"sort-descending"==r&&(i.cssClass="icon-sort-descending",i.command="sort-ascending",i.tooltip="Sort ascending",a(n.id,"descending"))}),t.grid.registerPlugin(l),t.grid.registerPlugin(new Slick.AutoTooltips({enableForHeaderCells:!0})),t.grid.setSelectionModel(new Slick.RowSelectionModel),t.grid.onSelectedRowsChanged.subscribe(function(e,o){t.trigger_row_selection&&t.data.get_indices("unsorted",o.rows,function(e){t.options["row-selection"]=e,t.element.trigger("row-selection-changed",[e])}),t.trigger_row_selection=!0}),t.grid.onHeaderClick.subscribe(function(e,o){t._array_equal([o.column.field],t.options["variable-selection"])||"string"==t.options.metadata["column-types"][o.column.id]||(t.options["variable-selection"]=[o.column.field],t._color_variables(t.options["variable-selection"]),t.element.trigger("variable-selection-changed",[t.options["variable-selection"]]))}),t._color_variables(t.options["variable-selection"]),t.grid.init(),t.data.get_indices("sorted",t.options["row-selection"],function(e){t.trigger_row_selection=!1,t.grid.setSelectedRows(e),t.grid.resetActiveCell(),e.length&&t.grid.scrollRowToTop(Math.min.apply(Math,e))})},resize_canvas:function(){this.grid.resizeCanvas()},update_data:function(){var t=this;t.data.invalidate(),t.grid.invalidate(),t.data.get_indices("sorted",t.options["row-selection"],function(e){t.trigger_row_selection=!1,t.grid.setSelectedRows(e),t.grid.resetActiveCell(),e.length&&t.grid.scrollRowToTop(Math.min.apply(Math,e))})},_setOption:function(t,e){var o=this;if("row-selection"==t)o.options[t]=e,o.data.get_indices("sorted",e,function(t){o.trigger_row_selection=!1,o.grid.setSelectedRows(t),o.grid.resetActiveCell(),t.length&&o.grid.scrollRowToTop(Math.min.apply(Math,t))});else if("variable-selection"==t){if(o._array_equal(o.options[t],e))return;o.options[t]=e,o._color_variables(e)}else"colormap"==t&&(o.options[t]=e,o._color_variables(o.options["variable-selection"]))},_color_variables:function(o){var n=this.grid.getColumns();for(var a in n){var i=n[a];if(null!==this.options.colormap&&-1!=t.inArray(i.id,o)){i.colormap=this.options.colormap.copy();var r=[],l=e.default.scale.linear().domain([0,i.colormap.range().length]).range([this.options.metadata["column-min"][i.id],this.options.metadata["column-max"][i.id]]);for(var a in i.colormap.range())r.push(l(a));i.colormap.domain(r),i.cssClass=i.cssClass.split(" ")[0]+" highlight"}else i.colormap=null,i.cssClass=i.cssClass.split(" ")[0]}this.grid.invalidate()},_data_provider:function(o){var a=this;a.api_root=o.api_root,a.mid=o.mid,a.aid=o.aid,a.metadata=o.metadata,a.sort_column=o.sort_column,a.sort_order=o.sort_order,a.inputs=o.inputs,a.outputs=o.outputs,a.analysis_columns=a.inputs.concat(a.outputs),a.ranked_indices={},a.pages={},a.pages_in_progress={},a.page_size=50,a.onDataLoaded=new Slick.Event,a.getLength=function(){return a.metadata["row-count"]},a.getItem=function(e){var o=a.metadata["column-count"],n=Math.floor(e/a.page_size),i=n*a.page_size;if(a.pages_in_progress[n])return null;if(!(n in a.pages)){a.pages_in_progress[n]=!0;var r=i,l=(n+1)*a.page_size,s="";if(null!==a.sort_column&&null!==a.sort_order){var d="a"+a.sort_column,c=a.sort_order;"ascending"==c?c="asc":"descending"==c&&(c="desc"),a.sort_column==a.metadata["column-count"]-1&&(d="index(0)"),s="/order: rank("+d+', "'+c+'")'}return t.ajax({type:"GET",url:a.api_root+"models/"+a.mid+"/arraysets/"+a.aid+"/data?hyperchunks=0/0:"+(o-1)+"|index(0)"+s+"/"+r+":"+l,success:function(t){a.pages[n]=[];for(var e=0;e<t[0].length;e++){for(var i={},s=0;s!=o;++s)i[s]=t[s][e];a.pages[n].push(i)}a.pages_in_progress[n]=!1,a.onDataLoaded.notify({from:r,to:l})},error:function(t,e,o){console.log("error",t,e,o)}}),null}return a.pages[n][e-i]},a.getItemMetadata=function(t){var e=Math.floor(t/a.page_size);if(a.pages_in_progress[e]||!(e in a.pages))return null;for(var o=this.getItem(t),n=a.analysis_columns.length,i="",r=0;r!=n;r++)null==o[a.analysis_columns[r]]&&(i+="nullRow");return""!=i?{cssClasses:i}:null},a.set_sort=function(t,e){t==a.sort_column&&e==a.sort_order||(a.sort_column=t,a.sort_order=e,a.pages={})},a.get_indices=function(t,o,i){if(0!=o.length)if(null==a.sort_column||null==a.sort_order)i(o);else if(a.ranked_indices[a.sort_column]){var r=a.ranked_indices[a.sort_column];if("descending"==a.sort_order){for(var l=[],s=0;s<r.length;s++)l.push(r[s]);r=l.reverse()}var d=[];for(s=0;s<o.length;s++)"unsorted"==t?d.push(r[o[s]]):"sorted"==t&&d.push(r.indexOf(o[s]));i(new Int32Array(d))}else if(a.sort_column==a.metadata["column-count"]-1)a.ranked_indices[a.sort_column]=new Int32Array(e.default.range(a.metadata["row-count"])),a.get_indices(t,o,i);else{var c=new XMLHttpRequest;c.open("GET",a.api_root+"models/"+a.mid+"/arraysets/data-table/data?hyperchunks=0/rank(a"+a.sort_column+',"asc")/...&byteorder='+(n.is_little_endian()?"little":"big")),c.responseType="arraybuffer",c.direction=t,c.rows=o,c.callback=i,c.onload=function(t){for(var e=[],o=new Int32Array(this.response),n=0;n<o.length;n+=2)e.push(o[n]);a.ranked_indices[a.sort_column]=new Int32Array(e),a.get_indices(this.direction,this.rows,this.callback)},c.send()}else i([])}},_array_equal:function(e,o){return 0==t(e).not(o).length&&0==t(o).not(e).length}})}).call(this,o(2))},412:function(t,e,o){"use strict";(function(t){var e=s(o(326)),n=s(o(62)),a=s(o(18)),i=s(o(46)),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(o(6)),l=s(o(327));function s(t){return t&&t.__esModule?t:{default:t}}o(278),o(252),t.widget("cca.controls",{options:{mid:null,model_name:null,aid:null,metadata:null,"color-variable":null,color_variables:[],selection:[]},_create:function(){var e=this;this.color_control=t('<div class="btn-group btn-group-xs"></div>').appendTo(this.element),this.color_button=t('      <button class="btn btn-default dropdown-toggle" type="button" id="color-dropdown" data-toggle="dropdown" aria-expanded="true" title="Change Point Color">         Point Color         <span class="caret"></span>       </button>       ').appendTo(e.color_control),this.color_items=t('<ul id="y-axis-switcher" class="dropdown-menu" role="menu" aria-labelledby="color-dropdown">').appendTo(e.color_control),this.csv_button=t("      <button class='btn btn-default' title='Download Data Table'>         <span class='fa fa-download' aria-hidden='true'></span>       </button>       ").click(function(){0==e.options.selection.length?e._write_data_table():function(){var t="",o=[{className:"btn-default",label:"Cancel"},{className:"btn-primary",label:"Save Entire Table",icon_class:"fa fa-table"}];e.options.selection.length>0&&(t+="You have "+e.options.selection.length+" rows selected. ",o.splice(o.length-1,0,{className:"btn-primary",label:"Save Selected",icon_class:"fa fa-check"}));t+="What would you like to do?",r.dialog({title:"Download Choices",message:t,buttons:o,callback:function(t){"Save Entire Table"==t.label?e._write_data_table():"Save Selected"==t.label&&e._write_data_table(e.options.selection)}})}()}).appendTo(this.element),e._set_color_variables()},_write_data_table:function(e){var o=this;t.ajax({type:"POST",url:a.default+"models/"+o.options.mid+"/arraysets/"+o.options.aid+"/data",data:(0,n.default)({hyperchunks:"0/.../..."}),contentType:"application/json",success:function(t){o._write_csv(o._convert_to_csv(t,e),o.options.model_name+"_data_table.csv")},error:function(t,e,o){window.alert("Error retrieving data table: "+o)}})},_write_csv:function(t,e){var o=new Blob([t],{type:"application/csv;charset=utf-8;"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.style="visibility:hidden",a.download=e||"slycatDataTable.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)},_convert_to_csv:function(t,o){var n=i.default.zip.apply(i.default,(0,e.default)(t));void 0!=o&&o.length>0&&(o.sort(),n=i.default.at(n,o));var a=this.options.metadata["column-names"].slice(0,-1);return n.unshift(a),l.default.unparse(n)},_set_color_variables:function(){var e=this;this.color_items.empty();for(var o=0;o<this.options.color_variables.length;o++)t("<li role='presentation'>").toggleClass("active",e.options["color-variable"]==e.options.color_variables[o]).attr("data-colorvariable",this.options.color_variables[o]).appendTo(e.color_items).append(t('<a role="menuitem" tabindex="-1">').html(this.options.metadata["column-names"][this.options.color_variables[o]]).click(function(){var o=t(this).parent();if(o.hasClass("active"))return!1;e.color_items.find("li").removeClass("active"),o.addClass("active"),e.element.trigger("color-selection-changed",o.attr("data-colorvariable"))}))},_set_selected_color:function(){this.color_items.find("li").removeClass("active"),this.color_items.find('li[data-colorvariable="'+this.options["color-variable"]+'"]').addClass("active")},_setOption:function(t,e){this.options[t]=e,"color-variable"==t?this._set_selected_color():"color_variables"==t&&this._set_color_variables()}})}).call(this,o(2))},413:function(t,e,o){"use strict";(function(t){o(278),o(299),t.widget("cca.barplot",{options:{metadata:null,inputs:[],outputs:[],r2:[],wilks:[],x_loadings:[],y_loadings:[],component:0,variable:null,sort:[null,null],tableHeight:null,inputsHeight:null,outputsHeight:null},_create:function(){var e=this;function o(t){return"cca"+(t+1)}function n(t){return t<0?-100*t+"px":"0px"}function a(t){return t>0?100*t+"px":"0px"}function i(t,e){return function(){t.select_component(e),t.element.trigger("component-changed",e)}}function r(e,o){return function(){var n="descending";t(this).hasClass("icon-sort-descending")&&(n="ascending"),e.do_component_sort(o,n)}}function l(t,e,o){return function(){t.element.find(".selected-variable").removeClass("selected-variable"),t.element.find(".variable"+o).addClass("selected-variable"),t.element.trigger("variable-changed",[o])}}this.select_component=function(t){this.element.find(".selected-component").removeClass("selected-component"),this.element.find(".col"+(t+1)).addClass("selected-component"),this.resize_canvas(),this.element.find(".rowOutput.selected-component").first().scrollintoview({direction:"horizontal"})},this.do_component_sort=function(n,a){var i=t(".barplotHeaderColumn."+o(n)+" .sortCCAComponent",e.element);t("span.sortCCAComponent",e.element).removeClass("icon-sort-descending icon-sort-ascending").addClass("icon-sort-off"),t(i).removeClass("icon-sort-off").addClass("icon-sort-"+a);var r=t(".inputLabel",e.element),l=t(".outputLabel",e.element),s=t(".barplotRow.rowInput",e.element),d=t(".barplotRow.rowOutput",e.element);function c(t,o){return p(t,o,e.options.x_loadings)}function u(t,o){return p(t,o,e.options.y_loadings)}function p(e,o,i){var r=t(e).data("loadings_index"),l=t(o).data("loadings_index"),s=i[n][r];isNaN(s)&&(s=0);var d=i[n][l];return isNaN(d)&&(d=0),"descending"==a?Math.abs(d)-Math.abs(s):Math.abs(s)-Math.abs(d)}r.sort(c).appendTo(t(".barplotColumn.input",e.element)),s.sort(c).appendTo(t(".barplotCanvas.input",e.element)),l.sort(u).appendTo(t(".barplotColumn.output",e.element)),d.sort(u).appendTo(t(".barplotCanvas.output",e.element)),e.element.find(".barplotRow.selected-variable").scrollintoview({direction:"vertical"}),e.element.trigger("component-sort-changed",[n,a])};for(var s=this.options.metadata,d=this.options.inputs,c=this.options.outputs,u=this.options.r2,p=this.options.wilks,h=this.options.x_loadings,g=this.options.y_loadings,f=h.length,b=t("<div class='barplotHeader'>").appendTo(this.element),m=t('<div class="barplotRow">').appendTo(b),v=(t('<div class="barplotHeaderColumn mask col0"><div class="wrapper">&nbsp;</div></div>').appendTo(m),t('<div class="barplotHeaderColumns">').appendTo(m)),_=0;_!=f;++_){var w=t('<div class="barplotHeaderColumn"><div class="wrapper"><div class="negativeSpacer spacer" /><div class="barplotHeaderColumnLabelWrapper"><span class="selectCCAComponent">CCA'+(_+1)+'</span><span class="sortCCAComponent icon-sort-off" /></div><div class="positiveSpacer spacer" /></div></div>').addClass("col"+(_+1)).addClass(o(_)).appendTo(v);t("span.selectCCAComponent",w).click(i(this,_)),t("span.sortCCAComponent",w).click(r(this,_))}m=t('<div class="barplotRow">').appendTo(b);t('<div class="barplotCell mask col0" id="rsquared-label"><div class="wrapper">R<sup>2</sup></div></div>').appendTo(m);for(v=t('<div class="barplotHeaderColumns">').appendTo(m),_=0;_!=f;++_)var y=t('<div class="barplotCell" />').addClass("col"+(_+1)).appendTo(v),x=t('<div class="wrapper" />').appendTo(y),C=t('<div class="negativeSpacer spacer" />').appendTo(x),k=(t('<div class="barplotCellValue" />').html(Number(u[_]).toFixed(3)).appendTo(x),t('<div class="positiveSpacer spacer" />').appendTo(x));m=t('<div class="barplotRow">').appendTo(b);t('<div class="barplotCell mask col0"><div class="wrapper">P</div></div>').appendTo(m);for(v=t('<div class="barplotHeaderColumns">').appendTo(m),_=0;_!=f;++_)y=t('<div class="barplotCell" />').addClass("col"+(_+1)).appendTo(v),x=t('<div class="wrapper" />').appendTo(y),C=t('<div class="negativeSpacer spacer" />').appendTo(x),t('<div class="barplotCellValue" />').html(Number(p[_]).toFixed(3)).appendTo(x),k=t('<div class="positiveSpacer spacer" />').appendTo(x);for(var T=t('<div class="barplotViewport">').appendTo(this.element),A=t('<div class="barplotGroup inputs">').appendTo(T),S=t('<div class="barplotColumn input">').appendTo(A),z=t('<div class="barplotCanvas input">').appendTo(A),H=0;H!=d.length;++H){(I=t('<div class="barplotCell col0 rowInput inputLabel" />').addClass("row"+H+" variable"+d[H]).appendTo(S)).data({loadings_index:H,variable:d[H]});t('<div class="wrapper" />').html(s["column-names"][d[H]]).appendTo(I);I.click(l(this,0,d[H])),(m=t('<div class="barplotRow rowInput">').addClass("row"+H+" variable"+d[H]).appendTo(z)).data({loadings_index:H,variable:d[H]}),m.click(l(this,0,d[H]));for(_=0;_!=f;++_)y=t('<div class="barplotCell rowInput">').addClass("row"+H+" col"+(_+1)+" variable"+d[H]).appendTo(m),x=t('<div class="wrapper" />').appendTo(y),C=t('<div class="negativeSpacer spacer" />').appendTo(x),t('<div class="negative" />').css("width",n(h[_][H])).addClass(o(_)).appendTo(C),t('<div class="barplotCellValue" />').html(Number(h[_][H]).toFixed(3)).appendTo(x),k=t('<div class="positiveSpacer spacer" />').appendTo(x),t('<div class="positive" />').css("width",a(h[_][H])).addClass(o(_)).appendTo(k)}var R=t('<div class="barplotGroup outputs">').appendTo(T);for(S=t('<div class="barplotColumn output">').appendTo(R),z=t('<div class="barplotCanvas output">').appendTo(R),H=0;H!=c.length;++H){var I;(I=t('<div class="barplotCell col0 rowOutput outputLabel">').addClass("row"+(H+d.length)+" variable"+c[H]).appendTo(S)).data({loadings_index:H,variable:c[H]});t('<div class="wrapper" />').html(s["column-names"][c[H]]).appendTo(I);I.click(l(this,0,c[H])),(m=t('<div class="barplotRow rowOutput">').addClass("row"+(H+d.length)+" variable"+c[H]).appendTo(z)).data({loadings_index:H,variable:c[H]}),m.click(l(this,0,c[H]));for(_=0;_!=f;++_)y=t('<div class="barplotCell rowOutput">').addClass("row"+(H+d.length)+" col"+(_+1)+" variable"+c[H]).appendTo(m),x=t('<div class="wrapper" />').appendTo(y),C=t('<div class="negativeSpacer spacer" />').appendTo(x),t('<div class="negative" />').css("width",n(g[_][H])).addClass(o(_)).appendTo(C),t('<div class="barplotCellValue" />').html(Number(g[_][H]).toFixed(3)).appendTo(x),k=t('<div class="positiveSpacer spacer" />').appendTo(x),t('<div class="positive" />').css("width",a(g[_][H])).addClass(o(_)).appendTo(k)}this.options.tableHeight=t("#barplot-table").height(),this.options.inputsHeight=A.height(),this.options.outputsHeight=R.height(),this.select_component(this.options.component),t(".barplotCanvas.input").bind("scroll",function(){t(".barplotHeaderColumns").css("margin-left","-"+t(this).scrollLeft()+"px"),t(".barplotColumn.input").css("margin-top","-"+t(this).scrollTop()+"px")}),t(".barplotCanvas.output").bind("scroll",function(){t(".barplotHeaderColumns").css("margin-left","-"+t(this).scrollLeft()+"px"),t(".barplotColumn.output").css("margin-top","-"+t(this).scrollTop()+"px"),t(".barplotCanvas.input").scrollLeft(t(this).scrollLeft())});var V=R.height();A.resizable({containment:T,handles:"s",minHeight:Math.max(4,T.height()-this.options.outputsHeight),maxHeight:this.options.inputsHeight,resize:function(t,e){R.height(V+(e.originalSize.height-e.element.height()))},start:function(t,e){V=R.height()}});var M=t(".barplotCanvas.input")[0],L=M.offsetWidth-M.clientWidth,N=t(".barplotGroup.inputs .ui-resizable-s").css("left","-"+L+"px");N.hover(function(){t(this).addClass("ui-resizable-hover")},function(){t(this).removeClass("ui-resizable-hover")}),t("<div class='toggle-control-s' />").appendTo(N).hover(function(){t(this).addClass("toggle-control-hover"),N.removeClass("ui-resizable-hover")},function(){t(this).removeClass("toggle-control-hover"),N.addClass("ui-resizable-hover")}).click(function(){var t=A.height(),o=R.height();if(t>=A.resizable("option","maxHeight")||0==o){var n=V-o;n<0&&(n=0),A.height(t-n),R.height(o+n)}else{V=R.height();var a=e.options.inputsHeight,i=Math.min(o,a-t);R.height(o-i),A.height(t+i)}}),t(".barplotHeaderColumn.mask.col0").height(t(".barplotHeader .barplotRow:first-child").height())},resize_canvas:function(){var e=20;t(".barplotHeaderColumn").each(function(e){var o=Math.max.apply(null,t(".col"+e+" .wrapper").map(function(){return t(this).outerWidth(!0)}).get());t(".col"+e).width(o)}),t(".barplotHeaderColumn").each(function(o){e+=t(this).outerWidth(!0)});var o=t("#barplot-pane").width();t("#barplot-table").width(Math.min(e,o)),e>o?(t(".barplotCanvas.output").css("overflow","scroll"),t(".barplotCanvas.input").css("overflow-y","scroll")):(t(".barplotCanvas.output").css("overflow","auto"),t(".barplotCanvas.input").css("overflow-y","auto")),t("#barplot-table").removeClass("noVerticalResize");var n=0,a=t("#barplot-pane").height();t("#barplot-table").height(Math.min(this.options.tableHeight,a));var i=t("#barplot-table").height()-t(".barplotHeader").outerHeight(!0);if(this.options.tableHeight>a){var r=Math.floor(i/2);this.options.inputsHeight>r?this.options.outputsHeight>r?(t(".barplotGroup.inputs").height(r),t(".barplotGroup.outputs").height(i-t(".barplotCanvas").height())):(t(".barplotGroup.inputs").height(i-this.options.outputsHeight),t(".barplotGroup.outputs").height(this.options.outputsHeight)):(t(".barplotGroup.inputs").height(this.options.inputsHeight),t(".barplotGroup.outputs").height(i-this.options.inputsHeight))}else{t(".barplotGroup.inputs").height(this.options.inputsHeight),t(".barplotGroup.outputs").height(this.options.outputsHeight);var l=(d=t(".barplotCanvas.output")[0]).offsetHeight-d.clientHeight,s=a-this.options.tableHeight;(n=Math.min(l,s))>0&&(t("#barplot-table").height(t("#barplot-table").height()+n),t(".barplotGroup.outputs").height(t(".barplotGroup.outputs").height()+n)),l<=s&&t("#barplot-table").addClass("noVerticalResize")}var d;l=(d=t(".barplotCanvas.output")[0]).offsetHeight-d.clientHeight;t(".barplotGroup.inputs").data("ui-resizable")&&t(".barplotGroup.inputs").resizable("option",{minHeight:Math.max(4,i-(this.options.outputsHeight+l-n)),maxHeight:this.options.inputsHeight});var c=t(".barplotCanvas.input")[0],u=c.offsetWidth-c.clientWidth;t(".barplotGroup.inputs .ui-resizable-s").css("left","-"+u+"px")},_setOption:function(t,e){this.options[t]=e,"component"==t?this.select_component(e):"variable"==t?(this.element.find(".selected-variable").removeClass("selected-variable"),this.element.find(".variable"+e).addClass("selected-variable"),this.element.find(".barplotRow.selected-variable").scrollintoview({direction:"vertical"})):"sort"==t&&this.do_component_sort(this.options.sort[0],this.options.sort[1])}})}).call(this,o(2))},414:function(t,e,o){"use strict";(function(t){var e=function(t){return t&&t.__esModule?t:{default:t}}(o(279));o(278),t.widget("cca.scatterplot",{options:{width:300,height:300,pick_distance:3,drag_threshold:3,indices:[],x:[],y:[],v:[],selection:[],color:e.default.scale.linear().domain([-1,0,1]).range(["blue","white","red"]),border:25},_create:function(){this.start_drag=null,this.end_drag=null,this.main_context=this.element.get(0).getContext("2d"),this.data_canvas=t("<canvas>"),this.data_context=this.data_canvas.get(0).getContext("2d"),this.selection_canvas=t("<canvas>"),this.selection_context=this.selection_canvas.get(0).getContext("2d"),this.updates={},this.update_timer=null,this._schedule_update({update_indices:!0,update_width:!0,update_height:!0,update_x:!0,update_y:!0,update_color_domain:!0,render_data:!0,render_selection:!0});var e=this;this.element.mousedown(function(t){e.start_drag=[e._offsetX(t),e._offsetY(t)],e.end_drag=null}),this.element.mousemove(function(t){if(e.start_drag)if(e.end_drag){e.end_drag=[e._offsetX(t),e._offsetY(t)];var o=e.element.width(),n=e.element.height();e.main_context.clearRect(0,0,o,n),e.main_context.drawImage(e.data_canvas.get(0),0,0),e.main_context.drawImage(e.selection_canvas.get(0),0,0),e.main_context.fillStyle="rgba(255, 255, 0, 0.3)",e.main_context.fillRect(e.start_drag[0],e.start_drag[1],e.end_drag[0]-e.start_drag[0],e.end_drag[1]-e.start_drag[1]),e.main_context.strokeStyle="rgb(255, 255, 0)",e.main_context.lineWidth=2,e.main_context.strokeRect(e.start_drag[0],e.start_drag[1],e.end_drag[0]-e.start_drag[0],e.end_drag[1]-e.start_drag[1])}else(Math.abs(e._offsetX(t)-e.start_drag[0])>e.options.drag_threshold||Math.abs(e._offsetY(t)-e.start_drag[1])>e.options.drag_threshold)&&(e.end_drag=[e._offsetX(t),e._offsetY(t)])}),this.element.mouseup(function(t){t.ctrlKey||t.metaKey||(e.options.selection=[]);var o=e.options.x,n=e.options.y,a=o.length;if(e.start_drag&&e.end_drag)for(var i=e.x_scale.invert(Math.min(e.start_drag[0],e.end_drag[0])),r=e.y_scale.invert(Math.max(e.start_drag[1],e.end_drag[1])),l=e.x_scale.invert(Math.max(e.start_drag[0],e.end_drag[0])),s=e.y_scale.invert(Math.min(e.start_drag[1],e.end_drag[1])),d=0;d!=a;++d){if(i<=o[d]&&o[d]<=l&&r<=n[d]&&n[d]<=s)-1==(c=e.options.selection.indexOf(e.options.indices[d]))&&e.options.selection.push(e.options.indices[d])}else for(i=e.x_scale.invert(e._offsetX(t)-e.options.pick_distance),r=e.y_scale.invert(e._offsetY(t)+e.options.pick_distance),l=e.x_scale.invert(e._offsetX(t)+e.options.pick_distance),s=e.y_scale.invert(e._offsetY(t)-e.options.pick_distance),d=a-1;d>-1;d--)if(i<=o[d]&&o[d]<=l&&r<=n[d]&&n[d]<=s){var c;-1==(c=e.options.selection.indexOf(e.options.indices[d]))?e.options.selection.push(e.options.indices[d]):e.options.selection.splice(c,1);break}e.start_drag=null,e.end_drag=null,e._schedule_update({render_selection:!0}),e.element.trigger("selection-changed",[e.options.selection])})},_offsetX:function(e){return e.pageX-e.currentTarget.getBoundingClientRect().left-t(document).scrollLeft()},_offsetY:function(e){return e.pageY-e.currentTarget.getBoundingClientRect().top-t(document).scrollTop()},_setOption:function(t,e){this.options[t]=e,"indices"==t?this._schedule_update({update_indices:!0,render_selection:!0}):"x"==t?this._schedule_update({update_x:!0,render_data:!0,render_selection:!0}):"y"==t?this._schedule_update({update_y:!0,render_data:!0,render_selection:!0}):"v"==t?this._schedule_update({update_color_domain:!0,render_data:!0,render_selection:!0}):"selection"==t?this._schedule_update({render_selection:!0}):"color"==t?this._schedule_update({update_color_domain:!0,render_data:!0,render_selection:!0}):"width"==t?this._schedule_update({update_width:!0,update_x:!0,render_data:!0,render_selection:!0}):"height"==t?this._schedule_update({update_height:!0,update_y:!0,render_data:!0,render_selection:!0}):"border"==t&&this._schedule_update({update_x:!0,update_y:!0,render_data:!0,render_selection:!0})},_schedule_update:function(t){for(var e in t)1==t[e]&&(this.updates[e]=!0);if(!this.update_timer){var o=this;this.update_timer=window.setTimeout(function(){o._update()},0)}},_update:function(){if(this.update_timer=null,this.updates.update_width&&(this.element.attr("width",this.options.width).css("width",this.options.width),this.data_canvas.attr("width",this.options.width),this.selection_canvas.attr("width",this.options.width)),this.updates.update_height&&(this.element.attr("height",this.options.height).css("height",this.options.height),this.data_canvas.attr("height",this.options.height),this.selection_canvas.attr("height",this.options.height)),this.updates.update_indices){this.inverse_indices={};for(var t=this.options.indices.length,o=0;o!=t;++o)this.inverse_indices[this.options.indices[o]]=o}if(this.updates.update_x&&(this.x_scale=e.default.scale.linear().domain([e.default.min(this.options.x),e.default.max(this.options.x)]).range([0+this.options.border,this.element.attr("width")-this.options.border])),this.updates.update_y&&(this.y_scale=e.default.scale.linear().domain([e.default.min(this.options.y),e.default.max(this.options.y)]).range([this.element.attr("height")-this.options.border,0+this.options.border])),this.updates.update_color_domain){var n=e.default.min(this.options.v),a=e.default.max(this.options.v),i=[],r=e.default.scale.linear().domain([0,this.options.color.domain().length]).range([n,a]);for(var o in this.options.color.domain())i.push(r(o));this.options.color.domain(i)}var l=this.element.attr("width"),s=this.element.attr("height");if(this.updates.render_data){this.data_context.setTransform(1,0,0,1,0,0),this.data_context.clearRect(0,0,l,s),this.data_context.font="10pt Arial",this.data_context.textAlign="center",this.data_context.fillStyle="black",this.data_context.save(),this.data_context.textBaseline="alphabetic",this.data_context.translate(l/2,s-5),this.data_context.fillText("Input Metavariable",0,0),this.data_context.restore(),this.data_context.save(),this.data_context.textBaseline="top",this.data_context.translate(5,s/2),this.data_context.rotate(-Math.PI/2),this.data_context.fillText("Output Metavariable",0,0),this.data_context.restore();t=this.options.x.length;var d=this.options.x,c=this.options.y,u=this.options.v,p=this.options.indices,h=this.options.color;if(t<5e4){var g=(w=1)/2,f=C=(_=8)-2*w,b=k=_-w;for(o=0;o!=t;++o)m=Math.round(this.x_scale(d[o])-_/2-w),v=Math.round(this.y_scale(c[o])-_/2-w),this.data_context.fillStyle=h(u[p[o]]),this.data_context.fillRect(m+w,v+w,C,f),this.data_context.strokeRect(m+g,v+g,k,b)}else for(o=0;o!=t;++o)this.data_context.fillStyle=h(u[p[o]]),this.data_context.fillRect(Math.round(this.x_scale(d[o])-1),Math.round(this.y_scale(c[o])-1),2,2)}if(this.updates.render_selection){d=this.options.x,c=this.options.y,u=this.options.v,h=this.options.color,p=this.options.indices;this.selection_context.setTransform(1,0,0,1,0,0),this.selection_context.clearRect(0,0,l,s);var m,v,_,w,y=this.options.selection,x=y.length,C=(g=(w=2)/2,f=(_=16)-2*w),k=b=_-w;this.selection_context.strokeStyle="black",this.selection_context.lineWidth=w;for(o=0;o!=x;++o){var T=y[o],A=this.inverse_indices[T];this.selection_context.fillStyle=h(u[T]),m=Math.round(this.x_scale(d[A])-_/2-w),v=Math.round(this.y_scale(c[A])-_/2-w),this.selection_context.fillRect(m+w,v+w,C,f),this.selection_context.strokeRect(m+g,v+g,k,b)}}(this.updates.render_data||this.updates.render_selection)&&(this.main_context.clearRect(0,0,l,s),this.main_context.drawImage(this.data_canvas.get(0),0,0),this.main_context.drawImage(this.selection_canvas.get(0),0,0)),this.updates={}}})}).call(this,o(2))},415:function(t,e,o){"use strict";(function(t){var e=function(t){return t&&t.__esModule?t:{default:t}}(o(279));o(278),t.widget("slycat.colorswitcher",{options:{colormap:"day"},_create:function(){var o=this;this.color_maps={night:{label:"Night",background:e.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.5",colors:[e.default.rgb(59,76,192),e.default.rgb(68,90,204),e.default.rgb(77,104,215),e.default.rgb(87,117,225),e.default.rgb(98,130,234),e.default.rgb(108,142,241),e.default.rgb(119,154,247),e.default.rgb(130,165,251),e.default.rgb(141,176,254),e.default.rgb(152,185,255),e.default.rgb(163,194,255),e.default.rgb(174,201,253),e.default.rgb(184,208,249),e.default.rgb(194,213,244),e.default.rgb(204,217,238),e.default.rgb(213,219,230),e.default.rgb(221,221,221),e.default.rgb(229,216,209),e.default.rgb(236,211,197),e.default.rgb(241,204,185),e.default.rgb(245,196,173),e.default.rgb(247,187,160),e.default.rgb(247,177,148),e.default.rgb(247,166,135),e.default.rgb(244,154,123),e.default.rgb(241,141,111),e.default.rgb(236,127,99),e.default.rgb(229,112,88),e.default.rgb(222,96,77),e.default.rgb(213,80,66),e.default.rgb(203,62,56),e.default.rgb(192,40,47),e.default.rgb(180,4,38)]},day:{label:"Day",background:e.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[e.default.rgb(100,108,234),e.default.rgb(115,118,240),e.default.rgb(128,128,244),e.default.rgb(140,138,248),e.default.rgb(151,147,250),e.default.rgb(161,155,251),e.default.rgb(169,163,251),e.default.rgb(177,170,250),e.default.rgb(184,177,248),e.default.rgb(189,182,245),e.default.rgb(193,187,241),e.default.rgb(197,191,236),e.default.rgb(199,194,230),e.default.rgb(200,196,224),e.default.rgb(201,198,216),e.default.rgb(200,199,208),e.default.rgb(198,198,198),e.default.rgb(210,197,195),e.default.rgb(220,194,192),e.default.rgb(229,191,187),e.default.rgb(236,186,181),e.default.rgb(243,181,175),e.default.rgb(248,175,168),e.default.rgb(251,168,160),e.default.rgb(254,159,152),e.default.rgb(255,150,143),e.default.rgb(255,140,133),e.default.rgb(253,129,123),e.default.rgb(250,117,112),e.default.rgb(246,105,101),e.default.rgb(240,91,90),e.default.rgb(233,75,78),e.default.rgb(225,57,66)]},rainbow:{label:"Rainbow Night",background:e.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.6",colors:[e.default.rgb(0,0,255),e.default.rgb(0,255,255),e.default.rgb(255,255,0),e.default.rgb(255,0,0)]},rainbow_day:{label:"Rainbow Day",background:e.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[e.default.rgb(0,0,255),e.default.rgb(0,255,255),e.default.rgb(255,255,0),e.default.rgb(255,0,0)]}},this.button=t('<button class="btn btn-xs btn-default dropdown-toggle" type="button" id="colors-dropdown" data-toggle="dropdown" aria-expanded="true" title="Scatterplot Color Theme">           Colors           <span class="caret"></span>         </button>').appendTo(this.element),this.list=t('<ul class="dropdown-menu" role="menu" aria-labelledby="colors-dropdown">').appendTo(this.element),t.each(this.color_maps,function(e,n){for(var a=o.get_gradient_data(e),i=[],r=0;r<a.length;r++)i.push(a[r].color+" "+a[r].offset+"%");var l=o.get_background(e);t('<li role="presentation">').addClass("color").toggleClass("active",e==o.options.colormap).attr("data-colormap",e).appendTo(o.list).append(t('<a role="menuitem" tabindex="-1">').html(n.label).click(function(){var e=t(this).parent();if(e.hasClass("active"))return!1;o.options.colormap=e.attr("data-colormap"),o.list.find(".color").removeClass("active"),e.addClass("active"),o.element.trigger("colormap-changed",[o.options.colormap])}).css({"background-image":"linear-gradient(to bottom, "+i.join(", ")+"), linear-gradient(to bottom, "+l+", "+l+")","background-size":"5px 75%, 50px 100%","background-position":"right 10px center, right 5px center","background-repeat":"no-repeat, no-repeat","padding-right":"70px"}))})},_setOption:function(t,e){this.options[t]=e,"colormap"==t&&(this.list.find(".color").removeClass("active"),this.list.find("[data-colormap='"+this.options.colormap+"']").addClass("active"))},get_background:function(t){return void 0===t&&(t=this.options.colormap),this.color_maps[t].background},get_null_color:function(t){return void 0===t&&(t=this.options.colormap),this.color_maps[t].null_color},get_opacity:function(t){return void 0===t&&(t=this.options.colormap),this.color_maps[t].opacity},get_color_scale:function(t,o,n){void 0===t&&(t=this.options.colormap),void 0===o&&(o=0),void 0===n&&(n=1);var a=[],i=e.default.scale.linear().domain([0,this.color_maps[t].colors.length-1]).range([o,n]);for(var r in this.color_maps[t].colors)a.push(i(r));return e.default.scale.linear().domain(a).range(this.color_maps[t].colors)},get_color_map:function(t,e,o){return this.get_color_scale(t,e,o)},get_color_scale_ordinal:function(t,o){void 0===t&&(t=this.options.colormap),void 0===o&&(o=[0,1]);for(var n=e.default.scale.ordinal().domain(o).rangePoints([0,100],0),a=this.get_color_scale(t,0,100),i=[],r=0;r<o.length;r++)i.push(a(n(o[r])));return e.default.scale.ordinal().domain(o).range(i)},get_color_map_ordinal:function(t,e){return this.get_color_scale_ordinal(t,e)},get_gradient_data:function(t){void 0===t&&(t=this.options.colormap);for(var e=this.color_maps[t].colors,o=e.length,n=[],a=0;a<o;a++)n.push({offset:a*(100/(o-1)),color:e[o-1-a]});return n},setUpColorMapsForAllColumns:function(t,e){for(var o=0;o!=e.length;++o)e[o].colorMap=this.get_color_scale(t,e[o].columnMin,e[o].columnMax)}})}).call(this,o(2))}}]);
//# sourceMappingURL=ui_cca_module.js.map