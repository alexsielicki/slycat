{"version":3,"sources":["webpack:///./web-server/plugins/slycat-cca/js/ui.js","webpack:///./web-server/js/chunker.js","webpack:///./web-server/css/slycat-additions.css?c97b","webpack:///./web-server/css/slycat-additions.css","webpack:///./web-server/js/slick.slycateditors.js","webpack:///./web-server/js/jquery.scrollintoview.min.js","webpack:///./web-server/plugins/slycat-cca/css/ui.css?bc0e","webpack:///./web-server/plugins/slycat-cca/css/ui.css","webpack:///./web-server/img/sort-desc-light.png","webpack:///./web-server/plugins/slycat-cca/js/cca-legend.js","webpack:///./web-server/plugins/slycat-cca/js/cca-table.js","webpack:///./web-server/plugins/slycat-cca/js/cca-controls.js","webpack:///./web-server/plugins/slycat-cca/js/cca-barplot.js","webpack:///./web-server/plugins/slycat-cca/js/cca-scatterplot.js","webpack:///./web-server/plugins/slycat-cca/js/color-switcher.js"],"names":["__webpack_require__","dialog","chunker","$","document","ready","model","_id","_urijs2","default","window","location","segment","input_columns","output_columns","bookmarker","bookmark","x_loadings","y_loadings","indices","x","y","v","r2","wilks","table_metadata","selected_simulations","generate_indices","barplot_ready","scatterplot_ready","table_ready","legend_ready","controls_ready","previous_state","artifact_missing","css","title","message","setup_indices","count","Int32Array","i","setup_widgets","setup_v","index","Float64Array","get_model_array_attribute","api_root","mid","aid","array","attribute","success","result","error","colormap","undefined","colorswitcher","toString","v_index","legend","width","height","gradient","label","min","max","component","barplot","metadata","inputs","outputs","bind","event","client","post_event","path","updateState","cca-component","selected_component_changed","order","sort-cca-component","sort-direction-cca-component","component_sort_changed","sort","scatterplot","color","selection","table","selected_simulations_changed","other_columns","inArray","push","table_options","others","row-selection","variable","sort-variable","sort-order","variable_sort_changed","temp","length","color_variables","color_variable","controls","model_name","color-variable","selected_variable_changed","variable-selection","simulation-selection","update_scatterplot_value","doPoll","get_model","bookmark_manager","create","project","remove","text","get_model_table_metadata","getState","state","setup_colorswitcher","setTimeout","ajax_error","layout","applyDefaultStyles","north","size","resizable","west","resizeWhileDragging","onresize","center","east","south","selected_colormap_changed","Number","is_little_endian","get_model_array_attribute_metadata","cast_array_buffer","parameters","dfd","Deferred","metadataSuccess","retrieve_model_array_attribute","ranges","range","isStringAttribute","attributes","type","byteorder","dimension","dimensions","begin","end","join","request","XMLHttpRequest","open","responseType","onload","e","buffer","this","response","JSON","parse","responseText","row_count","column_count","alert","resolve","send","arrayset_metadata_cache","Uint32Array","Uint8Array","ajax","url","contentType","arrays","status","reason_phrase","always","offset","Int16Array","Int8Array","Uint16Array","Float32Array","console","content","module","options","hmr","transform","insertInto","locals","exports","extend","Slick","Slycateditors","Text","args","$input","defaultValue","init","appendTo","container","keyCode","ui","LEFT","RIGHT","stopImmediatePropagation","focus","select","destroy","getValue","val","setValue","loadValue","item","column","field","serializeValue","applyValue","isValueChanged","validate","validator","validationResults","valid","msg","Integer","parseInt","isNaN","Date","calendarOpen","datepicker","showOn","buttonImageOnly","buttonImage","beforeShow","onClose","dpDiv","stop","show","hide","position","top","left","YesNoSelect","$select","Checkbox","prop","PercentComplete","$picker","innerWidth","append","find","slider","orientation","value","slide","attr","LongText","$wrapper","scope","$container","save","cancel","handleKeyDown","which","ENTER","ctrlKey","ESCAPE","preventDefault","TAB","shiftKey","grid","navigatePrev","navigateNext","commitChanges","cancelChanges","Rating","jQuery","f","c","vertical","horizontal","both","b","duration","direction","d","h","j","test","nodeName","border","bottom","right","k","defaultView","getComputedStyle","currentStyle","parseFloat","borderTopWidth","borderLeftWidth","borderBottomWidth","borderRightWidth","g","scroll","scrollTop","scrollLeft","scrollbar","clientWidth","innerHeight","clientHeight","rect","getBoundingClientRect","fn","scrollintoview","toLowerCase","n","l","eq","closest","m","s","Math","isEmptyObject","isFunction","complete","call","animate","queue","o","a","auto","visible","hidden","expr","scrollable","overflowX","overflowY","isRoot","scrollHeight","scrollWidth","scrollableX","scrollableY","escape","widget","_create","svg","d3","element","get","legend_layer","legend_axis_layer","updates","update_timer","_schedule_update","update_width","update_height","render_legend","update_legend_colors","update_legend_position","update_legend_axis","update_label","_setOption","key","update_color_domain","render_data","render_selection","self","_update","classed","style","selectAll","data","exit","enter","total_height","rectHeight","transx","transy","legend_scale","scale","linear","domain","legend_axis","axis","orient","value_formatter","replace","cell_formatter","row","cell","columnDef","dataContext","hcl","set_sort","get_indices","sorted_rows","invalidate","trigger_row_selection","setSelectedRows","resetActiveCell","scrollRowToTop","apply","trigger","make_column","column_index","header_class","cell_class","id","name","sortable","headerCssClass","cssClass","formatter","header","buttons","tooltip","command","columns","_data_provider","sort_column","sort_order","Grid","explicitInitialization","enableColumnReorder","onDataLoaded","subscribe","from","to","invalidateRow","render","header_buttons","Plugins","HeaderButtons","onCommand","button","updateColumnHeader","registerPlugin","AutoTooltips","enableForHeaderCells","setSelectionModel","RowSelectionModel","onSelectedRowsChanged","rows","unsorted_rows","onHeaderClick","_array_equal","_color_variables","resize_canvas","resizeCanvas","update_data","variables","getColumns","copy","new_domain","domain_scale","split","analysis_columns","concat","ranked_indices","pages","pages_in_progress","page_size","Event","getLength","getItem","column_end","page","floor","page_begin","row_begin","row_end","notify","log","getItemMetadata","cssClasses","callback","plain_array","reverse","indexOf","not","color_control","color_button","color_items","csv_button","click","_write_data_table","txt","buttons_save","className","icon_class","splice","openCSVSaveChoiceDialog","_set_color_variables","selectionList","_stringify2","hyperchunks","_write_csv","_convert_to_csv","csvData","defaultFilename","blob","Blob","csvUrl","URL","createObjectURL","link","createElement","href","download","body","appendChild","removeChild","sl","rowMajorData","_","zip","_lodash2","_toConsumableArray3","at","headers","slice","unshift","Papa","unparse","empty","toggleClass","html","menu_item","parent","hasClass","removeClass","addClass","_set_selected_color","tableHeight","inputsHeight","outputsHeight","component_class","negative_bar_width","positive_bar_width","click_component","context","select_component","sort_component","do_component_sort","click_row","first","sort_icon","inputLabels","outputLabels","inputRows","outputRows","inputSortFunction","sortFunction","outputSortFunction","loadings","a_loadings_index","b_loadings_index","aa","bb","abs","component_count","barplotHeader","barplotRow","barplotHeaderColumns","barplotHeaderColumn","barplotCell","barplotCellWrapper","barplotCellNegativeSpacer","barplotCellPositiveSpacer","toFixed","barplotViewport","barplotGroupInputs","barplotColumn","barplotCanvas","variableName","loadings_index","barplotGroupOutputs","barplotGroupOutputsOriginalHeight","containment","handles","minHeight","maxHeight","resize","originalSize","start","barplotCanvasInputElement","verticalScrollbarWidth","offsetWidth","resizeHandle","hover","barplotGroupInputsHeight","barplotGroupOutputsHeight","amountToCollapse","inputsMaxHeight","amountToExpand","tableWidth","each","maxWidth","map","outerWidth","barplotPaneWidth","increaseHeight","barplotPaneHeight","viewportHeight","outerHeight","halfViewportHeight","horizontalScrollbarHeight","barplotCanvasOutputElement","offsetHeight","extraSpace","pick_distance","drag_threshold","start_drag","end_drag","main_context","getContext","data_canvas","data_context","selection_canvas","selection_context","update_indices","update_x","update_y","mousedown","_offsetX","_offsetY","mousemove","clearRect","drawImage","fillStyle","fillRect","strokeStyle","lineWidth","strokeRect","mouseup","metaKey","x1","x_scale","invert","y1","y_scale","x2","y2","pageX","currentTarget","pageY","inverse_indices","v_min","v_max","setTransform","font","textAlign","textBaseline","translate","fillText","restore","rotate","PI","half_border_width","border_width","fillHeight","fillWidth","square_size","strokeHeight","strokeWidth","cx","round","cy","selection_count","global_index","local_index","color_maps","night","background","rgb","null_color","opacity","colors","day","rainbow","rainbow_day","list","gradient_data","get_gradient_data","color_stops","background_color","get_background","background-image","background-size","background-position","background-repeat","padding-right","get_null_color","get_opacity","get_color_scale","get_color_map","get_color_scale_ordinal","values","tempOrdinal","ordinal","rangePoints","tempColorscale","rgbRange","get_color_map_ordinal","setUpColorMapsForAllColumns","colorMap","columnMin","columnMax"],"mappings":"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","file":"ui_cca_module.js","sourcesContent":["/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\nimport jquery_ui_css from \"jquery-ui/themes/base/jquery-ui.css\";\nimport slick_grid_css from \"css/slickgrid/slick.grid.css\";\nimport slick_default_theme_css from \"css/slickgrid/slick-default-theme.css\";\nimport slick_headerbuttons_css from \"css/slickgrid/slick.headerbuttons.css\";\nimport slick_slycat_theme_css from \"css/slick-slycat-theme.css\";\nimport slycat_additions_css from \"css/slycat-additions.css\";\nimport ui_css from \"../css/ui.css\";\n\nimport api_root from \"js/slycat-api-root\";\nimport client from \"js/slycat-web-client\";\nimport bookmark_manager from \"js/slycat-bookmark-manager\";\nimport * as dialog from \"js/slycat-dialog\";\nimport URI from \"urijs\";\nimport * as chunker from \"js/chunker\";\nimport \"./cca-legend\";\nimport \"./cca-table\";\nimport \"./cca-controls\";\nimport \"./cca-barplot\";\nimport \"./cca-scatterplot\";\nimport \"./color-switcher\";\nimport \"jquery-ui\";\nimport \"js/jquery.layout-latest.min\";\nimport \"js/jquery.scrollintoview.min\";\nimport \"js/slycat-navbar\"\n\n// Wait for document ready\n$(document).ready(function() {\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  // Setup global variables.\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  var model = {_id: URI(window.location).segment(-1)};\n  var input_columns = null;\n  var output_columns = null;\n  var scale_inputs = null;\n\n  var bookmarker = null;\n  var bookmark = null;\n\n  var x_loadings = null;\n  var y_loadings = null;\n  var indices = null;\n  var x = null;\n  var y = null;\n  var v = null;\n  var r2 = null;\n  var wilks = null;\n  var table_metadata = null;\n  var selected_simulations = null;\n\n  var generate_indices = false;\n  var barplot_ready = false;\n  var scatterplot_ready = false;\n  var table_ready = false;\n  var legend_ready = false;\n  var controls_ready = false;\n  var previous_state = \"\";\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  // Get the model\n  //////////////////////////////////////////////////////////////////////////////////////////\n  function doPoll(){\n    client.get_model(\n    {\n      mid: model._id,\n      success : function(result)\n      {\n        model = result;\n        if(previous_state === \"\"){\n          previous_state = model[\"state\"];\n        }\n        bookmarker = bookmark_manager.create(model.project, model._id);\n        input_columns = model[\"artifact:input-columns\"];\n        output_columns = model[\"artifact:output-columns\"];\n        scale_inputs = model[\"artifact:scale-inputs\"];\n\n        if(model[\"state\"] === \"waiting\" || model[\"state\"] === \"running\") {\n          setTimeout(doPoll, 5000);\n          return;\n        }\n        if(model[\"state\"] === \"closed\" && model[\"result\"] === null)\n          return;\n        if(model[\"result\"] === \"failed\")\n          return;\n        $('.slycat-navbar-alert').remove();\n        setup_page();\n      },\n      error: dialog.ajax_error(\"Error retrieving model.\"),\n    });\n  }\n  doPoll();\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  // If the model is ready, start retrieving data, including bookmarked state.\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  function setup_page()\n  {\n    // If the model isn't ready or failed, we're done.\n    if(model[\"state\"] == \"waiting\" || model[\"state\"] == \"running\")\n      return;\n    if(model[\"state\"] == \"closed\" && model[\"result\"] === null)\n      return;\n    if(model[\"result\"] == \"failed\")\n      return;\n\n    // Display progress as the load happens ...\n    $(\".load-status\").text(\"Loading data.\");\n\n    // Load the x_loadings artifact.\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"input-structure-correlation\",\n      array : 0,\n      attribute : 0,\n      success : function(result)\n      {\n        x_loadings = result;\n        setup_widgets();\n      },\n      error : artifact_missing\n    });\n\n    // Load the y_loadings artifact.\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"output-structure-correlation\",\n      array : 0,\n      attribute : 0,\n      success : function(result)\n      {\n        y_loadings = result;\n        setup_widgets();\n      },\n      error : artifact_missing\n    });\n\n    // Load the r^2 statistics artifact.\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"cca-statistics\",\n      array : 0,\n      attribute : 0,\n      success : function(result)\n      {\n        r2 = result;\n        setup_widgets();\n      },\n      error : artifact_missing\n    });\n\n    // Load the Wilks statistics artifact.\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"cca-statistics\",\n      array : 0,\n      attribute : 1,\n      success : function(result)\n      {\n        wilks = result;\n        setup_widgets();\n      },\n      error : artifact_missing\n    });\n\n    // Load the canonical-indices artifact.\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"canonical-indices\",\n      array : 0,\n      attribute : 0,\n      success : function(result)\n      {\n        indices = result;\n        setup_widgets();\n      },\n      error : function()\n      {\n        generate_indices = true;\n        setup_indices();\n      }\n    });\n\n    // Load the canonical-variables artifacts.\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"canonical-variables\",\n      array : 0,\n      attribute : 0,\n      success : function(result)\n      {\n        x = result;\n        setup_widgets();\n      },\n      error : artifact_missing\n    });\n\n    chunker.get_model_array_attribute({\n      api_root : api_root,\n      mid : model._id,\n      aid : \"canonical-variables\",\n      array : 0,\n      attribute : 1,\n      success : function(result)\n      {\n        y = result;\n        setup_widgets();\n      },\n      error : artifact_missing\n    });\n\n    // Load data table metadata.\n    client.get_model_table_metadata(\n    {\n      mid: model._id,\n      aid: \"data-table\",\n      index: \"Index\",\n      success: function(metadata)\n      {\n        table_metadata = metadata;\n\n        setup_indices();\n        setup_v();\n        setup_widgets();\n      },\n      error: artifact_missing\n    });\n\n    // Retrieve bookmarked state information ...\n    bookmarker.getState(function(state)\n    {\n      bookmark = state;\n      selected_simulations = bookmark[\"simulation-selection\"] !== undefined ? bookmark[\"simulation-selection\"] : [];\n      setup_colorswitcher();\n      setup_v();\n      setup_widgets();\n    });\n  }\n\n  function artifact_missing()\n  {\n    $(\".load-status\").css(\"display\", \"none\");\n\n    dialog.dialog(\n    {\n      title: \"Load Error\",\n      message: \"Oops, there was a problem retrieving data from the model. This likely means that there was a problem during computation.\",\n    });\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  // Setup page layout and forms.\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  // Layout resizable panels ...\n  $(\"#cca-model\").layout(\n  {\n    applyDefaultStyles: false,\n    north:\n    {\n      size: 28,\n      resizable: false,\n    },\n    west:\n    {\n      size: $(\"#cca-model\").width() / 2,\n      resizeWhileDragging: false,\n      onresize: function() { $(\"#barplot-table\").barplot(\"resize_canvas\"); },\n    },\n    center:\n    {\n      resizeWhileDragging: false,\n      onresize: function() { $(\"#scatterplot\").scatterplot(\"option\", {width: $(\"#scatterplot-pane\").width(), height: $(\"#scatterplot-pane\").height()}); },\n    },\n    east:\n    {\n      size: 130,\n      resizeWhileDragging: false,\n      onresize: function() { $(\"#legend\").legend(\"option\", {width: $(\"#legend-pane\").width(), height: $(\"#legend-pane\").height()}); },\n    },\n    south:\n    {\n      size: $(\"body\").height() / 2,\n      resizeWhileDragging: false,\n      onresize: function()\n      {\n        $(\"#table\").css(\"height\", $(\"#table-pane\").height());\n        $(\"#table\").table(\"resize_canvas\");\n      }\n    },\n  });\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  // Setup the rest of the UI as data is received.\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  function setup_indices()\n  {\n    if(generate_indices && table_metadata)\n    {\n      var count = table_metadata[\"row-count\"];\n      indices = new Int32Array(count);\n      for(var i = 0; i != count; ++i)\n        indices[i] = i;\n      setup_widgets();\n    }\n  }\n\n  function setup_v()\n  {\n    if(bookmark && table_metadata)\n    {\n      var index = table_metadata[\"column-count\"] - 1;\n      if(\"variable-selection\" in bookmark)\n        index = bookmark[\"variable-selection\"];\n\n      if(index == table_metadata[\"column-count\"] - 1)\n      {\n        var count = table_metadata[\"row-count\"];\n        v = new Float64Array(count);\n        for(var i = 0; i != count; ++i)\n          v[i] = i;\n        setup_widgets();\n      }\n      else\n      {\n        chunker.get_model_array_attribute({\n          api_root : api_root,\n          mid : model._id,\n          aid : \"data-table\",\n          array : 0,\n          attribute : index,\n          success : function(result)\n          {\n            v = result;\n            setup_widgets();\n          },\n          error : artifact_missing\n        });\n      }\n    }\n  }\n\n  function setup_colorswitcher()\n  {\n    var colormap = bookmark[\"colormap\"] !== undefined ? bookmark[\"colormap\"] : \"night\";\n\n    $(\"#color-switcher\").colorswitcher({colormap:colormap});\n  }\n\n  function setup_widgets()\n  {\n    // Setup the legend ...\n    if(!legend_ready && bookmark && table_metadata)\n    {\n      legend_ready = true;\n\n      $(\"#legend-pane .load-status\").css(\"display\", \"none\");\n\n      var colormap = bookmark[\"colormap\"] !== undefined ? bookmark[\"colormap\"] : \"night\";\n\n      $(\"#legend-pane\").css(\"background\", $(\"#color-switcher\").colorswitcher(\"get_background\", colormap).toString());\n\n      var v_index = table_metadata[\"column-count\"] - 1;\n      if(\"variable-selection\" in bookmark)\n        v_index = bookmark[\"variable-selection\"];\n\n      $(\"#legend\").legend({\n        width: $(\"#legend-pane\").width(),\n        height: $(\"#legend-pane\").height(),\n        gradient: $(\"#color-switcher\").colorswitcher(\"get_gradient_data\", colormap),\n        label: table_metadata[\"column-names\"][v_index],\n        min: table_metadata[\"column-min\"][v_index],\n        max: table_metadata[\"column-max\"][v_index],\n      });\n    }\n\n    // Setup the barplot ...\n    if(!barplot_ready && bookmark && table_metadata && r2 && wilks && x_loadings && y_loadings)\n    {\n      barplot_ready = true;\n\n      $(\"#barplot-pane .load-status\").css(\"display\", \"none\");\n\n      var component = bookmark[\"cca-component\"] !== undefined ? bookmark[\"cca-component\"] : 0;\n\n      $(\"#barplot-table\").barplot({\n        metadata: table_metadata,\n        inputs: input_columns,\n        outputs: output_columns,\n        r2: r2,\n        wilks: wilks,\n        x_loadings: x_loadings,\n        y_loadings: y_loadings,\n        component: component,\n      });\n\n      if(\"variable-selection\" in bookmark)\n      {\n        $(\"#barplot-table\").barplot(\"option\", \"variable\", bookmark[\"variable-selection\"]);\n      }\n\n      $(\"#barplot-table\").bind(\"component-changed\", function(event, component)\n      {\n        selected_component_changed(component);\n      });\n\n      $(\"#barplot-table\").bind(\"component-sort-changed\", function(event, component, order)\n      {\n        component_sort_changed(component, order);\n      });\n\n      if(\"sort-cca-component\" in bookmark && \"sort-direction-cca-component\" in bookmark)\n      {\n        $(\"#barplot-table\").barplot(\"option\",\n        {\n          \"sort\": [bookmark[\"sort-cca-component\"], bookmark[\"sort-direction-cca-component\"]]\n        });\n      }\n    }\n\n    // Setup the scatterplot ...\n    if(!scatterplot_ready && bookmark && indices && x && y && v && (selected_simulations !== null))\n    {\n      scatterplot_ready = true;\n\n      $(\"#scatterplot-pane .load-status\").css(\"display\", \"none\");\n\n      var component = bookmark[\"cca-component\"] !== undefined ? bookmark[\"cca-component\"] : 0;\n      var colormap = bookmark[\"colormap\"] !== undefined ? bookmark[\"colormap\"] : \"night\";\n\n      $(\"#scatterplot-pane\").css(\"background\", $(\"#color-switcher\").colorswitcher(\"get_background\", colormap).toString());\n\n      $(\"#scatterplot\").scatterplot({\n        indices: indices,\n        x: x[component],\n        y: y[component],\n        v: v,\n        width: $(\"#scatterplot-pane\").width(),\n        height: $(\"#scatterplot-pane\").height(),\n        color: $(\"#color-switcher\").colorswitcher(\"get_color_scale\", colormap),\n        selection: selected_simulations,\n        });\n\n      $(\"#scatterplot\").bind(\"selection-changed\", function(event, selection)\n      {\n        selected_simulations = selection;\n\n        // Changing the scatterplot selection updates the table row selection ...\n        $(\"#table\").table(\"option\", \"row-selection\", selected_simulations);\n\n        selected_simulations_changed(selected_simulations);\n      });\n\n      // Changing the barplot component updates the scatterplot ...\n      $(\"#barplot-table\").bind(\"component-changed\", function(event, component)\n      {\n        $(\"#scatterplot\").scatterplot(\"option\", {x : x[component], y : y[component]});\n      });\n    }\n\n    // Setup the table ...\n    if(!table_ready && bookmark && table_metadata && (selected_simulations !== null) )\n    {\n      table_ready = true;\n\n      $(\"#table-pane .load-status\").css(\"display\", \"none\");\n\n      var other_columns = [];\n      for(var i = 0; i != table_metadata[\"column-count\"] - 1; ++i)\n      {\n        if($.inArray(i, input_columns) == -1 && $.inArray(i, output_columns) == -1)\n          other_columns.push(i);\n      }\n\n      var table_options =\n      {\n        api_root : api_root,\n        mid : model._id,\n        aid : \"data-table\",\n        metadata : table_metadata,\n        inputs : input_columns,\n        outputs : output_columns,\n        others : other_columns,\n        \"row-selection\" : selected_simulations,\n      };\n\n      var colormap = bookmark[\"colormap\"] !== undefined ? bookmark[\"colormap\"] : \"night\";\n      table_options.colormap = $(\"#color-switcher\").colorswitcher(\"get_color_scale\", colormap);\n\n      if(\"sort-variable\" in bookmark && \"sort-order\" in bookmark)\n      {\n        table_options[\"sort-variable\"] = bookmark[\"sort-variable\"];\n        table_options[\"sort-order\"] = bookmark[\"sort-order\"];\n      }\n\n      if(\"variable-selection\" in bookmark)\n      {\n        table_options[\"variable-selection\"] = [bookmark[\"variable-selection\"]];\n      }\n      else\n      {\n        table_options[\"variable-selection\"] = [table_metadata[\"column-count\"] - 1];\n      }\n\n      $(\"#table\").table(table_options);\n\n      // Log changes to the table sort order ...\n      $(\"#table\").bind(\"variable-sort-changed\", function(event, variable, order)\n      {\n        variable_sort_changed(variable, order);\n      });\n\n      // Log changes to the table row selection ...\n      $(\"#table\").bind(\"row-selection-changed\", function(event, selection)\n      {\n        // The table selection is an array buffer which can't be\n        // serialized as JSON, so convert it to an array.\n        var temp = [];\n        for(var i = 0; i != selection.length; ++i)\n          temp.push(selection[i]);\n        selected_simulations = temp;\n\n        // Changing the table row selection updates the scatterplot ...\n        $(\"#scatterplot\").scatterplot(\"option\", \"selection\",  selected_simulations);\n\n        selected_simulations_changed(selected_simulations);\n      });\n    }\n\n    // Setup controls ...\n    if( !controls_ready && bookmark && table_metadata && (selected_simulations != null) )\n    {\n      controls_ready = true;\n\n      var color_variables = [];\n      // Last column is the index, so it goes first\n      color_variables.push(table_metadata[\"column-count\"] - 1);\n      // Then we add inputs\n      for(var i = 0; i < input_columns.length; i++)\n      {\n        color_variables.push(input_columns[i]);\n      }\n      // Followed by outputs\n      for(var i = 0; i < output_columns.length; i++)\n      {\n        color_variables.push(output_columns[i]);\n      }\n      // Finally the others\n      for(var i = 0; i != table_metadata[\"column-count\"] - 1; ++i)\n      {\n        if($.inArray(i, input_columns) == -1 && $.inArray(i, output_columns) == -1 && table_metadata[\"column-types\"][i] != \"string\")\n          color_variables.push(i);\n      }\n\n      var color_variable = table_metadata[\"column-count\"] - 1;\n      if(\"variable-selection\" in bookmark)\n      {\n        color_variable = [bookmark[\"variable-selection\"]];\n      }\n\n      $(\"#controls-pane #controls\").controls({\n        mid : model._id,\n        model_name: window.model_name,\n        aid : \"data-table\",\n        metadata: table_metadata,\n        color_variables: color_variables,\n        \"color-variable\" : color_variable,\n        selection : selected_simulations,\n      });\n    }\n\n  }\n\n  //////////////////////////////////////////////////////////////////////////////////////////\n  // Event handlers.\n  //////////////////////////////////////////////////////////////////////////////////////////\n\n  // Changes to the barplot variable ...\n  $(\"#barplot-table\").bind(\"variable-changed\", function(event, variable)\n  {\n    // Log changes to the barplot variable selection ...\n    selected_variable_changed(variable);\n    // Changing the barplot variable updates the legend ...\n    $(\"#legend\").legend(\"option\", {\n      min: table_metadata[\"column-min\"][variable],\n      max: table_metadata[\"column-max\"][variable],\n      label: table_metadata[\"column-names\"][variable],\n    });\n    // Changing the barplot variable updates the scatterplot ...\n    update_scatterplot_value(variable);\n    // Changing the barplot variable updates the table ...\n    $(\"#table\").table(\"option\", \"variable-selection\", [variable]);\n    // Changing the barplot variable updates the controls ...\n    $(\"#controls\").controls(\"option\", \"color-variable\", variable);\n  });\n\n  // Changes to the color map ...\n  $(\"#color-switcher\").bind(\"colormap-changed\", function(event, colormap)\n  {\n    // Log changes to the selected color map ...\n    selected_colormap_changed(colormap);\n    // Changing the color map updates the legend ...\n    $(\"#legend-pane\").css(\"background\", $(\"#color-switcher\").colorswitcher(\"get_background\", colormap).toString());\n    $(\"#legend\").legend(\"option\", {gradient: $(\"#color-switcher\").colorswitcher(\"get_gradient_data\", colormap)});\n    // Changing the color map updates the scatterplot ...\n    $(\"#scatterplot-pane\").css(\"background\", $(\"#color-switcher\").colorswitcher(\"get_background\", colormap).toString());\n    $(\"#scatterplot\").scatterplot(\"option\", {color: $(\"#color-switcher\").colorswitcher(\"get_color_scale\", colormap)});\n    // Changing the colormap updates the table ...\n    $(\"#table\").table(\"option\", \"colormap\", $(\"#color-switcher\").colorswitcher(\"get_color_scale\", colormap));\n  });\n\n  // Changes to the table variable selection ...\n  $(\"#table\").bind(\"variable-selection-changed\", function(event, selection)\n  {\n    // Log changes to the table variable selection ...\n    selected_variable_changed(selection[0]);\n    // Changing the table variable updates the barplot ...\n    $(\"#barplot-table\").barplot(\"option\", \"variable\", selection[0]);\n    // Changing the table variable updates the scatterplot ...\n    update_scatterplot_value(selection[0]);\n    // Changing the table variable updates the controls ...\n    $(\"#controls\").controls(\"option\", \"color-variable\", selection[0]);\n    // Changing the table variable selection updates the legend ...\n    $(\"#legend\").legend(\"option\", {\n      min: table_metadata[\"column-min\"][selection[0]],\n      max: table_metadata[\"column-max\"][selection[0]],\n      label: table_metadata[\"column-names\"][selection[0]],\n    });\n  });\n\n  // Handle color variable selection ...\n  $(\"#controls\").bind(\"color-selection-changed\", function(event, variable)\n  {\n    // Log changes to the color variable ...\n    selected_variable_changed(variable);\n    // Changing the color variable updates the barplot ...\n    $(\"#barplot-table\").barplot(\"option\", \"variable\", variable);\n    // Changing the color variable updates the legend ...\n    $(\"#legend\").legend(\"option\", {\n      min: table_metadata[\"column-min\"][variable],\n      max: table_metadata[\"column-max\"][variable],\n      label: table_metadata[\"column-names\"][variable],\n    });\n    // Changing the barplot variable updates the scatterplot ...\n    update_scatterplot_value(variable);\n    // Changing the color variable updates the table ...\n    $(\"#table\").table(\"option\", \"variable-selection\", [Number(variable)]);\n  });\n\n  function selected_colormap_changed(colormap)\n  {\n    client.post_event(\n    {\n      path: \"models/\" + model._id + \"/select/colormap/\" + colormap,\n    });\n    bookmarker.updateState({\"colormap\" : colormap});\n  }\n\n  function selected_component_changed(component)\n  {\n    client.post_event(\n    {\n      path: \"models/\" + model._id + \"/select/component/\" + component\n    });\n    bookmarker.updateState({\"cca-component\" : component});\n  }\n\n  function component_sort_changed(component, order)\n  {\n    client.post_event(\n    {\n      path: \"models/\" + model._id + \"/sort/component/\" + component + \"/\" + order\n    });\n    bookmarker.updateState({\"sort-cca-component\" : component, \"sort-direction-cca-component\" : order});\n  }\n\n  function selected_variable_changed(variable)\n  {\n    client.post_event(\n    {\n      path: \"models/\" + model._id + \"/select/variable/\" + variable\n    });\n    bookmarker.updateState({\"variable-selection\" : variable});\n  }\n\n  function variable_sort_changed(variable, order)\n  {\n    client.post_event(\n    {\n      path: \"models/\" + model._id + \"/select/sort-order/\" + variable + \"/\" + order\n    });\n    bookmarker.updateState( {\"sort-variable\" : variable, \"sort-order\" : order} );\n  }\n\n  function selected_simulations_changed(selection)\n  {\n    // Changing the selection updates controls ...\n    $(\"#controls\").controls(\"option\", \"selection\", selection);\n\n    // Logging every selected item is too slow, so just log the count instead.\n    client.post_event(\n    {\n      path: \"models/\" + model._id + \"/select/simulation/count/\" + selection.length\n    });\n    bookmarker.updateState( {\"simulation-selection\" : selection} );\n  }\n\n  function update_scatterplot_value(attribute)\n  {\n    if(attribute == table_metadata[\"column-count\"] - 1)\n    {\n      var count = v.length;\n      for(var i = 0; i != count; ++i)\n        v[i] = i;\n      $(\"#scatterplot\").scatterplot(\"option\", {v : v});\n    }\n    else\n    {\n      chunker.get_model_array_attribute({\n        api_root : api_root,\n        mid : model._id,\n        aid : \"data-table\",\n        array : 0,\n        attribute : attribute,\n        success : function(result)\n        {\n          v = result;\n          $(\"#scatterplot\").scatterplot(\"option\", {v : v});\n        },\n        error : artifact_missing\n      });\n    }\n  }\n\n});\n","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n \nexport var arrayset_metadata_cache = {};\n\nexport function is_little_endian()\n{\n  if(window.result === undefined)\n    window.result = ((new Uint32Array((new Uint8Array([1,2,3,4])).buffer))[0] === 0x04030201);\n  return window.result;\n}\n\n// Retrieve an array attribute's metadata asynchronously, calling a callback when it's ready ...\nexport function get_model_array_attribute_metadata(parameters, dfd)\n{\n  return $.ajax({\n    url : parameters.api_root + \"models/\" + parameters.mid + \"/arraysets/\" + parameters.aid + \"/metadata?arrays=\" + parameters.array,\n    contentType : \"application/json\",\n    success: function(result)\n    {\n      parameters.metadata = result.arrays[0];\n      if(parameters.metadataSuccess !== undefined) {\n        parameters.metadataSuccess(parameters);\n      } else {\n        parameters.success(parameters);\n      }\n    },\n    error: function(request, status, reason_phrase)\n    {\n      if(parameters.error)\n        parameters.error(request, status, reason_phrase);\n    },\n    always: function() {\n      dfd.resolve();\n    }\n  });\n}\n\n// Cast a generic arraybuffer to a typed array, with an optional offset and\n// count.  Note that offset and count are measured in elements, not bytes.\nexport function cast_array_buffer(buffer, type, offset, count)\n{\n  if(type == \"int32\")\n  {\n    if(offset !== undefined)\n      return new Int32Array(buffer, offset*4, count);\n    else\n      return new Int32Array(buffer);\n  }\n  else if(type == \"int16\")\n  {\n    if(offset !== undefined)\n      return new Int16Array(buffer, offset*2, count);\n    else\n      return new Int16Array(buffer);\n  }\n  else if(type == \"int8\")\n  {\n    if(offset !== undefined)\n      return new Int8Array(buffer, offset, count);\n    else\n      return new Int8Array(buffer);\n  }\n  else if(type == \"uint32\")\n  {\n    if(offset !== undefined)\n      return new Uint32Array(buffer, offset*4, count);\n    else\n      return new Uint32Array(buffer);\n  }\n  else if(type == \"uint16\")\n  {\n    if(offset !== undefined)\n      return new Uint16Array(buffer, offset*2, count);\n    else\n      return new Uint16Array(buffer);\n  }\n  else if(type == \"uint8\")\n  {\n    if(offset !== undefined)\n      return new Uint8Array(buffer, offset, count);\n    else\n      return new Uint8Array(buffer);\n  }\n  else if(type == \"float64\")\n  {\n    if(offset !== undefined)\n      return new Float64Array(buffer, offset*8, count);\n    else\n      return new Float64Array(buffer);\n  }\n  else if(type == \"float32\")\n  {\n    if(offset !== undefined)\n      return new Float32Array(buffer, offset*4, count);\n    else\n      return new Float32Array(buffer);\n  }\n  else\n    console.error(\"Unknown array buffer type: \" + type);\n}\n\n// Retrieve an array attribute asynchronously, calling a callback when it's ready ...\nexport function get_model_array_attribute(parameters) {\n  var dfd = $.Deferred();\n  if(parameters.metadata === undefined) {\n    parameters.metadataSuccess = retrieve_model_array_attribute;\n    get_model_array_attribute_metadata(parameters, dfd);\n  }\n  else {\n    retrieve_model_array_attribute(parameters);\n  }\n  return dfd;\n\n  function retrieve_model_array_attribute(parameters) {\n    var ranges = [];\n    var range = '';\n    var metadata = parameters.metadata;\n    var attribute = parameters.attribute;\n    var isStringAttribute = metadata.attributes[attribute].type == \"string\";\n    var byteorder = \"&byteorder=\" + (is_little_endian() ? \"little\" : \"big\");\n    if(isStringAttribute)\n    {\n      byteorder = \"\";\n    }\n\n    for(var dimension in metadata.dimensions)\n    {\n      range = '';\n      range += metadata.dimensions[dimension].begin;\n      range += ':';\n      range += metadata.dimensions[dimension].end;\n      ranges.push(range);\n    }\n    ranges = ranges.join(\"|\");\n\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", parameters.api_root + \"models/\" + parameters.mid + \"/arraysets/\" + parameters.aid + \"/data?hyperchunks=\" + parameters.array + \"/\" + parameters.attribute + \"/\" + ranges + byteorder);\n    if(!isStringAttribute)\n    {\n      request.responseType = \"arraybuffer\";\n    }\n    request.success = parameters.success;\n    request.attribute = parameters.attribute;\n    request.metadata = metadata;\n    request.isStringAttribute = isStringAttribute;\n    request.onload = function(e)\n    {\n      var buffer = this.response;\n      var metadata = this.metadata;\n      var attribute = this.metadata.attributes[this.attribute];\n      var result;\n\n      if(metadata.dimensions.length == 1)\n      {\n        if(!this.isStringAttribute)\n        {\n          result = cast_array_buffer(buffer, attribute.type);\n        }\n        else\n        {\n          result = JSON.parse(this.responseText);\n        }\n      }\n      else if(metadata.dimensions.length == 2)\n      {\n        var row_count = metadata.dimensions[0].end - metadata.dimensions[0].begin;\n        var column_count = metadata.dimensions[1].end - metadata.dimensions[1].begin;\n        var result = [];\n        for(var i = 0; i != row_count; ++i)\n        {\n          result.push(cast_array_buffer(buffer, attribute.type, i * column_count, column_count));\n        }\n      }\n      else\n      {\n        window.alert(\"Can't handle array with \" + metadata.dimensions.length + \" dimensions.\");\n      }\n      this.success(result);\n      dfd.resolve();\n    }\n    request.send();\n  }\n}\n\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./slycat-additions.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./slycat-additions.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./slycat-additions.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract\\n DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government\\n retains certain rights in this software. */\\n\\n.vertical {\\n  -ms-transform: rotate(-90deg);\\n  -webkit-transform: rotate(-90deg);\\n  transform: rotate(-90deg);\\n}\\n\\n.unvertical {\\n  -ms-transform: rotate(90deg);\\n  -webkit-transform: rotate(90deg);\\n  transform: rotate(90deg);\\n}\\n\\n.light-border-right {\\n  border-right: 2px solid rgb(231, 231, 231);\\n}\\n\\n.affix-top-right {\\n  position: absolute;\\n  top: 0px;\\n  right: 0px;\\n}\\n\\n.fill-parent-height {\\n  height: 100%;\\n}\\n\\n.fill-parent-width {\\n  width: 100%;\\n}\\n\\n.link-cursor {\\n  cursor: pointer;\\n}\\n\\n.default-cursor {\\n  cursor: inherit;\\n}\\n\\n.info-panel {\\n  border-left: 2px solid #1b809e !important;\\n}\\n\\n.vertical-toggle-pane-resizer {\\n  right-border: 2px solid rgb(231,231,231);\\n}\\n\\n.fill-parent-height {\\n  height: 100%;\\n}\\n\", \"\"]);\n\n// exports\n","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n/***\n * Contains Slycat SlickGrid editors.\n * @module Slycateditors\n * @namespace Slick\n */\n\n(function ($) {\n  // register namespace\n  $.extend(true, window, {\n    \"Slick\": {\n      \"Slycateditors\": {\n        \"Text\": TextEditor,\n        \"Integer\": IntegerEditor,\n        \"Date\": DateEditor,\n        \"YesNoSelect\": YesNoSelectEditor,\n        \"Checkbox\": CheckboxEditor,\n        \"PercentComplete\": PercentCompleteEditor,\n        \"LongText\": LongTextEditor,\n        \"Rating\": RatingEditor,\n      }\n    }\n  });\n\n  function TextEditor(args) {\n    var $input;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $input = $(\"<INPUT type=text class='editor-text' />\")\n          .appendTo(args.container)\n          .bind(\"keydown.nav\", function (e) {\n            if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\n              e.stopImmediatePropagation();\n            }\n          })\n          .focus()\n          .select();\n    };\n\n    this.destroy = function () {\n      $input.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.getValue = function () {\n      return $input.val();\n    };\n\n    this.setValue = function (val) {\n      $input.val(val);\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = item[args.column.field] || \"\";\n      $input.val(defaultValue);\n      $input[0].defaultValue = defaultValue;\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      if (args.column.validator) {\n        var validationResults = args.column.validator($input.val());\n        if (!validationResults.valid) {\n          return validationResults;\n        }\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function IntegerEditor(args) {\n    var $input;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $input = $(\"<INPUT type=text class='editor-text' />\");\n\n      $input.bind(\"keydown.nav\", function (e) {\n        if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {\n          e.stopImmediatePropagation();\n        }\n      });\n\n      $input.appendTo(args.container);\n      $input.focus().select();\n    };\n\n    this.destroy = function () {\n      $input.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = item[args.column.field];\n      $input.val(defaultValue);\n      $input[0].defaultValue = defaultValue;\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return parseInt($input.val(), 10) || 0;\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      if (isNaN($input.val())) {\n        return {\n          valid: false,\n          msg: \"Please enter a valid integer\"\n        };\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function DateEditor(args) {\n    var $input;\n    var defaultValue;\n    var scope = this;\n    var calendarOpen = false;\n\n    this.init = function () {\n      $input = $(\"<INPUT type=text class='editor-text' />\");\n      $input.appendTo(args.container);\n      $input.focus().select();\n      $input.datepicker({\n        showOn: \"button\",\n        buttonImageOnly: true,\n        buttonImage: \"../images/calendar.gif\",\n        beforeShow: function () {\n          calendarOpen = true\n        },\n        onClose: function () {\n          calendarOpen = false\n        }\n      });\n      $input.width($input.width() - 18);\n    };\n\n    this.destroy = function () {\n      $.datepicker.dpDiv.stop(true, true);\n      $input.datepicker(\"hide\");\n      $input.datepicker(\"destroy\");\n      $input.remove();\n    };\n\n    this.show = function () {\n      if (calendarOpen) {\n        $.datepicker.dpDiv.stop(true, true).show();\n      }\n    };\n\n    this.hide = function () {\n      if (calendarOpen) {\n        $.datepicker.dpDiv.stop(true, true).hide();\n      }\n    };\n\n    this.position = function (position) {\n      if (!calendarOpen) {\n        return;\n      }\n      $.datepicker.dpDiv\n          .css(\"top\", position.top + 30)\n          .css(\"left\", position.left);\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = item[args.column.field];\n      $input.val(defaultValue);\n      $input[0].defaultValue = defaultValue;\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function YesNoSelectEditor(args) {\n    var $select;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $select = $(\"<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>\");\n      $select.appendTo(args.container);\n      $select.focus();\n    };\n\n    this.destroy = function () {\n      $select.remove();\n    };\n\n    this.focus = function () {\n      $select.focus();\n    };\n\n    this.loadValue = function (item) {\n      $select.val((defaultValue = item[args.column.field]) ? \"yes\" : \"no\");\n      $select.select();\n    };\n\n    this.serializeValue = function () {\n      return ($select.val() == \"yes\");\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return ($select.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function CheckboxEditor(args) {\n    var $select;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $select = $(\"<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>\");\n      $select.appendTo(args.container);\n      $select.focus();\n    };\n\n    this.destroy = function () {\n      $select.remove();\n    };\n\n    this.focus = function () {\n      $select.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = !!item[args.column.field];\n      if (defaultValue) {\n        $select.prop('checked', true);\n      } else {\n        $select.prop('checked', false);\n      }\n    };\n\n    this.serializeValue = function () {\n      return $select.prop('checked');\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (this.serializeValue() !== defaultValue);\n    };\n\n    this.validate = function () {\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function PercentCompleteEditor(args) {\n    var $input, $picker;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $input = $(\"<INPUT type=text class='editor-percentcomplete' />\");\n      $input.width($(args.container).innerWidth() - 25);\n      $input.appendTo(args.container);\n\n      $picker = $(\"<div class='editor-percentcomplete-picker' />\").appendTo(args.container);\n      $picker.append(\"<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>\");\n\n      $picker.find(\".editor-percentcomplete-buttons\").append(\"<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>\");\n\n      $input.focus().select();\n\n      $picker.find(\".editor-percentcomplete-slider\").slider({\n        orientation: \"vertical\",\n        range: \"min\",\n        value: defaultValue,\n        slide: function (event, ui) {\n          $input.val(ui.value)\n        }\n      });\n\n      $picker.find(\".editor-percentcomplete-buttons button\").bind(\"click\", function (e) {\n        $input.val($(this).attr(\"val\"));\n        $picker.find(\".editor-percentcomplete-slider\").slider(\"value\", $(this).attr(\"val\"));\n      })\n    };\n\n    this.destroy = function () {\n      $input.remove();\n      $picker.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      $input.val(defaultValue = item[args.column.field]);\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return parseInt($input.val(), 10) || 0;\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ((parseInt($input.val(), 10) || 0) != defaultValue);\n    };\n\n    this.validate = function () {\n      if (isNaN(parseInt($input.val(), 10))) {\n        return {\n          valid: false,\n          msg: \"Please enter a valid positive number\"\n        };\n      }\n\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  /*\n   * An example of a \"detached\" editor.\n   * The UI is added onto document BODY and .position(), .show() and .hide() are implemented.\n   * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n   */\n  function LongTextEditor(args) {\n    var $input, $wrapper;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      var $container = $(\"body\");\n\n      $wrapper = $(\"<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>\")\n          .appendTo($container);\n\n      $input = $(\"<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>\")\n          .appendTo($wrapper);\n\n      $(\"<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>\")\n          .appendTo($wrapper);\n\n      $wrapper.find(\"button:first\").bind(\"click\", this.save);\n      $wrapper.find(\"button:last\").bind(\"click\", this.cancel);\n      $input.bind(\"keydown\", this.handleKeyDown);\n\n      scope.position(args.position);\n      $input.focus().select();\n    };\n\n    this.handleKeyDown = function (e) {\n      if (e.which == $.ui.keyCode.ENTER && e.ctrlKey) {\n        scope.save();\n      } else if (e.which == $.ui.keyCode.ESCAPE) {\n        e.preventDefault();\n        scope.cancel();\n      } else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {\n        e.preventDefault();\n        args.grid.navigatePrev();\n      } else if (e.which == $.ui.keyCode.TAB) {\n        e.preventDefault();\n        args.grid.navigateNext();\n      }\n    };\n\n    this.save = function () {\n      args.commitChanges();\n    };\n\n    this.cancel = function () {\n      $input.val(defaultValue);\n      args.cancelChanges();\n    };\n\n    this.hide = function () {\n      $wrapper.hide();\n    };\n\n    this.show = function () {\n      $wrapper.show();\n    };\n\n    this.position = function (position) {\n      $wrapper\n          .css(\"top\", position.top - 5)\n          .css(\"left\", position.left - 5)\n    };\n\n    this.destroy = function () {\n      $wrapper.remove();\n    };\n\n    this.focus = function () {\n      $input.focus();\n    };\n\n    this.loadValue = function (item) {\n      $input.val(defaultValue = item[args.column.field]);\n      $input.select();\n    };\n\n    this.serializeValue = function () {\n      return $input.val();\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (!($input.val() == \"\" && defaultValue == null)) && ($input.val() != defaultValue);\n    };\n\n    this.validate = function () {\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n  function RatingEditor(args) {\n    var $select;\n    var defaultValue;\n    var scope = this;\n\n    this.init = function () {\n      $select = $(\"<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>\");\n      $select.appendTo(args.container);\n      $select.focus();\n    };\n\n    this.destroy = function () {\n      $select.remove();\n    };\n\n    this.focus = function () {\n      $select.focus();\n    };\n\n    this.loadValue = function (item) {\n      defaultValue = !!item[args.column.field];\n      if (defaultValue) {\n        $select.prop('checked', true);\n      } else {\n        $select.prop('checked', false);\n      }\n    };\n\n    this.serializeValue = function () {\n      return $select.prop('checked');\n    };\n\n    this.applyValue = function (item, state) {\n      item[args.column.field] = state;\n    };\n\n    this.isValueChanged = function () {\n      return (this.serializeValue() !== defaultValue);\n    };\n\n    this.validate = function () {\n      return {\n        valid: true,\n        msg: null\n      };\n    };\n\n    this.init();\n  }\n\n})(jQuery);\n","/*\n * jQuery scrollintoview() plugin and :scrollable selector filter\n *\n * Version 1.8 (14 Jul 2011)\n * Requires jQuery 1.4 or newer\n *\n * Copyright (c) 2011 Robert Koritnik\n * Licensed under the terms of the MIT license\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function(f){var c={vertical:{x:false,y:true},horizontal:{x:true,y:false},both:{x:true,y:true},x:{x:true,y:false},y:{x:false,y:true}};var b={duration:\"fast\",direction:\"both\"};var e=/^(?:html)$/i;var g=function(k,j){j=j||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var i=document.defaultView&&document.defaultView.getComputedStyle?true:false;var h={top:(parseFloat(i?j.borderTopWidth:f.css(k,\"borderTopWidth\"))||0),left:(parseFloat(i?j.borderLeftWidth:f.css(k,\"borderLeftWidth\"))||0),bottom:(parseFloat(i?j.borderBottomWidth:f.css(k,\"borderBottomWidth\"))||0),right:(parseFloat(i?j.borderRightWidth:f.css(k,\"borderRightWidth\"))||0)};return{top:h.top,left:h.left,bottom:h.bottom,right:h.right,vertical:h.top+h.bottom,horizontal:h.left+h.right}};var d=function(h){var j=f(window);var i=e.test(h[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:g(h[0]),scroll:{top:(i?j:h).scrollTop(),left:(i?j:h).scrollLeft()},scrollbar:{right:i?0:h.innerWidth()-h[0].clientWidth,bottom:i?0:h.innerHeight()-h[0].clientHeight},rect:(function(){var k=h[0].getBoundingClientRect();return{top:i?0:k.top,left:i?0:k.left,bottom:i?h[0].clientHeight:k.bottom,right:i?h[0].clientWidth:k.right}})()}};f.fn.extend({scrollintoview:function(j){j=f.extend({},b,j);j.direction=c[typeof(j.direction)===\"string\"&&j.direction.toLowerCase()]||c.both;var n=\"\";if(j.direction.x===true){n=\"horizontal\"}if(j.direction.y===true){n=n?\"both\":\"vertical\"}var l=this.eq(0);var i=l.closest(\":scrollable(\"+n+\")\");if(i.length>0){i=i.eq(0);var m={e:d(l),s:d(i)};var h={top:m.e.rect.top-(m.s.rect.top+m.s.border.top),bottom:m.s.rect.bottom-m.s.border.bottom-m.s.scrollbar.bottom-m.e.rect.bottom,left:m.e.rect.left-(m.s.rect.left+m.s.border.left),right:m.s.rect.right-m.s.border.right-m.s.scrollbar.right-m.e.rect.right};var k={};if(j.direction.y===true){if(h.top<0){k.scrollTop=m.s.scroll.top+h.top}else{if(h.top>0&&h.bottom<0){k.scrollTop=m.s.scroll.top+Math.min(h.top,-h.bottom)}}}if(j.direction.x===true){if(h.left<0){k.scrollLeft=m.s.scroll.left+h.left}else{if(h.left>0&&h.right<0){k.scrollLeft=m.s.scroll.left+Math.min(h.left,-h.right)}}}if(!f.isEmptyObject(k)){if(e.test(i[0].nodeName)){i=f(\"html,body\")}i.animate(k,j.duration).eq(0).queue(function(o){f.isFunction(j.complete)&&j.complete.call(i[0]);o()})}else{f.isFunction(j.complete)&&j.complete.call(i[0])}}return this}});var a={auto:true,scroll:true,visible:false,hidden:false};f.extend(f.expr[\":\"],{scrollable:function(k,i,n,h){var m=c[typeof(n[3])===\"string\"&&n[3].toLowerCase()]||c.both;var l=(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(k,null):k.currentStyle);var o={x:a[l.overflowX.toLowerCase()]||false,y:a[l.overflowY.toLowerCase()]||false,isRoot:e.test(k.nodeName)};if(!o.x&&!o.y&&!o.isRoot){return false}var j={height:{scroll:k.scrollHeight,client:k.clientHeight},width:{scroll:k.scrollWidth,client:k.clientWidth},scrollableX:function(){return(o.x||o.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(o.y||o.isRoot)&&this.height.scroll>this.height.client}};return m.y&&j.scrollableY()||m.x&&j.scrollableX()}})})(jQuery);\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!./ui.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!./ui.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!./ui.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var escape = require(\"../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\\n\\n.ui-layout-resizer\\n{\\n  background-color: #ddc;\\n}\\n\\n.ui-layout-toggler\\n{\\n  background-color: #ccb;\\n}\\n\\n.ui-layout-resizer-open.ui-layout-resizer-hover, .ui-layout-resizer-dragging, .ui-layout-toggler-hover\\n{\\n  background-color: #fc6;\\n}\\n\\n.ui-layout-pane, .ui-layout-container\\n{\\n  padding: 0;\\n  border: 0;\\n  margin: 0;\\n}\\n#controls-pane\\n{\\n  z-index: 3 !important; /* Required to make bootstrap dropdowns appear over lower panes */\\n}\\n.center\\n{\\n  text-align: center;\\n}\\n#color-switcher ul.dropdown-menu\\n{\\n  background-color: #F2F2F2;\\n}\\n.bootstrap-styles #color-switcher .dropdown-menu > li > a:hover\\n{\\n  background-color: #E4E4E4;\\n}\\n.bootstrap-styles #color-switcher .dropdown-menu > .active > a:hover\\n{\\n  background-color: #337AB7;\\n}\\n\\n#table\\n{\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tbottom: 0;\\n}\\n\\n/* New CCA table styles */\\n#barplot-table {\\n  /*height: 250px;*/\\n  overflow: hidden;\\n}\\n.barplotHeader {\\n  /*overflow: hidden;*/\\n  white-space: nowrap;\\n}\\n.barplotHeaderColumns {\\n  /*outline: 1px solid blue;*/\\n  white-space: nowrap;\\n  display: inline-block;\\n}\\n.barplotHeaderColumn {\\n  text-align: right !important;\\n  display: inline-block;\\n  /*padding: 3px;*/\\n  cursor: pointer;\\n  /*outline: 1px solid red;*/\\n}\\n.wrapper {\\n  /*No longer using box-sizing since we are sizing cells based on an wrapper div inside them*/\\n/*  box-sizing: border-box;\\n  -moz-box-sizing: border-box;*/\\n}\\n.barplotHeaderColumn .wrapper {\\n  padding: 3px;\\n}\\n.mask\\n{\\n  background-color: white;\\n  position: relative; /* needed to get this cell to cover scrolling header row */\\n  z-index: 1;\\n}\\n.mask .wrapper {\\n  padding: 3px;\\n}\\n.barplotViewport {\\n\\n}\\n.barplotGroup {\\n  overflow: hidden;\\n  width: auto !important; /* Need to force auto width since jQuery Resizable Widget sets static width on resize, which then breaks horizontal expansion/contraction on pane resize */\\n}\\n.barplotColumn {\\n  float: left;\\n  clear: left;\\n}\\n.barplotGroup.inputs,\\n.barplotHeader,\\n.barplotColumn,\\n.mask,\\n.inputs .ui-resizable-s\\n{\\n  border-color: #C0C0C0;\\n  border-style: solid;\\n  border-width: 0;\\n}\\n/*.barplotGroup.inputs,*/\\n.barplotHeader\\n{\\n  border-bottom-width: 1px;\\n}\\n.barplotColumn,\\n.mask\\n{\\n  border-right-width: 1px;\\n}\\n.inputs .ui-resizable-s {\\n  bottom: 0;\\n  height: 3px;\\n  border-bottom-width: 1px;\\n  border-top-width: 1px;\\n  background-color: #DDDDCC;\\n}\\n.inputs .ui-resizable-s.ui-resizable-hover {\\n  background-color: #FFCC66;\\n}\\n.noVerticalResize .ui-resizable-s {\\n  display: none !important;\\n}\\n.toggle-control-s {\\n  width: 50px;\\n  height: 100%;\\n  margin: 0 auto;\\n  background-color: #CCCCBB;\\n}\\n.toggle-control-s.toggle-control-hover {\\n  cursor: pointer;\\n  background-color: #FFCC66;\\n}\\n/*.barplotGroup.inputs {\\n  border-bottom: 7px solid red;\\n}*/\\n.barplotColumn .barplotCell {\\n  display: block;\\n}\\n.barplotCanvas {\\n  /*overflow: auto;*/\\n  /*display: relative;*/ /* Only needed if using DOM's scrollIntoView() function instead of jQuery plugin */\\n  height: 100%;\\n}\\n.barplotCanvas.input {\\n  overflow-x: hidden;\\n  /*overflow-y: auto;*/\\n}\\n.barplotRow {\\n  white-space: nowrap;\\n}\\n.barplotCell {\\n  display: inline-block;\\n  text-align: right;\\n}\\n#rsquared-label sup {\\n  position: absolute;\\n  margin-top: -3px;\\n}\\n.rowInput,\\n.rowOutput\\n{\\n  cursor: pointer;\\n}\\n#barplot-table .inputLabel .wrapper,\\n#barplot-table .outputLabel .wrapper\\n{\\n  padding: 3px;\\n}\\n#barplot-table .inputLabel,\\n#barplot-table .outputLabel,\\n.barplotCell.col0,\\n.barplotHeaderColumn\\n{\\n  font-weight: bold;\\n  text-align: center;\\n}\\n#barplot-table .inputLabel\\n{\\n  background: #eeffe0;\\n}\\n#barplot-table .inputLabel.selected-variable,\\n#barplot-table .barplotRow.rowInput.selected-variable,\\n#barplot-table .barplotCell.rowInput.selected-variable\\n{\\n  background: #3ca654;\\n  color: white;\\n}\\n#barplot-table .outputLabel\\n{\\n  background: #eeeeff;\\n}\\n#barplot-table .outputLabel.selected-variable,\\n#barplot-table .barplotRow.rowOutput.selected-variable,\\n#barplot-table .barplotCell.rowOutput.selected-variable\\n{\\n  background: #7767b0;\\n  color: white;\\n}\\n.barplotHeaderColumnLabelWrapper,\\n.selectCCAComponent,\\n.wrapper,\\n.barplotCellValue,\\n.selected-component .spacer,\\n.negative,\\n.positive\\n{\\n  display: inline-block;\\n}\\n.barplotCellValue\\n{\\n  padding: 3px 23px 3px 18px;\\n  width: 40px;\\n}\\n.selected-component .barplotCellValue,\\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\\n{\\n  background-color: #DDDDDD;\\n  border-width: 0px 1px;\\n  border-style: solid;\\n  border-color: #808080;\\n  color: #666655;\\n}\\n.barplotHeaderColumn.selected-component .wrapper {\\n  padding: 0;\\n}\\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\\n{\\n  padding: 3px 3px 3px 3px;\\n  width: 75px;\\n}\\n.spacer\\n{\\n  width: 100px;\\n  display: none;\\n}\\n.negativeSpacer\\n{\\n  text-align: right;\\n}\\n.positiveSpacer\\n{\\n  text-align: left;\\n}\\n.negative,\\n.positive\\n{\\n  height: 12px;\\n}\\n.negative\\n{\\n  background-color: blue;\\n  border-top-left-radius: 2px;\\n  border-bottom-left-radius: 2px;\\n}\\n.positive\\n{\\n  background-color: red;\\n  border-top-right-radius: 2px;\\n  border-bottom-right-radius: 2px;\\n}\\n#barplot-table span.sortCCAComponent \\n{\\n  width: 15px;\\n  height: 15px;\\n  display: inline-block;\\n  border: 1px solid transparent;\\n  cursor: pointer;\\n  position: relative;\\n  top: 3px;\\n  margin-left: 3px;\\n}\\n#barplot-table .barplotHeaderColumn:hover .icon-sort-off,\\n.icon-sort-off:hover \\n{\\n  background: transparent url(\" + escape(require(\"../../../img/sort-desc-light.png\")) + \") no-repeat center center;\\n}\\n.icon-sort-off:hover \\n{\\n  border: 1px solid #C7C7C7 !important;\\n}\\n.icon-sort-ascending:hover,\\n.icon-sort-descending:hover\\n{\\n  border: 1px solid #878787 !important;\\n}\\n.barplotHeaderColumn.mask.col0 {\\n  vertical-align: top;\\n}\\n.legend-axis path,\\n.legend-axis line\\n{\\n  fill: none;\\n  stroke: black;\\n}\\na\\n{\\n  cursor: pointer;\\n}\\n.bootstrap-styles .btn-default:hover,\\n.bootstrap-styles .btn-default.focus,\\n.bootstrap-styles .btn-default:focus\\n{\\n    background-color: white;\\n}\\n.bootstrap-styles .btn-default:active, \\n.bootstrap-styles .btn-default.active,\\n.bootstrap-styles .btn-default.focus.active,\\n.bootstrap-styles .open > .btn-default.dropdown-toggle,\\n.bootstrap-styles .open > .btn-default.dropdown-toggle:hover\\n{\\n    background-color: #E6E6E6;\\n}\\n#controls-pane .bootstrap-styles .dropdown-menu\\n{\\n  max-height: 500px;\\n  overflow-y: auto;\\n}\\n#controls-pane .center {\\n  margin: 2px 0;\\n}\", \"\"]);\n\n// exports\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FAQEMDLbpJFQAAAAvSURBVAjXYzx+/Ph/BgKAkYGBgQGfQktLS0ZGGAebQktLS0a4SdgUwhRgBdhMBAAtJBKt7XgY+AAAAABJRU5ErkJggg==\"","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\nimport d3 from \"js/d3.min\";\nimport \"jquery-ui\";\n\n$.widget(\"cca.legend\",\n{\n  options:\n  {\n    width: 300,\n    height: 300,\n    metadata : null,\n    label : \"Label\",\n    min : null,\n    max : null,\n    border : 25,\n  },\n\n  _create: function()\n  {\n    var self = this;\n\n    // Setup the legend ...\n    self.svg = d3.select(self.element.get(0)).append(\"svg\");\n    self.legend_layer = self.svg.append(\"g\").attr(\"class\", \"legend\");\n    self.legend_axis_layer = self.legend_layer.append(\"g\").attr(\"class\", \"legend-axis\");\n\n    self.updates = {};\n    self.update_timer = null;\n\n    self._schedule_update({\n      update_width:true,\n      update_height:true,\n      render_legend:true,\n      update_legend_colors:true,\n      update_legend_position:true,\n      update_legend_axis:true,\n      update_label:true,\n    });\n\n  },\n\n  _setOption: function(key, value)\n  {\n    var self = this;\n\n    //console.log(\"cca.legend._setOption()\", key, value);\n    this.options[key] = value;\n\n    if(key == \"v\")\n    {\n      self._schedule_update({update_color_domain:true, render_data:true, render_selection:true, update_legend_axis:true});\n    }\n\n    else if(key == \"width\")\n    {\n      self._schedule_update({update_width:true, });\n    }\n\n    else if(key == \"height\")\n    {\n      self._schedule_update({update_height:true, update_legend_position:true, update_legend_axis:true, update_label:true,});\n    }\n\n    else if(key == \"gradient\")\n    {\n      self._schedule_update({update_legend_colors:true, });\n    }\n\n    else if(key == \"min\" || key == \"max\")\n    {\n      self._schedule_update({update_legend_axis:true, });\n    }\n\n    else if(key == \"label\")\n    {\n      self._schedule_update({update_label:true, })\n    }\n  },\n\n  _schedule_update: function(updates)\n  {\n    var self = this;\n\n    for(var key in updates)\n      self.updates[key] = updates[key];\n\n    if(self.update_timer)\n      return;\n\n    self.update_timer = window.setTimeout(function() { self._update(); }, 0);\n  },\n\n  _update: function()\n  {\n    var self = this;\n\n    //console.log(\"cca.legend._update()\", self.updates);\n    self.update_timer = null;\n\n    if(self.updates[\"update_width\"])\n    {\n      self.element.attr(\"width\", self.options.width);\n      self.svg.attr(\"width\", self.options.width);\n    }\n\n    if(self.updates[\"update_height\"])\n    {\n      self.element.attr(\"height\", self.options.height);\n      self.svg.attr(\"height\", self.options.height);\n    }\n\n    if(self.updates[\"render_legend\"])\n    {\n      var gradient = self.legend_layer.append(\"defs\").append(\"linearGradient\");\n      gradient.attr(\"id\", \"color-gradient\")\n        .attr(\"x1\", \"0%\").attr(\"y1\", \"0%\")\n        .attr(\"x2\", \"0%\").attr(\"y2\", \"100%\")\n        ;\n\n      var colorbar = self.legend_layer.append(\"rect\")\n        .classed(\"color\", true)\n        .attr(\"width\", 10)\n        .attr(\"height\", 200)\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .style(\"fill\", \"url(#color-gradient)\")\n        ;\n    }\n\n    if(self.updates[\"update_legend_colors\"])\n    {\n      var gradient = self.legend_layer.select(\"#color-gradient\");\n      var stop = gradient.selectAll(\"stop\").data(self.options.gradient);\n      stop.exit().remove();\n      stop.enter().append(\"stop\");\n      stop\n        .attr(\"offset\", function(d) { return d.offset + \"%\"; })\n        .attr(\"stop-color\", function(d) { return d.color; })\n        ;\n    }\n\n    if(self.updates[\"update_legend_position\"])\n    {\n      var total_width = self.element.width();\n      var total_height = self.element.height();\n      var rectHeight = parseInt(total_height - (self.options.border * 2));\n\n      var transx = self.options.border + 28; // 28 is height of label\n      var transy = self.options.border;\n       self.legend_layer\n        .attr(\"transform\", \"translate(\" + transx + \",\" + transy + \")\")\n        .attr(\"data-transx\", transx)\n        .attr(\"data-transy\", transy)\n        ;\n\n      self.legend_layer.select(\"rect.color\")\n        .attr(\"height\", rectHeight)\n        ;\n    }\n\n    if(self.updates[\"update_legend_axis\"])\n    {\n      self.legend_scale = d3.scale.linear().domain([self.options.max, self.options.min]).range([0, parseInt(self.legend_layer.select(\"rect.color\").attr(\"height\"))]);\n      self.legend_axis = d3.svg.axis().scale(self.legend_scale).orient(\"right\");\n      self.legend_axis_layer\n        .attr(\"transform\", \"translate(\" + (parseInt(self.legend_layer.select(\"rect.color\").attr(\"width\")) + 1) + \",0)\")\n        .call(self.legend_axis)\n        ;\n\n      // Need to re-assign fill style to get around this firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=652991\n      // It only seems to affect fill gradients and only when the URI changes, like it does for us with bookmarking.\n      var colorbar = self.legend_layer.select(\"rect.color\")\n        .style(\"fill\", \"url(#color-gradient)\")\n        ;\n    }\n\n    if(self.updates[\"update_label\"])\n    {\n      self.legend_layer.selectAll(\".label\").remove();\n\n      var rectHeight = parseInt(self.legend_layer.select(\"rect.color\").attr(\"height\"));\n      var x = -15;\n      var y = rectHeight/2;\n\n      self.legend_layer.append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"x\", x)\n        .attr(\"y\", y)\n        .attr(\"transform\", \"rotate(-90,\" + x +\",\" + y + \")\")\n        .style(\"text-anchor\", \"middle\")\n        .style(\"font-weight\", \"bold\")\n        .text(self.options.label)\n        ;\n    }\n\n    self.updates = {}\n  },\n});","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n////////////////////////////////////////////////////////////////////////////////////////\n// Slickgrid-based data table widget, for use with the CCA model.\n\nimport d3 from \"js/d3.min\";\nimport \"jquery-ui\";\nimport \"js/jquery.event.drag-2.2\";\nimport \"js/slick.core\";\nimport \"js/slick.grid\";\nimport \"js/slick.rowselectionmodel\";\nimport \"js/slick.headerbuttons\";\nimport \"js/slick.autotooltips\";\nimport \"js/slick.slycateditors\";\nimport * as chunker from \"js/chunker\";\n\n$.widget(\"cca.table\",\n{\n  options:\n  {\n    api_root : \"\",\n    mid : null,\n    aid : null,\n    metadata : null,\n    inputs : [],\n    outputs : [],\n    others : [],\n    \"row-selection\" : [],\n    \"variable-selection\": [],\n    \"sort-variable\" : null,\n    \"sort-order\" : null,\n    colormap : null,\n  },\n\n  _create: function()\n  {\n    var self = this;\n\n    function value_formatter(value)\n    {\n      return value == null ? \"&nbsp;\" : (value + \"\").replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\");\n    }\n\n    function cell_formatter(row, cell, value, columnDef, dataContext)\n    {\n      if(columnDef.colormap)\n        return \"<div class='highlightWrapper\" + (value==null ? \" null\" : \"\") + ( d3.hcl(columnDef.colormap(value)).l > 50 ? \" light\" : \" dark\") + \"' style='background:\" + columnDef.colormap(value) + \"'>\" + value_formatter(value) + \"</div>\";\n      else if(value==null)\n        return \"<div class='highlightWrapper\" + (value==null ? \" null\" : \"\") + \"'>\" + value_formatter(value) + \"</div>\";\n      return value_formatter(value);\n    }\n\n    function set_sort(column, order)\n    {\n      self.data.set_sort(column, order);\n      self.data.get_indices(\"sorted\", self.options[\"row-selection\"], function(sorted_rows)\n      {\n        self.grid.invalidate();\n        self.trigger_row_selection = false;\n        self.grid.setSelectedRows(sorted_rows);\n        self.grid.resetActiveCell();\n        if(sorted_rows.length)\n          self.grid.scrollRowToTop(Math.min.apply(Math, sorted_rows));\n        self.element.trigger(\"variable-sort-changed\", [column, order]);\n      });\n    }\n\n    function make_column(column_index, header_class, cell_class)\n    {\n      return {\n        id : column_index,\n        field : column_index,\n        name : self.options.metadata[\"column-names\"][column_index],\n        sortable : false,\n        headerCssClass : header_class,\n        cssClass : cell_class,\n        formatter : cell_formatter,\n        header :\n        {\n          buttons :\n          [\n            {\n              cssClass : self.options[\"sort-variable\"] == column_index ? (self.options[\"sort-order\"] == \"ascending\" ? \"icon-sort-ascending\" : \"icon-sort-descending\") : \"icon-sort-off\",\n              tooltip : self.options[\"sort-variable\"] == column_index ? (self.options[\"sort-order\"] == \"ascending\" ? \"Sort descending\" : \"Sort ascending\") : \"Sort ascending\",\n              command : self.options[\"sort-variable\"] == column_index ? (self.options[\"sort-order\"] == \"ascending\" ? \"sort-descending\" : \"sort-ascending\") : \"sort-ascending\"\n            }\n          ]\n        }\n      };\n    }\n\n    self.columns = [];\n    self.columns.push(make_column(self.options.metadata[\"column-count\"]-1, \"headerSimId\", \"rowSimId\"));\n    for(var i in self.options.inputs)\n      self.columns.push(make_column(self.options.inputs[i], \"headerInput\", \"rowInput\"));\n    for(var i in self.options.outputs)\n      self.columns.push(make_column(self.options.outputs[i], \"headerOutput\", \"rowOutput\"));\n    for(var i in self.options.others)\n      self.columns.push(make_column(self.options.others[i], \"headerOther\", \"rowOther\"));\n\n    self.data = new self._data_provider({\n      api_root : self.options.api_root,\n      mid : self.options.mid,\n      aid : self.options.aid,\n      metadata : self.options.metadata,\n      sort_column : self.options[\"sort-variable\"],\n      sort_order : self.options[\"sort-order\"],\n      inputs : self.options.inputs,\n      outputs : self.options.outputs,\n      });\n\n    self.trigger_row_selection = true;\n\n    self.grid = new Slick.Grid(self.element, self.data, self.columns, {explicitInitialization : true, enableColumnReorder : false});\n\n    self.data.onDataLoaded.subscribe(function (e, args) {\n      for (var i = args.from; i <= args.to; i++) {\n        self.grid.invalidateRow(i);\n      }\n      self.grid.render();\n    });\n\n    var header_buttons = new Slick.Plugins.HeaderButtons();\n    header_buttons.onCommand.subscribe(function(e, args)\n    {\n      var column = args.column;\n      var button = args.button;\n      var command = args.command;\n      var grid = args.grid;\n\n      for(var i in self.columns)\n      {\n        self.columns[i].header.buttons[0].cssClass = \"icon-sort-off\";\n        self.columns[i].header.buttons[0].tooltip = \"Sort ascending\";\n        self.columns[i].header.buttons[0].command = \"sort-ascending\";\n        grid.updateColumnHeader(self.columns[i].id);\n      }\n\n      if(command == \"sort-ascending\")\n      {\n        button.cssClass = 'icon-sort-ascending';\n        button.command = 'sort-descending';\n        button.tooltip = 'Sort descending';\n        set_sort(column.id, \"ascending\");\n      }\n      else if(command == \"sort-descending\")\n      {\n        button.cssClass = 'icon-sort-descending';\n        button.command = 'sort-ascending';\n        button.tooltip = 'Sort ascending';\n        set_sort(column.id, \"descending\");\n      }\n    });\n\n    self.grid.registerPlugin(header_buttons);\n    self.grid.registerPlugin(new Slick.AutoTooltips({enableForHeaderCells:true}));\n\n    self.grid.setSelectionModel(new Slick.RowSelectionModel());\n    self.grid.onSelectedRowsChanged.subscribe(function(e, selection)\n    {\n      // Don't trigger a selection event unless the selection was changed by user interaction (i.e. not outside callers or changing the sort order).\n      if(self.trigger_row_selection)\n      {\n        self.data.get_indices(\"unsorted\", selection.rows, function(unsorted_rows)\n        {\n          self.options[\"row-selection\"] = unsorted_rows;\n          self.element.trigger(\"row-selection-changed\", [unsorted_rows]);\n        });\n      }\n      self.trigger_row_selection = true;\n    });\n    self.grid.onHeaderClick.subscribe(function (e, args)\n    {\n      if( !self._array_equal([args.column.field], self.options[\"variable-selection\"]) && (self.options.metadata[\"column-types\"][args.column.id] != \"string\") )\n      {\n        self.options[\"variable-selection\"] = [args.column.field];\n        self._color_variables(self.options[\"variable-selection\"]);\n        self.element.trigger(\"variable-selection-changed\", [self.options[\"variable-selection\"]]);\n      }\n    });\n\n    self._color_variables(self.options[\"variable-selection\"]);\n\n    self.grid.init();\n\n    self.data.get_indices(\"sorted\", self.options[\"row-selection\"], function(sorted_rows)\n    {\n      self.trigger_row_selection = false;\n      self.grid.setSelectedRows(sorted_rows);\n      self.grid.resetActiveCell();\n      if(sorted_rows.length)\n        self.grid.scrollRowToTop(Math.min.apply(Math, sorted_rows));\n    });\n  },\n\n  resize_canvas: function()\n  {\n    var self = this;\n    self.grid.resizeCanvas();\n  },\n\n  update_data: function()\n  {\n    var self = this;\n    self.data.invalidate();\n    self.grid.invalidate();\n    self.data.get_indices(\"sorted\", self.options[\"row-selection\"], function(sorted_rows)\n    {\n      self.trigger_row_selection = false;\n      self.grid.setSelectedRows(sorted_rows);\n      self.grid.resetActiveCell();\n      if(sorted_rows.length)\n        self.grid.scrollRowToTop(Math.min.apply(Math, sorted_rows));\n    });\n  },\n\n  _setOption: function(key, value)\n  {\n    var self = this;\n\n    if(key == \"row-selection\")\n    {\n      // Unexpectedly at this point self.options[key] has already been set to value, so this always returns even when the row-selection is unique\n      // if(self._array_equal(self.options[key], value))\n      //   return;\n\n      self.options[key] = value;\n      self.data.get_indices(\"sorted\", value, function(sorted_rows)\n      {\n        self.trigger_row_selection = false;\n        self.grid.setSelectedRows(sorted_rows);\n        self.grid.resetActiveCell();\n        if(sorted_rows.length)\n          self.grid.scrollRowToTop(Math.min.apply(Math, sorted_rows));\n      });\n    }\n    else if(key == \"variable-selection\")\n    {\n      if(self._array_equal(self.options[key], value))\n        return;\n\n      self.options[key] = value;\n      self._color_variables(value);\n    }\n    else if(key == \"colormap\")\n    {\n      self.options[key] = value;\n      self._color_variables(self.options[\"variable-selection\"])\n    }\n  },\n\n  _color_variables: function(variables)\n  {\n    var self = this;\n\n    var columns = self.grid.getColumns();\n    for(var i in columns)\n    {\n      var column = columns[i];\n      if(self.options.colormap !== null && $.inArray(column.id, variables) != -1)\n      {\n        // Make a copy of our global colormap, then adjust its domain to match our column-specific data.\n        column.colormap = self.options.colormap.copy();\n\n        var new_domain = []\n        var domain_scale = d3.scale.linear().domain([0, column.colormap.range().length]).range([self.options.metadata[\"column-min\"][column.id], self.options.metadata[\"column-max\"][column.id]]);\n        for(var i in column.colormap.range())\n          new_domain.push(domain_scale(i));\n        column.colormap.domain(new_domain);\n\n        column.cssClass = column.cssClass.split(\" \")[0] + \" highlight\";\n      }\n      else\n      {\n        column.colormap = null;\n        column.cssClass = column.cssClass.split(\" \")[0];\n      }\n    }\n\n    self.grid.invalidate();\n  },\n\n  _data_provider: function(parameters)\n  {\n    var self = this;\n\n    self.api_root = parameters.api_root\n    self.mid = parameters.mid;\n    self.aid = parameters.aid;\n    self.metadata = parameters.metadata;\n    self.sort_column = parameters.sort_column;\n    self.sort_order = parameters.sort_order;\n    self.inputs = parameters.inputs;\n    self.outputs = parameters.outputs;\n    self.analysis_columns = self.inputs.concat(self.outputs);\n    self.ranked_indices = {};\n\n    self.pages = {};\n    self.pages_in_progress = {};\n    self.page_size = 50;\n\n    self.onDataLoaded = new Slick.Event();\n\n    self.getLength = function()\n    {\n      return self.metadata[\"row-count\"];\n    }\n\n    self.getItem = function(index)\n    {\n      var column_begin = 0;\n      var column_end = self.metadata[\"column-count\"];\n      var page = Math.floor(index / self.page_size);\n      var page_begin = page * self.page_size;\n\n      if(self.pages_in_progress[page])\n      {\n        return null;\n      }\n\n      if(!(page in self.pages))\n      {\n        self.pages_in_progress[page] = true;\n        var row_begin = page_begin;\n        var row_end = (page + 1) * self.page_size;\n\n        var sort = \"\";\n        if(self.sort_column !== null && self.sort_order !== null)\n        {\n          var sort_column = \"a\" + self.sort_column;\n          var sort_order = self.sort_order;\n          if(sort_order == 'ascending')\n          {\n            sort_order = 'asc';\n          }\n          else if(sort_order == 'descending')\n          {\n            sort_order = 'desc';\n          }\n          if(self.sort_column == self.metadata[\"column-count\"]-1)\n            sort_column = \"index(0)\";\n          sort = \"/order: rank(\" + sort_column + ', \"' + sort_order + '\")';\n        }\n\n        $.ajax(\n        {\n          type : \"GET\",\n          url : self.api_root + \"models/\" + self.mid + \"/arraysets/\" + self.aid + \"/data?hyperchunks=0/\" + column_begin + \":\" + (column_end - 1) + \"|index(0)\" + sort + \"/\" + row_begin + \":\" + row_end,\n          success : function(data)\n          {\n            self.pages[page] = [];\n            for(var i=0; i < data[0].length; i++)\n            {\n              var result = {};\n              for(var j = column_begin; j != column_end; ++j)\n              {\n                result[j] = data[j][i];\n              }\n              self.pages[page].push(result);\n            }\n            self.pages_in_progress[page] = false;\n            self.onDataLoaded.notify({from: row_begin, to: row_end});\n          },\n          error: function(request, status, reason_phrase)\n          {\n            console.log(\"error\", request, status, reason_phrase);\n          }\n        });\n        return null;\n      }\n\n      return self.pages[page][index - page_begin];\n    }\n\n    self.getItemMetadata = function(index)\n    {\n      var page = Math.floor(index / self.page_size);\n      if((self.pages_in_progress[page]) || !(page in self.pages))\n      {\n        return null;\n      }\n\n      var row = this.getItem(index);\n      var column_end = self.analysis_columns.length;\n      var cssClasses = \"\";\n      for(var i=0; i != column_end; i++) {\n        if(row[ self.analysis_columns[i] ]==null) {\n          cssClasses += \"nullRow\";\n        }\n      }\n      if(cssClasses != \"\")\n        return {\"cssClasses\" : cssClasses};\n      return null;\n    }\n\n    self.set_sort = function(column, order)\n    {\n      if(column == self.sort_column && order == self.sort_order)\n      {\n        return;\n      }\n      self.sort_column = column;\n      self.sort_order = order;\n      self.pages = {};\n    }\n\n    self.get_indices = function(direction, rows, callback)\n    {\n      if(rows.length == 0)\n      {\n        callback([]);\n        return;\n      }\n      // We have no sort column or order, so just returning the same rows as were asked for since they're in the same order\n      if(self.sort_column == null || self.sort_order == null)\n      {\n        callback(rows);\n      }\n      else\n      {\n        if(self.ranked_indices[self.sort_column])\n        {\n          // we have data for this column, so figure out what to return\n          var indices = self.ranked_indices[self.sort_column];\n          // Reverse response indexes for descending sort order\n          if(self.sort_order == 'descending')\n          {\n            var plain_array = [];\n            for(var i=0; i<indices.length; i++)\n            {\n              plain_array.push(indices[i]);\n            }\n            indices = plain_array.reverse();\n          }\n          var response = []; \n          for(var i=0; i<rows.length; i++)\n          {\n            if(direction == \"unsorted\")\n            {\n              response.push( indices[ rows[i] ] );\n            }\n            else if(direction == \"sorted\")\n            {\n              response.push( indices.indexOf(rows[i]) );\n            }\n          }\n          callback(new Int32Array(response));\n        }\n        else\n        {\n          if( self.sort_column == self.metadata[\"column-count\"]-1 )\n          {\n            // we are sorting by the index column, so we can just make the data we need.\n            self.ranked_indices[self.sort_column] = new Int32Array( d3.range(self.metadata[\"row-count\"]) );\n            self.get_indices(direction, rows, callback);\n          }\n          else\n          {\n            // we have no data for this column, so go retrieve it and call this function again.\n            var request = new XMLHttpRequest();\n            request.open(\"GET\", self.api_root + \"models/\" + self.mid + \"/arraysets/data-table/data?hyperchunks=0/rank(a\" + self.sort_column + ',\"asc\")/...&byteorder=' + (chunker.is_little_endian() ? \"little\" : \"big\") );\n            request.responseType = \"arraybuffer\";\n            request.direction = direction;\n            request.rows = rows;\n            request.callback = callback;\n            request.onload = function(e)\n            {\n              var indices = [];\n              var data = new Int32Array(this.response);\n              // Filtering out every other element in the reponse array, because it's full of extraneous 0 (zeros) for some reason.\n              // Need to figure out why, but this is a fix for now.\n              for(var i=0; i<data.length; i=i+2)\n              {\n                indices.push(data[i]);\n              }\n              self.ranked_indices[self.sort_column] = new Int32Array(indices);\n              self.get_indices(this.direction, this.rows, this.callback);\n            }\n            request.send();\n          }\n        }\n      }\n    }\n  },\n\n  _array_equal: function(a, b)\n  {\n    return $(a).not(b).length == 0 && $(b).not(a).length == 0;\n  },\n});","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\nimport api_root from \"js/slycat-api-root\";\nimport _ from \"lodash\";\nimport * as dialog from \"js/slycat-dialog\";\nimport Papa from \"papaparse\";\nimport \"jquery-ui\";\nimport \"bootstrap\";\n\n$.widget(\"cca.controls\",\n{\n\n\toptions:\n  {\n  \tmid : null,\n  \tmodel_name : null,\n  \taid : null,\n  \tmetadata : null,\n    \"color-variable\" : null,\n    color_variables : [],\n  \tselection : [],\n  },\n\n  _create: function()\n  {\n  \tvar self = this;\n\n    this.color_control = $('<div class=\"btn-group btn-group-xs\"></div>')\n      .appendTo(this.element)\n      ;\n    this.color_button = $('\\\n      <button class=\"btn btn-default dropdown-toggle\" type=\"button\" id=\"color-dropdown\" data-toggle=\"dropdown\" aria-expanded=\"true\" title=\"Change Point Color\"> \\\n        Point Color \\\n        <span class=\"caret\"></span> \\\n      </button> \\\n      ')\n      .appendTo(self.color_control)\n      ;\n    this.color_items = $('<ul id=\"y-axis-switcher\" class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"color-dropdown\">')\n      .appendTo(self.color_control)\n      ;\n\n  \tthis.csv_button = $(\"\\\n      <button class='btn btn-default' title='Download Data Table'> \\\n        <span class='fa fa-download' aria-hidden='true'></span> \\\n      </button> \\\n      \")\n    \t.click(function(){\n        if (self.options.selection.length == 0) {\n    \t    self._write_data_table();\n    \t  } else {\n          openCSVSaveChoiceDialog();\n        }\n    \t})\n    \t.appendTo(this.element)\n    \t;\n\n    function openCSVSaveChoiceDialog(){\n      var txt = \"\";\n      var buttons_save = [\n        {className: \"btn-default\", label:\"Cancel\"}, \n        {className: \"btn-primary\", label:\"Save Entire Table\", icon_class:\"fa fa-table\"}\n      ];\n\n      if(self.options.selection.length > 0)\n      {\n        txt += \"You have \" + self.options.selection.length + \" rows selected. \";\n        buttons_save.splice(buttons_save.length-1, 0, {className: \"btn-primary\",  label:\"Save Selected\", icon_class:\"fa fa-check\"});\n      }\n\n      txt += \"What would you like to do?\";\n\n      dialog.dialog(\n      {\n        title: \"Download Choices\",\n        message: txt,\n        buttons: buttons_save,\n        callback: function(button)\n        {\n          if(button.label == \"Save Entire Table\")\n            self._write_data_table();\n          else if(button.label == \"Save Selected\")\n            self._write_data_table( self.options.selection );\n        },\n      });\n    }\n    self._set_color_variables();\n  },\n\n  _write_data_table: function(selectionList)\n  {\n    var self = this;\n    $.ajax(\n    {\n      type : \"POST\",\n      url : api_root + \"models/\" + self.options.mid + \"/arraysets/\" + self.options.aid + \"/data\",\n      data: JSON.stringify({\"hyperchunks\": \"0/.../...\"}),\n      contentType: \"application/json\",\n      success : function(result)\n      {\n        self._write_csv( self._convert_to_csv(result, selectionList), self.options.model_name + \"_data_table.csv\" );\n      },\n      error: function(request, status, reason_phrase)\n      {\n        window.alert(\"Error retrieving data table: \" + reason_phrase);\n      }\n    });\n  },\n\n  _write_csv: function(csvData, defaultFilename)\n  {\n    var blob = new Blob([ csvData ], {\n      type : \"application/csv;charset=utf-8;\"\n    });\n    var csvUrl = URL.createObjectURL(blob);\n    var link = document.createElement(\"a\");\n    link.href = csvUrl;\n    link.style = \"visibility:hidden\";\n    link.download = defaultFilename || \"slycatDataTable.csv\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  },\n\n  _convert_to_csv: function(array, sl)\n  {\n    // Note that array.data is column-major:  array.data[0][*] is the first column\n    var self = this;\n    \n    // Converting data array from column major to row major\n    var rowMajorData = _.zip(...array);\n\n    // If we have a selection list, remove everything but those elements from the data array\n    if(sl != undefined && sl.length > 0)\n    {\n      // sl is in the order the user selected the rows, so sort it.\n      // We want to end up with rows in the same order as in the original data.\n      sl.sort();\n      // Only keep elements at the indexes specified in sl\n      rowMajorData = _.at(rowMajorData, sl);\n    }\n\n    // Creating an array of column headers by removing the last one, which is the Index that does not exist in the data\n    var headers = self.options.metadata[\"column-names\"].slice(0, -1);\n    // Adding headers as first element in array of data rows\n    rowMajorData.unshift(headers);\n\n    // Creating CSV from data array\n    var csv = Papa.unparse(rowMajorData);\n    return csv;\n  },\n\n  _set_color_variables: function()\n  {\n    var self = this;\n    this.color_items.empty();\n    for(var i = 0; i < this.options.color_variables.length; i++) {\n      $(\"<li role='presentation'>\")\n        .toggleClass(\"active\", self.options[\"color-variable\"] == self.options.color_variables[i])\n        .attr(\"data-colorvariable\", this.options.color_variables[i])\n        .appendTo(self.color_items)\n        .append(\n          $('<a role=\"menuitem\" tabindex=\"-1\">')\n            .html(this.options.metadata['column-names'][this.options.color_variables[i]])\n            .click(function()\n            {\n              var menu_item = $(this).parent();\n              if(menu_item.hasClass(\"active\"))\n                return false;\n\n              self.color_items.find(\"li\").removeClass(\"active\");\n              menu_item.addClass(\"active\");\n\n              self.element.trigger(\"color-selection-changed\", menu_item.attr(\"data-colorvariable\"));\n            })\n        )\n        ;\n    }\n  },\n\n  _set_selected_color: function()\n  {\n    var self = this;\n    self.color_items.find(\"li\").removeClass(\"active\");\n    self.color_items.find('li[data-colorvariable=\"' + self.options[\"color-variable\"] + '\"]').addClass(\"active\");\n  },\n\n  _setOption: function(key, value)\n  {\n    var self = this;\n\n    //console.log(\"sparameter_image.variableswitcher._setOption()\", key, value);\n    this.options[key] = value;\n\n    if(key == \"color-variable\")\n    {\n      self._set_selected_color();\n    }\n    else if(key == 'color_variables')\n    {\n      self._set_color_variables();\n    }\n  },\n\n});","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\nimport \"jquery-ui\";\nimport \"js/jquery.scrollintoview.min\";\n\n$.widget(\"cca.barplot\",\n{\n  options:\n  {\n    metadata: null,\n    inputs:[],\n    outputs:[],\n    r2:[],\n    wilks:[],\n    x_loadings:[],\n    y_loadings:[],\n    component : 0,\n    variable : null,\n    sort : [null, null],\n    tableHeight : null,\n    inputsHeight: null,\n    outputsHeight: null,\n  },\n\n  _create: function ()\n  {\n    var self = this;\n\n    function component_class(component)\n    {\n      return \"cca\" + (component + 1);\n    }\n\n    function negative_bar_width(value)\n    {\n      return value < 0 ? -100 * value + \"px\" : \"0px\";\n    }\n\n    function positive_bar_width(value)\n    {\n      return value > 0 ? 100 * value + \"px\" : \"0px\";\n    }\n\n    this.select_component = function(component)\n    {\n      this.element.find(\".selected-component\").removeClass(\"selected-component\");\n      this.element.find(\".col\" + (component+1)).addClass(\"selected-component\");\n      this.resize_canvas();\n      this.element.find(\".rowOutput.selected-component\").first().scrollintoview({direction: \"horizontal\",});\n    }\n\n    this.do_component_sort = function(component, sort_order)\n    {\n      var sort_icon = $(\".barplotHeaderColumn.\" + component_class(component) + \" .sortCCAComponent\", self.element);\n      $(\"span.sortCCAComponent\", self.element).removeClass(\"icon-sort-descending icon-sort-ascending\").addClass(\"icon-sort-off\");\n      $(sort_icon).removeClass(\"icon-sort-off\").addClass(\"icon-sort-\" + sort_order);\n\n      var inputLabels  = $('.inputLabel', self.element);\n      var outputLabels = $('.outputLabel', self.element);\n      var inputRows    = $('.barplotRow.rowInput', self.element);\n      var outputRows   = $('.barplotRow.rowOutput', self.element);\n\n      inputLabels.sort(inputSortFunction).appendTo($('.barplotColumn.input', self.element));\n      inputRows.sort(inputSortFunction).appendTo($('.barplotCanvas.input', self.element));\n\n      outputLabels.sort(outputSortFunction).appendTo($('.barplotColumn.output', self.element));\n      outputRows.sort(outputSortFunction).appendTo($('.barplotCanvas.output', self.element));\n\n      self.element.find(\".barplotRow.selected-variable\").scrollintoview({direction: \"vertical\",});\n\n      self.element.trigger(\"component-sort-changed\", [component, sort_order]);\n\n      function inputSortFunction(a,b){\n        var loadings = self.options.x_loadings;\n        return sortFunction(a,b,loadings);\n      }\n\n      function outputSortFunction(a,b){\n        var loadings = self.options.y_loadings;\n        return sortFunction(a,b,loadings);\n      }\n\n      function sortFunction(a,b,loadings){\n        var a_loadings_index = $(a).data('loadings_index');\n        var b_loadings_index = $(b).data('loadings_index');\n\n        var aa = loadings[component][a_loadings_index];\n        if (isNaN(aa)) aa = 0;\n        var bb = loadings[component][b_loadings_index];\n        if (isNaN(bb)) bb = 0;\n\n        var result;\n        if(sort_order == 'descending')\n          result = Math.abs(bb)-Math.abs(aa);\n        else\n          result = Math.abs(aa)-Math.abs(bb);\n        return result;\n      }\n    }\n\n    function click_component(context, component)\n    {\n      return function()\n      {\n        context.select_component(component);\n        context.element.trigger(\"component-changed\", component);\n      }\n    }\n\n    function sort_component(context, component)\n    {\n      return function()\n      {\n        var sort_order = 'descending';\n        if( $(this).hasClass('icon-sort-descending') )\n          sort_order = 'ascending';\n\n        context.do_component_sort(component, sort_order);\n      }\n    }\n\n    function click_row(context, row, variable)\n    {\n      return function()\n      {\n        context.element.find(\".selected-variable\").removeClass(\"selected-variable\");\n        context.element.find(\".variable\" + variable).addClass(\"selected-variable\");\n\n        context.element.trigger(\"variable-changed\", [variable]);\n      }\n    }\n\n    var metadata = this.options.metadata;\n    var inputs = this.options.inputs;\n    var outputs = this.options.outputs;\n    var r2 = this.options.r2;\n    var wilks = this.options.wilks;\n    var x_loadings = this.options.x_loadings;\n    var y_loadings = this.options.y_loadings;\n    var component_count = x_loadings.length;\n\n    var barplotHeader = $(\"<div class='barplotHeader'>\").appendTo(this.element);\n    var barplotRow = $('<div class=\"barplotRow\">').appendTo(barplotHeader);\n    var blank = $('<div class=\"barplotHeaderColumn mask col0\"><div class=\"wrapper\">&nbsp;</div></div>').appendTo(barplotRow);\n    var barplotHeaderColumns = $('<div class=\"barplotHeaderColumns\">').appendTo(barplotRow);\n\n    for(var component = 0; component != component_count; ++component)\n    {\n      var barplotHeaderColumn = $('<div class=\"barplotHeaderColumn\"><div class=\"wrapper\"><div class=\"negativeSpacer spacer\" /><div class=\"barplotHeaderColumnLabelWrapper\"><span class=\"selectCCAComponent\">CCA' + (component+1) + '</span><span class=\"sortCCAComponent icon-sort-off\" /></div><div class=\"positiveSpacer spacer\" /></div></div>')\n        .addClass('col' + (component+1))\n        .addClass(component_class(component))\n        .appendTo(barplotHeaderColumns);\n      $(\"span.selectCCAComponent\", barplotHeaderColumn).click(click_component(this, component));\n      $(\"span.sortCCAComponent\", barplotHeaderColumn).click(sort_component(this, component));\n    }\n\n    // Add r-squared statistic ...\n    var barplotRow = $('<div class=\"barplotRow\">').appendTo(barplotHeader);\n    $('<div class=\"barplotCell mask col0\" id=\"rsquared-label\"><div class=\"wrapper\">R<sup>2</sup></div></div>').appendTo(barplotRow);\n    var barplotHeaderColumns = $('<div class=\"barplotHeaderColumns\">').appendTo(barplotRow);\n    for(var component = 0; component != component_count; ++component)\n    {\n      var barplotCell = $('<div class=\"barplotCell\" />').addClass('col' + (component+1)).appendTo(barplotHeaderColumns);\n      var barplotCellWrapper = $('<div class=\"wrapper\" />').appendTo(barplotCell);\n      var barplotCellNegativeSpacer = $('<div class=\"negativeSpacer spacer\" />').appendTo(barplotCellWrapper);\n      var barplotCellValue = $('<div class=\"barplotCellValue\" />').html(Number(r2[component]).toFixed(3)).appendTo(barplotCellWrapper);\n      var barplotCellPositiveSpacer = $('<div class=\"positiveSpacer spacer\" />').appendTo(barplotCellWrapper);\n    }\n\n    // Add p statistic ...\n    var barplotRow = $('<div class=\"barplotRow\">').appendTo(barplotHeader);\n    $('<div class=\"barplotCell mask col0\"><div class=\"wrapper\">P</div></div>').appendTo(barplotRow);\n    var barplotHeaderColumns = $('<div class=\"barplotHeaderColumns\">').appendTo(barplotRow);\n    for(var component = 0; component != component_count; ++component)\n    {\n      var barplotCell = $('<div class=\"barplotCell\" />').addClass('col' + (component+1)).appendTo(barplotHeaderColumns);\n      var barplotCellWrapper = $('<div class=\"wrapper\" />').appendTo(barplotCell);\n      var barplotCellNegativeSpacer = $('<div class=\"negativeSpacer spacer\" />').appendTo(barplotCellWrapper);\n      var barplotCellValue = $('<div class=\"barplotCellValue\" />').html(Number(wilks[component]).toFixed(3)).appendTo(barplotCellWrapper);\n      var barplotCellPositiveSpacer = $('<div class=\"positiveSpacer spacer\" />').appendTo(barplotCellWrapper);\n    }\n\n    var barplotViewport = $('<div class=\"barplotViewport\">').appendTo(this.element);\n\n    // Add input variables ...\n    var barplotGroupInputs = $('<div class=\"barplotGroup inputs\">').appendTo(barplotViewport);\n    var barplotColumn = $('<div class=\"barplotColumn input\">').appendTo(barplotGroupInputs);\n    var barplotCanvas = $('<div class=\"barplotCanvas input\">').appendTo(barplotGroupInputs);\n\n    for(var i = 0; i != inputs.length; ++i)\n    {\n      var variableName = $('<div class=\"barplotCell col0 rowInput inputLabel\" />').addClass('row' + i + ' variable' + inputs[i]).appendTo(barplotColumn);\n      variableName.data({loadings_index: i, variable: inputs[i],});\n      var variableNameWrapper = $('<div class=\"wrapper\" />').html(metadata[\"column-names\"][inputs[i]]).appendTo(variableName);\n      variableName.click( click_row(this, variableName, inputs[i]) );\n\n      var barplotRow = $('<div class=\"barplotRow rowInput\">').addClass('row' + i + ' variable' + inputs[i]).appendTo(barplotCanvas);\n      barplotRow.data({loadings_index: i, variable: inputs[i],});\n      barplotRow.click( click_row(this, barplotRow, inputs[i]) );\n\n      for(var component = 0; component != component_count; ++component)\n      {\n        var barplotCell = $('<div class=\"barplotCell rowInput\">').addClass('row' + i + ' col' + (component+1) + ' variable' + inputs[i]).appendTo(barplotRow);\n        var barplotCellWrapper = $('<div class=\"wrapper\" />').appendTo(barplotCell);\n        var barplotCellNegativeSpacer = $('<div class=\"negativeSpacer spacer\" />').appendTo(barplotCellWrapper);\n        var barplotCellNegative = $('<div class=\"negative\" />').css(\"width\", negative_bar_width(x_loadings[component][i])).addClass(component_class(component)).appendTo(barplotCellNegativeSpacer);\n        var barplotCellValue = $('<div class=\"barplotCellValue\" />').html(Number(x_loadings[component][i]).toFixed(3)).appendTo(barplotCellWrapper);\n        var barplotCellPositiveSpacer = $('<div class=\"positiveSpacer spacer\" />').appendTo(barplotCellWrapper);\n        var barplotCellPositive = $('<div class=\"positive\" />').css(\"width\", positive_bar_width(x_loadings[component][i])).addClass(component_class(component)).appendTo(barplotCellPositiveSpacer);\n      }\n    }\n\n    // Add output variables ...\n    var barplotGroupOutputs = $('<div class=\"barplotGroup outputs\">').appendTo(barplotViewport);\n    var barplotColumn = $('<div class=\"barplotColumn output\">').appendTo(barplotGroupOutputs);\n    var barplotCanvas = $('<div class=\"barplotCanvas output\">').appendTo(barplotGroupOutputs);\n\n    for(var i = 0; i != outputs.length; ++i)\n    {\n      var variableName = $('<div class=\"barplotCell col0 rowOutput outputLabel\">').addClass('row' + (i + inputs.length) + ' variable' + outputs[i]).appendTo(barplotColumn);\n      variableName.data({loadings_index: i, variable: outputs[i],});\n      var variableNameWrapper = $('<div class=\"wrapper\" />').html(metadata[\"column-names\"][outputs[i]]).appendTo(variableName);\n      variableName.click( click_row(this, variableName, outputs[i]) );\n\n      var barplotRow = $('<div class=\"barplotRow rowOutput\">').addClass('row' + (i + inputs.length) + ' variable' + outputs[i]).appendTo(barplotCanvas);\n      barplotRow.data({loadings_index: i, variable: outputs[i],});\n      barplotRow.click( click_row(this, barplotRow, outputs[i]) );\n\n      for(var component = 0; component != component_count; ++component)\n      {\n        var barplotCell = $('<div class=\"barplotCell rowOutput\">').addClass('row' + (i + inputs.length) + ' col' + (component+1) + ' variable' + outputs[i]).appendTo(barplotRow);\n        var barplotCellWrapper = $('<div class=\"wrapper\" />').appendTo(barplotCell);\n        var barplotCellNegativeSpacer = $('<div class=\"negativeSpacer spacer\" />').appendTo(barplotCellWrapper);\n        var barplotCellNegative = $('<div class=\"negative\" />').css(\"width\", negative_bar_width(y_loadings[component][i])).addClass(component_class(component)).appendTo(barplotCellNegativeSpacer);\n        var barplotCellValue = $('<div class=\"barplotCellValue\" />').html(Number(y_loadings[component][i]).toFixed(3)).appendTo(barplotCellWrapper);\n        var barplotCellPositiveSpacer = $('<div class=\"positiveSpacer spacer\" />').appendTo(barplotCellWrapper);\n        var barplotCellPositive = $('<div class=\"positive\" />').css(\"width\", positive_bar_width(y_loadings[component][i])).addClass(component_class(component)).appendTo(barplotCellPositiveSpacer);\n      }\n    }\n\n    \n\n    /* Sizing table */\n    this.options.tableHeight = $('#barplot-table').height();\n    this.options.inputsHeight = barplotGroupInputs.height();\n    this.options.outputsHeight = barplotGroupOutputs.height();\n    // No need to call resize_canvas here since select_component calls it anyway.\n    //this.resize_canvas();\n    this.select_component(this.options.component);\n\n    $(\".barplotCanvas.input\").bind(\"scroll\", function(){\n      $(\".barplotHeaderColumns\").css(\"margin-left\", \"-\" + $(this).scrollLeft() + \"px\");\n      $(\".barplotColumn.input\").css(\"margin-top\", \"-\" + $(this).scrollTop() + \"px\");\n    });\n\n    $(\".barplotCanvas.output\").bind(\"scroll\", function(){\n      $(\".barplotHeaderColumns\").css(\"margin-left\", \"-\" + $(this).scrollLeft() + \"px\");\n      $(\".barplotColumn.output\").css(\"margin-top\", \"-\" + $(this).scrollTop() + \"px\");\n      $(\".barplotCanvas.input\").scrollLeft( $(this).scrollLeft() );\n    });\n\n    // Resizing functionality\n    var barplotGroupOutputsOriginalHeight = barplotGroupOutputs.height();\n    barplotGroupInputs.resizable({\n      containment: barplotViewport,\n      handles: \"s\",\n      minHeight: Math.max(4, barplotViewport.height()-this.options.outputsHeight),\n      maxHeight: this.options.inputsHeight,\n      resize: function(event,ui){\n        // ui.size.height is unreliable, so getting the new height directly from element\n        barplotGroupOutputs.height( barplotGroupOutputsOriginalHeight + (ui.originalSize.height - ui.element.height()) );\n      },\n      start: function(event,ui){\n        barplotGroupOutputsOriginalHeight = barplotGroupOutputs.height();\n      },\n    });\n    // Shifting default resize handle to left to stop overlap over scrollbar.\n    var barplotCanvasInputElement = $(\".barplotCanvas.input\")[0];\n    var verticalScrollbarWidth = barplotCanvasInputElement.offsetWidth - barplotCanvasInputElement.clientWidth;\n    var resizeHandle = $(\".barplotGroup.inputs .ui-resizable-s\").css(\"left\", \"-\" + verticalScrollbarWidth + \"px\");\n\n    // Adding hover class to resize handle\n    resizeHandle.hover(function(){$(this).addClass(\"ui-resizable-hover\");}, function(){$(this).removeClass(\"ui-resizable-hover\");});\n\n    // Adding toggle control to resize handle\n    var toggleControl = $(\"<div class='toggle-control-s' />\").appendTo(resizeHandle);\n    toggleControl\n      .hover(\n        function(){\n          $(this).addClass(\"toggle-control-hover\");\n          resizeHandle.removeClass(\"ui-resizable-hover\");\n        }, \n        function(){\n          $(this).removeClass(\"toggle-control-hover\");\n          resizeHandle.addClass(\"ui-resizable-hover\");\n        }\n      )\n      .click(\n        function(){\n          var barplotGroupInputsHeight = barplotGroupInputs.height();\n          var barplotGroupOutputsHeight = barplotGroupOutputs.height();\n          var expanded = barplotGroupInputsHeight >= barplotGroupInputs.resizable(\"option\", \"maxHeight\") || barplotGroupOutputsHeight == 0;\n          if(expanded){\n            var amountToCollapse = barplotGroupOutputsOriginalHeight - barplotGroupOutputsHeight;\n            // In some edge cases, the amountToCollapse can come out to a negative number, in which case we don't want to expand\n            if(amountToCollapse < 0)\n              amountToCollapse = 0;\n            barplotGroupInputs.height(barplotGroupInputsHeight - amountToCollapse);\n            barplotGroupOutputs.height(barplotGroupOutputsHeight + amountToCollapse);\n          } else {\n            barplotGroupOutputsOriginalHeight = barplotGroupOutputs.height();\n            var inputsMaxHeight = self.options.inputsHeight;\n            var amountToExpand = Math.min(barplotGroupOutputsHeight, inputsMaxHeight-barplotGroupInputsHeight);\n            barplotGroupOutputs.height(barplotGroupOutputsHeight - amountToExpand);\n            barplotGroupInputs.height(barplotGroupInputsHeight + amountToExpand);\n          }\n        }\n      );\n\n    // Can't figure out how to do this in CSS so setting explicit height here :(\n    $(\".barplotHeaderColumn.mask.col0\").height( $(\".barplotHeader .barplotRow:first-child\").height() );\n  },\n\n  resize_canvas: function()\n  {\n    var tableWidth = 20;  // Adding space for scrollbars\n    $(\".barplotHeaderColumn\").each(\n      function(index){\n        var maxWidth = Math.max.apply( null, $(\".col\" + index + \" .wrapper\").map( function () {\n          return $( this ).outerWidth(true);\n        }).get() );\n        $(\".col\" + index).width(maxWidth);\n      }\n    );\n\n    // Width of table is set to sum of outerWidths(true), which includes content, padding, border, and margin, of all the columns.\n    $(\".barplotHeaderColumn\").each(\n      function(index){\n        tableWidth += $(this).outerWidth(true);\n      }\n    );\n\n    var barplotPaneWidth = $('#barplot-pane').width();\n    $('#barplot-table').width(Math.min(tableWidth, barplotPaneWidth));\n    if(tableWidth > barplotPaneWidth) {\n      $('.barplotCanvas.output').css(\"overflow\", \"scroll\");\n      $('.barplotCanvas.input').css(\"overflow-y\", \"scroll\");\n    } else {\n      $('.barplotCanvas.output').css(\"overflow\", \"auto\");\n      $('.barplotCanvas.input').css(\"overflow-y\", \"auto\");\n    }\n\n    // Assuming we need vertical resize for now. We add this class later after the table size is determined.\n    $(\"#barplot-table\").removeClass(\"noVerticalResize\");\n\n    var increaseHeight = 0;\n    var barplotPaneHeight = $('#barplot-pane').height();\n    $('#barplot-table').height(Math.min(this.options.tableHeight, barplotPaneHeight));\n    var viewportHeight = $(\"#barplot-table\").height() - $('.barplotHeader').outerHeight(true);\n    if(this.options.tableHeight > barplotPaneHeight) {\n      // Table is taller than pane, so need to size down inputs and/or output and make them scrollable\n      var halfViewportHeight = Math.floor(viewportHeight / 2);\n      if(this.options.inputsHeight > halfViewportHeight) {\n        if(this.options.outputsHeight > halfViewportHeight) {\n          // Both inputs and outputs are too big, so inputs get sized to 50% of available area and outputs get the rest. \n          // Sizing both to 50% of available area was causing problems in Chrome with fractions of pixels. \n          $(\".barplotGroup.inputs\").height( halfViewportHeight );\n          $(\".barplotGroup.outputs\").height( viewportHeight - $(\".barplotCanvas\").height() );\n        } else {\n          // Only inputs need to be sized down\n          $(\".barplotGroup.inputs\").height( viewportHeight - this.options.outputsHeight );\n          $(\".barplotGroup.outputs\").height( this.options.outputsHeight );\n        }\n      } else {\n        // Only outputs needs to be sized down\n        $(\".barplotGroup.inputs\").height( this.options.inputsHeight );\n        $(\".barplotGroup.outputs\").height( viewportHeight - this.options.inputsHeight );\n      }\n    } else {\n      // We have room to show everything, so size things to their full height.\n      $(\".barplotGroup.inputs\").height( this.options.inputsHeight );\n      $(\".barplotGroup.outputs\").height( this.options.outputsHeight );\n      // Check to see if we have horizontal scrollbars and try to make additional space for it\n      var barplotCanvasOutputElement = $(\".barplotCanvas.output\")[0];\n      var horizontalScrollbarHeight = barplotCanvasOutputElement.offsetHeight - barplotCanvasOutputElement.clientHeight;\n      var extraSpace = barplotPaneHeight - this.options.tableHeight;\n      increaseHeight = Math.min(horizontalScrollbarHeight, extraSpace);\n      if(increaseHeight > 0) {\n        $('#barplot-table').height( $('#barplot-table').height() + increaseHeight );\n        $(\".barplotGroup.outputs\").height( $(\".barplotGroup.outputs\").height() + increaseHeight );\n      }\n      // Check to see if we need resizing\n      if(horizontalScrollbarHeight <= extraSpace) {\n        // We don't need resizing, so mark table as such so we can hide the resize handle\n        $(\"#barplot-table\").addClass(\"noVerticalResize\");\n      }\n    }\n\n    // Resetting the inputs resizer max height after table resize\n    var barplotCanvasOutputElement = $(\".barplotCanvas.output\")[0];\n    var horizontalScrollbarHeight = barplotCanvasOutputElement.offsetHeight - barplotCanvasOutputElement.clientHeight;\n    // Making sure widget exists before calling methods on it.\n    if($(\".barplotGroup.inputs\").data(\"ui-resizable\"))\n      $(\".barplotGroup.inputs\").resizable(\"option\", {\n        minHeight: Math.max(4, viewportHeight-(this.options.outputsHeight+horizontalScrollbarHeight-increaseHeight)), // Need to take into account horizontal scroll bar height\n        maxHeight: this.options.inputsHeight,\n      });\n    // Shifting default resize handle to left to stop overlap over scrollbar.\n    var barplotCanvasInputElement = $(\".barplotCanvas.input\")[0];\n    var verticalScrollbarWidth = barplotCanvasInputElement.offsetWidth - barplotCanvasInputElement.clientWidth;\n    $(\".barplotGroup.inputs .ui-resizable-s\").css(\"left\", \"-\" + verticalScrollbarWidth + \"px\");\n  },\n\n  _setOption: function(key, value)\n  {\n    //console.log(\"cca.barplot._setOption()\", key, value);\n    this.options[key] = value;\n\n    if(key == \"component\")\n    {\n      this.select_component(value);\n    }\n    else if(key == \"variable\")\n    {\n      this.element.find(\".selected-variable\").removeClass(\"selected-variable\");\n      this.element.find(\".variable\" + value).addClass(\"selected-variable\");\n      // Using scrollintoview jQuery plugin instead of browser built-in functionality (DOM's scrollIntoView() function).\n      // DOM's scrollIntoView() works but has problems: \n      //   1. scrolls each time it's called, even when element is already visible, to bring it to top or bottom of scroll area.\n      //   2. always scrolls in both directions, displayin left edge of target element even if user has already scrolled horizontally to display other CCA components.\n      //   3. lacks animation when scrolling\n      //   4. always scrolls to top or bottom of scroll area instead of the least amount needed to make it visible\n      // The jQuery plugin solves all these issues.\n      //this.element.find(\".barplotRow.selected-variable\").get(0).scrollIntoView();\n      this.element.find(\".barplotRow.selected-variable\").scrollintoview({direction: \"vertical\",});\n    }\n    else if(key == \"sort\")\n    {\n      this.do_component_sort(this.options.sort[0], this.options.sort[1]);\n    }\n  }\n});","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\nimport d3 from \"js/d3.min\";\nimport \"jquery-ui\";\n\n$.widget(\"cca.scatterplot\",\n{\n  options:\n  {\n    width : 300,\n    height : 300,\n    pick_distance : 3,\n    drag_threshold : 3,\n    indices : [],\n    x : [],\n    y : [],\n    v : [],\n    selection : [],\n    color : d3.scale.linear().domain([-1, 0, 1]).range([\"blue\", \"white\", \"red\"]),\n    border : 25,\n  },\n\n  _create: function()\n  {\n    this.start_drag = null;\n    this.end_drag = null;\n\n    this.main_context = this.element.get(0).getContext(\"2d\");\n\n    this.data_canvas = $(\"<canvas>\");\n    this.data_context = this.data_canvas.get(0).getContext(\"2d\");\n\n    this.selection_canvas = $(\"<canvas>\");\n    this.selection_context = this.selection_canvas.get(0).getContext(\"2d\");\n\n    this.updates = {};\n    this.update_timer = null;\n    this._schedule_update({update_indices:true, update_width:true, update_height:true, update_x:true, update_y:true, update_color_domain:true, render_data:true, render_selection:true});\n\n    var self = this;\n\n    this.element.mousedown(function(e)\n    {\n      self.start_drag = [self._offsetX(e), self._offsetY(e)];\n      self.end_drag = null;\n    });\n\n    this.element.mousemove(function(e)\n    {\n      if(self.start_drag) // Mouse is down ...\n      {\n        if(self.end_drag) // Already dragging ...\n        {\n          self.end_drag = [self._offsetX(e), self._offsetY(e)];\n\n          var width = self.element.width();\n          var height = self.element.height();\n\n          self.main_context.clearRect(0, 0, width, height);\n          self.main_context.drawImage(self.data_canvas.get(0), 0, 0);\n          self.main_context.drawImage(self.selection_canvas.get(0), 0, 0);\n          self.main_context.fillStyle = \"rgba(255, 255, 0, 0.3)\";\n          self.main_context.fillRect(self.start_drag[0], self.start_drag[1], self.end_drag[0] - self.start_drag[0], self.end_drag[1] - self.start_drag[1]);\n          self.main_context.strokeStyle = \"rgb(255, 255, 0)\";\n          self.main_context.lineWidth = 2.0;\n          self.main_context.strokeRect(self.start_drag[0], self.start_drag[1], self.end_drag[0] - self.start_drag[0], self.end_drag[1] - self.start_drag[1]);\n        }\n        else\n        {\n          if(Math.abs(self._offsetX(e) - self.start_drag[0]) > self.options.drag_threshold || Math.abs(self._offsetY(e) - self.start_drag[1]) > self.options.drag_threshold) // Start dragging ...\n          {\n            self.end_drag = [self._offsetX(e), self._offsetY(e)];\n          }\n        }\n      }\n    });\n\n    this.element.mouseup(function(e)\n    {\n      if(!e.ctrlKey && !e.metaKey)\n        self.options.selection = [];\n\n      var x = self.options.x;\n      var y = self.options.y;\n      var count = x.length;\n\n      if(self.start_drag && self.end_drag) // Rubber-band selection ...\n      {\n        var x1 = self.x_scale.invert(Math.min(self.start_drag[0], self.end_drag[0]));\n        var y1 = self.y_scale.invert(Math.max(self.start_drag[1], self.end_drag[1]));\n        var x2 = self.x_scale.invert(Math.max(self.start_drag[0], self.end_drag[0]));\n        var y2 = self.y_scale.invert(Math.min(self.start_drag[1], self.end_drag[1]));\n\n        for(var i = 0; i != count; ++i)\n        {\n          if(x1 <= x[i] && x[i] <= x2 && y1 <= y[i] && y[i] <= y2)\n          {\n            var index = self.options.selection.indexOf(self.options.indices[i]);\n            if(index == -1)\n              self.options.selection.push(self.options.indices[i]);\n          }\n        }\n      }\n      else // Pick selection ...\n      {\n        var x1 = self.x_scale.invert(self._offsetX(e) - self.options.pick_distance);\n        var y1 = self.y_scale.invert(self._offsetY(e) + self.options.pick_distance);\n        var x2 = self.x_scale.invert(self._offsetX(e) + self.options.pick_distance);\n        var y2 = self.y_scale.invert(self._offsetY(e) - self.options.pick_distance);\n\n        for(var i = count-1; i > -1; i--)\n        {\n          if(x1 <= x[i] && x[i] <= x2 && y1 <= y[i] && y[i] <= y2)\n          {\n            var index = self.options.selection.indexOf(self.options.indices[i]);\n            if(index == -1)\n              self.options.selection.push(self.options.indices[i]);\n            else\n              self.options.selection.splice(index, 1);\n\n            break;\n          }\n        }\n      }\n\n      self.start_drag = null;\n      self.end_drag = null;\n\n      self._schedule_update({render_selection:true});\n      self.element.trigger(\"selection-changed\", [self.options.selection]);\n    });\n  },\n\n  _offsetX: function(e)\n  {\n    return e.pageX - e.currentTarget.getBoundingClientRect().left - $(document).scrollLeft();\n  },\n\n  _offsetY: function(e)\n  {\n    return e.pageY - e.currentTarget.getBoundingClientRect().top - $(document).scrollTop();\n  },\n\n  _setOption: function(key, value)\n  {\n    //console.log(\"cca.scatterplot._setOption()\", key, value);\n    this.options[key] = value;\n\n    if(key == \"indices\")\n    {\n      this._schedule_update({update_indices:true, render_selection:true});\n    }\n\n    else if(key == \"x\")\n    {\n      this._schedule_update({update_x:true, render_data:true, render_selection:true});\n    }\n\n    else if(key == \"y\")\n    {\n      this._schedule_update({update_y:true, render_data:true, render_selection:true});\n    }\n\n    else if(key == \"v\")\n    {\n      this._schedule_update({update_color_domain:true, render_data:true, render_selection:true});\n    }\n\n    else if(key == \"selection\")\n    {\n      this._schedule_update({render_selection:true});\n    }\n\n    else if(key == \"color\")\n    {\n      this._schedule_update({update_color_domain:true, render_data:true, render_selection:true});\n    }\n\n    else if(key == \"width\")\n    {\n      this._schedule_update({update_width:true, update_x:true, render_data:true, render_selection:true});\n    }\n\n    else if(key == \"height\")\n    {\n      this._schedule_update({update_height:true, update_y:true, render_data:true, render_selection:true});\n    }\n\n    else if(key == \"border\")\n    {\n      this._schedule_update({update_x:true, update_y:true, render_data:true, render_selection:true});\n    }\n  },\n\n  _schedule_update: function(updates)\n  {\n    for(var key in updates)\n    {\n      if(updates[key] == true)\n        this.updates[key] = true\n    }\n\n    if(this.update_timer)\n      return;\n\n    var self = this;\n    this.update_timer = window.setTimeout(function() { self._update(); }, 0);\n  },\n\n  _update: function()\n  {\n    //console.log(\"cca.scatterplot._update()\", this.updates);\n    this.update_timer = null;\n\n    if(this.updates[\"update_width\"])\n    {\n      this.element.attr(\"width\", this.options.width).css(\"width\", this.options.width);\n      this.data_canvas.attr(\"width\", this.options.width);\n      this.selection_canvas.attr(\"width\", this.options.width);\n    }\n\n    if(this.updates[\"update_height\"])\n    {\n      this.element.attr(\"height\", this.options.height).css(\"height\", this.options.height);\n      this.data_canvas.attr(\"height\", this.options.height);\n      this.selection_canvas.attr(\"height\", this.options.height);\n    }\n\n    if(this.updates[\"update_indices\"])\n    {\n      this.inverse_indices = {};\n      var count = this.options.indices.length;\n      for(var i = 0; i != count; ++i)\n        this.inverse_indices[this.options.indices[i]] = i;\n    }\n\n    if(this.updates[\"update_x\"])\n    {\n      this.x_scale = d3.scale.linear().domain([d3.min(this.options.x), d3.max(this.options.x)]).range([0 + this.options.border, this.element.attr(\"width\") - this.options.border]);\n    }\n\n    if(this.updates[\"update_y\"])\n    {\n      this.y_scale = d3.scale.linear().domain([d3.min(this.options.y), d3.max(this.options.y)]).range([this.element.attr(\"height\") - this.options.border, 0 + this.options.border]);\n    }\n\n    if(this.updates[\"update_color_domain\"])\n    {\n      var v_min = d3.min(this.options.v);\n      var v_max = d3.max(this.options.v);\n      var domain = []\n      var domain_scale = d3.scale.linear().domain([0, this.options.color.domain().length]).range([v_min, v_max]);\n      for(var i in this.options.color.domain())\n        domain.push(domain_scale(i));\n      this.options.color.domain(domain);\n    }\n\n    var width = this.element.attr(\"width\");\n    var height = this.element.attr(\"height\");\n\n    if(this.updates[\"render_data\"])\n    {\n      this.data_context.setTransform(1, 0, 0, 1, 0, 0);\n      this.data_context.clearRect(0, 0, width, height);\n\n      // Draw labels ...\n      this.data_context.font = \"10pt Arial\";\n      this.data_context.textAlign = \"center\";\n      this.data_context.fillStyle = \"black\";\n\n      this.data_context.save();\n      this.data_context.textBaseline = \"alphabetic\";\n      this.data_context.translate(width / 2, height - 5);\n      this.data_context.fillText(\"Input Metavariable\", 0, 0);\n      this.data_context.restore();\n\n      this.data_context.save();\n      this.data_context.textBaseline = \"top\";\n      this.data_context.translate(5, height / 2);\n      this.data_context.rotate(-Math.PI / 2);\n      this.data_context.fillText(\"Output Metavariable\", 0, 0);\n      this.data_context.restore();\n\n      var count = this.options.x.length;\n      var x = this.options.x;\n      var y = this.options.y;\n      var v = this.options.v;\n      var indices = this.options.indices;\n      var color = this.options.color;\n\n      // Draw points using rectangles ...\n      if(count < 50000)\n      {\n        var cx, cy,\n         square_size = 8,\n         border_width = 1,\n         half_border_width = border_width / 2,\n         fillWidth = square_size - (2 * border_width),\n         fillHeight = fillWidth,\n         strokeWidth = square_size - border_width,\n         strokeHeight = strokeWidth;\n\n        for(var i = 0; i != count; ++i)\n        {\n          cx = Math.round( this.x_scale(x[i]) - (square_size/2) - border_width );\n          cy = Math.round( this.y_scale(y[i]) - (square_size/2) - border_width );\n          this.data_context.fillStyle = color(v[indices[i]]);\n          this.data_context.fillRect(cx + border_width, cy + border_width, fillWidth, fillHeight);\n          this.data_context.strokeRect(cx + half_border_width, cy + half_border_width, strokeWidth, strokeHeight);\n        }\n      }\n      // Draw points using tiny rectangles ...\n      else\n      {\n        var size = 2;\n        var offset = size / 2;\n        for(var i = 0; i != count; ++i)\n        {\n          this.data_context.fillStyle = color(v[indices[i]]);\n          this.data_context.fillRect(Math.round(this.x_scale(x[i]) - offset), Math.round(this.y_scale(y[i]) - offset), size, size);\n        }\n      }\n    }\n\n    if(this.updates[\"render_selection\"])\n    {\n      var x = this.options.x;\n      var y = this.options.y;\n      var v = this.options.v;\n      var color = this.options.color;\n      var indices = this.options.indices;\n\n      this.selection_context.setTransform(1, 0, 0, 1, 0, 0);\n      this.selection_context.clearRect(0, 0, width, height);\n\n      var selection = this.options.selection;\n      var selection_count = selection.length;\n      var cx, cy,\n         square_size = 16,\n         border_width = 2,\n         half_border_width = border_width / 2,\n         fillWidth = fillHeight = square_size - (2 * border_width),\n         strokeWidth = strokeHeight = square_size - border_width;\n\n      this.selection_context.strokeStyle = \"black\";\n      this.selection_context.lineWidth = border_width;\n\n      for(var i = 0; i != selection_count; ++i)\n      {\n        var global_index = selection[i];\n        var local_index = this.inverse_indices[global_index];\n        this.selection_context.fillStyle = color(v[global_index]);\n        cx = Math.round( this.x_scale(x[local_index]) - (square_size/2) - border_width );\n        cy = Math.round( this.y_scale(y[local_index]) - (square_size/2) - border_width );\n        this.selection_context.fillRect(cx + border_width, cy + border_width, fillWidth, fillHeight);\n        this.selection_context.strokeRect(cx + half_border_width, cy + half_border_width, strokeWidth, strokeHeight);\n      }\n    }\n\n    if(this.updates[\"render_data\"] || this.updates[\"render_selection\"])\n    {\n      this.main_context.clearRect(0, 0, width, height);\n      this.main_context.drawImage(this.data_canvas.get(0), 0, 0);\n      this.main_context.drawImage(this.selection_canvas.get(0), 0, 0);\n    }\n\n    this.updates = {}\n  }\n});","/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\nimport d3 from \"js/d3.min\";\nimport \"jquery-ui\";\n\n$.widget(\"slycat.colorswitcher\",\n{\n  options:\n  {\n    colormap : \"day\",\n  },\n\n  _create: function()\n  {\n    var self = this;\n\n    this.color_maps =\n    {\n      \"night\":\n      {\n        \"label\": \"Night\",\n        \"background\": d3.rgb(128, 128, 128),\n        \"null_color\": \"rgb(75,75,75)\",\n        \"opacity\": \"0.5\",\n        \"colors\":\n        [\n          d3.rgb( 59,  76, 192),\n          d3.rgb( 68,  90, 204),\n          d3.rgb( 77, 104, 215),\n          d3.rgb( 87, 117, 225),\n          d3.rgb( 98, 130, 234),\n          d3.rgb(108, 142, 241),\n          d3.rgb(119, 154, 247),\n          d3.rgb(130, 165, 251),\n          d3.rgb(141, 176, 254),\n          d3.rgb(152, 185, 255),\n          d3.rgb(163, 194, 255),\n          d3.rgb(174, 201, 253),\n          d3.rgb(184, 208, 249),\n          d3.rgb(194, 213, 244),\n          d3.rgb(204, 217, 238),\n          d3.rgb(213, 219, 230),\n          d3.rgb(221, 221, 221),\n          d3.rgb(229, 216, 209),\n          d3.rgb(236, 211, 197),\n          d3.rgb(241, 204, 185),\n          d3.rgb(245, 196, 173),\n          d3.rgb(247, 187, 160),\n          d3.rgb(247, 177, 148),\n          d3.rgb(247, 166, 135),\n          d3.rgb(244, 154, 123),\n          d3.rgb(241, 141, 111),\n          d3.rgb(236, 127,  99),\n          d3.rgb(229, 112,  88),\n          d3.rgb(222,  96,  77),\n          d3.rgb(213,  80,  66),\n          d3.rgb(203,  62,  56),\n          d3.rgb(192,  40,  47),\n          d3.rgb(180,   4,  38),\n        ]\n      },\n    \"day\":\n      {\n        \"label\": \"Day\",\n        \"background\": d3.rgb(255, 255, 255),\n        \"null_color\": \"gray\",\n        \"opacity\": \"0.7\",\n        \"colors\":\n        [\n          d3.rgb(100, 108, 234),\n          d3.rgb(115, 118, 240),\n          d3.rgb(128, 128, 244),\n          d3.rgb(140, 138, 248),\n          d3.rgb(151, 147, 250),\n          d3.rgb(161, 155, 251),\n          d3.rgb(169, 163, 251),\n          d3.rgb(177, 170, 250),\n          d3.rgb(184, 177, 248),\n          d3.rgb(189, 182, 245),\n          d3.rgb(193, 187, 241),\n          d3.rgb(197, 191, 236),\n          d3.rgb(199, 194, 230),\n          d3.rgb(200, 196, 224),\n          d3.rgb(201, 198, 216),\n          d3.rgb(200, 199, 208),\n          d3.rgb(198, 198, 198),\n          d3.rgb(210, 197, 195),\n          d3.rgb(220, 194, 192),\n          d3.rgb(229, 191, 187),\n          d3.rgb(236, 186, 181),\n          d3.rgb(243, 181, 175),\n          d3.rgb(248, 175, 168),\n          d3.rgb(251, 168, 160),\n          d3.rgb(254, 159, 152),\n          d3.rgb(255, 150, 143),\n          d3.rgb(255, 140, 133),\n          d3.rgb(253, 129, 123),\n          d3.rgb(250, 117, 112),\n          d3.rgb(246, 105, 101),\n          d3.rgb(240,  91,  90),\n          d3.rgb(233,  75,  78),\n          d3.rgb(225,  57,  66),\n        ]\n      },\n    \"rainbow\":\n      {\n        \"label\": \"Rainbow Night\",\n        \"background\": d3.rgb(128, 128, 128),\n        \"null_color\": \"rgb(75,75,75)\",\n        \"opacity\": \"0.6\",\n        \"colors\":\n        [\n          d3.rgb(0, 0, 255),\n          d3.rgb(0, 255, 255),\n          d3.rgb(255, 255, 0),\n          d3.rgb(255, 0, 0),\n        ]\n      },\n    \"rainbow_day\":\n      {\n        \"label\": \"Rainbow Day\",\n        \"background\": d3.rgb(255, 255, 255),\n        \"null_color\": \"gray\",\n        \"opacity\": \"0.7\",\n        \"colors\":\n        [\n          d3.rgb(0, 0, 255),\n          d3.rgb(0, 255, 255),\n          d3.rgb(255, 255, 0),\n          d3.rgb(255, 0, 0),\n        ]\n      },\n    };\n\n    this.button = $('<button class=\"btn btn-xs btn-default dropdown-toggle\" type=\"button\" id=\"colors-dropdown\" data-toggle=\"dropdown\" aria-expanded=\"true\" title=\"Scatterplot Color Theme\"> \\\n          Colors \\\n          <span class=\"caret\"></span> \\\n        </button>')\n      .appendTo(this.element)\n      ;\n    this.list = $('<ul class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"colors-dropdown\">')\n      .appendTo(this.element)\n      ;\n    $.each(this.color_maps, function(key, value)\n    {\n      var gradient_data = self.get_gradient_data(key);\n      var color_stops = [];\n      for(var i = 0; i < gradient_data.length; i++)\n      {\n        color_stops.push( gradient_data[i].color + \" \" + gradient_data[i].offset + \"%\" );\n      }\n      var background_color = self.get_background(key);\n      var item = $('<li role=\"presentation\">')\n        .addClass(\"color\")\n        .toggleClass(\"active\", key == self.options.colormap)\n        .attr(\"data-colormap\", key)\n        .appendTo(self.list)\n        .append(\n          $('<a role=\"menuitem\" tabindex=\"-1\">')\n            .html(value.label)\n            .click(function()\n            {\n              var menu_item = $(this).parent();\n              if(menu_item.hasClass(\"active\"))\n                return false;\n\n              self.options.colormap = menu_item.attr(\"data-colormap\");\n              self.list.find(\".color\").removeClass(\"active\");\n              menu_item.addClass(\"active\");\n\n              self.element.trigger(\"colormap-changed\", [self.options.colormap]);\n            })\n            .css({\n              \"background-image\" : \"linear-gradient(to bottom, \" + color_stops.join(\", \") + \"), linear-gradient(to bottom, \" + background_color + \", \" + background_color + \")\",\n              \"background-size\" : \"5px 75%, 50px 100%\",\n              \"background-position\" : \"right 10px center, right 5px center\",\n              \"background-repeat\" : \"no-repeat, no-repeat\",\n              \"padding-right\" : \"70px\",\n            })\n        )\n        ;\n    });\n\n  },\n\n  _setOption: function(key, value)\n  {\n    //console.log(\"slycat.colorswitcher._setOption()\", key, value);\n    this.options[key] = value;\n\n    if(key == \"colormap\")\n    {\n      this.list.find(\".color\").removeClass(\"active\");\n      this.list.find(\"[data-colormap='\" + this.options.colormap + \"']\").addClass(\"active\");\n    }\n  },\n\n  // Return a d3 rgb object with the suggested background color for the given color map.\n  get_background: function(name)\n  {\n    if(name === undefined)\n      name = this.options.colormap;\n    return this.color_maps[name].background;\n  },\n\n  // Return the null color value for the given color map.\n  get_null_color: function(name)\n  {\n    if(name === undefined)\n      name = this.options.colormap;\n    return this.color_maps[name][\"null_color\"];\n  },\n\n  // Return the suggested opacity value for the given color map.\n  get_opacity: function(name)\n  {\n    if(name === undefined)\n      name = this.options.colormap;\n    return this.color_maps[name].opacity;\n  },\n\n  // Return a d3 linear color scale with the current color map for the domain [0, 1].\n  // Callers should modify the domain by passing a min and max to suit their own needs.  \n  get_color_scale: function(name, min, max)\n  {\n    if(name === undefined)\n      name = this.options.colormap;\n    if(min === undefined)\n      min = 0.0;\n    if(max === undefined)\n      max = 1.0;\n    var domain = []\n    var domain_scale = d3.scale.linear()\n      .domain([0, this.color_maps[name].colors.length-1])\n      .range([min, max]);\n    for(var i in this.color_maps[name].colors)\n      domain.push(domain_scale(i));\n    return d3.scale.linear().domain(domain).range(this.color_maps[name].colors);\n  },\n\n  // Deprecated\n  get_color_map: function(name, min, max)\n  {\n    return this.get_color_scale(name, min, max);\n  },\n\n  // Return a d3 ordinal color scale with the current color map for the domain [0, 1].\n  // Callers should modify the domain by passing an array of values to suit their own needs. \n  get_color_scale_ordinal: function(name, values)\n  {\n    if(name === undefined)\n      name = this.options.colormap;\n    if(values === undefined)\n      values = [0, 1];\n\n    var tempOrdinal = d3.scale.ordinal().domain(values).rangePoints([0, 100], 0);\n    var tempColorscale = this.get_color_scale(name, 0, 100);\n    var rgbRange = [];\n    for(var i=0; i<values.length; i++)\n    {\n      rgbRange.push( tempColorscale( tempOrdinal(values[i]) ) );\n    }\n    return d3.scale.ordinal().domain(values).range(rgbRange);\n  },\n\n  // Deprecated\n  get_color_map_ordinal: function(name, values)\n  {\n    return this.get_color_scale_ordinal(name, values);\n  },\n\n  get_gradient_data: function(name)\n  {\n    var self = this;\n\n    if(name === undefined)\n      name = this.options.colormap;\n\n    var colors = self.color_maps[name][\"colors\"];\n    var length = colors.length;\n    var data = [];\n    for(var i=0; i < length; i++){\n      data.push({offset: i*(100/(length-1)), color: colors[length-1-i],});\n    }\n    return data;\n  },\n\n  setUpColorMapsForAllColumns: function(name, columns)\n  {\n    for(var j = 0; j != columns.length; ++j)\n    {\n      columns[j].colorMap = this.get_color_scale(name, columns[j].columnMin, columns[j].columnMax);\n    }\n  }\n});"],"sourceRoot":""}