(window.webpackJsonp=window.webpackJsonp||[]).push([[18,5],Array(235).concat([function(e,t,n){"use strict";(function(e){var t=p(n(62)),i=(p(n(300)),p(n(283)),p(n(284)),p(n(286)),p(n(287)),p(n(290)),p(n(355)),p(n(357)),p(n(15))),r=(p(n(47)),p(n(0)),p(n(4)),p(n(2))),o=p(n(29)),a=h(n(3)),s=p(n(360)),l=p(n(362)),c=p(n(281)),u=p(n(25)),d=h(n(282));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}n(363),n(369),n(380),n(381),n(280),n(299),n(395),n(397),e(document).ready(function(){var n=null,h=(0,u.default)(window.location).segment(-1),p=null,f=null,m=null,g=null,v=null,A=null,y=null,b=null,x=null,_=null,w=null,M=null,E=null,S=null,C=null,T=null,R=null,L=null,P=null,k=null,N=null,O=null,z=null,D=null,I=null,F=null,B=null,U=null,H=null,V=null,G=!1,j=!1,W=!1,q=(document.createElement("a"),null),X=null;function Y(){e(".load-status").css("display","none"),a.dialog({title:"Load Error",message:"Oops, there was a problem retrieving data from the model. This likely means that there was a problem during computation."})}function J(){if(b&&(U=[],"open-images-selection"in b&&(U=b["open-images-selection"])),w){A=[];for(var t=0;t!=w["column-count"]-1;++t)-1==e.inArray(t,p)&&-1==e.inArray(t,f)&&A.push(t);x.set_other_columns(A)}if(Z(),!E&&w){var n=w["row-count"];E=new Int32Array(n);for(t=0;t!=n;++t)E[t]=t}if(Q(),x.set_table_statistics(M),x.build_sliders(),w&&b){var r=[];r.push.apply(r,p),r.push.apply(r,f);for(t=0;t<w["column-count"]-1;t++)"string"!=w["column-types"][t]&&r.push(t);if(S=r[0],C=r[1%r.length],"x-selection"in b&&(S=Number(b["x-selection"])),"y-selection"in b&&(C=Number(b["y-selection"])),F=!0,"auto-scale"in b&&(F=b["auto-scale"]),H=!1,"video-sync"in b&&(H=b["video-sync"]),V=0,"video-sync-time"in b&&(V=b["video-sync-time"]),O=[],"simulation-selection"in b&&(O=b["simulation-selection"]),z=[],"hidden-simulations"in b&&(z=b["hidden-simulations"]),D=[],"manually-hidden-simulations"in b&&(D=b["manually-hidden-simulations"]),d.get_model_array_attribute({api_root:i.default,mid:h,aid:"data-table",array:0,attribute:S,success:function(e){L=e,"string"==w["column-types"][S]&&(L=L[0]),K(),Z()},error:Y}),d.get_model_array_attribute({api_root:i.default,mid:h,aid:"data-table",array:0,attribute:C,success:function(e){P=e,"string"==w["column-types"][C]&&(P=P[0]),K(),Z()},error:Y}),T=w["column-count"]-1,"variable-selection"in b&&(T=Number(b["variable-selection"])),T==w["column-count"]-1){n=w["row-count"];k=new Float64Array(n);for(t=0;t!=n;++t)k[t]=t;re(),K(),Z()}else d.get_model_array_attribute({api_root:i.default,mid:h,aid:"data-table",array:0,attribute:T,success:function(e){k=e,"string"==w["column-types"][T]&&(k=k[0]),re(),K(),Z()},error:Y});R=-1,"images-selection"in b&&(R=b["images-selection"]),Z(),m.length>0&&R>-1?e.ajax({type:"GET",url:i.default+"models/"+h+"/arraysets/data-table/data?hyperchunks=0/"+R+"/0:"+w["row-count"],success:function(e){N=e[0],K()},error:Y}):(N=void 0,K()),Q(),x.build_sliders()}}function Z(){if(!G&&w&&I&&b&&null!=S&&null!=C&&null!==R&&null!=O&&null!=z&&null!=p&&null!=f&&null!=A&&null!=m&&null!=g&&null!=v){G=!0,e("#table-pane .load-status").css("display","none");var t={api_root:i.default,mid:h,aid:"data-table",metadata:w,inputs:p,outputs:f,others:A,images:m,ratings:g,categories:v,"image-variable":R,"x-variable":S,"y-variable":C,"row-selection":O,hidden_simulations:z};void 0!==b.colormap&&b.colormap;if(t.colorscale=I,"sort-variable"in b&&"sort-order"in b){t["sort-variable"]=b["sort-variable"];var n=b["sort-order"];"ascending"==n?n="asc":"descending"==n&&(n="desc"),t["sort-order"]=b["sort-order"]}t["variable-selection"]="variable-selection"in b?[b["variable-selection"]]:[w["column-count"]-1],e("#table").table(t),e("#table").bind("variable-sort-changed",function(t,n,r){!function(t,n){e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/sort-order/"+t+"/"+n}),y.updateState({"sort-variable":t,"sort-order":n})}(n,r)}),e("#table").bind("x-selection-changed",function(e,t){ae(t)}),e("#table").bind("y-selection-changed",function(e,t){se(t)}),e("#table").bind("row-selection-changed",function(t,n){for(var i=[],r=0;r!=n.length;++r)i.push(n[r]);oe(i),e("#scatterplot").scatterplot("option","selection",i),e("#controls").controls("option","selection",i)}),e("#scatterplot").bind("selection-changed",function(t,n){e("#table").table("option","row-selection",n),e("#controls").controls("option","selection",n)}),e("#controls").bind("x-selection-changed",function(t,n){e("#table").table("option","x-variable",n)}),e("#controls").bind("y-selection-changed",function(t,n){e("#table").table("option","y-variable",n)}),e("#controls").bind("images-selection-changed",function(t,n){e("#table").table("option","image-variable",n)}),e("#table").bind("variable-selection-changed",function(t,n){e("#controls").controls("option","color-variable",n[0]),$(n[0])}),e("#controls").bind("color-selection-changed",function(t,n){e("#table").table("option","variable-selection",[Number(n)]),$(n)})}}function K(){if(!j&&b&&E&&L&&P&&k&&null!==N&&I&&null!=O&&null!=z&&null!=F&&null!==U&&null!==H&&null!==V){j=!0,e("#scatterplot-pane .load-status").css("display","none");var t=void 0!==b.colormap?b.colormap:"night";e("#scatterplot-pane").css("background",e("#color-switcher").colorswitcher("get_background",t).toString()),e("#scatterplot").scatterplot({model:n,indices:E,x_label:w["column-names"][S],y_label:w["column-names"][C],v_label:w["column-names"][T],x:L,y:P,v:k,x_string:"string"==w["column-types"][S],y_string:"string"==w["column-types"][C],v_string:"string"==w["column-types"][T],images:N,width:e("#scatterplot-pane").width(),height:e("#scatterplot-pane").height(),colorscale:I,selection:O,open_images:U,gradient:e("#color-switcher").colorswitcher("get_gradient_data",t),hidden_simulations:z,"auto-scale":F,"video-sync":H,"video-sync-time":V}),e("#scatterplot").bind("selection-changed",function(e,t){oe(t)}),e("#table").bind("x-selection-changed",function(e,t){de(t)}),e("#controls").bind("x-selection-changed",function(e,t){de(t)}),e("#table").bind("y-selection-changed",function(e,t){he(t)}),e("#controls").bind("y-selection-changed",function(e,t){he(t)}),e("#table").bind("images-selection-changed",function(e,t){ee(t)}),e("#controls").bind("images-selection-changed",function(e,t){ee(t)}),e("#scatterplot").bind("open-images-changed",function(t,n){!function(t){U=t,e("#controls").controls("option","open_images",U),e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/openimages/count/"+t.length}),y.updateState({"open-images-selection":t})}(n)}),e("#scatterplot").bind("video-sync-time",function(t,n){e("#controls").controls("option","video-sync-time",n),ue(n)}),e("#scatterplot").bind("jump_to_simulation",function(t,n){e("#table").table("option","jump_to_simulation",parseInt(n)),ue(V)})}}function Q(){if(!W&&b&&w&&null!==m&&null!=g&&null!=v&&null!=S&&null!=C&&null!=F&&null!==R&&null!=O&&null!=z&&E&&null!==U&null!==H&&null!==V){W=!0,x.notify_controls_ready();for(var t=[],n=[],r=[],o=0;o<w["column-count"];o++)"string"!=w["column-types"][o]&&t.push(o),-1==m.indexOf(o)&&w["column-count"]-1>o&&n.push(o),-1==m.indexOf(o)&&r.push(o);var a=w["column-count"]-1;"variable-selection"in b&&(a=[b["variable-selection"]]),e("#controls").controls({mid:h,model_name:window.model_name,aid:"data-table",metadata:w,x_variables:n,y_variables:n,image_variables:m,color_variables:r,rating_variables:g,category_variables:v,selection:O,"x-variable":S,"y-variable":C,"image-variable":R,"color-variable":a,"auto-scale":F,hidden_simulations:z,indices:E,open_images:U,"video-sync":H,"video-sync-time":V}),e("#table").bind("x-selection-changed",function(t,n){e("#controls").controls("option","x-variable",n)}),e("#table").bind("y-selection-changed",function(t,n){e("#controls").controls("option","y-variable",n)}),e("#table").bind("images-selection-changed",function(t,n){e("#controls").controls("option","image-variable",n)}),e("#controls").bind("set-value",function(t,n){!function(t,n,r){for(var o="",a="[",s=0;s<t.length;s++)s>0&&(o+="|",a+=","),o+=t[s],a+="["+r+"]";a+="]";var l=new Blob([a],{type:"text/html"}),c=new FormData;c.append("data",l),c.append("hyperchunks","0/"+n+"/"+o),e.ajax({type:"PUT",url:i.default+"models/"+h+"/arraysets/data-table/data",data:c,processData:!1,contentType:!1,success:function(t){e("#table").table("update_data"),n==S&&de(n),n==C&&he(n),pe([n],function(){n==T&&te(n)})},error:function(e,t,n){console.log("writing array data error")}})}(n.selection,n.variable,n.value)}),e("#controls").bind("x-selection-changed",function(e,t){ae(t)}),e("#controls").bind("y-selection-changed",function(e,t){se(t)}),e("#controls").bind("auto-scale",function(e,t){le(t)}),e("#controls").bind("video-sync",function(e,t){ce(t)}),e("#controls").bind("video-sync-time",function(t,n){e("#scatterplot").scatterplot("option","video-sync-time",n),ue(n)}),e("#controls").bind("jump-to-start",function(t){e("#scatterplot").scatterplot("jump_to_start")}),e("#controls").bind("frame-forward",function(t){e("#scatterplot").scatterplot("frame_forward")}),e("#controls").bind("play",function(t){e("#scatterplot").scatterplot("play")}),e("#controls").bind("pause",function(t){e("#scatterplot").scatterplot("pause")}),e("#controls").bind("frame-back",function(t){e("#scatterplot").scatterplot("frame_back")}),e("#controls").bind("jump-to-end",function(t){e("#scatterplot").scatterplot("jump_to_end")}),e("#controls").bind("hide-selection",function(t,n){for(var i=0;i<O.length;i++)-1==e.inArray(O[i],z)&&z.push(O[i]);ie(),D=z.slice()}),e("#controls").bind("hide-unselected",function(t,n){for(var i=0;i<O.length;i++){var r=e.inArray(O[i],z);-1!=r&&z.splice(r,1)}for(i=0;i<E.length;i++)-1==e.inArray(E[i],O)&&z.push(E[i]);ie(),D=z.slice()}),e("#controls").bind("show-selection",function(t,n){for(var i=0;i<O.length;i++){var r=e.inArray(O[i],z);-1!=r&&z.splice(r,1)}ie(),D=z.slice()}),e("#controls").bind("pin-selection",function(t,n){for(var i=[],r=0;r<O.length;r++){-1==e.inArray(O[r],z)&&i.push(O[r])}e("#scatterplot").scatterplot("pin",i)}),e("#controls").bind("show-all",function(e,t){for(;z.length>0;)z.pop();ie(),D=z.slice()}),e("#controls").bind("close-all",function(t,n){e("#scatterplot").scatterplot("close_all_simulations")})}}function $(t){if((T=Number(t))==w["column-count"]-1){for(var n=w["row-count"],r=0;r!=n;++r)k[r]=r;ne()}else te(t);e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/variable/"+t}),y.updateState({"variable-selection":t})}function ee(t){R=Number(t),N=[],R>-1?e.ajax({type:"GET",url:i.default+"models/"+h+"/arraysets/data-table/data?hyperchunks=0/"+R+"/0:"+w["row-count"],success:function(t){N=t[0],e("#scatterplot").scatterplot("option","images",N)},error:Y}):e("#scatterplot").scatterplot("option","images",N),function(t){e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/images/"+t}),y.updateState({"images-selection":t})}(R)}function te(e){d.get_model_array_attribute({api_root:i.default,mid:h,aid:"data-table",array:0,attribute:e,success:function(t){k=t,"string"==w["column-types"][e]&&(k=k[0]),ne()},error:Y})}function ne(){re(),e("#table").table("option","colorscale",I),e("#scatterplot").scatterplot("update_color_scale_and_v",{v:k,v_string:"string"==w["column-types"][T],colorscale:I}),e("#scatterplot").scatterplot("option","v_label",w["column-names"][T])}function ie(){e.ajax({type:"POST",url:i.default+"events/models/"+h+"/hidden/count/"+z.length}),y.updateState({"hidden-simulations":z,"manually-hidden-simulations":D}),F?(re(),e("#table").data("parameter_image-table")&&e("#table").table("option",{hidden_simulations:z,colorscale:I}),e("#scatterplot").data("parameter_image-scatterplot")&&e("#scatterplot").scatterplot("option",{hidden_simulations:z,colorscale:I})):(e("#table").data("parameter_image-table")&&e("#table").table("option","hidden_simulations",z),e("#scatterplot").data("parameter_image-scatterplot")&&e("#scatterplot").scatterplot("option","hidden_simulations",z)),e("#controls").data("parameter_image-controls")&&e("#controls").controls("option","hidden_simulations",z)}function re(){var t=w["column-types"][T];if(B=F?function(e){z.sort(c.default.ascending);for(var t=z.length,n=function(e){if(e.length>1)return Array.apply([],e);if(1==e.length)return[e[0]];return[]}(e),i=t-1;i>=0;i--)n.splice(z[i],1);return n}(k):k,"string"!=t)I=e("#color-switcher").colorswitcher("get_color_scale",void 0,c.default.min(B),c.default.max(B));else{var n=c.default.set(B).values().sort();I=e("#color-switcher").colorswitcher("get_color_scale_ordinal",void 0,n)}}function oe(t){e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/simulation/count/"+t.length}),y.updateState({"simulation-selection":t}),O=t}function ae(t){e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/x/"+t}),y.updateState({"x-selection":t}),S=Number(t)}function se(t){e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/y/"+t}),y.updateState({"y-selection":t}),C=Number(t)}function le(t){F=t,z.length>0?(re(),e("#table").table("option","colorscale",I),e("#scatterplot").scatterplot("option",{colorscale:I,"auto-scale":F})):e("#scatterplot").scatterplot("option","auto-scale",F),e.ajax({type:"POST",url:i.default+"events/models/"+h+"/auto-scale/"+F}),y.updateState({"auto-scale":F})}function ce(t){H=t,e("#scatterplot").scatterplot("option","video-sync",H),e.ajax({type:"POST",url:i.default+"events/models/"+h+"/video-sync/"+H}),y.updateState({"video-sync":H})}function ue(t){V=t,e.ajax({type:"POST",url:i.default+"events/models/"+h+"/video-sync-time/"+V}),y.updateState({"video-sync-time":V})}function de(t){d.get_model_array_attribute({api_root:i.default,mid:h,aid:"data-table",array:0,attribute:t,success:function(n){e("#scatterplot").scatterplot("option",{x_string:"string"==w["column-types"][t],x:"string"==w["column-types"][t]?n[0]:n,x_label:w["column-names"][t]})},error:Y})}function he(t){d.get_model_array_attribute({api_root:i.default,mid:h,aid:"data-table",array:0,attribute:t,success:function(n){e("#scatterplot").scatterplot("option",{y_string:"string"==w["column-types"][t],y:"string"==w["column-types"][t]?n[0]:n,y_label:w["column-names"][t]})},error:Y})}function pe(e,t){r.default.get_model_arrayset_metadata({mid:h,aid:"data-table",statistics:"0/"+e.join("|"),success:function(e){for(var n=e.statistics,i=0;i!=n.length;++i)M[n[i].attribute]={min:n[i].min,max:n[i].max};t()}})}function fe(){for(var t,n=x.allFilters,i=0;i<n().length;i++)"numeric"==(t=n()[i]).type()?(t.max.subscribe(function(e){me(e)}),t.min.subscribe(function(e){me(e)}),t.rateLimitedHigh.subscribe(function(e){me(e)}),t.rateLimitedLow.subscribe(function(e){me(e)}),t.invert.subscribe(function(e){me(e)})):"category"==t.type()&&t.selected.subscribe(function(e){me(e)}),t.nulls.subscribe(function(e){me(e)});e("#controls").controls("option","disable_hide_show",x.active_filters().length>0),x.active_filters.subscribe(function(t){me(t),e("#controls").data("parameter_image-controls")&&e("#controls").controls("option","disable_hide_show",t.length>0)})}function me(n){for(var r,o,a=x.allFilters,s=(x.active_filters,[]),l=0;l<a().length;l++){var c=a()[l];if(c.active()){if(r="a"+c.index(),"numeric"==c.type())c.invert()?s.push("("+r+" >= "+c.high()+" and "+r+" <= "+c.max()+" or "+r+" <= "+c.low()+" and "+r+" >= "+c.min()+")"):c.invert()||s.push("("+r+" <= "+c.high()+" and "+r+" >= "+c.low()+")");else if("category"==c.type()){o=[];var u="";if(0==c.selected().length)o.push('""');else for(var d=0;d<c.selected().length;d++)u="string"==w["column-types"][c.index()]?'"':"",o.push(u+c.selected()[d].value()+u);s.push("("+r+" in ["+o.join(", ")+"])")}c.nulls()&&(s[s.length-1]="("+s[s.length-1]+" or "+r+" == nan)")}}if(null!=(_=s.join(" and "))&&""!=_)X&&4!=X.readyState&&(X.abort(),console.log("aborted")),X=e.ajax({type:"POST",url:i.default+"models/"+h+"/arraysets/data-table/data",data:(0,t.default)({hyperchunks:"0/index(0)|"+_+"/..."}),contentType:"application/json",success:function(e){for(var t=e[0],n=e[1];z.length>0;)z.pop();for(var i=0;i<n.length;i++)n[i]||z.push(t[i]);z.sort(function(e,t){return e-t}),ie()},error:function(e,t,n){console.log("error",e,t,n)}});else{for(;z.length>0;)z.pop();for(l=0;l<D.length;l++)z.push(D[l]);ie()}}q=e("#parameter-image-plus-layout").layout({north:{size:28,resizable:!1},center:{},west:{initClosed:!0,size:e("#parameter-image-plus-layout").width()/4,onresize:function(e,t,n,i,r){x.slidersPaneHeight(n.innerHeight)}},south:{size:e("#parameter-image-plus-layout").height()/4,resizeWhileDragging:!1,onresize:function(){e("#table").css("height",e("#table-pane").height()),e("#table").table("resize_canvas")}}}),e("#model-pane").layout({center:{resizeWhileDragging:!1,onresize:function(){e("#scatterplot").data("parameter_image-scatterplot")&&e("#scatterplot").scatterplot("option",{width:e("#scatterplot-pane").width(),height:e("#scatterplot-pane").height()})}}}),function t(){e.ajax({type:"GET",url:i.default+"models/"+h,success:function(r){n=r,y=o.default.create(n.project,n._id),p=n["artifact:input-columns"],f=n["artifact:output-columns"],m=n["artifact:image-columns"],g=void 0==n["artifact:rating-columns"]?[]:n["artifact:rating-columns"],v=void 0==n["artifact:category-columns"]?[]:n["artifact:category-columns"],(x=new l.default(h,y,q,p,f,m,g,v)).active_filters_ready()?fe():x.active_filters_ready.subscribe(function(e){e&&(fe(),this.dispose())}),"waiting"!==n.state&&"running"!==n.state?"closed"===n.state&&null===n.result||"failed"!==n.result&&(e(".slycat-navbar-alert").remove(),"waiting"!=n.state&&"running"!=n.state&&("closed"==n.state&&null===n.result||"failed"!=n.result&&(e(".load-status").text("Loading data."),e.ajax({url:i.default+"models/"+h+"/arraysets/data-table/metadata?arrays=0",contentType:"application/json",success:function(e){var t=e.arrays[0];(w={})["row-count"]=t.shape[0],w["column-count"]=t.attributes.length+1,w["column-names"]=[],w["column-types"]=[];for(var n=0;n<t.attributes.length;n++)w["column-names"].push(t.attributes[n].name),w["column-types"].push(t.attributes[n].type);w["column-names"].push("Index"),w["column-types"].push("int64"),x.set_table_metadata(w),M=new Array,pe(c.default.range(w["column-count"]-1),function(){M[w["column-count"]-1]={max:w["row-count"]-1,min:0},J()})},error:Y}),y.getState(function(t){b=t,x.set_bookmark(b),Q(),function(){var t=void 0!==b.colormap?b.colormap:"night";e("#color-switcher").colorswitcher({colormap:t}),e("#color-switcher").bind("colormap-changed",function(t,n){!function(t){re(),e("#table").table("option","colorscale",I),e("#scatterplot-pane").css("background",e("#color-switcher").colorswitcher("get_background",t).toString()),e("#scatterplot").scatterplot("option",{colorscale:I,gradient:e("#color-switcher").colorswitcher("get_gradient_data",t)}),e.ajax({type:"POST",url:i.default+"events/models/"+h+"/select/colormap/"+t}),y.updateState({colormap:t})}(n)})}(),J(),new s.default(h,y,b)})))):setTimeout(t,5e3)},error:function(e,t,n){window.alert("Error retrieving model: "+n)}})}()})}).call(this,n(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i,r,o,a=u(n(229)),s=u(n(100)),l=u(n(62)),c=u(n(228));function u(e){return e&&e.__esModule?e:{default:e}}!function(){function n(e,t){return t>e?-1:e>t?1:e>=t?0:NaN}function u(e){return null!=e&&!isNaN(e)}function d(e){return{left:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i},right:function(t,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=t.length);r>i;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}function h(e){return e.length}function p(e,t){try{for(var n in t)(0,c.default)(e.prototype,n,{value:t[n],enumerable:!1})}catch(n){e.prototype=t}}function f(){}function m(e){return co+e in this}function g(){var e=[];return this.forEach(function(t){e.push(t)}),e}function v(){var e=0;for(var t in this)t.charCodeAt(0)===uo&&++e;return e}function A(){for(var e in this)if(e.charCodeAt(0)===uo)return!1;return!0}function y(){}function b(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function x(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,i=ho.length;i>n;++n){var r=ho[n]+t;if(r in e)return r}}function _(){}function w(){}function M(e){function t(){for(var t,i=n,r=-1,o=i.length;++r<o;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new f;return t.on=function(t,r){var o,a=i.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function E(){Zr.event.preventDefault()}function S(){for(var e,t=Zr.event;e=t.sourceEvent;)t=e;return t}function C(e){for(var t=new w,n=0,i=arguments.length;++n<i;)t[arguments[n]]=M(t);return t.of=function(n,i){return function(r){try{var o=r.sourceEvent=Zr.event;r.target=e,Zr.event=r,t[r.type].apply(n,i)}finally{Zr.event=o}}},t}function T(e){return fo(e,yo),e}function R(e){return"function"==typeof e?e:function(){return mo(e,this)}}function L(e){return"function"==typeof e?e:function(){return go(e,this)}}function P(e,t){return e=Zr.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function k(e){return e.trim().replace(/\s+/g," ")}function N(e){return new RegExp("(?:^|\\s+)"+Zr.requote(e)+"(?:\\s+|$)","g")}function O(e){return e.trim().split(/^|\s+/)}function z(e,t){var n=(e=O(e).map(D)).length;return"function"==typeof t?function(){for(var i=-1,r=t.apply(this,arguments);++i<n;)e[i](this,r)}:function(){for(var i=-1;++i<n;)e[i](this,t)}}function D(e){var t=N(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",k(r+" "+e))):n.setAttribute("class",k(r.replace(t," ")))}}function I(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}:function(){this.style.setProperty(e,t,n)}}function F(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function B(e){return"function"==typeof e?e:(e=Zr.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function U(e){return{__data__:e}}function H(e){return function(){return Ao(this,e)}}function V(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function G(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,o=e[n],a=0,s=o.length;s>a;a++)(r=o[a])&&t(r,a,n);return e}function j(e){return fo(e,xo),e}function W(){var e=this.__transition__;e&&++e.active}function q(e,t,n){function i(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}var r="__on"+e,o=e.indexOf("."),a=X;o>0&&(e=e.substring(0,o));var s=wo.get(e);return s&&(e=s,a=Y),o?t?function(){var o=a(t,Qr(arguments));i.call(this),this.addEventListener(e,this[r]=o,o.$=n),o._=t}:i:t?_:function(){var t,n=new RegExp("^__on([^.]+)"+Zr.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}}function X(e,t){return function(n){var i=Zr.event;Zr.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Zr.event=i}}}function Y(e,t){var n=X(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function J(){var e=".dragsuppress-"+ ++Eo,t="click"+e,n=Zr.select(to).on("touchmove"+e,E).on("dragstart"+e,E).on("selectstart"+e,E);if(Mo){var i=eo.style,r=i[Mo];i[Mo]="none"}return function(o){function a(){n.on(t,null)}n.on(e,null),Mo&&(i[Mo]=r),o&&(n.on(t,function(){E(),a()},!0),setTimeout(a,0))}}function Z(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}function K(){return Zr.event.changedTouches[0].identifier}function Q(){return Zr.event.target}function $(){return to}function ee(e){return e>0?1:0>e?-1:0}function te(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ne(e){return e>1?0:-1>e?So:Math.acos(e)}function ie(e){return e>1?To:-1>e?-To:Math.asin(e)}function re(e){return((e=Math.exp(e))+1/e)/2}function oe(e){return(e=Math.sin(e/2))*e}function ae(){}function se(e,t,n){return new le(e,t,n)}function le(e,t,n){this.h=e,this.s=t,this.l=n}function ce(e,t,n){function i(e){return Math.round(255*function(e){return e>360?e-=360:0>e&&(e+=360),60>e?r+(o-r)*e/60:180>e?o:240>e?r+(o-r)*(240-e)/60:r}(e))}var r,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,r=2*(n=0>n?0:n>1?1:n)-(o=.5>=n?n*(1+t):n+t-n*t),_e(i(e+120),i(e),i(e-120))}function ue(e,t,n){return new de(e,t,n)}function de(e,t,n){this.h=e,this.c=t,this.l=n}function he(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),pe(n,Math.cos(e*=Po)*t,Math.sin(e)*t)}function pe(e,t,n){return new fe(e,t,n)}function fe(e,t,n){this.l=e,this.a=t,this.b=n}function me(e,t,n){var i=(e+16)/116,r=i+t/500,o=i-n/200;return _e(ye(3.2404542*(r=ve(r)*Ho)-1.5371385*(i=ve(i)*Vo)-.4985314*(o=ve(o)*Go)),ye(-.969266*r+1.8760108*i+.041556*o),ye(.0556434*r-.2040259*i+1.0572252*o))}function ge(e,t,n){return e>0?ue(Math.atan2(n,t)*ko,Math.sqrt(t*t+n*n),e):ue(NaN,NaN,e)}function ve(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function Ae(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ye(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function be(e){return _e(e>>16,255&e>>8,255&e)}function xe(e){return be(e)+""}function _e(e,t,n){return new we(e,t,n)}function we(e,t,n){this.r=e,this.g=t,this.b=n}function Me(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Ee(e,t,n){var i,r,o,a=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(Re(r[0]),Re(r[1]),Re(r[2]))}return(o=qo.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.substring(1),16))||(4===e.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function Se(e,t,n){var i,r,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(r=.5>l?s/(a+o):s/(2-a-o),i=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,i*=60):(i=NaN,r=l>0&&1>l?0:i),se(i,r,l)}function Ce(e,t,n){var i=Ae((.4124564*(e=Te(e))+.3575761*(t=Te(t))+.1804375*(n=Te(n)))/Ho),r=Ae((.2126729*e+.7151522*t+.072175*n)/Vo);return pe(116*r-16,500*(i-r),200*(r-Ae((.0193339*e+.119192*t+.9503041*n)/Go)))}function Te(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Re(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Le(e){return"function"==typeof e?e:function(){return e}}function Pe(e){return e}function ke(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),Ne(t,n,e,i)}}function Ne(e,t,n,i){function r(){var e,t=l.status;if(!t&&l.responseText||t>=200&&300>t||304===t){try{e=n.call(o,l)}catch(e){return void a.error.call(o,e)}a.load.call(o,e)}else a.error.call(o,l)}var o={},a=Zr.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,c=null;return!to.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=Zr.event;Zr.event=e;try{a.progress.call(o,l)}finally{Zr.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(c=e,o):c},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(Qr(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var u in s)l.setRequestHeader(u,s[u]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=r&&o.on("error",r).on("load",function(e){r(null,e)}),a.beforesend.call(o,l),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},Zr.rebind(o,a,"on"),null==i?o:o.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(i))}function Oe(){var e=ze(),t=De()-e;t>24?(isFinite(t)&&(clearTimeout(Zo),Zo=setTimeout(Oe,t)),Jo=0):(Jo=1,Qo(Oe))}function ze(){var e=Date.now();for(Ko=Xo;Ko;)e>=Ko.t&&(Ko.f=Ko.c(e-Ko.t)),Ko=Ko.n;return e}function De(){for(var e,t=Xo,n=1/0;t;)t.f?t=e?e.n=t.n:Xo=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Yo=e,n}function Ie(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Fe(e){return e+""}function Be(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ue(e,t,n){function i(t){var n=e(t),i=o(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new ia(n-1)),1),n}function o(e,n){return t(e=new ia(+e),n),e}function a(e,i,o){var a=r(e),s=[];if(o>1)for(;i>a;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;i>a;)s.push(new Date(+a)),t(a,1);return s}e.floor=e,e.round=i,e.ceil=r,e.offset=o,e.range=a;var s=e.utc=He(e);return s.floor=s,s.round=He(i),s.ceil=He(r),s.offset=He(o),s.range=function(e,t,n){try{ia=Be;var i=new Be;return i._=e,a(i,t,n)}finally{ia=Date}},e}function He(e){return function(t,n){try{ia=Be;var i=new Be;return i._=t,e(i,n)._}finally{ia=Date}}}function Ve(e,t,n){var i=0>e?"-":"",r=(i?-e:e)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(t)+r:r)}function Ge(e){return new RegExp("^(?:"+e.map(Zr.requote).join("|")+")","i")}function je(e){for(var t=new f,n=-1,i=e.length;++n<i;)t.set(e[n].toLowerCase(),n);return t}function We(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function qe(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n));return i?(e.U=+i[0],n+i[0].length):-1}function Xe(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n));return i?(e.W=+i[0],n+i[0].length):-1}function Ye(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Je(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+2));return i?(e.y=function(e){return e+(e>68?1900:2e3)}(+i[0]),n+i[0].length):-1}function Ze(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=-t,n+5):-1}function Ke(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Qe(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function $e(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+3));return i?(e.j=+i[0],n+i[0].length):-1}function et(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function tt(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function nt(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function it(e,t,n){aa.lastIndex=0;var i=aa.exec(t.substring(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function rt(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=~~(lo(t)/60),r=lo(t)%60;return n+Ve(i,"0",2)+Ve(r,"0",2)}function ot(e,t,n){sa.lastIndex=0;var i=sa.exec(t.substring(n,n+1));return i?n+i[0].length:-1}function at(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,i=e[n];!i[1](t);)i=e[++n];return i[0](t)}}function st(){}function lt(e,t,n){var i=n.s=e+t,r=i-e,o=i-r;n.t=e-o+(t-r)}function ct(e,t){e&&da.hasOwnProperty(e.type)&&da[e.type](e,t)}function ut(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function dt(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)ut(e[n],t,1);t.polygonEnd()}function ht(){function e(e,t){t=t*Po/2+So/4;var n=(e*=Po)-i,a=n>=0?1:-1,s=a*n,l=Math.cos(t),c=Math.sin(t),u=o*c,d=r*l+u*Math.cos(s),h=u*a*Math.sin(s);pa.add(Math.atan2(h,d)),i=e,r=l,o=c}var t,n,i,r,o;fa.point=function(a,s){fa.point=e,i=(t=a)*Po,r=Math.cos(s=(n=s)*Po/2+So/4),o=Math.sin(s)},fa.lineEnd=function(){e(t,n)}}function pt(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function ft(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function At(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function yt(e){return[Math.atan2(e[1],e[0]),ie(e[2])]}function bt(e,t){return lo(e[0]-t[0])<Ro&&lo(e[1]-t[1])<Ro}function xt(e,t){e*=Po;var n=Math.cos(t*=Po);_t(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function _t(e,t,n){va+=(e-va)/++ma,Aa+=(t-Aa)/ma,ya+=(n-ya)/ma}function wt(){function e(e,r){e*=Po;var o=Math.cos(r*=Po),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*l-i*s)*c+(c=i*a-t*l)*c+(c=t*s-n*a)*c),t*a+n*s+i*l);ga+=c,ba+=c*(t+(t=a)),xa+=c*(n+(n=s)),_a+=c*(i+(i=l)),_t(t,n,i)}var t,n,i;Sa.point=function(r,o){r*=Po;var a=Math.cos(o*=Po);t=a*Math.cos(r),n=a*Math.sin(r),i=Math.sin(o),Sa.point=e,_t(t,n,i)}}function Mt(){Sa.point=xt}function Et(){function e(e,t){e*=Po;var n=Math.cos(t*=Po),a=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),c=r*l-o*s,u=o*a-i*l,d=i*s-r*a,h=Math.sqrt(c*c+u*u+d*d),p=i*a+r*s+o*l,f=h&&-ne(p)/h,m=Math.atan2(h,p);wa+=f*c,Ma+=f*u,Ea+=f*d,ga+=m,ba+=m*(i+(i=a)),xa+=m*(r+(r=s)),_a+=m*(o+(o=l)),_t(i,r,o)}var t,n,i,r,o;Sa.point=function(a,s){t=a,n=s,Sa.point=e,a*=Po;var l=Math.cos(s*=Po);i=l*Math.cos(a),r=l*Math.sin(a),o=Math.sin(s),_t(i,r,o)},Sa.lineEnd=function(){e(t,n),Sa.lineEnd=Mt,Sa.point=xt}}function St(){return!0}function Ct(e,t,n,i,r){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],i=e[t];if(bt(n,i)){r.lineStart();for(var s=0;t>s;++s)r.point((n=e[s])[0],n[1]);return void r.lineEnd()}var l=new Rt(n,e,null,!0),c=new Rt(n,null,l,!1);l.o=c,o.push(l),a.push(c),c=new Rt(i,null,l=new Rt(i,e,null,!1),!0),l.o=c,o.push(l),a.push(c)}}),a.sort(t),Tt(o),Tt(a),o.length){for(var s=0,l=n,c=a.length;c>s;++s)a[s].e=l=!l;for(var u,d,h=o[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(s=0,c=u.length;c>s;++s)r.point((d=u[s])[0],d[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(s=(u=p.p.z).length-1;s>=0;--s)r.point((d=u[s])[0],d[1]);else i(p.x,p.p.x,-1,r);p=p.p}u=(p=p.o).z,f=!f}while(!p.v);r.lineEnd()}}}function Tt(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function Rt(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Lt(e,t,n,i){return function(r,o){function a(t,n){var i=r(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function s(e,t){var n=r(e,t);g.point(n[0],n[1])}function l(){A.point=s,g.lineStart()}function c(){A.point=a,g.lineEnd()}function u(e,t){m.push([e,t]);var n=r(e,t);b.point(n[0],n[1])}function d(){b.lineStart(),m=[]}function h(){u(m[0][0],m[0][1]),b.lineEnd();var e,t=b.clean(),n=y.buffer(),i=n.length;if(m.pop(),f.push(m),m=null,i)if(1&t){var r,a=-1;if((i=(e=n[0]).length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++a<i;)o.point((r=e[a])[0],r[1]);o.lineEnd()}}else i>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Pt))}var p,f,m,g=t(o),v=r.invert(i[0],i[1]),A={point:a,lineStart:l,lineEnd:c,polygonStart:function(){A.point=u,A.lineStart=d,A.lineEnd=h,p=[],f=[]},polygonEnd:function(){A.point=a,A.lineStart=l,A.lineEnd=c,p=Zr.merge(p);var e=function(e,t){var n=e[0],i=e[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;pa.reset();for(var s=0,l=t.length;l>s;++s){var c=t[s],u=c.length;if(u)for(var d=c[0],h=d[0],p=d[1]/2+So/4,f=Math.sin(p),m=Math.cos(p),g=1;;){g===u&&(g=0);var v=(e=c[g])[0],A=e[1]/2+So/4,y=Math.sin(A),b=Math.cos(A),x=v-h,_=x>=0?1:-1,w=_*x,M=w>So,E=f*y;if(pa.add(Math.atan2(E*_*Math.sin(w),m*b+E*Math.cos(w))),o+=M?x+_*Co:x,M^h>=n^v>=n){var S=mt(pt(d),pt(e));At(S);var C=mt(r,S);At(C);var T=(M^x>=0?-1:1)*ie(C[2]);(i>T||i===T&&(S[0]||S[1]))&&(a+=M^x>=0?1:-1)}if(!g++)break;h=v,f=y,m=b,d=e}}return(-Ro>o||Ro>o&&0>pa)^1&a}(v,f);p.length?(x||(o.polygonStart(),x=!0),Ct(p,Nt,e,n,o)):e&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),p=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y=kt(),b=t(y),x=!1;return A}}function Pt(e){return e.length>1}function kt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:_,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Nt(e,t){return((e=e.x)[0]<0?e[1]-To-Ro:To-e[1])-((t=t.x)[0]<0?t[1]-To-Ro:To-t[1])}function Ot(e,t,n,i){return function(r){var o,a=r.a,s=r.b,l=a.x,c=a.y,u=0,d=1,h=s.x-l,p=s.y-c;if(o=e-l,h||!(o>0)){if(o/=h,0>h){if(u>o)return;d>o&&(d=o)}else if(h>0){if(o>d)return;o>u&&(u=o)}if(o=n-l,h||!(0>o)){if(o/=h,0>h){if(o>d)return;o>u&&(u=o)}else if(h>0){if(u>o)return;d>o&&(d=o)}if(o=t-c,p||!(o>0)){if(o/=p,0>p){if(u>o)return;d>o&&(d=o)}else if(p>0){if(o>d)return;o>u&&(u=o)}if(o=i-c,p||!(0>o)){if(o/=p,0>p){if(o>d)return;o>u&&(u=o)}else if(p>0){if(u>o)return;d>o&&(d=o)}return u>0&&(r.a={x:l+u*h,y:c+u*p}),1>d&&(r.b={x:l+d*h,y:c+d*p}),r}}}}}}function zt(e,t,n,i){function r(i,r){return lo(i[0]-e)<Ro?r>0?0:3:lo(i[0]-n)<Ro?r>0?2:1:lo(i[1]-t)<Ro?r>0?1:0:r>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(o,s,l,c){var u=0,d=0;if(null==o||(u=r(o,l))!==(d=r(s,l))||a(o,s)<0^l>0)do{c.point(0===u||3===u?e:n,u>1?i:t)}while((u=(u+l+4)%4)!==d);else c.point(s[0],s[1])}function c(r,o){return r>=e&&n>=r&&o>=t&&i>=o}function u(e,t){c(e,t)&&s.point(e,t)}function d(e,t){var n=c(e=Math.max(-Ta,Math.min(Ta,e)),t=Math.max(-Ta,Math.min(Ta,t)));if(p&&f.push([e,t]),x)m=e,g=t,v=n,x=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&b)s.point(e,t);else{var i={a:{x:A,y:y},b:{x:e,y:t}};E(i)?(b||(s.lineStart(),s.point(i.a.x,i.a.y)),s.point(i.b.x,i.b.y),n||s.lineEnd(),_=!1):n&&(s.lineStart(),s.point(e,t),_=!1)}A=e,y=t,b=n}var h,p,f,m,g,v,A,y,b,x,_,w=s,M=kt(),E=Ot(e,t,n,i),S={point:u,lineStart:function(){S.point=d,p&&p.push(f=[]),x=!0,b=!1,A=y=NaN},lineEnd:function(){h&&(d(m,g),v&&b&&M.rejoin(),h.push(M.buffer())),S.point=u,b&&s.lineEnd()},polygonStart:function(){s=M,h=[],p=[],_=!0},polygonEnd:function(){s=w,h=Zr.merge(h);var t=function(e){for(var t=0,n=p.length,i=e[1],r=0;n>r;++r)for(var o,a=1,s=p[r],l=s.length,c=s[0];l>a;++a)o=s[a],c[1]<=i?o[1]>i&&te(c,o,e)>0&&++t:o[1]<=i&&te(c,o,e)<0&&--t,c=o;return 0!==t}([e,i]),n=_&&t,r=h.length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),r&&Ct(h,o,t,l,s),s.polygonEnd()),h=p=f=null}};return S}}function Dt(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function It(e){var t=0,n=So/3,i=Jt(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*So/180,n=e[1]*So/180):[t/So*180,n/So*180]},r}function Ft(e,t){function n(e,t){var n=Math.sqrt(o-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,o=1+i*(2*r-i),a=Math.sqrt(o)/r;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,ie((o-(e*e+n*n)*r*r)/(2*r))]},n}function Bt(){function e(e,t){La+=r*e-i*t,i=e,r=t}var t,n,i,r;za.point=function(o,a){za.point=e,t=i=o,n=r=a},za.lineEnd=function(){e(t,n)}}function Ut(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ht(e,t){va+=e,Aa+=t,++ya}function Vt(){function e(e,i){var r=e-t,o=i-n,a=Math.sqrt(r*r+o*o);ba+=a*(t+e)/2,xa+=a*(n+i)/2,_a+=a,Ht(t=e,n=i)}var t,n;Ia.point=function(i,r){Ia.point=e,Ht(t=i,n=r)}}function Gt(){Ia.point=Ht}function jt(){function e(e,t){var n=e-i,o=t-r,a=Math.sqrt(n*n+o*o);ba+=a*(i+e)/2,xa+=a*(r+t)/2,_a+=a,wa+=(a=r*e-i*t)*(i+e),Ma+=a*(r+t),Ea+=3*a,Ht(i=e,r=t)}var t,n,i,r;Ia.point=function(o,a){Ia.point=e,Ht(t=i=o,n=r=a)},Ia.lineEnd=function(){e(t,n)}}function Wt(e){function t(e){return(s?i:n)(e)}function n(t){return Xt(t,function(n,i){n=e(n,i),t.point(n[0],n[1])})}function i(t){function n(n,i){n=e(n,i),t.point(n[0],n[1])}function i(){A=NaN,w.point=o,t.lineStart()}function o(n,i){var o=pt([n,i]),a=e(n,i);r(A,y,v,b,x,_,A=a[0],y=a[1],v=n,b=o[0],x=o[1],_=o[2],s,t),t.point(A,y)}function a(){w.point=n,t.lineEnd()}function l(){i(),w.point=c,w.lineEnd=u}function c(e,t){o(d=e,t),h=A,p=y,f=b,m=x,g=_,w.point=o}function u(){r(A,y,v,b,x,_,h,p,d,f,m,g,s,t),w.lineEnd=a,a()}var d,h,p,f,m,g,v,A,y,b,x,_,w={point:n,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),w.lineStart=l},polygonEnd:function(){t.polygonEnd(),w.lineStart=i}};return w}function r(t,n,i,s,l,c,u,d,h,p,f,m,g,v){var A=u-t,y=d-n,b=A*A+y*y;if(b>4*o&&g--){var x=s+p,_=l+f,w=c+m,M=Math.sqrt(x*x+_*_+w*w),E=Math.asin(w/=M),S=lo(lo(w)-1)<Ro||lo(i-h)<Ro?(i+h)/2:Math.atan2(_,x),C=e(S,E),T=C[0],R=C[1],L=T-t,P=R-n,k=y*L-A*P;(k*k/b>o||lo((A*L+y*P)/b-.5)>.3||a>s*p+l*f+c*m)&&(r(t,n,i,s,l,c,T,R,S,x/=M,_/=M,w,g,v),v.point(T,R),r(T,R,S,x,_,w,u,d,h,p,f,m,g,v))}}var o=.5,a=Math.cos(30*Po),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function qt(e){this.stream=e}function Xt(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Yt(e){return Jt(function(){return e})()}function Jt(e){function t(e){return[(e=s(e[0]*Po,e[1]*Po))[0]*h+l,c-e[1]*h]}function n(e){return(e=s.invert((e[0]-l)/h,(c-e[1])/h))&&[e[0]*ko,e[1]*ko]}function i(){s=Dt(a=$t(v,A,y),o);var e=o(m,g);return l=p-e[0]*h,c=f+e[1]*h,r()}function r(){return u&&(u.valid=!1,u=null),t}var o,a,s,l,c,u,d=Wt(function(e,t){return[(e=o(e,t))[0]*h+l,c-e[1]*h]}),h=150,p=480,f=250,m=0,g=0,v=0,A=0,y=0,b=Ca,x=Pe,_=null,w=null;return t.stream=function(e){return u&&(u.valid=!1),(u=Zt(b(a,d(x(e))))).valid=!0,u},t.clipAngle=function(e){return arguments.length?(b=null==e?(_=e,Ca):function(e){function t(e,t){return Math.cos(e)*Math.cos(t)>r}function n(e,t,n){var i=[1,0,0],o=mt(pt(e),pt(t)),a=ft(o,o),s=o[0],l=a-s*s;if(!l)return!n&&e;var c=r*a/l,u=-r*s/l,d=mt(i,o),h=vt(i,c);gt(h,vt(o,u));var p=d,f=ft(h,p),m=ft(p,p),g=f*f-m*(ft(h,h)-1);if(!(0>g)){var v=Math.sqrt(g),A=vt(p,(-f-v)/m);if(gt(A,h),A=yt(A),!n)return A;var y,b=e[0],x=t[0],_=e[1],w=t[1];b>x&&(y=b,b=x,x=y);var M=x-b,E=lo(M-So)<Ro;if(!E&&_>w&&(y=_,_=w,w=y),E||Ro>M?E?_+w>0^A[1]<(lo(A[0]-b)<Ro?_:w):_<=A[1]&&A[1]<=w:M>So^(b<=A[0]&&A[0]<=x)){var S=vt(p,(-f+v)/m);return gt(S,h),[A,yt(S)]}}}function i(t,n){var i=o?e:So-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var r=Math.cos(e),o=r>0,a=lo(r)>Ro;return Lt(t,function(e){var r,s,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,h){var p,f=[d,h],m=t(d,h),g=o?m?0:i(d,h):m?i(d+(0>d?So:-So),h):0;if(!r&&(c=l=m)&&e.lineStart(),m!==l&&(p=n(r,f),(bt(r,p)||bt(f,p))&&(f[0]+=Ro,f[1]+=Ro,m=t(f[0],f[1]))),m!==l)u=0,m?(e.lineStart(),p=n(f,r),e.point(p[0],p[1])):(p=n(r,f),e.point(p[0],p[1]),e.lineEnd()),r=p;else if(a&&r&&o^m){var v;g&s||!(v=n(f,r,!0))||(u=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!m||r&&bt(r,f)||e.point(f[0],f[1]),r=f,l=m,s=g},lineEnd:function(){l&&e.lineEnd(),r=null},clean:function(){return u|(c&&l)<<1}}},rn(e,6*Po),o?[0,-e]:[-So,e-So])}((_=+e)*Po),r()):_},t.clipExtent=function(e){return arguments.length?(w=e,x=e?zt(e[0][0],e[0][1],e[1][0],e[1][1]):Pe,r()):w},t.scale=function(e){return arguments.length?(h=+e,i()):h},t.translate=function(e){return arguments.length?(p=+e[0],f=+e[1],i()):[p,f]},t.center=function(e){return arguments.length?(m=e[0]%360*Po,g=e[1]%360*Po,i()):[m*ko,g*ko]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Po,A=e[1]%360*Po,y=e.length>2?e[2]%360*Po:0,i()):[v*ko,A*ko,y*ko]},Zr.rebind(t,d,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,i()}}function Zt(e){return Xt(e,function(t,n){e.point(t*Po,n*Po)})}function Kt(e,t){return[e,t]}function Qt(e,t){return[e>So?e-Co:-So>e?e+Co:e,t]}function $t(e,t,n){return e?t||n?Dt(tn(e),nn(t,n)):tn(e):t||n?nn(t,n):Qt}function en(e){return function(t,n){return[(t+=e)>So?t-Co:-So>t?t+Co:t,n]}}function tn(e){var t=en(e);return t.invert=en(-e),t}function nn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*i+s*r;return[Math.atan2(l*o-u*a,s*i-c*r),ie(u*o+l*a)]}var i=Math.cos(e),r=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,c=Math.sin(t),u=c*o-l*a;return[Math.atan2(l*o+c*a,s*i+u*r),ie(u*i-s*r)]},n}function rn(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,o,a,s){var l=a*t;null!=r?(r=on(n,r),o=on(n,o),(a>0?o>r:r>o)&&(r+=a*Co)):(r=e+a*Co,o=e-.5*l);for(var c,u=r;a>0?u>o:o>u;u-=l)s.point((c=yt([n,-i*Math.cos(u),-i*Math.sin(u)]))[0],c[1])}}function on(e,t){var n=pt(t);n[0]-=e,At(n);var i=ne(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Ro)%(2*Math.PI)}function an(e,t,n){var i=Zr.range(e,t-Ro,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function sn(e,t,n){var i=Zr.range(e,t-Ro,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function ln(e){return e.source}function cn(e){return e.target}function un(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),o=e(i*r);return[o*r*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),o=Math.sin(r),a=Math.cos(r);return[Math.atan2(e*o,i*a),Math.asin(i&&n*o/i)]},n}function dn(e,t){function n(e,t){a>0?-To+Ro>t&&(t=-To+Ro):t>To-Ro&&(t=To-Ro);var n=a/Math.pow(r(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var i=Math.cos(e),r=function(e){return Math.tan(So/4+e/2)},o=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),a=i*Math.pow(r(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,i=ee(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/i,1/o))-To]},n):pn}function hn(e,t){function n(e,t){var n=o-t;return[n*Math.sin(r*e),o-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),o=i/r+e;return lo(r)<Ro?Kt:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,o-ee(r)*Math.sqrt(e*e+n*n)]},n)}function pn(e,t){return[e,Math.log(Math.tan(So/4+t/2))]}function fn(e){var t,n=Yt(e),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=So*i(),l=r();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function mn(e,t){return[Math.log(Math.tan(So/4+t/2)),-e]}function gn(e){return e[0]}function vn(e){return e[1]}function An(e){for(var t=e.length,n=[0,1],i=2,r=2;t>r;r++){for(;i>1&&te(e[n[i-2]],e[n[i-1]],e[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function yn(e,t){return e[0]-t[0]||e[1]-t[1]}function bn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function xn(e,t,n,i){var r=e[0],o=n[0],a=t[0]-r,s=i[0]-o,l=e[1],c=n[1],u=t[1]-l,d=i[1]-c,h=(s*(l-c)-d*(r-o))/(d*a-s*u);return[r+h*a,l+h*u]}function _n(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function wn(e){var t=Ka.pop()||new function(){Un(this),this.edge=this.site=this.circle=null};return t.site=e,t}function Mn(e){kn(e),Ya.remove(e),Ka.push(e),Un(e)}function En(e){var t=e.circle,n=t.x,i=t.cy,r={x:n,y:i},o=e.P,a=e.N,s=[e];Mn(e);for(var l=o;l.circle&&lo(n-l.circle.x)<Ro&&lo(i-l.circle.cy)<Ro;)o=l.P,s.unshift(l),Mn(l),l=o;s.unshift(l),kn(l);for(var c=a;c.circle&&lo(n-c.circle.x)<Ro&&lo(i-c.circle.cy)<Ro;)a=c.N,s.push(c),Mn(c),c=a;s.push(c),kn(c);var u,d=s.length;for(u=1;d>u;++u)c=s[u],l=s[u-1],In(c.edge,l.site,c.site,r);l=s[0],(c=s[d-1]).edge=zn(l.site,c.site,null,r),Pn(l),Pn(c)}function Sn(e){for(var t,n,i,r,o=e.x,a=e.y,s=Ya._;s;)if((i=Cn(s,a)-o)>Ro)s=s.L;else{if(!((r=o-Tn(s,a))>Ro)){i>-Ro?(t=s.P,n=s):r>-Ro?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=wn(e);if(Ya.insert(t,l),t||n){if(t===n)return kn(t),n=wn(t.site),Ya.insert(l,n),l.edge=n.edge=zn(t.site,l.site),Pn(t),void Pn(n);if(!n)return void(l.edge=zn(t.site,l.site));kn(t),kn(n);var c=t.site,u=c.x,d=c.y,h=e.x-u,p=e.y-d,f=n.site,m=f.x-u,g=f.y-d,v=2*(h*g-p*m),A=h*h+p*p,y=m*m+g*g,b={x:(g*A-p*y)/v+u,y:(h*y-m*A)/v+d};In(n.edge,c,f,b),l.edge=zn(c,e,null,b),n.edge=zn(e,f,null,b),Pn(t),Pn(n)}}function Cn(e,t){var n=e.site,i=n.x,r=n.y,o=r-t;if(!o)return i;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,c=l-t;if(!c)return s;var u=s-i,d=1/o-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+r-o/2)))/d+i:(i+s)/2}function Tn(e,t){var n=e.N;if(n)return Cn(n,t);var i=e.site;return i.y===t?i.x:1/0}function Rn(e){this.site=e,this.edges=[]}function Ln(e,t){return t.angle-e.angle}function Pn(e){var t=e.P,n=e.N;if(t&&n){var i=t.site,r=e.site,o=n.site;if(i!==o){var a=r.x,s=r.y,l=i.x-a,c=i.y-s,u=o.x-a,d=2*(l*(g=o.y-s)-c*u);if(!(d>=-Lo)){var h=l*l+c*c,p=u*u+g*g,f=(g*h-c*p)/d,m=(l*p-u*h)/d,g=m+s,v=Qa.pop()||new function(){Un(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=e,v.site=r,v.x=f+a,v.y=g+Math.sqrt(f*f+m*m),v.cy=g,e.circle=v;for(var A=null,y=Za._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){A=y.P;break}y=y.L}else{if(!y.R){A=y;break}y=y.R}Za.insert(A,v),A||(Ja=v)}}}}function kn(e){var t=e.circle;t&&(t.P||(Ja=t.N),Za.remove(t),Qa.push(t),Un(t),e.circle=null)}function Nn(e,t){var n=e.b;if(n)return!0;var i,r,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],c=t[1][1],u=e.l,d=e.r,h=u.x,p=u.y,f=d.x,m=d.y,g=(h+f)/2,v=(p+m)/2;if(m===p){if(a>g||g>=s)return;if(h>f){if(o){if(o.y>=c)return}else o={x:g,y:l};n={x:g,y:c}}else{if(o){if(o.y<l)return}else o={x:g,y:c};n={x:g,y:l}}}else if(r=v-(i=(h-f)/(m-p))*g,-1>i||i>1)if(h>f){if(o){if(o.y>=c)return}else o={x:(l-r)/i,y:l};n={x:(c-r)/i,y:c}}else{if(o){if(o.y<l)return}else o={x:(c-r)/i,y:c};n={x:(l-r)/i,y:l}}else if(m>p){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return e.a=o,e.b=n,!0}function On(e,t){this.l=e,this.r=t,this.a=this.b=null}function zn(e,t,n,i){var r=new On(e,t);return qa.push(r),n&&In(r,e,t,n),i&&In(r,t,e,i),Xa[e.i].edges.push(new Fn(r,e,t)),Xa[t.i].edges.push(new Fn(r,t,e)),r}function Dn(e,t,n){var i=new On(e,null);return i.a=t,i.b=n,qa.push(i),i}function In(e,t,n,i){e.a||e.b?e.l===n?e.b=i:e.a=i:(e.a=i,e.l=t,e.r=n)}function Fn(e,t,n){var i=e.a,r=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Bn(){this._=null}function Un(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Hn(e,t){var n=t,i=t.R,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Vn(e,t){var n=t,i=t.L,r=n.U;r?r.L===n?r.L=i:r.R=i:e._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Gn(e){for(;e.L;)e=e.L;return e}function jn(e,t){var n,i,r,o=e.sort(Wn).pop();for(qa=[],Xa=new Array(e.length),Ya=new Bn,Za=new Bn;;)if(r=Ja,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(Xa[o.i]=new Rn(o),Sn(o),n=o.x,i=o.y),o=e.pop();else{if(!r)break;En(r.arc)}t&&(function(e){for(var t,n=qa,i=Ot(e[0][0],e[0][1],e[1][0],e[1][1]),r=n.length;r--;)(!Nn(t=n[r],e)||!i(t)||lo(t.a.x-t.b.x)<Ro&&lo(t.a.y-t.b.y)<Ro)&&(t.a=t.b=null,n.splice(r,1))}(t),function(e){for(var t,n,i,r,o,a,s,l,c,u,d=e[0][0],h=e[1][0],p=e[0][1],f=e[1][1],m=Xa,g=m.length;g--;)if((o=m[g])&&o.prepare())for(l=(s=o.edges).length,a=0;l>a;)i=(u=s[a].end()).x,r=u.y,t=(c=s[++a%l].start()).x,n=c.y,(lo(i-t)>Ro||lo(r-n)>Ro)&&(s.splice(a,0,new Fn(Dn(o.site,u,lo(i-d)<Ro&&f-r>Ro?{x:d,y:lo(t-d)<Ro?n:f}:lo(r-f)<Ro&&h-i>Ro?{x:lo(n-f)<Ro?t:h,y:f}:lo(i-h)<Ro&&r-p>Ro?{x:h,y:lo(t-h)<Ro?n:p}:lo(r-p)<Ro&&i-d>Ro?{x:lo(n-p)<Ro?t:d,y:p}:null),o.site,null)),++l)}(t));var a={cells:Xa,edges:qa};return Ya=Za=qa=Xa=null,a}function Wn(e,t){return t.y-e.y||t.x-e.x}function qn(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function Xn(e){return e.x}function Yn(e){return e.y}function Jn(e,t){e=Zr.rgb(e),t=Zr.rgb(t);var n=e.r,i=e.g,r=e.b,o=t.r-n,a=t.g-i,s=t.b-r;return function(e){return"#"+Me(Math.round(n+o*e))+Me(Math.round(i+a*e))+Me(Math.round(r+s*e))}}function Zn(e,t){var n,i={},r={};for(n in e)n in t?i[n]=$n(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function Kn(e,t){return t-=e=+e,function(n){return e+t*n}}function Qn(e,t){var n,i,r,o=es.lastIndex=ts.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=es.exec(e))&&(i=ts.exec(t));)(r=i.index)>o&&(r=t.substring(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Kn(n,i)})),o=ts.lastIndex;return o<t.length&&(r=t.substring(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,i=0;t>i;++i)s[(n=l[i]).i]=n.x(e);return s.join("")})}function $n(e,t){for(var n,i=Zr.interpolators.length;--i>=0&&!(n=Zr.interpolators[i](e,t)););return n}function ei(e,t){var n,i=[],r=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)i.push($n(e[n],t[n]));for(;o>n;++n)r[n]=e[n];for(;a>n;++n)r[n]=t[n];return function(e){for(n=0;s>n;++n)r[n]=i[n](e);return r}}function ti(e){return function(t){return 1-e(1-t)}}function ni(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function ii(e){return e*e}function ri(e){return e*e*e}function oi(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function ai(e){return 1-Math.cos(e*To)}function si(e){return Math.pow(2,10*(e-1))}function li(e){return 1-Math.sqrt(1-e*e)}function ci(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function ui(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function di(e){var t=[e.a,e.b],n=[e.c,e.d],i=pi(t),r=hi(t,n),o=pi(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*ko,this.translate=[e.e,e.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*ko:0}function hi(e,t){return e[0]*t[0]+e[1]*t[1]}function pi(e){var t=Math.sqrt(hi(e,e));return t&&(e[0]/=t,e[1]/=t),t}function fi(e,t){var n,i=[],r=[],o=Zr.transform(e),a=Zr.transform(t),s=o.translate,l=a.translate,c=o.rotate,u=a.rotate,d=o.skew,h=a.skew,p=o.scale,f=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:Kn(s[0],l[0])},{i:3,x:Kn(s[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),c!=u?(c-u>180?u+=360:u-c>180&&(c+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:Kn(c,u)})):u&&i.push(i.pop()+"rotate("+u+")"),d!=h?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:Kn(d,h)}):h&&i.push(i.pop()+"skewX("+h+")"),p[0]!=f[0]||p[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:Kn(p[0],f[0])},{i:n-2,x:Kn(p[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(e){for(var t,o=-1;++o<n;)i[(t=r[o]).i]=t.x(e);return i.join("")}}function mi(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function gi(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function vi(e){for(var t=e.source,n=e.target,i=function(e,t){if(e===t)return e;for(var n=Ai(e),i=Ai(t),r=n.pop(),o=i.pop(),a=null;r===o;)a=r,r=n.pop(),o=i.pop();return a}(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Ai(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function yi(e){e.fixed|=2}function bi(e){e.fixed&=-7}function xi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function _i(e){e.fixed&=-5}function wi(e,t){return Zr.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Ci,e}function Mi(e){return e.children}function Ei(e){return e.value}function Si(e,t){return t.value-e.value}function Ci(e){return Zr.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Ti(e){return e.x}function Ri(e){return e.y}function Li(e,t,n){e.y0=t,e.y=n}function Pi(e){return Zr.range(e.length)}function ki(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}function Ni(e){for(var t,n=1,i=0,r=e[0][1],o=e.length;o>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function Oi(e){return e.reduce(zi,0)}function zi(e,t){return e+t[1]}function Di(e,t){return Ii(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ii(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,o=[];++n<=t;)o[n]=r*n+i;return o}function Fi(e){return[Zr.min(e),Zr.max(e)]}function Bi(e,t){return e.parent==t.parent?1:2}function Ui(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function Hi(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function Vi(e,t){var n=e.children;if(n&&(r=n.length))for(var i,r,o=-1;++o<r;)t(i=Vi(n[o],t),e)>0&&(e=i);return e}function Gi(e,t){return e.x-t.x}function ji(e,t){return t.x-e.x}function Wi(e,t){return e.depth-t.depth}function qi(e,t){!function e(n,i){var r=n.children;if(r&&(a=r.length))for(var o,a,s=null,l=-1;++l<a;)e(o=r[l],s),s=o;t(n,i)}(e,null)}function Xi(e,t,n){e=e._tree;var i=n/((t=t._tree).number-e.number);e.change+=i,t.change-=i,t.shift+=n,t.prelim+=n,t.mod+=n}function Yi(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function Ji(e,t){return e.value-t.value}function Zi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ki(e,t){e._pack_next=t,t._pack_prev=e}function Qi(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return.999*r*r>n*n+i*i}function $i(e){function t(e){u=Math.min(e.x-e.r,u),d=Math.max(e.x+e.r,d),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(c=n.length)){var n,i,r,o,a,s,l,c,u=1/0,d=-1/0,h=1/0,p=-1/0;if(n.forEach(er),(i=n[0]).x=-i.r,i.y=0,t(i),c>1&&((r=n[1]).x=r.r,r.y=0,t(r),c>2))for(nr(i,r,o=n[2]),t(o),Zi(i,o),i._pack_prev=o,Zi(o,r),r=i._pack_next,a=3;c>a;a++){nr(i,r,o=n[a]);var f=0,m=1,g=1;for(s=r._pack_next;s!==r;s=s._pack_next,m++)if(Qi(s,o)){f=1;break}if(1==f)for(l=i._pack_prev;l!==s._pack_prev&&!Qi(l,o);l=l._pack_prev,g++);f?(g>m||m==g&&r.r<i.r?Ki(i,r=s):Ki(i=l,r),a--):(Zi(i,o),r=o,t(o))}var v=(u+d)/2,A=(h+p)/2,y=0;for(a=0;c>a;a++)(o=n[a]).x-=v,o.y-=A,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=y,n.forEach(tr)}}function er(e){e._pack_next=e._pack_prev=e}function tr(e){delete e._pack_next,delete e._pack_prev}function nr(e,t,n){var i=e.r+n.r,r=t.x-e.x,o=t.y-e.y;if(i&&(r||o)){var a=t.r+n.r,s=r*r+o*o,l=.5+((i*=i)-(a*=a))/(2*s),c=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=e.x+l*r+c*o,n.y=e.y+l*o-c*r}else n.x=e.x+i,n.y=e.y}function ir(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function rr(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function or(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function ar(e){return e.rangeExtent?e.rangeExtent():or(e.range())}function sr(e,t,n,i){var r=n(e[0],e[1]),o=i(t[0],t[1]);return function(e){return o(r(e))}}function lr(e,t){var n,i=0,r=e.length-1,o=e[i],a=e[r];return o>a&&(n=i,i=r,r=n,n=o,o=a,a=n),e[i]=t.floor(o),e[r]=t.ceil(a),e}function cr(e,t,n,i){var r=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)r.push(n(e[a-1],e[a])),o.push(i(t[a-1],t[a]));return function(t){var n=Zr.bisect(e,t,1,s)-1;return o[n](r[n](t))}}function ur(e,t){return Zr.rebind(e,t,"range","rangeRound","interpolate","clamp")}function dr(e,t){return lr(e,function(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:hs}(hr(e,t)[2]))}function hr(e,t){null==t&&(t=10);var n=or(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=t/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function pr(e,t){return Zr.range.apply(Zr,hr(e,t))}function fr(e,t,n){var i=hr(e,t);if(n){var r=ea.exec(n);if(r.shift(),"s"===r[8]){var o=Zr.formatPrefix(Math.max(lo(i[0]),lo(i[1])));return r[7]||(r[7]="."+mr(o.scale(i[2]))),r[8]="f",n=Zr.format(r.join("")),function(e){return n(o.scale(e))+o.symbol}}r[7]||(r[7]="."+function(e,t){var n=mr(t[2]);return e in ps?Math.abs(n-mr(Math.max(lo(t[0]),lo(t[1]))))+ +("e"!==e):n-2*("%"===e)}(r[8],i)),n=r.join("")}else n=",."+mr(i[2])+"f";return Zr.format(n)}function mr(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function gr(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function vr(e){return e.innerRadius}function Ar(e){return e.outerRadius}function yr(e){return e.startAngle}function br(e){return e.endAngle}function xr(e){function t(t){function a(){c.push("M",o(e(u),s))}for(var l,c=[],u=[],d=-1,h=t.length,p=Le(n),f=Le(i);++d<h;)r.call(this,l=t[d],d)?u.push([+p.call(this,l,d),+f.call(this,l,d)]):u.length&&(a(),u=[]);return u.length&&a(),c.length?c.join(""):null}var n=gn,i=vn,r=St,o=_r,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=_s.get(e)||_r).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function _r(e){return e.join("L")}function wr(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function Mr(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Er(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return _r(e);var n=e.length!=t.length,i="",r=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var c=2;c<t.length;c++,l++)o=e[l],s=t[c],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var u=e[l];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+u[0]+","+u[1]}return i}function Sr(e,t){for(var n,i=[],r=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function Cr(e){if(e.length<3)return _r(e);var t=1,n=e.length,i=e[0],r=i[0],o=i[1],a=[r,r,r,(i=e[1])[0]],s=[o,o,o,i[1]],l=[r,",",o,"L",Tr(Es,a),",",Tr(Es,s)];for(e.push(e[n-1]);++t<=n;)i=e[t],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Rr(l,a,s);return e.pop(),l.push("L",i),l.join("")}function Tr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Rr(e,t,n){e.push("C",Tr(ws,t),",",Tr(ws,n),",",Tr(Ms,t),",",Tr(Ms,n),",",Tr(Es,t),",",Tr(Es,n))}function Lr(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Pr(e){for(var t,n,i,r,o=[],a=function(e){for(var t=0,n=e.length-1,i=[],r=e[0],o=e[1],a=i[0]=Lr(r,o);++t<n;)i[t]=(a+(a=Lr(r=o,o=e[t+1])))/2;return i[t]=a,i}(e),s=-1,l=e.length-1;++s<l;)t=Lr(e[s],e[s+1]),lo(t)<Ro?a[s]=a[s+1]=0:(r=(n=a[s]/t)*n+(i=a[s+1]/t)*i)>9&&(r=3*t/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i);for(s=-1;++s<=l;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}function kr(e){for(var t,n,i,r=-1,o=e.length;++r<o;)n=(t=e[r])[0],i=t[1]+bs,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Nr(e){function t(t){function l(){m.push("M",s(e(v),d),u,c(e(g.reverse()),d),"Z")}for(var h,p,f,m=[],g=[],v=[],A=-1,y=t.length,b=Le(n),x=Le(r),_=n===i?function(){return p}:Le(i),w=r===o?function(){return f}:Le(o);++A<y;)a.call(this,h=t[A],A)?(g.push([p=+b.call(this,h,A),f=+x.call(this,h,A)]),v.push([+_.call(this,h,A),+w.call(this,h,A)])):g.length&&(l(),g=[],v=[]);return g.length&&l(),m.length?m.join(""):null}var n=gn,i=gn,r=0,o=vn,a=St,s=_r,l=s.key,c=s,u="L",d=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=o=e,t):o},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=_s.get(e)||_r).key,c=s.reverse||s,u=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Or(e){return e.radius}function zr(e){return[e.x,e.y]}function Dr(){return 64}function Ir(){return"circle"}function Fr(e){var t=Math.sqrt(e/So);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Br(e,t){return fo(e,Ps),e.id=t,e}function Ur(e,t,n,i){var r=e.id;return G(e,"function"==typeof n?function(e,o,a){e.__transition__[r].tween.set(t,i(n.call(e,e.__data__,o,a)))}:(n=i(n),function(e){e.__transition__[r].tween.set(t,n)}))}function Hr(e){return null==e&&(e=""),function(){this.textContent=e}}function Vr(e,t,n,i){var r=e.__transition__||(e.__transition__={active:0,count:0}),o=r[n];if(!o){var a=i.time;o=r[n]={tween:new f,time:a,ease:i.ease,delay:i.delay,duration:i.duration},++r.count,Zr.timer(function(i){function s(i){return r.active>n?c():(r.active=n,o.event&&o.event.start.call(e,u,t),o.tween.forEach(function(n,i){(i=i.call(e,u,t))&&m.push(i)}),void Zr.timer(function(){return f.c=l(i||1)?St:l,1},0,a))}function l(i){if(r.active!==n)return c();for(var a=i/p,s=d(a),l=m.length;l>0;)m[--l].call(e,s);return a>=1?(o.event&&o.event.end.call(e,u,t),c()):void 0}function c(){return--r.count?delete r[n]:delete e.__transition__,1}var u=e.__data__,d=o.ease,h=o.delay,p=o.duration,f=Ko,m=[];return f.t=h+a,i>=h?s(i-h):void(f.c=s)},0,a)}}function Gr(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function jr(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function Wr(e){return e.toISOString()}function qr(e,t,n){function i(t){return e(t)}function r(e,n){var i=(e[1]-e[0])/n,r=Zr.bisect(Us,i);return r==Us.length?[t.year,hr(e.map(function(e){return e/31536e6}),n)[2]]:r?t[i/Us[r-1]<Us[r]/i?r-1:r]:[Gs,hr(e,n)[2]]}return i.invert=function(t){return Xr(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Xr)},i.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Xr(+n+1),t).length}var o=i.domain(),a=or(o),s=null==e?r(a,10):"number"==typeof e&&r(a,e);return s&&(e=s[0],t=s[1]),i.domain(lr(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Xr(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Xr(+t+1);return t}}:e))},i.ticks=function(e,t){var n=or(i.domain()),o=null==e?r(n,10):"number"==typeof e?r(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],Xr(+n[1]+1),1>t?1:t)},i.tickFormat=function(){return n},i.copy=function(){return qr(e.copy(),t,n)},ur(i,e)}function Xr(e){return new Date(e)}function Yr(e){return JSON.parse(e.responseText)}function Jr(e){var t=$r.createRange();return t.selectNode($r.body),t.createContextualFragment(e.responseText)}var Zr={version:"3.4.6"};Date.now||(Date.now=function(){return+new Date});var Kr=[].slice,Qr=function(e){return Kr.call(e)},$r=document,eo=$r.documentElement,to=window;try{Qr(eo.childNodes)[0].nodeType}catch(e){Qr=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{$r.createElement("div").style.setProperty("opacity",0,"")}catch(e){var no=to.Element.prototype,io=no.setAttribute,ro=no.setAttributeNS,oo=to.CSSStyleDeclaration.prototype,ao=oo.setProperty;no.setAttribute=function(e,t){io.call(this,e,t+"")},no.setAttributeNS=function(e,t,n){ro.call(this,e,t,n+"")},oo.setProperty=function(e,t,n){ao.call(this,e,t+"",n)}}Zr.ascending=n,Zr.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:NaN},Zr.min=function(e,t){var n,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=e[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<o&&!(null!=(n=t.call(e,e[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},Zr.max=function(e,t){var n,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o&&!(null!=(n=e[r])&&n>=n);)n=void 0;for(;++r<o;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<o&&!(null!=(n=t.call(e,e[r],r))&&n>=n);)n=void 0;for(;++r<o;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},Zr.extent=function(e,t){var n,i,r,o=-1,a=e.length;if(1===arguments.length){for(;++o<a&&!(null!=(n=r=e[o])&&n>=n);)n=r=void 0;for(;++o<a;)null!=(i=e[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<a&&!(null!=(n=r=t.call(e,e[o],o))&&n>=n);)n=void 0;for(;++o<a;)null!=(i=t.call(e,e[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},Zr.sum=function(e,t){var n,i=0,r=e.length,o=-1;if(1===arguments.length)for(;++o<r;)isNaN(n=+e[o])||(i+=n);else for(;++o<r;)isNaN(n=+t.call(e,e[o],o))||(i+=n);return i},Zr.mean=function(e,t){var n,i=0,r=e.length,o=-1,a=r;if(1===arguments.length)for(;++o<r;)u(n=e[o])?i+=n:--a;else for(;++o<r;)u(n=t.call(e,e[o],o))?i+=n:--a;return a?i/a:void 0},Zr.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],o=n-i;return o?r+o*(e[i]-r):r},Zr.median=function(e,t){return arguments.length>1&&(e=e.map(t)),(e=e.filter(u)).length?Zr.quantile(e.sort(n),.5):void 0};var so=d(n);Zr.bisectLeft=so.left,Zr.bisect=Zr.bisectRight=so.right,Zr.bisector=function(e){return d(1===e.length?function(t,i){return n(e(t),i)}:e)},Zr.shuffle=function(e){for(var t,n,i=e.length;i;)n=0|Math.random()*i--,t=e[i],e[i]=e[n],e[n]=t;return e},Zr.permute=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},Zr.pairs=function(e){for(var t=0,n=e.length-1,i=e[0],r=new Array(0>n?0:n);n>t;)r[t]=[i,i=e[++t]];return r},Zr.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=Zr.min(arguments,h),n=new Array(t);++e<t;)for(var i,r=-1,o=n[e]=new Array(i);++r<i;)o[r]=arguments[r][e];return n},Zr.transpose=function(e){return Zr.zip.apply(Zr,e)},Zr.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Zr.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Zr.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Zr.merge=function(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=new Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n};var lo=Math.abs;Zr.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0==(t-e)/n)throw new Error("infinite range");var i,r=[],o=function(e){for(var t=1;e*t%1;)t*=10;return t}(lo(n)),a=-1;if(e*=o,t*=o,0>(n*=o))for(;(i=e+n*++a)>t;)r.push(i/o);else for(;(i=e+n*++a)<t;)r.push(i/o);return r},Zr.map=function(e){var t=new f;if(e instanceof f)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},p(f,{has:m,get:function(e){return this[co+e]},set:function(e,t){return this[co+e]=t},remove:function(e){return(e=co+e)in this&&delete this[e]},keys:g,values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},size:v,empty:A,forEach:function(e){for(var t in this)t.charCodeAt(0)===uo&&e.call(this,t.substring(1),this[t])}});var co="\0",uo=co.charCodeAt(0);Zr.nest=function(){function e(o,a,s){if(s>=r.length)return n?n.call(i,a):t?a.sort(t):a;for(var l,c,u,d,h=-1,p=a.length,m=r[s++],g=new f;++h<p;)(d=g.get(l=m(c=a[h])))?d.push(c):g.set(l,[c]);return o?(c=o(),u=function(t,n){c.set(t,e(o,n,s))}):(c={},u=function(t,n){c[t]=e(o,n,s)}),g.forEach(u),c}var t,n,i={},r=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(t){return function e(t,n){if(n>=r.length)return t;var i=[],a=o[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),a?i.sort(function(e,t){return a(e.key,t.key)}):i}(e(Zr.map,t,0),0)},i.key=function(e){return r.push(e),i},i.sortKeys=function(e){return o[r.length-1]=e,i},i.sortValues=function(e){return t=e,i},i.rollup=function(e){return n=e,i},i},Zr.set=function(e){var t=new y;if(e)for(var n=0,i=e.length;i>n;++n)t.add(e[n]);return t},p(y,{has:m,add:function(e){return this[co+e]=!0,e},remove:function(e){return(e=co+e)in this&&delete this[e]},values:g,size:v,empty:A,forEach:function(e){for(var t in this)t.charCodeAt(0)===uo&&e.call(this,t.substring(1))}}),Zr.behavior={},Zr.rebind=function(e,t){for(var n,i=1,r=arguments.length;++i<r;)e[n=arguments[i]]=b(e,t,t[n]);return e};var ho=["webkit","ms","moz","Moz","o","O"];Zr.dispatch=function(){for(var e=new w,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=M(e);return e},w.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},Zr.event=null,Zr.requote=function(e){return e.replace(po,"\\$&")};var po=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},mo=function(e,t){return t.querySelector(e)},go=function(e,t){return t.querySelectorAll(e)},vo=eo[x(eo,"matchesSelector")],Ao=function(e,t){return vo.call(e,t)};"function"==typeof Sizzle&&(mo=function(e,t){return Sizzle(e,t)[0]||null},go=Sizzle,Ao=Sizzle.matchesSelector),Zr.selection=function(){return _o};var yo=Zr.selection.prototype=[];yo.select=function(e){var t,n,i,r,o=[];e=R(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(i=this[a]).parentNode;for(var l=-1,c=i.length;++l<c;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return T(o)},yo.selectAll=function(e){var t,n,i=[];e=L(e);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,l=a.length;++s<l;)(n=a[s])&&(i.push(t=Qr(e.call(n,n.__data__,s,r))),t.parentNode=n);return T(i)};var bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zr.ns={prefix:bo,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),bo.hasOwnProperty(n)?{space:bo[n],local:e}:e}},yo.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=Zr.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},yo.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),i=(e=O(e)).length,r=-1;if(t=n.classList){for(;++r<i;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");++r<i;)if(!N(e[r]).test(t))return!1;return!0}for(t in e)this.each(z(t,e[t]));return this}return this.each(z(e,t))},yo.style=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){for(n in 2>i&&(t=""),e)this.each(I(n,e[n],t));return this}if(2>i)return to.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(I(e,t,n))},yo.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(F(t,e[t]));return this}return this.each(F(e,t))},yo.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},yo.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},yo.append=function(e){return e=B(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},yo.insert=function(e,t){return e=B(e),t=R(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},yo.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},yo.data=function(e,t){function n(e,n){var i,r,o,a=e.length,u=n.length,d=Math.min(a,u),h=new Array(u),p=new Array(u),m=new Array(a);if(t){var g,v=new f,A=new f,y=[];for(i=-1;++i<a;)g=t.call(r=e[i],r.__data__,i),v.has(g)?m[i]=r:v.set(g,r),y.push(g);for(i=-1;++i<u;)g=t.call(n,o=n[i],i),(r=v.get(g))?(h[i]=r,r.__data__=o):A.has(g)||(p[i]=U(o)),A.set(g,o),v.remove(g);for(i=-1;++i<a;)v.has(y[i])&&(m[i]=e[i])}else{for(i=-1;++i<d;)r=e[i],o=n[i],r?(r.__data__=o,h[i]=r):p[i]=U(o);for(;u>i;++i)p[i]=U(n[i]);for(;a>i;++i)m[i]=e[i]}p.update=h,p.parentNode=h.parentNode=m.parentNode=e.parentNode,s.push(p),l.push(h),c.push(m)}var i,r,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(i=this[0]).length);++o<a;)(r=i[o])&&(e[o]=r.__data__);return e}var s=j([]),l=T([]),c=T([]);if("function"==typeof e)for(;++o<a;)n(i=this[o],e.call(i,i.parentNode.__data__,o));else for(;++o<a;)n(i=this[o],e);return l.enter=function(){return s},l.exit=function(){return c},l},yo.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},yo.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=H(e));for(var o=0,a=this.length;a>o;o++){r.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s,o)&&t.push(i)}return T(r)},yo.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,i=this[e],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},yo.sort=function(e){e=V.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},yo.each=function(e){return G(this,function(t,n,i){e.call(t,t.__data__,n,i)})},yo.call=function(e){var t=Qr(arguments);return e.apply(t[0]=this,t),this},yo.empty=function(){return!this.node()},yo.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},yo.size=function(){var e=0;return this.each(function(){++e}),e};var xo=[];Zr.selection.enter=j,Zr.selection.enter.prototype=xo,xo.append=yo.append,xo.empty=yo.empty,xo.node=yo.node,xo.call=yo.call,xo.size=yo.size,xo.select=function(e){for(var t,n,i,r,o,a=[],s=-1,l=this.length;++s<l;){i=(r=this[s]).update,a.push(t=[]),t.parentNode=r.parentNode;for(var c=-1,u=r.length;++c<u;)(o=r[c])?(t.push(i[c]=n=e.call(r.parentNode,o.__data__,c,s)),n.__data__=o.__data__):t.push(null)}return T(a)},xo.insert=function(e,t){return arguments.length<2&&(t=function(e){var t,n;return function(i,r,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),r>=t&&(t=r+1);!(a=s[t])&&++t<l;);return a}}(this)),yo.insert.call(this,e,t)},yo.transition=function(){for(var e,t,n=Cs||++ks,i=[],r=Ts||{time:Date.now(),ease:oi,delay:0,duration:250},o=-1,a=this.length;++o<a;){i.push(e=[]);for(var s=this[o],l=-1,c=s.length;++l<c;)(t=s[l])&&Vr(t,l,n,r),e.push(t)}return Br(i,n)},yo.interrupt=function(){return this.each(W)},Zr.select=function(e){var t=["string"==typeof e?mo(e,$r):e];return t.parentNode=eo,T([t])},Zr.selectAll=function(e){var t=Qr("string"==typeof e?go(e,$r):e);return t.parentNode=eo,T([t])};var _o=Zr.select(eo);yo.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){for(n in 2>i&&(t=!1),e)this.each(q(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(q(e,t,n))};var wo=Zr.map({mouseenter:"mouseover",mouseleave:"mouseout"});wo.forEach(function(e){"on"+e in $r&&wo.remove(e)});var Mo="onselectstart"in $r?null:x(eo.style,"userSelect"),Eo=0;Zr.mouse=function(e){return Z(e,S())},Zr.touches=function(e,t){return arguments.length<2&&(t=S().touches),t?Qr(t).map(function(t){var n=Z(e,t);return n.identifier=t.identifier,n}):[]},Zr.behavior.drag=function(){function e(){this.on("mousedown.drag",r).on("touchstart.drag",o)}function t(e,t,r,o,a){return function(){var s,l=this,c=Zr.event.target,u=l.parentNode,d=n.of(l,arguments),h=0,p=e(),f=".drag"+(null==p?"":"-"+p),m=Zr.select(r()).on(o+f,function(){var e,n,i=t(u,p);i&&(e=i[0]-v[0],n=i[1]-v[1],h|=e|n,v=i,d({type:"drag",x:i[0]+s[0],y:i[1]+s[1],dx:e,dy:n}))}).on(a+f,function(){t(u,p)&&(m.on(o+f,null).on(a+f,null),g(h&&Zr.event.target===c),d({type:"dragend"}))}),g=J(),v=t(u,p);i?s=[(s=i.apply(l,arguments)).x-v[0],s.y-v[1]]:s=[0,0],d({type:"dragstart"})}}var n=C(e,"drag","dragstart","dragend"),i=null,r=t(_,Zr.mouse,$,"mousemove","mouseup"),o=t(K,Zr.touch,Q,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},Zr.rebind(e,n,"on")};var So=Math.PI,Co=2*So,To=So/2,Ro=1e-6,Lo=Ro*Ro,Po=So/180,ko=180/So,No=Math.SQRT2,Oo=2;Zr.interpolateZoom=function(e,t){function n(e){var t=e*v;if(g){var n=re(m),a=o/(Oo*h)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(No*t+m)-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[i+a*c,r+a*u,o*n/re(No*t+m)]}return[i+e*c,r+e*u,o*Math.exp(No*t)]}var i=e[0],r=e[1],o=e[2],a=t[0],s=t[1],l=t[2],c=a-i,u=s-r,d=c*c+u*u,h=Math.sqrt(d),p=(l*l-o*o+4*d)/(2*o*Oo*h),f=(l*l-o*o-4*d)/(2*l*Oo*h),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(f*f+1)-f)-m,v=(g||Math.log(l/o))/No;return n.duration=1e3*v,n},Zr.behavior.zoom=function(){function e(e){e.on(M,l).on(Io+".zoom",u).on(S,d).on("dblclick.zoom",h).on(R,c)}function t(e){return[(e[0]-x.x)/x.k,(e[1]-x.y)/x.k]}function n(e){x.k=Math.max(w[0],Math.min(w[1],e))}function i(e,t){t=function(e){return[e[0]*x.k+x.x,e[1]*x.k+x.y]}(t),x.x+=e[0]-t[0],x.y+=e[1]-t[1]}function r(){A&&A.domain(v.range().map(function(e){return(e-x.x)/x.k}).map(v.invert)),b&&b.domain(y.range().map(function(e){return(e-x.y)/x.k}).map(y.invert))}function o(e){e({type:"zoomstart"})}function a(e){r(),e({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function s(e){e({type:"zoomend"})}function l(){var e=this,n=Zr.event.target,r=L.of(e,arguments),l=0,c=Zr.select(to).on(S,function(){l=1,i(Zr.mouse(e),u),a(r)}).on(T,function(){c.on(S,to===e?d:null).on(T,null),h(l&&Zr.event.target===n),s(r)}),u=t(Zr.mouse(e)),h=J();W.call(e),o(r)}function c(){function e(){var e=Zr.touches(d);return u=x.k,e.forEach(function(e){e.identifier in p&&(p[e.identifier]=t(e))}),e}function r(){for(var t=Zr.event.changedTouches,r=0,o=t.length;o>r;++r)p[t[r].identifier]=null;var s=e(),l=Date.now();if(1===s.length){if(500>l-g){var c=s[0],u=p[c.identifier];n(2*x.k),i(c,u),E(),a(h)}g=l}else if(s.length>1){c=s[0];var d=s[1],m=c[0]-d[0],v=c[1]-d[1];f=m*m+v*v}}var u,d=this,h=L.of(d,arguments),p={},f=0,m=".zoom-"+Zr.event.changedTouches[0].identifier,v="touchmove"+m,A="touchend"+m,y=Zr.select(Zr.event.target).on(v,function(){for(var e,t,r,o,s=Zr.touches(d),l=0,c=s.length;c>l;++l,o=null)if(r=s[l],o=p[r.identifier]){if(t)break;e=r,t=o}if(o){var m=(m=r[0]-e[0])*m+(m=r[1]-e[1])*m,v=f&&Math.sqrt(m/f);e=[(e[0]+r[0])/2,(e[1]+r[1])/2],t=[(t[0]+o[0])/2,(t[1]+o[1])/2],n(v*u)}g=null,i(e,t),a(h)}).on(A,function(){if(Zr.event.touches.length){for(var t=Zr.event.changedTouches,n=0,i=t.length;i>n;++n)delete p[t[n].identifier];for(var r in p)return void e()}y.on(m,null),b.on(M,l).on(R,c),_(),s(h)}),b=Zr.select(d).on(M,null).on(R,r),_=J();W.call(d),r(),o(h)}function u(){var e=L.of(this,arguments);m?clearTimeout(m):(W.call(this),o(e)),m=setTimeout(function(){m=null,s(e)},50),E();var r=f||Zr.mouse(this);p||(p=t(r)),n(Math.pow(2,.002*zo())*x.k),i(r,p),a(e)}function d(){p=null}function h(){var e=L.of(this,arguments),r=Zr.mouse(this),l=t(r),c=Math.log(x.k)/Math.LN2;o(e),n(Math.pow(2,Zr.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)),i(r,l),a(e),s(e)}var p,f,m,g,v,A,y,b,x={x:0,y:0,k:1},_=[960,500],w=Do,M="mousedown.zoom",S="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",L=C(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=L.of(this,arguments),t=x;Cs?Zr.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=_[0],i=_[1],r=n/2,o=i/2,s=Zr.interpolateZoom([(r-x.x)/x.k,(o-x.y)/x.k,n/x.k],[(r-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var i=s(t),l=n/i[2];this.__chart__=x={x:r-i[0]*l,y:o-i[1]*l,k:l},a(e)}}).each("end.zoom",function(){s(e)}):(this.__chart__=x,o(e),a(e),s(e))})},e.translate=function(t){return arguments.length?(x={x:+t[0],y:+t[1],k:x.k},r(),e):[x.x,x.y]},e.scale=function(t){return arguments.length?(x={x:x.x,y:x.y,k:+t},r(),e):x.k},e.scaleExtent=function(t){return arguments.length?(w=null==t?Do:[+t[0],+t[1]],e):w},e.center=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],e):f},e.size=function(t){return arguments.length?(_=t&&[+t[0],+t[1]],e):_},e.x=function(t){return arguments.length?(A=t,v=t.copy(),x={x:0,y:0,k:1},e):A},e.y=function(t){return arguments.length?(b=t,y=t.copy(),x={x:0,y:0,k:1},e):b},Zr.rebind(e,L,"on")};var zo,Do=[0,1/0],Io="onwheel"in $r?(zo=function(){return-Zr.event.deltaY*(Zr.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $r?(zo=function(){return Zr.event.wheelDelta},"mousewheel"):(zo=function(){return-Zr.event.detail},"MozMousePixelScroll");ae.prototype.toString=function(){return this.rgb()+""},Zr.hsl=function(e,t,n){return 1===arguments.length?e instanceof le?se(e.h,e.s,e.l):Ee(""+e,Se,se):se(+e,+t,+n)};var Fo=le.prototype=new ae;Fo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),se(this.h,this.s,this.l/e)},Fo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),se(this.h,this.s,e*this.l)},Fo.rgb=function(){return ce(this.h,this.s,this.l)},Zr.hcl=function(e,t,n){return 1===arguments.length?e instanceof de?ue(e.h,e.c,e.l):ge(e instanceof fe?e.l:(e=Ce((e=Zr.rgb(e)).r,e.g,e.b)).l,e.a,e.b):ue(+e,+t,+n)};var Bo=de.prototype=new ae;Bo.brighter=function(e){return ue(this.h,this.c,Math.min(100,this.l+Uo*(arguments.length?e:1)))},Bo.darker=function(e){return ue(this.h,this.c,Math.max(0,this.l-Uo*(arguments.length?e:1)))},Bo.rgb=function(){return he(this.h,this.c,this.l).rgb()},Zr.lab=function(e,t,n){return 1===arguments.length?e instanceof fe?pe(e.l,e.a,e.b):e instanceof de?he(e.l,e.c,e.h):Ce((e=Zr.rgb(e)).r,e.g,e.b):pe(+e,+t,+n)};var Uo=18,Ho=.95047,Vo=1,Go=1.08883,jo=fe.prototype=new ae;jo.brighter=function(e){return pe(Math.min(100,this.l+Uo*(arguments.length?e:1)),this.a,this.b)},jo.darker=function(e){return pe(Math.max(0,this.l-Uo*(arguments.length?e:1)),this.a,this.b)},jo.rgb=function(){return me(this.l,this.a,this.b)},Zr.rgb=function(e,t,n){return 1===arguments.length?e instanceof we?_e(e.r,e.g,e.b):Ee(""+e,_e,ce):_e(~~e,~~t,~~n)};var Wo=we.prototype=new ae;Wo.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),_e(Math.min(255,~~(t/e)),Math.min(255,~~(n/e)),Math.min(255,~~(i/e)))):_e(r,r,r)},Wo.darker=function(e){return _e(~~((e=Math.pow(.7,arguments.length?e:1))*this.r),~~(e*this.g),~~(e*this.b))},Wo.hsl=function(){return Se(this.r,this.g,this.b)},Wo.toString=function(){return"#"+Me(this.r)+Me(this.g)+Me(this.b)};var qo=Zr.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});qo.forEach(function(e,t){qo.set(e,be(t))}),Zr.functor=Le,Zr.xhr=ke(Pe),Zr.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Ne(e,t,null==n?i:r(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?i:r(e)):n},a}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),c=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=new Function("d","return {"+e.map(function(e,t){return(0,l.default)(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(u>=l)return a;if(r)return r=!1,o;var t=u;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return u=n+2,13===(i=e.charCodeAt(n+1))?(r=!0,10===e.charCodeAt(n+2)&&++u):10===i&&(r=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;l>u;){var i,s=1;if(10===(i=e.charCodeAt(u++)))r=!0;else if(13===i)r=!0,10===e.charCodeAt(u)&&(++u,++s);else if(i!==c)continue;return e.substring(t,u-s)}return e.substring(t)}for(var i,r,o={},a={},s=[],l=e.length,u=0,d=0;(i=n())!==a;){for(var h=[];i!==o&&i!==a;)h.push(i),i=n();(!t||(h=t(h,d++)))&&s.push(h)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new y,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(a).join(e)].concat(t.map(function(t){return r.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},Zr.csv=Zr.dsv(",","text/csv"),Zr.tsv=Zr.dsv("\t","text/tab-separated-values"),Zr.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=S().changedTouches),t)for(var i,r=0,o=t.length;o>r;++r)if((i=t[r]).identifier===n)return Z(e,i)};var Xo,Yo,Jo,Zo,Ko,Qo=to[x(to,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Zr.timer=function(e,t,n){var i=arguments.length;2>i&&(t=0),3>i&&(n=Date.now());var r={c:e,t:n+t,f:!1,n:null};Yo?Yo.n=r:Xo=r,Yo=r,Jo||(Zo=clearTimeout(Zo),Jo=1,Qo(Oe))},Zr.timer.flush=function(){ze(),De()},Zr.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var $o=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*lo(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});Zr.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Zr.round(e,Ie(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),$o[8+n/3]};var ea=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ta=Zr.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Zr.round(e,Ie(e,t))).toFixed(Math.max(0,Math.min(20,Ie(e*(1+1e-15),t))))}}),na=Zr.time={},ia=Date;Be.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ra.setUTCDate.apply(this._,arguments)},setDay:function(){ra.setUTCDay.apply(this._,arguments)},setFullYear:function(){ra.setUTCFullYear.apply(this._,arguments)},setHours:function(){ra.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ra.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ra.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ra.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ra.setUTCSeconds.apply(this._,arguments)},setTime:function(){ra.setTime.apply(this._,arguments)}};var ra=Date.prototype;na.year=Ue(function(e){return(e=na.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),na.years=na.year.range,na.years.utc=na.year.utc.range,na.day=Ue(function(e){var t=new ia(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),na.days=na.day.range,na.days.utc=na.day.utc.range,na.dayOfYear=function(e){var t=na.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=na[e]=Ue(function(e){return(e=na.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=na.year(e).getDay();return Math.floor((na.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});na[e+"s"]=n.range,na[e+"s"].utc=n.utc.range,na[e+"OfYear"]=function(e){var n=na.year(e).getDay();return Math.floor((na.dayOfYear(e)+(n+t)%7)/7)}}),na.week=na.sunday,na.weeks=na.sunday.range,na.weeks.utc=na.sunday.utc.range,na.weekOfYear=na.sundayOfYear;var oa={"-":"",_:" ",0:"0"},aa=/^\s*\d+/,sa=/^%/;Zr.locale=function(e){return{numberFormat:function(e){var t=e.decimal,n=e.thousands,i=e.grouping,r=e.currency,o=i?function(e){for(var t=e.length,r=[],o=0,a=i[0];t>0&&a>0;)r.push(e.substring(t-=a,t+a)),a=i[o=(o+1)%i.length];return r.reverse().join(n)}:Pe;return function(e){var n=ea.exec(e),i=n[1]||" ",a=n[2]||">",s=n[3]||"",l=n[4]||"",c=n[5],u=+n[6],d=n[7],h=n[8],p=n[9],f=1,m="",g="",v=!1;switch(h&&(h=+h.substring(1)),(c||"0"===i&&"="===a)&&(c=i="0",a="=",d&&(u-=Math.floor((u-1)/4))),p){case"n":d=!0,p="g";break;case"%":f=100,g="%",p="f";break;case"p":f=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+p.toLowerCase());case"c":case"d":v=!0,h=0;break;case"s":f=-1,p="r"}"$"===l&&(m=r[0],g=r[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=ta.get(p)||Fe;var A=c&&d;return function(e){var n=g;if(v&&e%1)return"";var r=0>e||0===e&&0>1/e?(e=-e,"-"):s;if(0>f){var l=Zr.formatPrefix(e,h);e=l.scale(e),n=l.symbol+g}else e*=f;var y=(e=p(e,h)).lastIndexOf("."),b=0>y?e:e.substring(0,y),x=0>y?"":t+e.substring(y+1);!c&&d&&(b=o(b));var _=m.length+b.length+x.length+(A?0:r.length),w=u>_?new Array(_=u-_+1).join(i):"";return A&&(b=o(w+b)),r+=m,e=b+x,("<"===a?r+e+w:">"===a?w+r+e:"^"===a?w.substring(0,_>>=1)+r+e+w.substring(_):r+(A?e:w+e))+n}}}(e),timeFormat:function(e){function t(e){function t(t){for(var n,r,o,a=[],s=-1,l=0;++s<i;)37===e.charCodeAt(s)&&(a.push(e.substring(l,s)),null!=(r=oa[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=b[n])&&(n=o(t,null==r?"e"===n?" ":"0":r)),a.push(n),l=s+1);return a.push(e.substring(l,s)),a.join("")}var i=e.length;return t.parse=function(t){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(i,e,t,0)!=t.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var r=null!=i.Z&&ia!==Be,o=new(r?Be:ia);return"j"in i?o.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(o.setFullYear(i.y,0,1),o.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(o.getDay()+5)%7:i.w+7*i.U-(o.getDay()+6)%7)):o.setFullYear(i.y,i.m,i.d),o.setHours(i.H+Math.floor(i.Z/100),i.M+i.Z%100,i.S,i.L),r?o._:o},t.toString=function(){return e},t}function n(e,t,n,i){for(var r,o,a,s=0,l=t.length,c=n.length;l>s;){if(i>=c)return-1;if(37===(r=t.charCodeAt(s++))){if(a=t.charAt(s++),!(o=x[a in oa?t.charAt(s++):a])||(i=o(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var i=e.dateTime,r=e.date,o=e.time,a=e.periods,s=e.days,l=e.shortDays,c=e.months,u=e.shortMonths;t.utc=function(e){function n(e){try{var t=new(ia=Be);return t._=e,i(t)}finally{ia=Date}}var i=t(e);return n.parse=function(e){try{ia=Be;var t=i.parse(e);return t&&t._}finally{ia=Date}},n.toString=i.toString,n},t.multi=t.utc.multi=at;var d=Zr.map(),h=Ge(s),p=je(s),f=Ge(l),m=je(l),g=Ge(c),v=je(c),A=Ge(u),y=je(u);a.forEach(function(e,t){d.set(e.toLowerCase(),t)});var b={a:function(e){return l[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:t(i),d:function(e,t){return Ve(e.getDate(),t,2)},e:function(e,t){return Ve(e.getDate(),t,2)},H:function(e,t){return Ve(e.getHours(),t,2)},I:function(e,t){return Ve(e.getHours()%12||12,t,2)},j:function(e,t){return Ve(1+na.dayOfYear(e),t,3)},L:function(e,t){return Ve(e.getMilliseconds(),t,3)},m:function(e,t){return Ve(e.getMonth()+1,t,2)},M:function(e,t){return Ve(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return Ve(e.getSeconds(),t,2)},U:function(e,t){return Ve(na.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ve(na.mondayOfYear(e),t,2)},x:t(r),X:t(o),y:function(e,t){return Ve(e.getFullYear()%100,t,2)},Y:function(e,t){return Ve(e.getFullYear()%1e4,t,4)},Z:rt,"%":function(){return"%"}},x={a:function(e,t,n){f.lastIndex=0;var i=f.exec(t.substring(n));return i?(e.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){h.lastIndex=0;var i=h.exec(t.substring(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){A.lastIndex=0;var i=A.exec(t.substring(n));return i?(e.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){g.lastIndex=0;var i=g.exec(t.substring(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,t,i){return n(e,b.c.toString(),t,i)},d:Qe,e:Qe,H:et,I:et,j:$e,L:it,m:Ke,M:tt,p:function(e,t,n){var i=d.get(t.substring(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)},S:nt,U:qe,w:We,W:Xe,x:function(e,t,i){return n(e,b.x.toString(),t,i)},X:function(e,t,i){return n(e,b.X.toString(),t,i)},y:Je,Y:Ye,Z:Ze,"%":ot};return t}(e)}};var la=Zr.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Zr.format=la.numberFormat,Zr.geo={},st.prototype={s:0,t:0,add:function(e){lt(e,this.t,ca),lt(ca.s,this.s,this),this.s?this.t+=ca.t:this.s=ca.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ca=new st;Zr.geo.stream=function(e,t){e&&ua.hasOwnProperty(e.type)?ua[e.type](e,t):ct(e,t)};var ua={Feature:function(e,t){ct(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)ct(n[i].geometry,t)}},da={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){ut(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ut(n[i],t,0)},Polygon:function(e,t){dt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)dt(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)ct(n[i],t)}};Zr.geo.area=function(e){return ha=0,Zr.geo.stream(e,fa),ha};var ha,pa=new st,fa={sphere:function(){ha+=4*So},point:_,lineStart:_,lineEnd:_,polygonStart:function(){pa.reset(),fa.lineStart=ht},polygonEnd:function(){var e=2*pa;ha+=0>e?4*So+e:e,fa.lineStart=fa.lineEnd=fa.point=_}};Zr.geo.bounds=function(){function e(e,t){y.push(b=[u=e,h=e]),d>t&&(d=t),t>p&&(p=t)}function t(t,n){var i=pt([t*Po,n*Po]);if(v){var r=mt(v,i),o=mt([r[1],-r[0],0],r);At(o),o=yt(o);var a=t-f,l=a>0?1:-1,c=o[0]*ko*l,m=lo(a)>180;if(m^(c>l*f&&l*t>c))(g=o[1]*ko)>p&&(p=g);else if(m^((c=(c+360)%360-180)>l*f&&l*t>c)){var g=-o[1]*ko;d>g&&(d=g)}else d>n&&(d=n),n>p&&(p=n);m?f>t?s(u,t)>s(u,h)&&(h=t):s(t,h)>s(u,h)&&(u=t):h>=u?(u>t&&(u=t),t>h&&(h=t)):t>f?s(u,t)>s(u,h)&&(h=t):s(t,h)>s(u,h)&&(u=t)}else e(t,n);v=i,f=t}function n(){x.point=t}function i(){b[0]=u,b[1]=h,x.point=e,v=null}function r(e,n){if(v){var i=e-f;A+=lo(i)>180?i+(i>0?360:-360):i}else m=e,g=n;fa.point(e,n),t(e,n)}function o(){fa.lineStart()}function a(){r(m,g),fa.lineEnd(),lo(A)>Ro&&(u=-(h=180)),b[0]=u,b[1]=h,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function c(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var u,d,h,p,f,m,g,v,A,y,b,x={point:e,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=o,x.lineEnd=a,A=0,fa.polygonStart()},polygonEnd:function(){fa.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=i,0>pa?(u=-(h=180),d=-(p=90)):A>Ro?p=90:-Ro>A&&(d=-90),b[0]=u,b[1]=h}};return function(e){if(p=h=-(u=d=1/0),y=[],Zr.geo.stream(e,x),o=y.length){y.sort(l);for(var t=1,n=[f=y[0]];o>t;++t)c((r=y[t])[0],f)||c(r[1],f)?(s(f[0],r[1])>s(f[0],f[1])&&(f[1]=r[1]),s(r[0],f[1])>s(f[0],f[1])&&(f[0]=r[0])):n.push(f=r);for(var i,r,o,a=-1/0,f=(t=0,n[o=n.length-1]);o>=t;f=r,++t)r=n[t],(i=s(f[1],r[0]))>a&&(a=i,u=r[0],h=f[1])}return y=b=null,1/0===u||1/0===d?[[NaN,NaN],[NaN,NaN]]:[[u,d],[h,p]]}}(),Zr.geo.centroid=function(e){ma=ga=va=Aa=ya=ba=xa=_a=wa=Ma=Ea=0,Zr.geo.stream(e,Sa);var t=wa,n=Ma,i=Ea,r=t*t+n*n+i*i;return Lo>r&&(t=ba,n=xa,i=_a,Ro>ga&&(t=va,n=Aa,i=ya),Lo>(r=t*t+n*n+i*i))?[NaN,NaN]:[Math.atan2(n,t)*ko,ie(i/Math.sqrt(r))*ko]};var ma,ga,va,Aa,ya,ba,xa,_a,wa,Ma,Ea,Sa={sphere:_,point:xt,lineStart:wt,lineEnd:Mt,polygonStart:function(){Sa.lineStart=Et},polygonEnd:function(){Sa.lineStart=wt}},Ca=Lt(St,function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?So:-So,l=lo(o-n);lo(l-So)<Ro?(e.point(n,i=(i+a)/2>0?To:-To),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(o,i),t=0):r!==s&&l>=So&&(lo(n-r)<Ro&&(n-=r*Ro),lo(o-s)<Ro&&(o-=s*Ro),i=function(e,t,n,i){var r,o,a=Math.sin(e-n);return lo(a)>Ro?Math.atan((Math.sin(t)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*o*a)):(t+i)/2}(n,i,o,a),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=o,i=a),r=s},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*To,i.point(-So,r),i.point(0,r),i.point(So,r),i.point(So,0),i.point(So,-r),i.point(0,-r),i.point(-So,-r),i.point(-So,0),i.point(-So,r);else if(lo(e[0]-t[0])>Ro){var o=e[0]<t[0]?So:-So;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-So,-So/2]),Ta=1e9;Zr.geo.clipExtent=function(){var e,t,n,i,r,o,a={stream:function(e){return r&&(r.valid=!1),(r=o(e)).valid=!0,r},extent:function(s){return arguments.length?(o=zt(e=+s[0][0],t=+s[0][1],n=+s[1][0],i=+s[1][1]),r&&(r.valid=!1,r=null),a):[[e,t],[n,i]]}};return a.extent([[0,0],[960,500]])},(Zr.geo.conicEqualArea=function(){return It(Ft)}).raw=Ft,Zr.geo.albers=function(){return Zr.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zr.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(i(o,a),t)||r(o,a),t}var t,n,i,r,o=Zr.geo.albers(),a=Zr.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Zr.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?a:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),i=s.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var c=o.scale(),u=+t[0],d=+t[1];return n=o.translate(t).clipExtent([[u-.455*c,d-.238*c],[u+.455*c,d+.238*c]]).stream(l).point,i=a.translate([u-.307*c,d+.201*c]).clipExtent([[u-.425*c+Ro,d+.12*c+Ro],[u-.214*c-Ro,d+.234*c-Ro]]).stream(l).point,r=s.translate([u-.205*c,d+.212*c]).clipExtent([[u-.214*c+Ro,d+.166*c+Ro],[u-.115*c-Ro,d+.234*c-Ro]]).stream(l).point,e},e.scale(1070)};var Ra,La,Pa,ka,Na,Oa,za={point:_,lineStart:_,lineEnd:_,polygonStart:function(){La=0,za.lineStart=Bt},polygonEnd:function(){za.lineStart=za.lineEnd=za.point=_,Ra+=lo(La/2)}},Da={point:function(e,t){Pa>e&&(Pa=e),e>Na&&(Na=e),ka>t&&(ka=t),t>Oa&&(Oa=t)},lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},Ia={point:Ht,lineStart:Vt,lineEnd:Gt,polygonStart:function(){Ia.lineStart=jt},polygonEnd:function(){Ia.point=Ht,Ia.lineStart=Vt,Ia.lineEnd=Gt}};Zr.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=r(o)),Zr.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,i,r,o,a,s=4.5;return e.area=function(e){return Ra=0,Zr.geo.stream(e,r(za)),Ra},e.centroid=function(e){return va=Aa=ya=ba=xa=_a=wa=Ma=Ea=0,Zr.geo.stream(e,r(Ia)),Ea?[wa/Ea,Ma/Ea]:_a?[ba/_a,xa/_a]:ya?[va/ya,Aa/ya]:[NaN,NaN]},e.bounds=function(e){return Na=Oa=-(Pa=ka=1/0),Zr.geo.stream(e,r(Da)),[[Pa,ka],[Na,Oa]]},e.projection=function(e){return arguments.length?(r=(n=e)?e.stream||function(e){var t=Wt(function(t,n){return e([t*ko,n*ko])});return function(e){return Zt(t(e))}}(e):Pe,t()):n},e.context=function(e){return arguments.length?(o=null==(i=e)?new function(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function i(){s.point=e}function r(){a.push("Z")}var o=Ut(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(e){return o=Ut(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}:new function(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,a,0,Co)}function n(t,n){e.moveTo(t,n),s.point=i}function i(t,n){e.lineTo(t,n)}function r(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return a=e,s},result:_};return s}(e),"function"!=typeof s&&o.pointRadius(s),t()):i},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(Zr.geo.albersUsa()).context(null)},Zr.geo.transform=function(e){return{stream:function(t){var n=new qt(t);for(var i in e)n[i]=e[i];return n}}},qt.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zr.geo.projection=Yt,Zr.geo.projectionMutator=Jt,(Zr.geo.equirectangular=function(){return Yt(Kt)}).raw=Kt.invert=Kt,Zr.geo.rotation=function(e){function t(t){return(t=e(t[0]*Po,t[1]*Po))[0]*=ko,t[1]*=ko,t}return e=$t(e[0]%360*Po,e[1]*Po,e.length>2?e[2]*Po:0),t.invert=function(t){return(t=e.invert(t[0]*Po,t[1]*Po))[0]*=ko,t[1]*=ko,t},t},Qt.invert=Kt,Zr.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=$t(-e[0]*Po,-e[1]*Po,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=ko,e[1]*=ko}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=rn((t=+i)*Po,r*Po),e):t},e.precision=function(i){return arguments.length?(n=rn(t*Po,(r=+i)*Po),e):r},e.angle(90)},Zr.geo.distance=function(e,t){var n,i=(t[0]-e[0])*Po,r=e[1]*Po,o=t[1]*Po,a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r),u=Math.sin(o),d=Math.cos(o);return Math.atan2(Math.sqrt((n=d*a)*n+(n=c*u-l*d*s)*n),l*u+c*d*s)},Zr.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Zr.range(Math.ceil(o/g)*g,r,g).map(h).concat(Zr.range(Math.ceil(c/v)*v,l,v).map(p)).concat(Zr.range(Math.ceil(i/f)*f,n,f).filter(function(e){return lo(e%g)>Ro}).map(u)).concat(Zr.range(Math.ceil(s/m)*m,a,m).filter(function(e){return lo(e%v)>Ro}).map(d))}var n,i,r,o,a,s,l,c,u,d,h,p,f=10,m=f,g=90,v=360,A=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(l).slice(1),h(r).reverse().slice(1),p(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],r=+t[1][0],c=+t[0][1],l=+t[1][1],o>r&&(t=o,o=r,r=t),c>l&&(t=c,c=l,l=t),e.precision(A)):[[o,c],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(A)):[[i,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.minorStep=function(t){return arguments.length?(f=+t[0],m=+t[1],e):[f,m]},e.precision=function(t){return arguments.length?(A=+t,u=an(s,a,90),d=sn(i,n,A),h=an(c,l,90),p=sn(o,r,A),e):A},e.majorExtent([[-180,-90+Ro],[180,90-Ro]]).minorExtent([[-180,-80-Ro],[180,80+Ro]])},Zr.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=ln,r=cn;return e.distance=function(){return Zr.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},Zr.geo.interpolate=function(e,t){return function(e,t,n,i){var r=Math.cos(t),o=Math.sin(t),a=Math.cos(i),s=Math.sin(i),l=r*Math.cos(e),c=r*Math.sin(e),u=a*Math.cos(n),d=a*Math.sin(n),h=2*Math.asin(Math.sqrt(oe(i-t)+r*a*oe(n-e))),p=1/Math.sin(h),f=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,i=n*l+t*u,r=n*c+t*d,a=n*o+t*s;return[Math.atan2(r,i)*ko,Math.atan2(a,Math.sqrt(i*i+r*r))*ko]}:function(){return[e*ko,t*ko]};return f.distance=h,f}(e[0]*Po,e[1]*Po,t[0]*Po,t[1]*Po)},Zr.geo.length=function(e){return Fa=0,Zr.geo.stream(e,Ba),Fa};var Fa,Ba={sphere:_,point:_,lineStart:function(){function e(e,r){var o=Math.sin(r*=Po),a=Math.cos(r),s=lo((e*=Po)-t),l=Math.cos(s);Fa+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=i*o-n*a*l)*s),n*o+i*a*l),t=e,n=o,i=a}var t,n,i;Ba.point=function(r,o){t=r*Po,n=Math.sin(o*=Po),i=Math.cos(o),Ba.point=e},Ba.lineEnd=function(){Ba.point=Ba.lineEnd=_}},lineEnd:_,polygonStart:_,polygonEnd:_},Ua=un(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(Zr.geo.azimuthalEqualArea=function(){return Yt(Ua)}).raw=Ua;var Ha=un(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},Pe);(Zr.geo.azimuthalEquidistant=function(){return Yt(Ha)}).raw=Ha,(Zr.geo.conicConformal=function(){return It(dn)}).raw=dn,(Zr.geo.conicEquidistant=function(){return It(hn)}).raw=hn;var Va=un(function(e){return 1/e},Math.atan);(Zr.geo.gnomonic=function(){return Yt(Va)}).raw=Va,pn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-To]},(Zr.geo.mercator=function(){return fn(pn)}).raw=pn;var Ga=un(function(){return 1},Math.asin);(Zr.geo.orthographic=function(){return Yt(Ga)}).raw=Ga;var ja=un(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(Zr.geo.stereographic=function(){return Yt(ja)}).raw=ja,mn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-To]},(Zr.geo.transverseMercator=function(){var e=fn(mn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[-(e=t())[1],e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},e.rotate([0,0])}).raw=mn,Zr.geom={},Zr.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,r=Le(n),o=Le(i),a=e.length,s=[],l=[];for(t=0;a>t;t++)s.push([+r.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort(yn),t=0;a>t;t++)l.push([s[t][0],-s[t][1]]);var c=An(s),u=An(l),d=u[0]===c[0],h=u[u.length-1]===c[c.length-1],p=[];for(t=c.length-1;t>=0;--t)p.push(e[s[c[t]][2]]);for(t=+d;t<u.length-h;++t)p.push(e[s[u[t]][2]]);return p}var n=gn,i=vn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},Zr.geom.polygon=function(e){return fo(e,Wa),e};var Wa=Zr.geom.polygon.prototype=[];Wa.area=function(){for(var e,t=-1,n=this.length,i=this[n-1],r=0;++t<n;)e=i,i=this[t],r+=e[1]*i[0]-e[0]*i[1];return.5*r},Wa.centroid=function(e){var t,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(e=-1/(6*this.area()));++i<r;)t=s,s=this[i],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},Wa.clip=function(e){for(var t,n,i,r,o,a,s=_n(e),l=-1,c=this.length-_n(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,r=this[l],o=t[(i=t.length-s)-1],n=-1;++n<i;)bn(a=t[n],u,r)?(bn(o,u,r)||e.push(xn(o,a,u,r)),e.push(a)):bn(o,u,r)&&e.push(xn(o,a,u,r)),o=a;s&&e.push(e[0]),u=r}return e};var qa,Xa,Ya,Ja,Za,Ka=[],Qa=[];Rn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ln),t.length},Fn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Bn.prototype={insert:function(e,t){var n,i,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Gn(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.R&&(Hn(this,n),n=(e=n).U),n.C=!1,i.C=!0,Vn(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,e=i):(e===n.L&&(Vn(this,n),n=(e=n).U),n.C=!1,i.C=!0,Hn(this,i)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,i,r=e.U,o=e.L,a=e.R;if(n=o?a?Gn(a):o:a,r?r.L===e?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=e.U,e=n.R,r.L=e,n.R=a,a.U=n):(n.U=r,r=n,e=n.R)):(i=e.C,e=n),e&&(e.U=r),!i){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,Hn(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Vn(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,Hn(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,Vn(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Hn(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,Vn(this,r),e=this._;break}t.C=!0,e=r,r=r.U}while(!e.C);e&&(e.C=!1)}}},Zr.geom.voronoi=function(e){function t(e){var t=new Array(e.length),i=s[0][0],r=s[0][1],o=s[1][0],a=s[1][1];return jn(n(e),s).cells.forEach(function(n,s){var l=n.edges,c=n.site;(t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=i&&c.x<=o&&c.y>=r&&c.y<=a?[[i,a],[o,a],[o,r],[i,r]]:[]).point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/Ro)*Ro,y:Math.round(a(e,t)/Ro)*Ro,i:t}})}var i=gn,r=vn,o=i,a=r,s=$a;return e?t(e):(t.links=function(e){return jn(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return jn(n(e)).cells.forEach(function(n,i){for(var r,o=n.site,a=n.edges.sort(Ln),s=-1,l=a.length,c=a[l-1].edge,u=c.l===o?c.r:c.l;++s<l;)c,r=u,u=(c=a[s].edge).l===o?c.r:c.l,i<r.i&&i<u.i&&qn(o,r,u)<0&&t.push([e[i],e[r.i],e[u.i]])}),t},t.x=function(e){return arguments.length?(o=Le(i=e),t):i},t.y=function(e){return arguments.length?(a=Le(r=e),t):r},t.clipExtent=function(e){return arguments.length?(s=null==e?$a:e,t):s===$a?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===$a?null:s&&s[1]},t)};var $a=[[-1e6,-1e6],[1e6,1e6]];Zr.geom.delaunay=function(e){return Zr.geom.voronoi().triangles(e)},Zr.geom.quadtree=function(e,t,n,i,r){function o(e){function o(e,t,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,u=e.y;if(null!=l)if(lo(l-n)+lo(u-i)<.01)c(e,t,n,i,r,o,a,s);else{var d=e.point;e.x=e.y=e.point=null,c(e,d,l,u,r,o,a,s),c(e,t,n,i,r,o,a,s)}else e.x=n,e.y=i,e.point=t}else c(e,t,n,i,r,o,a,s)}function c(e,t,n,i,r,a,s,l){var c=.5*(r+s),u=.5*(a+l),d=n>=c,h=i>=u,p=(h<<1)+d;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){o(E,e,+y(e,++p),+b(e,p),m,g,v,A)}}),d?r=c:s=c,h?a=u:l=u,o(e,t,n,i,r,a,s,l)}var u,d,h,p,f,m,g,v,A,y=Le(s),b=Le(l);if(null!=t)m=t,g=n,v=i,A=r;else if(v=A=-(m=g=1/0),d=[],h=[],f=e.length,a)for(p=0;f>p;++p)(u=e[p]).x<m&&(m=u.x),u.y<g&&(g=u.y),u.x>v&&(v=u.x),u.y>A&&(A=u.y),d.push(u.x),h.push(u.y);else for(p=0;f>p;++p){var x=+y(u=e[p],p),_=+b(u,p);m>x&&(m=x),g>_&&(g=_),x>v&&(v=x),_>A&&(A=_),d.push(x),h.push(_)}var w=v-m,M=A-g;w>M?A=g+w:v=m+M;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){o(E,e,+y(e,++p),+b(e,p),m,g,v,A)}};if(E.visit=function(e){!function e(t,n,i,r,o,a){if(!t(n,i,r,o,a)){var s=.5*(i+o),l=.5*(r+a),c=n.nodes;c[0]&&e(t,c[0],i,r,s,l),c[1]&&e(t,c[1],s,r,o,l),c[2]&&e(t,c[2],i,l,s,a),c[3]&&e(t,c[3],s,l,o,a)}}(e,E,m,g,v,A)},p=-1,null==t){for(;++p<f;)o(E,e[p],d[p],h[p],m,g,v,A);--p}else e.forEach(E.add);return d=h=e=u=null,E}var a,s=gn,l=vn;return(a=arguments.length)?(s=Xn,l=Yn,3===a&&(r=n,i=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(l=e,o):l},o.extent=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=+e[0][0],n=+e[0][1],i=+e[1][0],r=+e[1][1]),o):null==t?null:[[t,n],[i,r]]},o.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),o):null==t?null:[i-t,r-n]},o)},Zr.interpolateRgb=Jn,Zr.interpolateObject=Zn,Zr.interpolateNumber=Kn,Zr.interpolateString=Qn;var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ts=new RegExp(es.source,"g");Zr.interpolate=$n,Zr.interpolators=[function(e,t){var n=void 0===t?"undefined":(0,s.default)(t);return("string"===n?qo.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Jn:Qn:t instanceof ae?Jn:Array.isArray(t)?ei:"object"===n&&isNaN(t)?Zn:Kn)(e,t)}],Zr.interpolateArray=ei;var ns=function(){return Pe},is=Zr.map({linear:ns,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return ii},cubic:function(){return ri},sin:function(){return ai},exp:function(){return si},circle:function(){return li},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Co*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,-10*i)*Math.sin((i-n)*Co/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ci}}),rs=Zr.map({in:Pe,out:ti,"in-out":ni,"out-in":function(e){return ni(ti(e))}});Zr.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,i=t>=0?e.substring(t+1):"in";return n=is.get(n)||ns,function(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}((i=rs.get(i)||Pe)(n.apply(null,Kr.call(arguments,1))))},Zr.interpolateHcl=function(e,t){e=Zr.hcl(e),t=Zr.hcl(t);var n=e.h,i=e.c,r=e.l,o=t.h-n,a=t.c-i,s=t.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?t.c:i),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return he(n+o*e,i+a*e,r+s*e)+""}},Zr.interpolateHsl=function(e,t){e=Zr.hsl(e),t=Zr.hsl(t);var n=e.h,i=e.s,r=e.l,o=t.h-n,a=t.s-i,s=t.l-r;return isNaN(a)&&(a=0,i=isNaN(i)?t.s:i),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:-180>o&&(o+=360),function(e){return ce(n+o*e,i+a*e,r+s*e)+""}},Zr.interpolateLab=function(e,t){e=Zr.lab(e),t=Zr.lab(t);var n=e.l,i=e.a,r=e.b,o=t.l-n,a=t.a-i,s=t.b-r;return function(e){return me(n+o*e,i+a*e,r+s*e)+""}},Zr.interpolateRound=ui,Zr.transform=function(e){var t=$r.createElementNS(Zr.ns.prefix.svg,"g");return(Zr.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new di(n?n.matrix:os)})(e)},di.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var os={a:1,b:0,c:0,d:1,e:0,f:0};Zr.interpolateTransform=fi,Zr.layout={},Zr.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;++n<i;)t.push(vi(e[n]));return t}},Zr.layout.chord=function(){function e(){var e,c,d,h,p,f={},m=[],g=Zr.range(o),v=[];for(n=[],i=[],e=0,h=-1;++h<o;){for(c=0,p=-1;++p<o;)c+=r[h][p];m.push(c),v.push(Zr.range(o)),e+=c}for(a&&g.sort(function(e,t){return a(m[e],m[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(Co-u*o)/e,c=0,h=-1;++h<o;){for(d=c,p=-1;++p<o;){var A=g[h],y=v[A][p],b=r[A][y],x=c,_=c+=b*e;f[A+"-"+y]={index:A,subindex:y,startAngle:x,endAngle:_,value:b}}i[A]={index:A,startAngle:d,endAngle:c,value:(c-d)/e},c+=u}for(h=-1;++h<o;)for(p=h-1;++p<o;){var w=f[h+"-"+p],M=f[p+"-"+h];(w.value||M.value)&&n.push(w.value<M.value?{source:M,target:w}:{source:w,target:M})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,o,a,s,l,c={},u=0;return c.matrix=function(e){return arguments.length?(o=(r=e)&&r.length,n=i=null,c):r},c.padding=function(e){return arguments.length?(u=e,n=i=null,c):u},c.sortGroups=function(e){return arguments.length?(a=e,n=i=null,c):a},c.sortSubgroups=function(e){return arguments.length?(s=e,n=null,c):s},c.sortChords=function(e){return arguments.length?(l=e,n&&t(),c):l},c.chords=function(){return n||e(),n},c.groups=function(){return i||e(),i},c},Zr.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=r-n,l=o*o+a*a;if(l>s*s/g){if(f>l){var c=t.charge/l;e.px-=o*c,e.py-=a*c}return!0}if(t.point&&l&&f>l){c=t.pointCharge/l;e.px-=o*c,e.py-=a*c}}return!t.charge}}function t(e){e.px=Zr.event.x,e.py=Zr.event.y,s.resume()}var n,i,r,o,a,s={},l=Zr.dispatch("start","tick","end"),c=[1,1],u=.9,d=as,h=ss,p=-30,f=ls,m=.1,g=.64,v=[],A=[];return s.tick=function(){if((i*=.99)<.005)return l.end({type:"end",alpha:i=0}),!0;var t,n,s,d,h,f,g,y,b,x=v.length,_=A.length;for(n=0;_>n;++n)d=(s=A[n]).source,(f=(y=(h=s.target).x-d.x)*y+(b=h.y-d.y)*b)&&(y*=f=i*o[n]*((f=Math.sqrt(f))-r[n])/f,b*=f,h.x-=y*(g=d.weight/(h.weight+d.weight)),h.y-=b*g,d.x+=y*(g=1-g),d.y+=b*g);if((g=i*m)&&(y=c[0]/2,b=c[1]/2,n=-1,g))for(;++n<x;)(s=v[n]).x+=(y-s.x)*g,s.y+=(b-s.y)*g;if(p)for(function e(t,n,i){var r=0,o=0;if(t.charge=0,!t.leaf)for(var a,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(a=s[c])&&(e(a,n,i),t.charge+=a.charge,r+=a.charge*a.cx,o+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=n*i[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,o+=u*t.point.y}t.cx=r/t.charge,t.cy=o/t.charge}(t=Zr.geom.quadtree(v),i,a),n=-1;++n<x;)(s=v[n]).fixed||t.visit(e(s));for(n=-1;++n<x;)(s=v[n]).fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*u,s.y-=(s.py-(s.py=s.y))*u);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(A=e,s):A},s.size=function(e){return arguments.length?(c=e,s):c},s.linkDistance=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.friction=function(e){return arguments.length?(u=+e,s):u},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(f=e*e,s):Math.sqrt(f)},s.gravity=function(e){return arguments.length?(m=+e,s):m},s.theta=function(e){return arguments.length?(g=e*e,s):Math.sqrt(g)},s.alpha=function(e){return arguments.length?(e=+e,i?i=e>0?e:0:e>0&&(l.start({type:"start",alpha:i=e}),Zr.timer(s.tick)),s):i},s.start=function(){function e(e,i){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;c>s;++s){var r=A[s];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var o,a=n[t],s=-1,c=a.length;++s<c;)if(!isNaN(o=a[s][e]))return o;return Math.random()*i}var t,n,i,l=v.length,u=A.length,f=c[0],m=c[1];for(t=0;l>t;++t)(i=v[t]).index=t,i.weight=0;for(t=0;u>t;++t)"number"==typeof(i=A[t]).source&&(i.source=v[i.source]),"number"==typeof i.target&&(i.target=v[i.target]),++i.source.weight,++i.target.weight;for(t=0;l>t;++t)i=v[t],isNaN(i.x)&&(i.x=e("x",f)),isNaN(i.y)&&(i.y=e("y",m)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof d)for(t=0;u>t;++t)r[t]=+d.call(this,A[t],t);else for(t=0;u>t;++t)r[t]=d;if(o=[],"function"==typeof h)for(t=0;u>t;++t)o[t]=+h.call(this,A[t],t);else for(t=0;u>t;++t)o[t]=h;if(a=[],"function"==typeof p)for(t=0;l>t;++t)a[t]=+p.call(this,v[t],t);else for(t=0;l>t;++t)a[t]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=Zr.behavior.drag().origin(Pe).on("dragstart.force",yi).on("drag.force",t).on("dragend.force",bi)),arguments.length?void this.on("mouseover.force",xi).on("mouseout.force",_i).call(n):n},Zr.rebind(s,l,"on")};var as=20,ss=1,ls=1/0;Zr.layout.hierarchy=function(){function e(o,a,s){var l=i.call(t,o,a);if(o.depth=a,s.push(o),l&&(c=l.length)){for(var c,u,d=-1,h=o.children=new Array(c),p=0,f=a+1;++d<c;)(u=h[d]=e(l[d],f,s)).parent=o,p+=u.value;n&&h.sort(n),r&&(o.value=p)}else delete o.children,r&&(o.value=+r.call(t,o,a)||0);return o}function t(t){var n=[];return e(t,0,n),n}var n=Si,i=Mi,r=Ei;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(e){return arguments.length?(i=e,t):i},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return function e(n,i){var o=n.children,a=0;if(o&&(s=o.length))for(var s,l=-1,c=i+1;++l<s;)a+=e(o[l],c);else r&&(a=+r.call(t,n,i)||0);return r&&(n.value=a),a}(e,0),e},t},Zr.layout.partition=function(){function e(e,i){var r=t.call(this,e,i);return function e(t,n,i,r){var o=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,o&&(a=o.length)){var a,s,l,c=-1;for(i=t.value?i/t.value:0;++c<a;)e(s=o[c],n,l=s.value*i,r),n+=l}}(r[0],0,n[0],n[1]/function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}(r[0])),r}var t=Zr.layout.hierarchy(),n=[1,1];return e.size=function(t){return arguments.length?(n=t,e):n},wi(e,t)},Zr.layout.pie=function(){function e(o){var a=o.map(function(n,i){return+t.call(e,n,i)}),s=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-s)/Zr.sum(a),c=Zr.range(o.length);null!=n&&c.sort(n===cs?function(e,t){return a[t]-a[e]}:function(e,t){return n(o[e],o[t])});var u=[];return c.forEach(function(e){var t;u[e]={data:o[e],value:t=a[e],startAngle:s,endAngle:s+=t*l}}),u}var t=Number,n=cs,i=0,r=Co;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e};var cs={};Zr.layout.stack=function(){function e(s,l){var c=s.map(function(n,i){return t.call(e,n,i)}),u=c.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),d=n.call(e,u,l);c=Zr.permute(c,d),u=Zr.permute(u,d);var h,p,f,m=i.call(e,u,l),g=c.length,v=c[0].length;for(p=0;v>p;++p)for(r.call(e,c[0][p],f=m[p],u[0][p][1]),h=1;g>h;++h)r.call(e,c[h][p],f+=u[h-1][p][1],u[h][p][1]);return s}var t=Pe,n=Pi,i=ki,r=Li,o=Ti,a=Ri;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:us.get(t)||Pi,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:ds.get(t)||ki,e):i},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(r=t,e):r},e};var us=Zr.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(Ni),o=e.map(Oi),a=Zr.range(i).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,c=[],u=[];for(t=0;i>t;++t)n=a[t],l>s?(s+=o[n],c.push(n)):(l+=o[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return Zr.range(e.length).reverse()},default:Pi}),ds=Zr.map({silhouette:function(e){var t,n,i,r=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>s&&(s=i),a.push(i)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,i,r,o,a,s,l,c,u=e.length,d=e[0],h=d.length,p=[];for(p[0]=l=c=0,n=1;h>n;++n){for(t=0,r=0;u>t;++t)r+=e[t][n][1];for(t=0,o=0,s=d[n][0]-d[n-1][0];u>t;++t){for(i=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>i;++i)a+=(e[i][n][1]-e[i][n-1][1])/s;o+=a*e[t][n][1]}p[n]=l-=r?o/r*s:0,c>l&&(c=l)}for(n=0;h>n;++n)p[n]-=c;return p},expand:function(e){var t,n,i,r=e.length,o=e[0].length,a=1/r,s=[];for(n=0;o>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:ki});Zr.layout.histogram=function(){function e(e,o){for(var a,s,l=[],c=e.map(n,this),u=i.call(this,c,o),d=r.call(this,u,c,o),h=(o=-1,c.length),p=d.length-1,f=t?1:1/h;++o<p;)(a=l[o]=[]).dx=d[o+1]-(a.x=d[o]),a.y=0;if(p>0)for(o=-1;++o<h;)(s=c[o])>=u[0]&&s<=u[1]&&((a=l[Zr.bisect(d,s,1,p)-1]).y+=f,a.push(e[o]));return l}var t=!0,n=Number,i=Fi,r=Di;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=Le(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return Ii(e,t)}:Le(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Zr.layout.tree=function(){function e(e,o){function a(e,t,i){if(t){for(var r,o=e,a=e,s=t,l=e.parent.children[0],c=o._tree.mod,u=a._tree.mod,d=s._tree.mod,h=l._tree.mod;s=Hi(s),o=Ui(o),s&&o;)l=Ui(l),(a=Hi(a))._tree.ancestor=e,(r=s._tree.prelim+d-o._tree.prelim-c+n(s,o))>0&&(Xi(Yi(s,e,i),e,r),c+=r,u+=r),d+=s._tree.mod,c+=o._tree.mod,h+=l._tree.mod,u+=a._tree.mod;s&&!Hi(a)&&(a._tree.thread=s,a._tree.mod+=d-u),o&&!Ui(l)&&(l._tree.thread=o,l._tree.mod+=c-h,i=e)}return i}var s=t.call(this,e,o),l=s[0];qi(l,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),function e(t,i){var r=t.children,o=t._tree;if(r&&(s=r.length)){for(var s,l,c,u=r[0],d=u,h=-1;++h<s;)e(c=r[h],l),d=a(c,l,d),l=c;!function(e){for(var t,n=0,i=0,r=e.children,o=r.length;--o>=0;)(t=r[o]._tree).prelim+=n,t.mod+=n,n+=t.shift+(i+=t.change)}(t);var p=.5*(u._tree.prelim+c._tree.prelim);i?(o.prelim=i._tree.prelim+n(t,i),o.mod=o.prelim-p):o.prelim=p}else i&&(o.prelim=i._tree.prelim+n(t,i))}(l),function e(t,n){t.x=t._tree.prelim+n;var i=t.children;if(i&&(r=i.length)){var r,o=-1;for(n+=t._tree.mod;++o<r;)e(i[o],n)}}(l,-l._tree.prelim);var c=Vi(l,ji),u=Vi(l,Gi),d=Vi(l,Wi),h=c.x-n(c,u)/2,p=u.x+n(u,c)/2,f=d.depth||1;return qi(l,r?function(e){e.x*=i[0],e.y=e.depth*i[1],delete e._tree}:function(e){e.x=(e.x-h)/(p-h)*i[0],e.y=e.depth/f*i[1],delete e._tree}),s}var t=Zr.layout.hierarchy().sort(null).value(null),n=Bi,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},wi(e,t)},Zr.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],l=r[0],c=r[1],u=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,qi(s,function(e){e.r=+u(e.value)}),qi(s,$i),i){var d=i*(t?1:Math.max(2*s.r/l,2*s.r/c))/2;qi(s,function(e){e.r+=d}),qi(s,$i),qi(s,function(e){e.r-=d})}return function e(t,n,i,r){var o=t.children;if(t.x=n+=r*t.x,t.y=i+=r*t.y,t.r*=r,o)for(var a=-1,s=o.length;++a<s;)e(o[a],n,i,r)}(s,l/2,c/2,t?1:1/Math.max(2*s.r/l,2*s.r/c)),a}var t,n=Zr.layout.hierarchy().sort(Ji),i=0,r=[1,1];return e.size=function(t){return arguments.length?(r=t,e):r},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(i=+t,e):i},wi(e,n)},Zr.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),l=s[0],c=0;qi(l,function(e){var t=e.children;t&&t.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(t),e.y=function(e){return 1+Zr.max(e,function(e){return e.y})}(t)):(e.x=a?c+=n(e,a):0,e.y=0,a=e)});var u=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(l),d=function e(t){var n,i=t.children;return i&&(n=i.length)?e(i[n-1]):t}(l),h=u.x-n(u,d)/2,p=d.x+n(d,u)/2;return qi(l,r?function(e){e.x=(e.x-l.x)*i[0],e.y=(l.y-e.y)*i[1]}:function(e){e.x=(e.x-h)/(p-h)*i[0],e.y=(1-(l.y?e.y/l.y:1))*i[1]}),s}var t=Zr.layout.hierarchy().sort(null).value(null),n=Bi,i=[1,1],r=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(r=null==(i=t),e):r?null:i},e.nodeSize=function(t){return arguments.length?(r=null!=(i=t),e):r?i:null},wi(e,t)},Zr.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,o=e.length;++r<o;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var o=n.children;if(o&&o.length){var a,s,l,c=h(n),u=[],d=o.slice(),p=1/0,m="slice"===f?c.dx:"dice"===f?c.dy:"slice-dice"===f?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(e(d,c.dx*c.dy/n.value),u.area=0;(l=d.length)>0;)u.push(a=d[l-1]),u.area+=a.area,"squarify"!==f||(s=i(u,m))<=p?(d.pop(),p=s):(u.area-=u.pop().area,r(u,m,c,!1),m=Math.min(c.dx,c.dy),u.length=u.area=0,p=1/0);u.length&&(r(u,m,c,!0),u.length=u.area=0),o.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var o,a=h(t),s=i.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(o>n&&(o=n),n>r&&(r=n));return t*=t,(i*=i)?Math.max(t*r*m/i,i/(t*o*m)):1/0}function r(e,t,n,i){var r,o=-1,a=e.length,s=n.x,l=n.y,u=t?c(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=n.dy);++o<a;)(r=e[o]).x=s,r.y=l,r.dy=u,s+=r.dx=Math.min(n.x+n.dx-s,u?c(r.area/u):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=n.dx);++o<a;)(r=e[o]).x=s,r.y=l,r.dx=u,l+=r.dy=Math.min(n.y+n.dy-l,u?c(r.area/u):0);r.z=!1,r.dy+=n.y+n.dy-l,n.x+=u,n.dx-=u}}function o(i){var r=a||l(i),o=r[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],a&&l.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),p&&(a=r),r}var a,l=Zr.layout.hierarchy(),c=Math.round,u=[1,1],d=null,h=ir,p=!1,f="squarify",m=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(u=e,o):u},o.padding=function(e){function t(t){return rr(t,e)}return arguments.length?(h=null==(d=e)?ir:"function"==(n=void 0===e?"undefined":(0,s.default)(e))?function(t){var n=e.call(o,t,t.depth);return null==n?ir(t):rr(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,o):d;var n},o.round=function(e){return arguments.length?(c=e?Math.round:Number,o):c!=Number},o.sticky=function(e){return arguments.length?(p=e,a=null,o):p},o.ratio=function(e){return arguments.length?(m=e,o):m},o.mode=function(e){return arguments.length?(f=e+"",o):f},wi(o,l)},Zr.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do{r=(n=2*Math.random()-1)*n+(i=2*Math.random()-1)*i}while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=Zr.random.normal.apply(Zr,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=Zr.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},Zr.scale={};var hs={floor:Pe,ceil:Pe};Zr.scale.linear=function(){return function e(t,n,i,r){function o(){var e=Math.min(t.length,n.length)>2?cr:sr,o=r?gi:mi;return s=e(t,n,o,i),l=e(n,t,o,$n),a}function a(e){return s(e)}var s,l;return a.invert=function(e){return l(e)},a.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},a.range=function(e){return arguments.length?(n=e,o()):n},a.rangeRound=function(e){return a.range(e).interpolate(ui)},a.clamp=function(e){return arguments.length?(r=e,o()):r},a.interpolate=function(e){return arguments.length?(i=e,o()):i},a.ticks=function(e){return pr(t,e)},a.tickFormat=function(e,n){return fr(t,e,n)},a.nice=function(e){return dr(t,e),o()},a.copy=function(){return e(t,n,i,r)},o()}([0,1],[0,1],$n,!1)};var ps={s:1,g:1,p:1,r:1,e:1};Zr.scale.log=function(){return function e(t,n,i,r){function o(e){return(i?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function a(e){return i?Math.pow(n,e):-Math.pow(n,-e)}function s(e){return t(o(e))}return s.invert=function(e){return a(t.invert(e))},s.domain=function(e){return arguments.length?(i=e[0]>=0,t.domain((r=e.map(Number)).map(o)),s):r},s.base=function(e){return arguments.length?(n=+e,t.domain(r.map(o)),s):n},s.nice=function(){var e=lr(r.map(o),i?Math:ms);return t.domain(e),r=e.map(a),s},s.ticks=function(){var e=or(r),t=[],s=e[0],l=e[1],c=Math.floor(o(s)),u=Math.ceil(o(l)),d=n%1?2:n;if(isFinite(u-c)){if(i){for(;u>c;c++)for(var h=1;d>h;h++)t.push(a(c)*h);t.push(a(c))}else for(t.push(a(c));c++<u;)for(h=d-1;h>0;h--)t.push(a(c)*h);for(c=0;t[c]<s;c++);for(u=t.length;t[u-1]>l;u--);t=t.slice(c,u)}return t},s.tickFormat=function(e,t){if(!arguments.length)return fs;arguments.length<2?t=fs:"function"!=typeof t&&(t=Zr.format(t));var n,r=Math.max(.1,e/s.ticks().length),l=i?(n=1e-12,Math.ceil):(n=-1e-12,Math.floor);return function(e){return e/a(l(o(e)+n))<=r?t(e):""}},s.copy=function(){return e(t.copy(),n,i,r)},ur(s,t)}(Zr.scale.linear().domain([0,1]),10,!0,[1,10])};var fs=Zr.format(".0e"),ms={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};Zr.scale.pow=function(){return function e(t,n,i){function r(e){return t(o(e))}var o=gr(n),a=gr(1/n);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((i=e.map(Number)).map(o)),r):i},r.ticks=function(e){return pr(i,e)},r.tickFormat=function(e,t){return fr(i,e,t)},r.nice=function(e){return r.domain(dr(i,e))},r.exponent=function(e){return arguments.length?(o=gr(n=e),a=gr(1/n),t.domain(i.map(o)),r):n},r.copy=function(){return e(t.copy(),n,i)},ur(r,t)}(Zr.scale.linear(),1,[0,1])},Zr.scale.sqrt=function(){return Zr.scale.pow().exponent(.5)},Zr.scale.ordinal=function(){return function e(t,n){function i(e){return a[((o.get(e)||("range"===n.t?o.set(e,t.push(e)):NaN))-1)%a.length]}function r(e,n){return Zr.range(t.length).map(function(t){return e+n*t})}var o,a,s;return i.domain=function(e){if(!arguments.length)return t;t=[],o=new f;for(var r,a=-1,s=e.length;++a<s;)o.has(r=e[a])||o.set(r,t.push(r));return i[n.t].apply(i,n.a)},i.range=function(e){return arguments.length?(a=e,s=0,n={t:"range",a:arguments},i):a},i.rangePoints=function(e,o){arguments.length<2&&(o=0);var l=e[0],c=e[1],u=(c-l)/(Math.max(1,t.length-1)+o);return a=r(t.length<2?(l+c)/2:l+u*o/2,u),s=0,n={t:"rangePoints",a:arguments},i},i.rangeBands=function(e,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=e[1]<e[0],u=e[c-0],d=(e[1-c]-u)/(t.length-o+2*l);return a=r(u+d*l,d),c&&a.reverse(),s=d*(1-o),n={t:"rangeBands",a:arguments},i},i.rangeRoundBands=function(e,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=e[1]<e[0],u=e[c-0],d=e[1-c],h=Math.floor((d-u)/(t.length-o+2*l)),p=d-u-(t.length-o)*h;return a=r(u+Math.round(p/2),h),c&&a.reverse(),s=Math.round(h*(1-o)),n={t:"rangeRoundBands",a:arguments},i},i.rangeBand=function(){return s},i.rangeExtent=function(){return or(n.a[0])},i.copy=function(){return e(t,n)},i.domain(t)}([],{t:"range",a:[[]]})},Zr.scale.category10=function(){return Zr.scale.ordinal().range(gs)},Zr.scale.category20=function(){return Zr.scale.ordinal().range(vs)},Zr.scale.category20b=function(){return Zr.scale.ordinal().range(As)},Zr.scale.category20c=function(){return Zr.scale.ordinal().range(ys)};var gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xe),vs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xe),As=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xe),ys=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xe);Zr.scale.quantile=function(){return function e(t,i){function r(){var e=0,n=i.length;for(a=[];++e<n;)a[e-1]=Zr.quantile(t,e/n);return o}function o(e){return isNaN(e=+e)?void 0:i[Zr.bisect(a,e)]}var a;return o.domain=function(e){return arguments.length?(t=e.filter(u).sort(n),r()):t},o.range=function(e){return arguments.length?(i=e,r()):i},o.quantiles=function(){return a},o.invertExtent=function(e){return 0>(e=i.indexOf(e))?[NaN,NaN]:[e>0?a[e-1]:t[0],e<a.length?a[e]:t[t.length-1]]},o.copy=function(){return e(t,i)},r()}([],[])},Zr.scale.quantize=function(){return function e(t,n,i){function r(e){return i[Math.max(0,Math.min(s,Math.floor(a*(e-t))))]}function o(){return a=i.length/(n-t),s=i.length-1,r}var a,s;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],o()):[t,n]},r.range=function(e){return arguments.length?(i=e,o()):i},r.invertExtent=function(e){return[e=0>(e=i.indexOf(e))?NaN:e/a+t,e+1/a]},r.copy=function(){return e(t,n,i)},o()}(0,1,[0,1])},Zr.scale.threshold=function(){return function e(t,n){function i(e){return e>=e?n[Zr.bisect(t,e)]:void 0}return i.domain=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=e,i):n},i.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},i.copy=function(){return e(t,n)},i}([.5],[0,1])},Zr.scale.identity=function(){return function e(t){function n(e){return+e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(e){return pr(t,e)},n.tickFormat=function(e,n){return fr(t,e,n)},n.copy=function(){return e(t)},n}([0,1])},Zr.svg={},Zr.svg.arc=function(){function e(){var e=t.apply(this,arguments),o=n.apply(this,arguments),a=i.apply(this,arguments)+bs,s=r.apply(this,arguments)+bs,l=(a>s&&(l=a,a=s,s=l),s-a),c=So>l?"0":"1",u=Math.cos(a),d=Math.sin(a),h=Math.cos(s),p=Math.sin(s);return l>=xs?e?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":e?"M"+o*u+","+o*d+"A"+o+","+o+" 0 "+c+",1 "+o*h+","+o*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+c+",0 "+e*u+","+e*d+"Z":"M"+o*u+","+o*d+"A"+o+","+o+" 0 "+c+",1 "+o*h+","+o*p+"L0,0Z"}var t=vr,n=Ar,i=yr,r=br;return e.innerRadius=function(n){return arguments.length?(t=Le(n),e):t},e.outerRadius=function(t){return arguments.length?(n=Le(t),e):n},e.startAngle=function(t){return arguments.length?(i=Le(t),e):i},e.endAngle=function(t){return arguments.length?(r=Le(t),e):r},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+bs;return[Math.cos(o)*e,Math.sin(o)*e]},e};var bs=-To,xs=Co-Ro;Zr.svg.line=function(){return xr(Pe)};var _s=Zr.map({linear:_r,"linear-closed":function(e){return _r(e)+"Z"},step:function(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];++t<n;)r.push("H",(i[0]+(i=e[t])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")},"step-before":wr,"step-after":Mr,basis:Cr,"basis-open":function(e){if(e.length<4)return _r(e);for(var t,n=[],i=-1,r=e.length,o=[0],a=[0];++i<3;)t=e[i],o.push(t[0]),a.push(t[1]);for(n.push(Tr(Es,o)+","+Tr(Es,a)),--i;++i<r;)t=e[i],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Rr(n,o,a);return n.join("")},"basis-closed":function(e){for(var t,n,i=-1,r=e.length,o=r+4,a=[],s=[];++i<4;)n=e[i%r],a.push(n[0]),s.push(n[1]);for(t=[Tr(Es,a),",",Tr(Es,s)],--i;++i<o;)n=e[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Rr(t,a,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var i,r,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,c=-1;++c<=n;)r=c/n,(i=e[c])[0]=t*i[0]+(1-t)*(o+r*s),i[1]=t*i[1]+(1-t)*(a+r*l);return Cr(e)},cardinal:function(e,t){return e.length<3?_r(e):e[0]+Er(e,Sr(e,t))},"cardinal-open":function(e,t){return e.length<4?_r(e):e[1]+Er(e.slice(1,e.length-1),Sr(e,t))},"cardinal-closed":function(e,t){return e.length<3?_r(e):e[0]+Er((e.push(e[0]),e),Sr([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?_r(e):e[0]+Er(e,Pr(e))}});_s.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ws=[0,2/3,1/3,0],Ms=[0,1/3,2/3,0],Es=[0,1/6,2/3,1/6];Zr.svg.line.radial=function(){var e=xr(kr);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},wr.reverse=Mr,Mr.reverse=wr,Zr.svg.area=function(){return Nr(Pe)},Zr.svg.area.radial=function(){var e=Nr(kr);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Zr.svg.chord=function(){function e(e,a){var s=t(this,r,e,a),l=t(this,o,e,a);return"M"+s.p0+n(s.r,s.p1,s.a1-s.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(s,l)?i(s.r,s.p1,s.r,s.p0):i(s.r,s.p1,l.r,l.p0)+n(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,s.r,s.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),o=a.call(e,r,i),c=s.call(e,r,i)+bs,u=l.call(e,r,i)+bs;return{r:o,a0:c,a1:u,p0:[o*Math.cos(c),o*Math.sin(c)],p1:[o*Math.cos(u),o*Math.sin(u)]}}function n(e,t,n){return"A"+e+","+e+" 0 "+ +(n>So)+",1 "+t}function i(e,t,n,i){return"Q 0,0 "+i}var r=ln,o=cn,a=Or,s=yr,l=br;return e.radius=function(t){return arguments.length?(a=Le(t),e):a},e.source=function(t){return arguments.length?(r=Le(t),e):r},e.target=function(t){return arguments.length?(o=Le(t),e):o},e.startAngle=function(t){return arguments.length?(s=Le(t),e):s},e.endAngle=function(t){return arguments.length?(l=Le(t),e):l},e},Zr.svg.diagonal=function(){function e(e,r){var o=t.call(this,e,r),a=n.call(this,e,r),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(i))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=ln,n=cn,i=zr;return e.source=function(n){return arguments.length?(t=Le(n),e):t},e.target=function(t){return arguments.length?(n=Le(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},Zr.svg.diagonal.radial=function(){var e=Zr.svg.diagonal(),t=zr,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]+bs;return[n*Math.cos(i),n*Math.sin(i)]}}(t=e)):t},e},Zr.svg.symbol=function(){function e(e,i){return(Ss.get(t.call(this,e,i))||Fr)(n.call(this,e,i))}var t=Ir,n=Dr;return e.type=function(n){return arguments.length?(t=Le(n),e):t},e.size=function(t){return arguments.length?(n=Le(t),e):n},e};var Ss=Zr.map({circle:Fr,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ls)),n=t*Ls;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Rs),n=t*Rs/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Rs),n=t*Rs/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});Zr.svg.symbolTypes=Ss.keys();var Cs,Ts,Rs=Math.sqrt(3),Ls=Math.tan(30*Po),Ps=[],ks=0;Ps.call=yo.call,Ps.empty=yo.empty,Ps.node=yo.node,Ps.size=yo.size,Zr.transition=function(e){return arguments.length?Cs?e.transition():e:_o.transition()},Zr.transition.prototype=Ps,Ps.select=function(e){var t,n,i,r=this.id,o=[];e=R(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]);for(var l=this[a],c=-1,u=l.length;++c<u;)(i=l[c])&&(n=e.call(i,i.__data__,c,a))?("__data__"in i&&(n.__data__=i.__data__),Vr(n,c,r,i.__transition__[r]),t.push(n)):t.push(null)}return Br(o,r)},Ps.selectAll=function(e){var t,n,i,r,o,a=this.id,s=[];e=L(e);for(var l=-1,c=this.length;++l<c;)for(var u=this[l],d=-1,h=u.length;++d<h;)if(i=u[d]){o=i.__transition__[a],n=e.call(i,i.__data__,d,l),s.push(t=[]);for(var p=-1,f=n.length;++p<f;)(r=n[p])&&Vr(r,p,a,o),t.push(r)}return Br(s,a)},Ps.filter=function(e){var t,n,i=[];"function"!=typeof e&&(e=H(e));for(var r=0,o=this.length;o>r;r++){i.push(t=[]);for(var a,s=0,l=(a=this[r]).length;l>s;s++)(n=a[s])&&e.call(n,n.__data__,s,r)&&t.push(n)}return Br(i,this.id)},Ps.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):G(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(i){i.__transition__[n].tween.set(e,t)})},Ps.attr=function(e,t){function n(){this.removeAttribute(o)}function i(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?fi:$n,o=Zr.ns.qualify(e);return Ur(this,"attr."+e,t,o.local?function(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(o.space,o.local);return n!==e&&(t=r(n,e),function(e){this.setAttributeNS(o.space,o.local,t(e))})})}:function(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(o);return n!==e&&(t=r(n,e),function(e){this.setAttribute(o,t(e))})})})},Ps.attrTween=function(e,t){var n=Zr.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,i){var r=t.call(this,e,i,this.getAttributeNS(n.space,n.local));return r&&function(e){this.setAttributeNS(n.space,n.local,r(e))}}:function(e,i){var r=t.call(this,e,i,this.getAttribute(n));return r&&function(e){this.setAttribute(n,r(e))}})},Ps.style=function(e,t,n){function i(){this.style.removeProperty(e)}var r=arguments.length;if(3>r){if("string"!=typeof e){for(n in 2>r&&(t=""),e)this.style(n,e[n],t);return this}n=""}return Ur(this,"style."+e,t,function(t){return null==t?i:(t+="",function(){var i,r=to.getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(i=$n(r,t),function(t){this.style.setProperty(e,i(t),n)})})})},Ps.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(i,r){var o=t.call(this,i,r,to.getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}})},Ps.text=function(e){return Ur(this,"text",e,Hr)},Ps.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ps.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=Zr.ease.apply(Zr,arguments)),G(this,function(n){n.__transition__[t].ease=e}))},Ps.delay=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:G(this,"function"==typeof e?function(n,i,r){n.__transition__[t].delay=+e.call(n,n.__data__,i,r)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Ps.duration=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:G(this,"function"==typeof e?function(n,i,r){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,i,r))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Ps.each=function(e,t){var n=this.id;if(arguments.length<2){var i=Ts,r=Cs;Cs=n,G(this,function(t,i,r){Ts=t.__transition__[n],e.call(t,t.__data__,i,r)}),Ts=i,Cs=r}else G(this,function(i){var r=i.__transition__[n];(r.event||(r.event=Zr.dispatch("start","end"))).on(e,t)});return this},Ps.transition=function(){for(var e,t,n,i=this.id,r=++ks,o=[],s=0,l=this.length;l>s;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;d>u;u++)(t=c[u])&&((n=(0,a.default)(t.__transition__[i])).delay+=n.duration,Vr(t,u,r,n)),e.push(t)}return Br(o,r)},Zr.svg.axis=function(){function e(e){e.each(function(){var e,c=Zr.select(this),u=this.__chart__||n,d=this.__chart__=n.copy(),h=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,p=null==t?d.tickFormat?d.tickFormat.apply(d,s):Pe:t,f=c.selectAll(".tick").data(h,d),m=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Ro),g=Zr.transition(f.exit()).style("opacity",Ro).remove(),v=Zr.transition(f.order()).style("opacity",1),A=ar(d),y=c.selectAll(".domain").data([0]),b=(y.enter().append("path").attr("class","domain"),Zr.transition(y));m.append("line"),m.append("text");var x=m.select("line"),_=v.select("line"),w=f.select("text").text(p),M=m.select("text"),E=v.select("text");switch(i){case"bottom":e=Gr,x.attr("y2",r),M.attr("y",Math.max(r,0)+a),_.attr("x2",0).attr("y2",r),E.attr("x",0).attr("y",Math.max(r,0)+a),w.attr("dy",".71em").style("text-anchor","middle"),b.attr("d","M"+A[0]+","+o+"V0H"+A[1]+"V"+o);break;case"top":e=Gr,x.attr("y2",-r),M.attr("y",-(Math.max(r,0)+a)),_.attr("x2",0).attr("y2",-r),E.attr("x",0).attr("y",-(Math.max(r,0)+a)),w.attr("dy","0em").style("text-anchor","middle"),b.attr("d","M"+A[0]+","+-o+"V0H"+A[1]+"V"+-o);break;case"left":e=jr,x.attr("x2",-r),M.attr("x",-(Math.max(r,0)+a)),_.attr("x2",-r).attr("y2",0),E.attr("x",-(Math.max(r,0)+a)).attr("y",0),w.attr("dy",".32em").style("text-anchor","end"),b.attr("d","M"+-o+","+A[0]+"H0V"+A[1]+"H"+-o);break;case"right":e=jr,x.attr("x2",r),M.attr("x",Math.max(r,0)+a),_.attr("x2",r).attr("y2",0),E.attr("x",Math.max(r,0)+a).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),b.attr("d","M"+o+","+A[0]+"H0V"+A[1]+"H"+o)}if(d.rangeBand){var S=d,C=S.rangeBand()/2;u=d=function(e){return S(e)+C}}else u.rangeBand?u=d:g.call(e,d);m.call(e,u),v.call(e,d)})}var t,n=Zr.scale.linear(),i=Ns,r=6,o=6,a=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in Os?t+"":Ns,e):i},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(r=+t,o=+arguments[n-1],e):r},e.innerTickSize=function(t){return arguments.length?(r=+t,e):r},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Ns="bottom",Os={top:1,right:1,bottom:1,left:1};Zr.svg.brush=function(){function e(o){o.each(function(){var o=Zr.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),a=o.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=o.selectAll(".resize").data(f,Pe);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return zs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,d=Zr.transition(o),h=Zr.transition(a);l&&(u=ar(l),h.attr("x",u[0]).attr("width",u[1]-u[0]),n(d)),c&&(u=ar(c),h.attr("y",u[0]).attr("height",u[1]-u[0]),i(d)),t(d)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+u[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",u[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",u[1]-u[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function r(){function r(){var e=Zr.mouse(A),r=!1;v&&(e[0]+=v[0],e[1]+=v[1]),S||(Zr.event.altKey?(g||(g=[(u[0]+u[1])/2,(d[0]+d[1])/2]),T[0]=u[+(e[0]<g[0])],T[1]=d[+(e[1]<g[1])]):g=null),w&&f(e,l,0)&&(n(x),r=!0),M&&f(e,c,1)&&(i(x),r=!0),r&&(t(x),b({type:"brush",mode:S?"move":"resize"}))}function f(e,t,n){var i,r,s=ar(t),l=s[0],c=s[1],f=T[n],m=n?d:u,v=m[1]-m[0];return S&&(l-=f,c-=v+f),i=(n?p:h)?Math.max(l,Math.min(c,e[n])):e[n],S?r=(i+=f)+v:(g&&(f=Math.max(l,Math.min(c,2*g[n]-i))),i>f?(r=i,i=f):r=f),m[0]!=i||m[1]!=r?(n?a=null:o=null,m[0]=i,m[1]=r,!0):void 0}function m(){r(),x.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Zr.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}var g,v,A=this,y=Zr.select(Zr.event.target),b=s.of(A,arguments),x=Zr.select(A),_=y.datum(),w=!/^(n|s)$/.test(_)&&l,M=!/^(e|w)$/.test(_)&&c,S=y.classed("extent"),C=J(),T=Zr.mouse(A),R=Zr.select(to).on("keydown.brush",function(){32==Zr.event.keyCode&&(S||(g=null,T[0]-=u[1],T[1]-=d[1],S=2),E())}).on("keyup.brush",function(){32==Zr.event.keyCode&&2==S&&(T[0]+=u[1],T[1]+=d[1],S=0,E())});if(Zr.event.changedTouches?R.on("touchmove.brush",r).on("touchend.brush",m):R.on("mousemove.brush",r).on("mouseup.brush",m),x.interrupt().selectAll("*").interrupt(),S)T[0]=u[0]-T[0],T[1]=d[0]-T[1];else if(_){var L=+/w$/.test(_),P=+/^n/.test(_);v=[u[1-L]-T[0],d[1-P]-T[1]],T[0]=u[L],T[1]=d[P]}else Zr.event.altKey&&(g=T.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null),Zr.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),r()}var o,a,s=C(e,"brushstart","brush","brushend"),l=null,c=null,u=[0,0],d=[0,0],h=!0,p=!0,f=Ds[0];return e.event=function(e){e.each(function(){var e=s.of(this,arguments),t={x:u,y:d,i:o,j:a},n=this.__chart__||t;this.__chart__=t,Cs?Zr.select(this).transition().each("start.brush",function(){o=n.i,a=n.j,u=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=ei(u,t.x),i=ei(d,t.y);return o=a=null,function(r){u=t.x=n(r),d=t.y=i(r),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(f=Ds[!(l=t)<<1|!c],e):l},e.y=function(t){return arguments.length?(f=Ds[!l<<1|!(c=t)],e):c},e.clamp=function(t){return arguments.length?(l&&c?(h=!!t[0],p=!!t[1]):l?h=!!t:c&&(p=!!t),e):l&&c?[h,p]:l?h:c?p:null},e.extent=function(t){var n,i,r,s,h;return arguments.length?(l&&(n=t[0],i=t[1],c&&(n=n[0],i=i[0]),o=[n,i],l.invert&&(n=l(n),i=l(i)),n>i&&(h=n,n=i,i=h),(n!=u[0]||i!=u[1])&&(u=[n,i])),c&&(r=t[0],s=t[1],l&&(r=r[1],s=s[1]),a=[r,s],c.invert&&(r=c(r),s=c(s)),r>s&&(h=r,r=s,s=h),(r!=d[0]||s!=d[1])&&(d=[r,s])),e):(l&&(o?(n=o[0],i=o[1]):(n=u[0],i=u[1],l.invert&&(n=l.invert(n),i=l.invert(i)),n>i&&(h=n,n=i,i=h))),c&&(a?(r=a[0],s=a[1]):(r=d[0],s=d[1],c.invert&&(r=c.invert(r),s=c.invert(s)),r>s&&(h=r,r=s,s=h))),l&&c?[[n,r],[i,s]]:l?[n,i]:c&&[r,s])},e.clear=function(){return e.empty()||(u=[0,0],d=[0,0],o=a=null),e},e.empty=function(){return!!l&&u[0]==u[1]||!!c&&d[0]==d[1]},Zr.rebind(e,s,"on")};var zs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ds=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Is=na.format=la.timeFormat,Fs=Is.utc,Bs=Fs("%Y-%m-%dT%H:%M:%S.%LZ");Is.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Wr:Bs,Wr.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Wr.toString=Bs.toString,na.second=Ue(function(e){return new ia(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),na.seconds=na.second.range,na.seconds.utc=na.second.utc.range,na.minute=Ue(function(e){return new ia(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),na.minutes=na.minute.range,na.minutes.utc=na.minute.utc.range,na.hour=Ue(function(e){var t=e.getTimezoneOffset()/60;return new ia(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),na.hours=na.hour.range,na.hours.utc=na.hour.utc.range,na.month=Ue(function(e){return(e=na.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),na.months=na.month.range,na.months.utc=na.month.utc.range;var Us=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Hs=[[na.second,1],[na.second,5],[na.second,15],[na.second,30],[na.minute,1],[na.minute,5],[na.minute,15],[na.minute,30],[na.hour,1],[na.hour,3],[na.hour,6],[na.hour,12],[na.day,1],[na.day,2],[na.week,1],[na.month,1],[na.month,3],[na.year,1]],Vs=Is.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",St]]),Gs={range:function(e,t,n){return Zr.range(Math.ceil(e/n)*n,+t,n).map(Xr)},floor:Pe,ceil:Pe};Hs.year=na.year,na.scale=function(){return qr(Zr.scale.linear(),Hs,Vs)};var js=Hs.map(function(e){return[e[0].utc,e[1]]}),Ws=Fs.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",St]]);js.year=na.year.utc,na.scale.utc=function(){return qr(Zr.scale.linear(),js,Ws)},Zr.text=ke(function(e){return e.responseText}),Zr.json=function(e,t){return Ne(e,"application/json",Yr,t)},Zr.html=function(e,t){return Ne(e,"text/html",Jr,t)},Zr.xml=ke(function(e){return e.responseXML}),r=[],void 0===(o="function"==typeof(i=Zr)?i.apply(t,r):i)||(e.exports=o)}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.is_little_endian=n,t.get_model_array_attribute_metadata=i,t.cast_array_buffer=r,t.get_model_array_attribute=function(t){var o=e.Deferred();void 0===t.metadata?(t.metadataSuccess=a,i(t,o)):a(t);return o;function a(e){var t=[],i="",a=e.metadata,s=e.attribute,l="string"==a.attributes[s].type,c="&byteorder="+(n()?"little":"big");for(var u in l&&(c=""),a.dimensions)i="",i+=a.dimensions[u].begin,i+=":",i+=a.dimensions[u].end,t.push(i);t=t.join("|");var d=new XMLHttpRequest;d.open("GET",e.api_root+"models/"+e.mid+"/arraysets/"+e.aid+"/data?hyperchunks="+e.array+"/"+e.attribute+"/"+t+c),l||(d.responseType="arraybuffer"),d.success=e.success,d.attribute=e.attribute,d.metadata=a,d.isStringAttribute=l,d.onload=function(e){var t=this.response,n=this.metadata,i=this.metadata.attributes[this.attribute];if(1==n.dimensions.length)l=this.isStringAttribute?JSON.parse(this.responseText):r(t,i.type);else if(2==n.dimensions.length)for(var a=n.dimensions[0].end-n.dimensions[0].begin,s=n.dimensions[1].end-n.dimensions[1].begin,l=[],c=0;c!=a;++c)l.push(r(t,i.type,c*s,s));else window.alert("Can't handle array with "+n.dimensions.length+" dimensions.");this.success(l),o.resolve()},d.send()}};t.arrayset_metadata_cache={};function n(){return void 0===window.result&&(window.result=67305985===new Uint32Array(new Uint8Array([1,2,3,4]).buffer)[0]),window.result}function i(t,n){return e.ajax({url:t.api_root+"models/"+t.mid+"/arraysets/"+t.aid+"/metadata?arrays="+t.array,contentType:"application/json",success:function(e){t.metadata=e.arrays[0],void 0!==t.metadataSuccess?t.metadataSuccess(t):t.success(t)},error:function(e,n,i){t.error&&t.error(e,n,i)},always:function(){n.resolve()}})}function r(e,t,n,i){return"int32"==t?void 0!==n?new Int32Array(e,4*n,i):new Int32Array(e):"int16"==t?void 0!==n?new Int16Array(e,2*n,i):new Int16Array(e):"int8"==t?void 0!==n?new Int8Array(e,n,i):new Int8Array(e):"uint32"==t?void 0!==n?new Uint32Array(e,4*n,i):new Uint32Array(e):"uint16"==t?void 0!==n?new Uint16Array(e,2*n,i):new Uint16Array(e):"uint8"==t?void 0!==n?new Uint8Array(e,n,i):new Uint8Array(e):"float64"==t?void 0!==n?new Float64Array(e,8*n,i):new Float64Array(e):"float32"==t?void 0!==n?new Float32Array(e,4*n,i):new Float32Array(e):void console.error("Unknown array buffer type: "+t)}}).call(this,n(1))},function(e,t,n){var i=n(304);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(307);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t){e.exports="data:image/gif;base64,R0lGODlhAgAYAIcAANDQ0Ovs7uzt7+3u8O7v8e/w8vDx8/Hy9Pn5+QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAP8ALAAAAAACABgAAAghABEIHEiwYMEDCA8YWMiwgMMCBAgMmDhAgIAAGAMAABAQADs="},function(e,t,n){var i=n(311);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(312);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FFBEYNbyjf9QAAAAqSURBVAjXY2BAA8ePH/+PLsaIS4GlpSUjhiJsJsAUMuJSgKyQEZ8CGAAALJASrUlNPiEAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FAQEEApmIg1sAAAAIdEVYdENvbW1lbnQA9syWvwAAAClJREFUCNdjYEAD7e3t/9HFGHEpqKysZMRQhM0EmEJGXAqQFTLiUwADAGgBES2sBUVoAAAAAElFTkSuQmCC"},function(e,t,n){var i=n(291);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract\n DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government\n retains certain rights in this software. */\n\n.vertical {\n  -ms-transform: rotate(-90deg);\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n}\n\n.unvertical {\n  -ms-transform: rotate(90deg);\n  -webkit-transform: rotate(90deg);\n  transform: rotate(90deg);\n}\n\n.light-border-right {\n  border-right: 2px solid rgb(231, 231, 231);\n}\n\n.affix-top-right {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n\n.fill-parent-width {\n  width: 100%;\n}\n\n.link-cursor {\n  cursor: pointer;\n}\n\n.default-cursor {\n  cursor: inherit;\n}\n\n.info-panel {\n  border-left: 2px solid #1b809e !important;\n}\n\n.vertical-toggle-pane-resizer {\n  right-border: 2px solid rgb(231,231,231);\n}\n\n.fill-parent-height {\n  height: 100%;\n}\n",""])},function(e,t,n){"use strict";(function(e){!function(e){e.fn.drag=function(t,n,i){var r="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==r.indexOf("drag")&&(r="drag"+r),i=(t==o?n:i)||{},o?this.bind(r,i,o):this.trigger(r)};var t=e.event,n=t.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,i.datakey),r=t.data||{};n.related+=1,e.each(i.defaults,function(e,t){void 0!==r[e]&&(n[e]=r[e])})},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var n=e.extend({related:0},i.defaults);e.data(this,i.datakey,n),t.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(e.data(this,i.datakey)||{}).related||(e.removeData(this,i.datakey),t.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(r){if(!i.touched){var o,a=r.data;if(!(0!=r.which&&a.which>0&&r.which!=a.which)&&!e(r.target).is(a.not)&&(!a.handle||e(r.target).closest(a.handle,r.currentTarget).length)&&(i.touched="touchstart"==r.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[i.interaction(this,a)],a.target=r.target,a.pageX=r.pageX,a.pageY=r.pageY,a.dragging=null,o=i.hijack(r,"draginit",a),a.propagates))return(o=i.flatten(o))&&o.length&&(a.interactions=[],e.each(o,function(){a.interactions.push(i.interaction(this,a))})),a.propagates=a.interactions.length,!1!==a.drop&&n.drop&&n.drop.handler(r,a),i.textselect(!1),i.touched?t.add(i.touched,"touchmove touchend",i.handler,a):t.add(document,"mousemove mouseup",i.handler,a),!(!i.touched||a.live)&&void 0}},interaction:function(t,n){var r=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new i.callback,droppable:[],offset:r}},handler:function(r){var o=r.data;switch(r.type){case!o.dragging&&"touchmove":r.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(r.pageX-o.pageX,2)+Math.pow(r.pageY-o.pageY,2)<Math.pow(o.distance,2))break;r.target=o.target,i.hijack(r,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":r.preventDefault();case"mousemove":if(o.dragging){if(i.hijack(r,"drag",o),o.propagates){!1!==o.drop&&n.drop&&n.drop.handler(r,o);break}r.type="mouseup"}case"touchend":case"mouseup":default:i.touched?t.remove(i.touched,"touchmove touchend",i.handler):t.remove(document,"mousemove mouseup",i.handler),o.dragging&&(!1!==o.drop&&n.drop&&n.drop.handler(r,o),i.hijack(r,"dragend",o)),i.textselect(!0),!1===o.click&&o.dragging&&e.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=i.touched=!1}},hijack:function(n,r,o,a,s){if(o){var l,c,u,d={event:n.originalEvent,type:n.type},h=r.indexOf("drop")?"drag":"drop",p=a||0,f=isNaN(a)?o.interactions.length:a;n.type=r,n.originalEvent=null,o.results=[];do{if(c=o.interactions[p]){if("dragend"!==r&&c.cancelled)continue;u=i.properties(n,o,c),c.results=[],e(s||c[h]||o.droppable).each(function(a,s){if(u.target=s,n.isPropagationStopped=function(){return!1},!1===(l=s?t.dispatch.call(s,n,u):null)?("drag"==h&&(c.cancelled=!0,o.propagates-=1),"drop"==r&&(c[h][a]=null)):"dropinit"==r&&c.droppable.push(i.element(l)||s),"dragstart"==r&&(c.proxy=e(i.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==r)return l}),o.results[p]=i.flatten(c.results),"dropinit"==r&&(c.droppable=i.flatten(c.droppable)),"dragstart"!=r||c.cancelled||u.update()}}while(++p<f);return n.type=d.type,n.originalEvent=d.event,i.flatten(o.results)}},properties:function(e,t,n){var r=n.callback;return r.drag=n.drag,r.proxy=n.proxy||n.drag,r.startX=t.pageX,r.startY=t.pageY,r.deltaX=e.pageX-t.pageX,r.deltaY=e.pageY-t.pageY,r.originalX=n.offset.left,r.originalY=n.offset.top,r.offsetX=r.originalX+r.deltaX,r.offsetY=r.originalY+r.deltaY,r.drop=i.flatten((n.drop||[]).slice()),r.available=i.flatten((n.droppable||[]).slice()),r},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?i.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var r=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return r.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var o=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&e.each(o.props,function(e,n){t[n]=i[n]})}return t}};n.draginit=n.dragstart=n.dragend=i}(e)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){!function(t){function n(){var e=!1,t=!1;this.stopPropagation=function(){e=!0},this.isPropagationStopped=function(){return e},this.stopImmediatePropagation=function(){t=!0},this.isImmediatePropagationStopped=function(){return t}}function i(){this.__nonDataRow=!0}function r(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function o(){this.__groupTotals=!0,this.group=null,this.initialized=!1}function a(){var e=null;this.isActive=function(t){return t?e===t:null!==e},this.activate=function(t){if(t!==e){if(null!==e)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t}},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return!e||e.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!e||e.cancelCurrentEdit()}}e.extend(!0,window,{Slick:{Event:function(){var e=[];this.subscribe=function(t){e.push(t)},this.unsubscribe=function(t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},this.notify=function(t,i,r){var o;i=i||new n,r=r||this;for(var a=0;a<e.length&&!i.isPropagationStopped()&&!i.isImmediatePropagationStopped();a++)o=e[a].call(r,i,t);return o}},EventData:n,EventHandler:function(){var e=[];this.subscribe=function(t,n){return e.push({event:t,handler:n}),t.subscribe(n),this},this.unsubscribe=function(t,n){for(var i=e.length;i--;)if(e[i].event===t&&e[i].handler===n)return e.splice(i,1),void t.unsubscribe(n);return this},this.unsubscribeAll=function(){for(var t=e.length;t--;)e[t].event.unsubscribe(e[t].handler);return e=[],this}},Range:function(e,t,n,i){void 0===n&&void 0===i&&(n=e,i=t);this.fromRow=Math.min(e,n),this.fromCell=Math.min(t,i),this.toRow=Math.max(e,n),this.toCell=Math.max(t,i),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}},NonDataRow:i,Group:r,GroupTotals:o,EditorLock:a,GlobalEditorLock:new a}}),r.prototype=new i,r.prototype.equals=function(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title},o.prototype=new i}()}).call(this,n(1))},function(module,exports,__webpack_require__){"use strict";(function(jQuery){
/**
 * @license
 * (c) 2009-2013 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.2
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */
if(void 0===jQuery)throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";!function($){var scrollbarDimensions,maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row"},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent;function init(){if(($container=$(container)).length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var e=0;e<columns.length;e++){var t=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[t.id]=e,t.minWidth&&t.width<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&t.width>t.maxWidth&&(t.width=t.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),($headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller)).width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),($viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container)).css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(e){return $(e.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&$canvas.bind("mousewheel",handleMouseWheel))}function registerPlugin(e){plugins.unshift(e),e.init(self)}function unregisterPlugin(e){for(var t=plugins.length;t>=0;t--)if(plugins[t]===e){plugins[t].destroy&&plugins[t].destroy(),plugins.splice(t,1);break}}function setSelectionModel(e){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),(selectionModel=e)&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}function getHeadersWidth(){for(var e=0,t=0,n=columns.length;t<n;t++){e+=columns[t].width}return e+=scrollbarDimensions.width,Math.max(e,viewportW)+1e3}function getCanvasWidth(){for(var e=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,t=0,n=columns.length;n--;)t+=columns[n].width;return options.fullWidthRows?Math.max(t,e):t}function updateCanvasWidth(e){var t=canvasWidth;(canvasWidth=getCanvasWidth())!=t&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),(canvasWidth!=t||e)&&applyColumnWidths()}function disableSelection(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);;){var i=2*e;if(n.css("height",i),i>t||n.height()!==i)break;e=i}return n.remove(),e}function bindAncestorScrollEvents(){for(var e=$canvas[0];(e=e.parentNode)!=document.body&&null!=e;)if(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight){var t=$(e);$boundAncestors=$boundAncestors?$boundAncestors.add(t):t,t.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.unbind("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(e,t,n){if(initialized){var i=getColumnIndex(e);if(null!=i){var r=columns[i],o=$headers.children().eq(i);o&&(void 0!==t&&(columns[i].name=t),void 0!==n&&(columns[i].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:o[0],column:r}),o.attr("title",n||"").children().eq(0).html(t),trigger(self.onHeaderCellRendered,{node:o[0],column:r}))}}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(e){var t=getColumnIndex(e),n=$headerRow.children().eq(t);return n&&n[0]}function createColumnHeaders(){function e(){$(this).addClass("ui-state-hover")}function t(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:e})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:e})}),$headerRow.empty();for(var n=0;n<columns.length;n++){var i=columns[n],r=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+i.name+"</span>").width(i.width-headerColumnWidthDiff).attr("id",""+uid+i.id).attr("title",i.toolTip||"").data("column",i).addClass(i.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||i.sortable)&&r.on("mouseenter",e).on("mouseleave",t),i.sortable&&(r.addClass("slick-header-sortable"),r.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:r[0],column:i}),options.showHeaderRow){var o=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",i).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:o[0],column:i})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){if(e.metaKey=e.metaKey||e.ctrlKey,!$(e.target).hasClass("slick-resizable-handle")){var t=$(e.target).closest(".slick-header-column");if(t.length){var n=t.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var i=null,r=0;r<sortColumns.length;r++)if(sortColumns[r].columnId==n.id){(i=sortColumns[r]).sortAsc=!i.sortAsc;break}e.metaKey&&options.multiColumnSort?i&&sortColumns.splice(r,1):((e.shiftKey||e.metaKey)&&options.multiColumnSort||(sortColumns=[]),i?0==sortColumns.length&&sortColumns.push(i):(i={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(i))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(e){return{sortCol:columns[getColumnIndex(e.columnId)],sortAsc:e.sortAsc}})},e):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:i.sortAsc},e)}}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(e,t){t.placeholder.width(t.helper.outerWidth()-headerColumnWidthDiff),$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(getEditorLock().commitCurrentEdit()){for(var t=$headers.sortable("toArray"),n=[],i=0;i<t.length;i++)n.push(columns[getColumnIndex(t[i].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),e.stopPropagation(),setupColumnResize()}else $(this).sortable("cancel")}})}function setupColumnResize(){var e,t,n,i,r,o,a,s;(i=$headers.children()).find(".slick-resizable-handle").remove(),i.each(function(e,t){columns[e].resizable&&(void 0===a&&(a=e),s=e)}),void 0!==a&&i.each(function(l,c){l<a||options.forceFitColumns&&l>=s||($(c),$("<div class='slick-resizable-handle' />").appendTo(c).bind("dragstart",function(a,s){if(!getEditorLock().commitCurrentEdit())return!1;n=a.pageX,$(this).parent().addClass("slick-header-column-active");var c=null,u=null;if(i.each(function(e,t){columns[e].previousWidth=$(t).outerWidth()}),options.forceFitColumns)for(c=0,u=0,e=l+1;e<i.length;e++)(t=columns[e]).resizable&&(null!==u&&(t.maxWidth?u+=t.maxWidth-t.previousWidth:u=null),c+=t.previousWidth-Math.max(t.minWidth||0,absoluteColumnMinWidth));var d=0,h=0;for(e=0;e<=l;e++)(t=columns[e]).resizable&&(null!==h&&(t.maxWidth?h+=t.maxWidth-t.previousWidth:h=null),d+=t.previousWidth-Math.max(t.minWidth||0,absoluteColumnMinWidth));null===c&&(c=1e5),null===d&&(d=1e5),null===u&&(u=1e5),null===h&&(h=1e5),o=n+Math.min(c,h),r=n-Math.min(d,u)}).bind("drag",function(a,s){var c,u,d=Math.min(o,Math.max(r,a.pageX))-n;if(d<0){for(u=d,e=l;e>=0;e--)(t=columns[e]).resizable&&(c=Math.max(t.minWidth||0,absoluteColumnMinWidth),u&&t.previousWidth+u<c?(u+=t.previousWidth-c,t.width=c):(t.width=t.previousWidth+u,u=0));if(options.forceFitColumns)for(u=-d,e=l+1;e<i.length;e++)(t=columns[e]).resizable&&(u&&t.maxWidth&&t.maxWidth-t.previousWidth<u?(u-=t.maxWidth-t.previousWidth,t.width=t.maxWidth):(t.width=t.previousWidth+u,u=0))}else{for(u=d,e=l;e>=0;e--)(t=columns[e]).resizable&&(u&&t.maxWidth&&t.maxWidth-t.previousWidth<u?(u-=t.maxWidth-t.previousWidth,t.width=t.maxWidth):(t.width=t.previousWidth+u,u=0));if(options.forceFitColumns)for(u=-d,e=l+1;e<i.length;e++)(t=columns[e]).resizable&&(c=Math.max(t.minWidth||0,absoluteColumnMinWidth),u&&t.previousWidth+u<c?(u+=t.previousWidth-c,t.width=c):(t.width=t.previousWidth+u,u=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(n,r){var o;for($(this).parent().removeClass("slick-header-column-active"),e=0;e<i.length;e++)t=columns[e],o=$(i[e]).outerWidth(),t.previousWidth!==o&&t.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})}))})}function getVBoxDelta(e){var t=0;return $.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],function(n,i){t+=parseFloat(e.css(i))||0}),t}function measureCellPaddingAndBorder(){var e,t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];e=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,"border-box"!=e.css("box-sizing")&&"border-box"!=e.css("-moz-box-sizing")&&"border-box"!=e.css("-webkit-box-sizing")&&($.each(t,function(t,n){headerColumnWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){headerColumnHeightDiff+=parseFloat(e.css(n))||0})),e.remove();var i=$("<div class='slick-row' />").appendTo($canvas);e=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(i),cellWidthDiff=cellHeightDiff=0,"border-box"!=e.css("box-sizing")&&"border-box"!=e.css("-moz-box-sizing")&&"border-box"!=e.css("-webkit-box-sizing")&&($.each(t,function(t,n){cellWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){cellHeightDiff+=parseFloat(e.css(n))||0})),i.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var e=options.rowHeight-cellHeightDiff,t=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+e+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],n=0;n<columns.length;n++)t.push("."+uid+" .l"+n+" { }"),t.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=t.join(" "):$style[0].appendChild(document.createTextNode(t.join(" ")))}function getColumnCssRules(e){if(!stylesheet){for(var t=document.styleSheets,n=0;n<t.length;n++)if((t[n].ownerNode||t[n].owningElement)==$style[0]){stylesheet=t[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var i,r,o=stylesheet.cssRules||stylesheet.rules;for(n=0;n<o.length;n++){var a=o[n].selectorText;(i=/\.l\d+/.exec(a))?(r=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesL[r]=o[n]):(i=/\.r\d+/.exec(a))&&(r=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesR[r]=o[n])}}return{left:columnCssRulesL[e],right:columnCssRulesR[e]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var e=plugins.length;e--;)unregisterPlugin(plugins[e]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(e,t,n){return n=n||new Slick.EventData,(t=t||{}).grid=self,e.notify(t,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,n,i=[],r=0,o=0,a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(e=0;e<columns.length;e++)t=columns[e],i.push(t.width),o+=t.width,t.resizable&&(r+=t.width-Math.max(t.minWidth,absoluteColumnMinWidth));for(n=o;o>a&&r;){var s=(o-a)/r;for(e=0;e<columns.length&&o>a;e++){t=columns[e];var l=i[e];if(!(!t.resizable||l<=t.minWidth||l<=absoluteColumnMinWidth)){var c=Math.max(t.minWidth,absoluteColumnMinWidth),u=Math.floor(s*(l-c))||1;o-=u=Math.min(u,l-c),r-=u,i[e]-=u}}if(n<=o)break;n=o}for(n=o;o<a;){var d=a/o;for(e=0;e<columns.length&&o<a;e++){t=columns[e];var h,p=i[e];o+=h=!t.resizable||t.maxWidth<=p?0:Math.min(Math.floor(d*p)-p,t.maxWidth-p||1e6)||1,i[e]+=h}if(n>=o)break;n=o}var f=!1;for(e=0;e<columns.length;e++)columns[e].rerenderOnResize&&columns[e].width!=i[e]&&(f=!0),columns[e].width=i[e];applyColumnHeaderWidths(),updateCanvasWidth(!0),f&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var e,t=0,n=$headers.children(),i=n.length;t<i;t++)(e=$(n[t])).width()!==columns[t].width-headerColumnWidthDiff&&e.width(columns[t].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var e,t,n=0,i=0;i<columns.length;i++)e=columns[i].width,(t=getColumnCssRules(i)).left.style.left=n+"px",t.right.style.right=canvasWidth-n-e+"px",n+=columns[i].width}function setSortColumn(e,t){setSortColumns([{columnId:e,sortAsc:t}])}function setSortColumns(e){sortColumns=e;var t=$headers.children();t.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(e,n){null==n.sortAsc&&(n.sortAsc=!0);var i=getColumnIndex(n.columnId);null!=i&&t.eq(i).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,t){selectedRows=[];for(var n={},i=0;i<t.length;i++)for(var r=t[i].fromRow;r<=t[i].toRow;r++){n[r]||(selectedRows.push(r),n[r]={});for(var o=t[i].fromCell;o<=t[i].toCell;o++)canCellBeSelected(r,o)&&(n[r][columns[o].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var e=0,t=0,n=columns.length;t<n;t++)columnPosLeft[t]=e,columnPosRight[t]=e+columns[t].width,e+=columns[t].width}function setColumns(e){columns=e,columnsById={};for(var t=0;t<columns.length;t++){var n=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[n.id]=t,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(e){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==e.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,e),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(e,t){data=e,invalidateAllRows(),updateRowCount(),t&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0)}function getDataItem(e){return data.getItem?data.getItem(e):data[e]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(e){options.showTopPanel!=e&&(options.showTopPanel=e,e?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(e){options.showHeaderRow!=e&&(options.showHeaderRow=e,e?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(e){return options.rowHeight*e-offset}function getRowFromPosition(e){return Math.floor((e+offset)/options.rowHeight)}function scrollTo(e){e=Math.max(e,0),e=Math.min(e,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var t=offset;page=Math.min(n-1,Math.floor(e/ph));var i=e-(offset=Math.round(page*cj));offset!=t&&(cleanupRows(getVisibleRange(i)),updateRowPositions());prevScrollTop!=i&&(vScrollDir=prevScrollTop+t<i+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=i,trigger(self.onViewportChanged,{}))}function defaultFormatter(e,t,n,i,r){return null==n?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e),i=n&&n.columns&&(n.columns[t.id]||n.columns[getColumnIndex(t.id)]);return i&&i.formatter||n&&n.formatter||t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||options.defaultFormatter}function getEditor(e,t){var n=columns[t],i=data.getItemMetadata&&data.getItemMetadata(e),r=i&&i.columns;return r&&r[n.id]&&void 0!==r[n.id].editor?r[n.id].editor:r&&r[t]&&void 0!==r[t].editor?r[t].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(e,t){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(e,t):e[t.field]}function appendRowHtml(e,t,n,i){var r=getDataItem(t),o="slick-row"+(t<i&&!r?" loading":"")+(t===activeRow?" active":"")+(t%2==1?" odd":" even");r||(o+=" "+options.addNewRowCssClass);var a,s,l=data.getItemMetadata&&data.getItemMetadata(t);l&&l.cssClasses&&(o+=" "+l.cssClasses),e.push("<div class='ui-widget-content "+o+"' style='top:"+getRowTop(t)+"px'>");for(var c=0,u=columns.length;c<u;c++){if(s=columns[c],a=1,l&&l.columns){var d=l.columns[s.id]||l.columns[c];"*"===(a=d&&d.colspan||1)&&(a=u-c)}if(columnPosRight[Math.min(u-1,c+a-1)]>n.leftPx){if(columnPosLeft[c]>n.rightPx)break;appendCellHtml(e,t,c,a,r)}a>1&&(c+=a-1)}e.push("</div>")}function appendCellHtml(e,t,n,i,r){var o=columns[n],a="slick-cell l"+n+" r"+Math.min(columns.length-1,n+i-1)+(o.cssClass?" "+o.cssClass:"");for(var s in t===activeRow&&n===activeCell&&(a+=" active"),cellCssClasses)cellCssClasses[s][t]&&cellCssClasses[s][t][o.id]&&(a+=" "+cellCssClasses[s][t][o.id]);if(e.push("<div class='"+a+"'>"),r){var l=getDataItemValueForColumn(r,o);e.push(getFormatter(t,o)(t,n,l,o,r))}e.push("</div>"),rowsCache[t].cellRenderQueue.push(n),rowsCache[t].cellColSpans[n]=i}function cleanupRows(e){for(var t in rowsCache)(t=parseInt(t,10))!==activeRow&&(t<e.top||t>e.bottom)&&removeRowFromCache(t)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){for(var e in currentEditor&&makeActiveCellNormal(),rowsCache)removeRowFromCache(e)}function removeRowFromCache(e){var t=rowsCache[e];t&&(rowNodeFromLastMouseWheelEvent==t.rowNode?(t.rowNode.style.display="none",zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent):$canvas[0].removeChild(t.rowNode),delete rowsCache[e],delete postProcessedRows[e],renderedRows--,counter_rows_removed++)}function invalidateRows(e){var t,n;if(e&&e.length)for(vScrollDir=0,t=0,n=e.length;t<n;t++)currentEditor&&activeRow===e[t]&&makeActiveCellNormal(),rowsCache[e[t]]&&removeRowFromCache(e[t])}function invalidateRow(e){invalidateRows([e])}function updateCell(e,t){var n=getCellNode(e,t);if(n){var i=columns[t],r=getDataItem(e);currentEditor&&activeRow===e&&activeCell===t?currentEditor.loadValue(r):(n.innerHTML=r?getFormatter(e,i)(e,t,getDataItemValueForColumn(r,i),i,r):"",invalidatePostProcessingResults(e))}}function updateRow(e){var t=rowsCache[e];if(t){ensureCellNodesInRowsCache(e);var n=getDataItem(e);for(var i in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(i)){var r=columns[i|=0],o=t.cellNodesByColumnIdx[i];e===activeRow&&i===activeCell&&currentEditor?currentEditor.loadValue(n):o.innerHTML=n?getFormatter(e,r)(e,i,getDataItemValueForColumn(n,r),r,n):""}invalidatePostProcessingResults(e)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*getDataLengthIncludingAddNew():getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render())}function updateRowCount(){if(initialized){var e=getDataLengthIncludingAddNew(),t=e+(options.leaveSpaceForNewRows?numVisibleRows-1:0),i=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&t*options.rowHeight>viewportH,makeActiveCellNormal();var r=e-1;for(var o in rowsCache)o>=r&&removeRowFromCache(o);activeCellNode&&activeRow>r&&resetActiveCell();var a=h;(th=Math.max(options.rowHeight*t,viewportH-scrollbarDimensions.height))<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(ph=(h=maxSupportedCssHeight)/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==a&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var s=scrollTop+offset<=th-viewportH;0==th||0==scrollTop?page=offset=0:scrollTo(s?scrollTop+offset:th-viewportH),h!=a&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&i!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(e,t){return null==e&&(e=scrollTop),null==t&&(t=scrollLeft),{top:getRowFromPosition(e),bottom:getRowFromPosition(e+viewportH)+1,leftPx:t,rightPx:t+viewportW}}function getRenderedRange(e,t){var n=getVisibleRange(e,t),i=Math.round(viewportH/options.rowHeight);return-1==vScrollDir?(n.top-=i,n.bottom+=3):1==vScrollDir?(n.top-=3,n.bottom+=i):(n.top-=3,n.bottom+=3),n.top=Math.max(0,n.top),n.bottom=Math.min(getDataLengthIncludingAddNew()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(e){var t=rowsCache[e];if(t&&t.cellRenderQueue.length)for(var n=t.rowNode.lastChild;t.cellRenderQueue.length;){var i=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[i]=n,n=n.previousSibling}}function cleanUpCells(e,t){var n,i=rowsCache[t],r=[];for(var o in i.cellNodesByColumnIdx)if(i.cellNodesByColumnIdx.hasOwnProperty(o)){o|=0;var a=i.cellColSpans[o];(columnPosLeft[o]>e.rightPx||columnPosRight[Math.min(columns.length-1,o+a-1)]<e.leftPx)&&(t==activeRow&&o==activeCell||r.push(o))}for(;null!=(n=r.pop());)i.rowNode.removeChild(i.cellNodesByColumnIdx[n]),delete i.cellColSpans[n],delete i.cellNodesByColumnIdx[n],postProcessedRows[t]&&delete postProcessedRows[t][n],0}function cleanUpAndRenderCells(e){for(var t,n,i,r=[],o=[],a=e.top,s=e.bottom;a<=s;a++)if(t=rowsCache[a]){ensureCellNodesInRowsCache(a),cleanUpCells(e,a),n=0;var l=data.getItemMetadata&&data.getItemMetadata(a);l=l&&l.columns;for(var c=getDataItem(a),u=0,d=columns.length;u<d&&!(columnPosLeft[u]>e.rightPx);u++)if(null==(i=t.cellColSpans[u])){if(i=1,l){var h=l[columns[u].id]||l[u];"*"===(i=h&&h.colspan||1)&&(i=d-u)}columnPosRight[Math.min(d-1,u+i-1)]>e.leftPx&&(appendCellHtml(r,a,u,i,c),n++),u+=i>1?i-1:0}else u+=i>1?i-1:0;n&&(n,o.push(a))}if(r.length){var p,f,m=document.createElement("div");for(m.innerHTML=r.join("");null!=(p=o.pop());){var g;for(t=rowsCache[p];null!=(g=t.cellRenderQueue.pop());)f=m.lastChild,t.rowNode.appendChild(f),t.cellNodesByColumnIdx[g]=f}}}function renderRows(e){for(var t=$canvas[0],n=[],i=[],r=!1,o=getDataLength(),a=e.top,s=e.bottom;a<=s;a++)rowsCache[a]||(renderedRows++,i.push(a),rowsCache[a]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,a,e,o),activeCellNode&&activeRow===a&&(r=!0),counter_rows_rendered++);if(i.length){var l=document.createElement("div");l.innerHTML=n.join("");for(a=0,s=i.length;a<s;a++)rowsCache[i[a]].rowNode=t.appendChild(l.firstChild);r&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(e){delete postProcessedRows[e],postProcessFromRow=Math.min(postProcessFromRow,e),postProcessToRow=Math.max(postProcessToRow,e),startPostProcessing()}function updateRowPositions(){for(var e in rowsCache)rowsCache[e].rowNode.style.top=getRowTop(e)+"px"}function render(){if(initialized){var e=getVisibleRange(),t=getRenderedRange();cleanupRows(t),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(t),renderRows(t),postProcessFromRow=e.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,e.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderRowScroll(){var e=$headerRowScroller[0].scrollLeft;e!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=e)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var e=Math.abs(scrollTop-prevScrollTop),t=Math.abs(scrollLeft-prevScrollLeft);if(t&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft),e)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,e<viewportH)scrollTo(scrollTop+offset);else{var i=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),i!=(offset=Math.round(page*cj))&&invalidateAllRows()}(t||e)&&(h_render&&clearTimeout(h_render),(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)&&(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{}))),trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){for(var e=getDataLength();postProcessFromRow<=postProcessToRow;){var t=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,n=rowsCache[t];if(n&&!(t>=e)){for(var i in postProcessedRows[t]||(postProcessedRows[t]={}),ensureCellNodesInRowsCache(t),n.cellNodesByColumnIdx)if(n.cellNodesByColumnIdx.hasOwnProperty(i)){var r=columns[i|=0];if(r.asyncPostRender&&!postProcessedRows[t][i]){var o=n.cellNodesByColumnIdx[i];o&&r.asyncPostRender(o,t,getDataItem(t),r),postProcessedRows[t][i]=!0}}return void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function updateCellCssStylesOnRenderedRows(e,t){var n,i,r,o;for(var a in rowsCache){if(o=t&&t[a],r=e&&e[a],o)for(i in o)r&&o[i]==r[i]||(n=getCellNode(a,getColumnIndex(i)))&&$(n).removeClass(o[i]);if(r)for(i in r)o&&o[i]==r[i]||(n=getCellNode(a,getColumnIndex(i)))&&$(n).addClass(r[i])}}function addCellCssStyles(e,t){if(cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,null),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function removeCellCssStyles(e){cellCssClasses[e]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[e]),delete cellCssClasses[e],trigger(self.onCellCssStylesChanged,{key:e,hash:null}))}function setCellCssStyles(e,t){var n=cellCssClasses[e];cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,n),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function getCellCssStyles(e){return cellCssClasses[e]}function flashCell(e,t,n){if(n=n||100,rowsCache[e]){var i=$(getCellNode(e,t));!function e(t){t&&setTimeout(function(){i.queue(function(){i.toggleClass(options.cellFlashingCssClass).dequeue(),e(t-1)})},n)}(4)}}function handleMouseWheel(e){var t=$(e.target).closest(".slick-row")[0];t!=rowNodeFromLastMouseWheelEvent&&(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=t&&($canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent),zombieRowNodeFromLastMouseWheelEvent=null),rowNodeFromLastMouseWheelEvent=t)}function handleDragInit(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var i=trigger(self.onDragInit,t,e);return!!e.isImmediatePropagationStopped()&&i}function handleDragStart(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var i=trigger(self.onDragStart,t,e);return!!e.isImmediatePropagationStopped()&&i}function handleDrag(e,t){return trigger(self.onDrag,t,e)}function handleDragEnd(e,t){trigger(self.onDragEnd,t,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var t=e.isImmediatePropagationStopped();if(!t)if(e.shiftKey||e.altKey||e.ctrlKey)9!=e.which||!e.shiftKey||e.ctrlKey||e.altKey||(t=navigatePrev());else if(27==e.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else 34==e.which?(navigatePageDown(),t=!0):33==e.which?(navigatePageUp(),t=!0):37==e.which?t=navigateLeft():39==e.which?t=navigateRight():38==e.which?t=navigateUp():40==e.which?t=navigateDown():9==e.which?t=navigateNext():13==e.which&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),t=!0);if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(e){}}}function handleClick(e){currentEditor||(e.target!=document.activeElement||$(e.target).hasClass("slick-cell"))&&setFocus();var t=getCellFromEvent(e);!t||null!==currentEditor&&activeRow==t.row&&activeCell==t.cell||(trigger(self.onClick,{row:t.row,cell:t.cell},e),e.isImmediatePropagationStopped()||activeCell==t.cell&&activeRow==t.row||!canCellBeActive(t.row,t.cell)||getEditorLock().isActive()&&!getEditorLock().commitCurrentEdit()||(scrollRowIntoView(t.row,!1),setActiveCellInternal(getCellNode(t.row,t.cell))))}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);0!==t.length&&(activeCellNode===t[0]&&null!==currentEditor||trigger(self.onContextMenu,{},e))}function handleDblClick(e){var t=getCellFromEvent(e);!t||null!==currentEditor&&activeRow==t.row&&activeCell==t.cell||(trigger(self.onDblClick,{row:t.row,cell:t.cell},e),e.isImmediatePropagationStopped()||options.editable&&gotoCell(t.row,t.cell,!0))}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},e)}function handleHeaderContextMenu(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");trigger(self.onHeaderContextMenu,{column:n},e)}function handleHeaderClick(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");n&&trigger(self.onHeaderClick,{column:n},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(e,t){return!(e<0||e>=getDataLength()||t<0||t>=columns.length)}function getCellFromPoint(e,t){for(var n=getRowFromPosition(t),i=0,r=0,o=0;o<columns.length&&r<e;o++)r+=columns[o].width,i++;return i<0&&(i=0),{row:n,cell:i-1}}function getCellFromNode(e){var t=/l\d+/.exec(e.className);if(!t)throw"getCellFromNode: cannot get cell - "+e.className;return parseInt(t[0].substr(1,t[0].length-1),10)}function getRowFromNode(e){for(var t in rowsCache)if(rowsCache[t].rowNode===e)return 0|t;return null}function getCellFromEvent(e){var t=$(e.target).closest(".slick-cell",$canvas);if(!t.length)return null;var n=getRowFromNode(t[0].parentNode),i=getCellFromNode(t[0]);return null==n||null==i?null:{row:n,cell:i}}function getCellNodeBox(e,t){if(!cellExists(e,t))return null;for(var n=getRowTop(e),i=n+options.rowHeight-1,r=0,o=0;o<t;o++)r+=columns[o].width;return{top:n,left:r,bottom:i,right:r+columns[t].width}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){-1==tabbingDirection?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(e,t,n){scrollRowIntoView(e,n);var i=getColspan(e,t),r=columnPosLeft[t],o=columnPosRight[t+(i>1?i-1:0)],a=scrollLeft+viewportW;r<scrollLeft?($viewport.scrollLeft(r),handleScroll(),render()):o>a&&($viewport.scrollLeft(Math.min(r,o-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(e,t){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var n=activeCellNode!==e;null!=(activeCellNode=e)?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),null==t&&(t=activeRow==getDataLength()||options.autoEdit),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&t&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}}function isCellPotentiallyEditable(e,t){var n=getDataLength();return!(e<n&&!getDataItem(e))&&(!(columns[t].cannotTriggerInsert&&e>=n)&&!!getEditor(e,t))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var e=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),e){var t=columns[activeCell],n=getFormatter(activeRow,t);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(e,t),t,e),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(e){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var t=columns[activeCell],n=getDataItem(activeRow);!1!==trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:t})?(getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),e||(activeCellNode.innerHTML=""),currentEditor=new(e||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:t,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()):setFocus()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;for(var n=e.offsetParent;(e=e.parentNode)!=document.body;)t.visible&&e.scrollHeight!=e.offsetHeight&&"visible"!=$(e).css("overflowY")&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&"visible"!=$(e).css("overflowX")&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===n&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,n=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width;return t}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var e=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(e.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(e)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(e,t){var n=e*options.rowHeight,i=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(e+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(t?n:i),render()):e*options.rowHeight<scrollTop+offset&&(scrollTo(t?i:n),render())}function scrollRowToTop(e){scrollTo(e*options.rowHeight),render()}function scrollPage(e){var t=e*numVisibleRows;if(scrollTo((getRowFromPosition(scrollTop)+t)*options.rowHeight),render(),options.enableCellNavigation&&null!=activeRow){var n=activeRow+t,i=getDataLengthIncludingAddNew();n>=i&&(n=i-1),n<0&&(n=0);for(var r=0,o=null,a=activePosX;r<=activePosX;)canCellBeActive(n,r)&&(o=r),r+=getColspan(n,r);null!==o?(setActiveCellInternal(getCellNode(n,o)),activePosX=a):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function getColspan(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e);if(!n||!n.columns)return 1;var i=n.columns[columns[t].id]||n.columns[t],r=i&&i.colspan;return r="*"===r?columns.length-t:r||1}function findFirstFocusableCell(e){for(var t=0;t<columns.length;){if(canCellBeActive(e,t))return t;t+=getColspan(e,t)}return null}function findLastFocusableCell(e){for(var t=0,n=null;t<columns.length;)canCellBeActive(e,t)&&(n=t),t+=getColspan(e,t);return n}function gotoRight(e,t,n){if(t>=columns.length)return null;do{t+=getColspan(e,t)}while(t<columns.length&&!canCellBeActive(e,t));return t<columns.length?{row:e,cell:t,posX:t}:null}function gotoLeft(e,t,n){if(t<=0)return null;var i=findFirstFocusableCell(e);if(null===i||i>=t)return null;for(var r,o={row:e,cell:i,posX:i};;){if(!(r=gotoRight(o.row,o.cell,o.posX)))return null;if(r.cell>=t)return o;o=r}}function gotoDown(e,t,n){for(var i,r=getDataLengthIncludingAddNew();;){if(++e>=r)return null;for(i=t=0;t<=n;)i=t,t+=getColspan(e,t);if(canCellBeActive(e,i))return{row:e,cell:i,posX:n}}}function gotoUp(e,t,n){for(var i;;){if(--e<0)return null;for(i=t=0;t<=n;)i=t,t+=getColspan(e,t);if(canCellBeActive(e,i))return{row:e,cell:i,posX:n}}}function gotoNext(e,t,n){if(null==e&&null==t&&canCellBeActive(e=t=n=0,t))return{row:e,cell:t,posX:t};var i=gotoRight(e,t,n);if(i)return i;for(var r=null,o=getDataLengthIncludingAddNew();++e<o;)if(null!==(r=findFirstFocusableCell(e)))return{row:e,cell:r,posX:r};return null}function gotoPrev(e,t,n){if(null==e&&null==t&&canCellBeActive(e=getDataLengthIncludingAddNew()-1,t=n=columns.length-1))return{row:e,cell:t,posX:t};for(var i,r;!i&&!(i=gotoLeft(e,t,n));){if(--e<0)return null;t=0,null!==(r=findLastFocusableCell(e))&&(i={row:e,cell:r,posX:r})}return i}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(e){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=e&&"next"!=e)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();tabbingDirection={up:-1,down:1,left:-1,right:1,prev:-1,next:1}[e];var t=(0,{up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext}[e])(activeRow,activeCell,activePosX);if(t){var n=t.row==getDataLength();return scrollCellIntoView(t.row,t.cell,!n),setActiveCellInternal(getCellNode(t.row,t.cell)),activePosX=t.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(e,t){return rowsCache[e]?(ensureCellNodesInRowsCache(e),rowsCache[e].cellNodesByColumnIdx[t]):null}function setActiveCell(e,t){initialized&&(e>getDataLength()||e<0||t>=columns.length||t<0||options.enableCellNavigation&&(scrollCellIntoView(e,t,!1),setActiveCellInternal(getCellNode(e,t),!1)))}function canCellBeActive(e,t){if(!options.enableCellNavigation||e>=getDataLengthIncludingAddNew()||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&"boolean"==typeof n.focusable)return n.focusable;var i=n&&n.columns;return i&&i[columns[t].id]&&"boolean"==typeof i[columns[t].id].focusable?i[columns[t].id].focusable:i&&i[t]&&"boolean"==typeof i[t].focusable?i[t].focusable:columns[t].focusable}function canCellBeSelected(e,t){if(e>=getDataLength()||e<0||t>=columns.length||t<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&"boolean"==typeof n.selectable)return n.selectable;var i=n&&n.columns&&(n.columns[columns[t].id]||n.columns[t]);return i&&"boolean"==typeof i.selectable?i.selectable:columns[t].selectable}function gotoCell(e,t,n){initialized&&(canCellBeActive(e,t)&&getEditorLock().commitCurrentEdit()&&(scrollCellIntoView(e,t,!1),setActiveCellInternal(getCellNode(e,t),n||e===getDataLength()||options.autoEdit),currentEditor||setFocus()))}function commitCurrentEdit(){var e=getDataItem(activeRow),t=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var i={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(e,t,i)):(i.execute(),makeActiveCellNormal())}else{var r={};currentEditor.applyValue(r,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:r,column:t})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:t}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(e){for(var t=[],n=columns.length-1,i=0;i<e.length;i++)t.push(new Slick.Range(e[i],0,e[i],n));return t}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(e){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(e))}this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+counter_rows_rendered,e+="\ncounter_rows_removed:  "+counter_rows_removed,e+="\nrenderedRows:  "+renderedRows,e+="\nnumVisibleRows:  "+numVisibleRows,e+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,e+="\nn(umber of pages):  "+n,e+="\n(current) page:  "+page,e+="\npage height (ph):  "+ph,e+="\nvScrollDir:  "+vScrollDir,alert(e)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}})}(jQuery)}).call(this,__webpack_require__(1))},function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{RowSelectionModel:function(t){var n,i,r,o=[],a=this,s=new Slick.EventHandler,l={selectActiveRow:!0};function c(e){return function(){i||(i=!0,e.apply(this,arguments),i=!1)}}function u(e){for(var t=[],n=0;n<e.length;n++)for(var i=e[n].fromRow;i<=e[n].toRow;i++)t.push(i);return t}function d(e){for(var t=[],i=n.getColumns().length-1,r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],i));return t}function h(){return u(o)}function p(e){o=e,a.onSelectedRangesChanged.notify(o)}function f(e,t){r.selectActiveRow&&null!=t.row&&p([new Slick.Range(t.row,0,t.row,n.getColumns().length-1)])}function m(e){var t=n.getActiveCell();if(t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(38==e.which||40==e.which)){var i=h();i.sort(function(e,t){return e-t}),i.length||(i=[t.row]);var r,a=i[0],s=i[i.length-1];(r=40==e.which?t.row<s||a==s?++s:++a:t.row<s?--s:--a)>=0&&r<n.getDataLength()&&(n.scrollRowIntoView(r),p(o=d(function(e,t){var n,i=[];for(n=e;n<=t;n++)i.push(n);for(n=t;n<e;n++)i.push(n);return i}(a,s)))),e.preventDefault(),e.stopPropagation()}}function g(t){var i=n.getCellFromEvent(t);if(!i||!n.canCellBeActive(i.row,i.cell))return!1;if(!n.getOptions().multiSelect||!t.ctrlKey&&!t.shiftKey&&!t.metaKey)return!1;var r=u(o),a=e.inArray(i.row,r);if(-1===a&&(t.ctrlKey||t.metaKey))r.push(i.row),n.setActiveCell(i.row,i.cell);else if(-1!==a&&(t.ctrlKey||t.metaKey))r=e.grep(r,function(e,t){return e!==i.row}),n.setActiveCell(i.row,i.cell);else if(r.length&&t.shiftKey){var s=r.pop(),l=Math.min(i.row,s),c=Math.max(i.row,s);r=[];for(var h=l;h<=c;h++)h!==s&&r.push(h);r.push(s),n.setActiveCell(i.row,i.cell)}return p(o=d(r)),t.stopImmediatePropagation(),!0}e.extend(this,{getSelectedRows:h,setSelectedRows:function(e){p(d(e))},getSelectedRanges:function(){return o},setSelectedRanges:p,init:function(i){r=e.extend(!0,{},l,t),n=i,s.subscribe(n.onActiveCellChanged,c(f)),s.subscribe(n.onKeyDown,c(m)),s.subscribe(n.onClick,c(g))},destroy:function(){s.unsubscribeAll()},onSelectedRangesChanged:new Slick.Event})}}})}(e)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{Plugins:{HeaderButtons:function(t){var n,i=this,r=new Slick.EventHandler,o={buttonCssClass:"slick-header-button"};function a(n,i){var r=i.column;if(r.header&&r.header.buttons)for(var o=r.header.buttons.length;o--;){var a=r.header.buttons[o],s=e("<div></div>").addClass(t.buttonCssClass).data("column",r).data("button",a);a.showOnHover&&s.addClass("slick-header-button-hidden"),a.image&&s.css("backgroundImage","url("+a.image+")"),a.cssClass&&s.addClass(a.cssClass),a.tooltip&&s.attr("title",a.tooltip),a.command&&s.data("command",a.command),a.handler&&s.bind("click",a.handler),s.bind("click",l).appendTo(i.node)}}function s(n,i){var r=i.column;r.header&&r.header.buttons&&e(i.node).find("."+t.buttonCssClass).remove()}function l(t){var r=e(this).data("command"),o=e(this).data("column"),a=e(this).data("button");null!=r&&(i.onCommand.notify({grid:n,column:o,command:r,button:a},t,i),n.updateColumnHeader(o.id)),t.preventDefault(),t.stopPropagation()}e.extend(this,{init:function(i){t=e.extend(!0,{},o,t),n=i,r.subscribe(n.onHeaderCellRendered,a).subscribe(n.onBeforeHeaderCellDestroy,s),n.setColumns(n.getColumns())},destroy:function(){r.unsubscribeAll()},onCommand:new Slick.Event})}}}})}(e)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{AutoTooltips:function(t){var n,i={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:null};function r(i){var r=n.getCellFromEvent(i);if(r){var o,a=e(n.getCellNode(r.row,r.cell));a.innerWidth()<a[0].scrollWidth?(o=e.trim(a.text()),t.maxToolTipLength&&o.length>t.maxToolTipLength&&(o=o.substr(0,t.maxToolTipLength-3)+"...")):o="",a.attr("title",o)}}function o(t,n){var i=n.column,r=e(t.target).closest(".slick-header-column");i.toolTip||r.attr("title",r.innerWidth()<r[0].scrollWidth?i.name:"")}e.extend(this,{init:function(a){t=e.extend(!0,{},i,t),n=a,t.enableForCells&&n.onMouseEnter.subscribe(r);t.enableForHeaderCells&&n.onHeaderMouseEnter.subscribe(o)},destroy:function(){t.enableForCells&&n.onMouseEnter.unsubscribe(r);t.enableForHeaderCells&&n.onHeaderMouseEnter.unsubscribe(o)}})}}})}(e)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){!function(e){e.extend(!0,window,{Slick:{Slycateditors:{Text:function(t){var n,i;this.init=function(){n=e("<INPUT type=text class='editor-text' />").appendTo(t.container).bind("keydown.nav",function(t){t.keyCode!==e.ui.keyCode.LEFT&&t.keyCode!==e.ui.keyCode.RIGHT||t.stopImmediatePropagation()}).focus().select()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.getValue=function(){return n.val()},this.setValue=function(e){n.val(e)},this.loadValue=function(e){i=e[t.column.field]||"",n.val(i),n[0].defaultValue=i,n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==i)&&n.val()!=i},this.validate=function(){if(t.column.validator){var e=t.column.validator(n.val());if(!e.valid)return e}return{valid:!0,msg:null}},this.init()},Integer:function(t){var n,i;this.init=function(){(n=e("<INPUT type=text class='editor-text' />")).bind("keydown.nav",function(t){t.keyCode!==e.ui.keyCode.LEFT&&t.keyCode!==e.ui.keyCode.RIGHT||t.stopImmediatePropagation()}),n.appendTo(t.container),n.focus().select()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){i=e[t.column.field],n.val(i),n[0].defaultValue=i,n.select()},this.serializeValue=function(){return parseInt(n.val(),10)||0},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==i)&&n.val()!=i},this.validate=function(){return isNaN(n.val())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}},this.init()},Date:function(t){var n,i,r=!1;this.init=function(){(n=e("<INPUT type=text class='editor-text' />")).appendTo(t.container),n.focus().select(),n.datepicker({showOn:"button",buttonImageOnly:!0,buttonImage:"../images/calendar.gif",beforeShow:function(){r=!0},onClose:function(){r=!1}}),n.width(n.width()-18)},this.destroy=function(){e.datepicker.dpDiv.stop(!0,!0),n.datepicker("hide"),n.datepicker("destroy"),n.remove()},this.show=function(){r&&e.datepicker.dpDiv.stop(!0,!0).show()},this.hide=function(){r&&e.datepicker.dpDiv.stop(!0,!0).hide()},this.position=function(t){r&&e.datepicker.dpDiv.css("top",t.top+30).css("left",t.left)},this.focus=function(){n.focus()},this.loadValue=function(e){i=e[t.column.field],n.val(i),n[0].defaultValue=i,n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==i)&&n.val()!=i},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoSelect:function(t){var n,i;this.init=function(){(n=e("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>")).appendTo(t.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){n.val((i=e[t.column.field])?"yes":"no"),n.select()},this.serializeValue=function(){return"yes"==n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return n.val()!=i},this.validate=function(){return{valid:!0,msg:null}},this.init()},Checkbox:function(t){var n,i;this.init=function(){(n=e("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(t.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){(i=!!e[t.column.field])?n.prop("checked",!0):n.prop("checked",!1)},this.serializeValue=function(){return n.prop("checked")},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return this.serializeValue()!==i},this.validate=function(){return{valid:!0,msg:null}},this.init()},PercentComplete:function(t){var n,i,r;this.init=function(){(n=e("<INPUT type=text class='editor-percentcomplete' />")).width(e(t.container).innerWidth()-25),n.appendTo(t.container),(i=e("<div class='editor-percentcomplete-picker' />").appendTo(t.container)).append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>"),i.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>"),n.focus().select(),i.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:r,slide:function(e,t){n.val(t.value)}}),i.find(".editor-percentcomplete-buttons button").bind("click",function(t){n.val(e(this).attr("val")),i.find(".editor-percentcomplete-slider").slider("value",e(this).attr("val"))})},this.destroy=function(){n.remove(),i.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){n.val(r=e[t.column.field]),n.select()},this.serializeValue=function(){return parseInt(n.val(),10)||0},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==r)&&(parseInt(n.val(),10)||0)!=r},this.validate=function(){return isNaN(parseInt(n.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}},this.init()},LongText:function(t){var n,i,r,o=this;this.init=function(){var r=e("body");i=e("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(r),n=e("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(i),e("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(i),i.find("button:first").bind("click",this.save),i.find("button:last").bind("click",this.cancel),n.bind("keydown",this.handleKeyDown),o.position(t.position),n.focus().select()},this.handleKeyDown=function(n){n.which==e.ui.keyCode.ENTER&&n.ctrlKey?o.save():n.which==e.ui.keyCode.ESCAPE?(n.preventDefault(),o.cancel()):n.which==e.ui.keyCode.TAB&&n.shiftKey?(n.preventDefault(),t.grid.navigatePrev()):n.which==e.ui.keyCode.TAB&&(n.preventDefault(),t.grid.navigateNext())},this.save=function(){t.commitChanges()},this.cancel=function(){n.val(r),t.cancelChanges()},this.hide=function(){i.hide()},this.show=function(){i.show()},this.position=function(e){i.css("top",e.top-5).css("left",e.left-5)},this.destroy=function(){i.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){n.val(r=e[t.column.field]),n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==r)&&n.val()!=r},this.validate=function(){return{valid:!0,msg:null}},this.init()},Rating:function(t){var n,i;this.init=function(){(n=e("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(t.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(e){(i=!!e[t.column.field])?n.prop("checked",!0):n.prop("checked",!1)},this.serializeValue=function(){return n.prop("checked")},this.applyValue=function(e,n){e[t.column.field]=n},this.isValueChanged=function(){return this.serializeValue()!==i},this.validate=function(){return{valid:!0,msg:null}},this.init()}}}})}(e)}).call(this,n(1))},function(module,exports,__webpack_require__){"use strict";(function(jQuery){var _typeof2=__webpack_require__(100),_typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}!function(b){var a=Math.min,d=Math.max,c=Math.floor,f=function(e){return"string"===b.type(e)},j=function j(a,d){if(b.isArray(d))for(var c=0,j=d.length;c<j;c++){var h=d[c];try{f(h)&&(h=eval(h)),b.isFunction(h)&&h(a)}catch(e){}}};b.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){if(e=(e=b(e)).data("layout")||e.data("parentLayout")){if((e=e.container).data("layoutPane"))return e;if((e=e.closest("."+b.layout.defaults.panes.paneClass)).data("layoutPane"))return e}return null},getParentPaneInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("layoutPane"):null},getParentLayoutInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("parentLayout"):null},getEventObject:function(e){return"object"===(void 0===e?"undefined":(0,_typeof3.default)(e))&&e.stopPropagation?e:null},parsePaneName:function(e){var t=b.layout.getEventObject(e);return t&&(t.stopPropagation(),e=b(this).data("layoutEdge")),e&&!/^(west|east|north|south|center)$/.test(e)&&(b.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+e+'"'),e="error"),e},plugins:{draggable:!!b.fn.draggable,effects:{core:!!b.effects,slide:b.effects&&(b.effects.slide||b.effects.effect&&b.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||b.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||b.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=b('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.css("width")-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n={display:(n=e[0].style).display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),n}return{}},getElementDimensions:function(e,t){var n,i,r,o={css:{},inset:{}},a=o.css,s={bottom:0},l=b.layout.cssNum,c=e.offset();return o.offsetLeft=c.left,o.offsetTop=c.top,t||(t={}),b.each(["Left","Right","Top","Bottom"],function(l,c){n=a["border"+c]=b.layout.borderWidth(e,c),i=a["padding"+c]=b.layout.cssNum(e,"padding"+c),r=c.toLowerCase(),o.inset[r]=0<=t[r]?t[r]:i,s[r]=o.inset[r]+n}),a.width=e.width(),a.height=e.height(),a.top=l(e,"top",!0),a.bottom=l(e,"bottom",!0),a.left=l(e,"left",!0),a.right=l(e,"right",!0),o.outerWidth=e.outerWidth(),o.outerHeight=e.outerHeight(),o.innerWidth=d(0,o.outerWidth-s.left-s.right),o.innerHeight=d(0,o.outerHeight-s.top-s.bottom),o.layoutWidth=e.innerWidth(),o.layoutHeight=e.innerHeight(),o},getElementStyles:function(e,t){var n,i,r,o,a,s,l={},c=e[0].style,u=t.split(","),d=["Top","Bottom","Left","Right"],h=["Color","Style","Width"];for(o=0;o<u.length;o++)if((n=u[o]).match(/(border|padding|margin)$/))for(a=0;4>a;a++)if(i=d[a],"border"===n)for(s=0;3>s;s++)l[n+i+(r=h[s])]=c[n+i+r];else l[n+i]=c[n+i];else l[n]=c[n];return l},cssWidth:function(e,t){if(0>=t)return 0;var n=b.layout.browser.boxModel?b.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=b.layout.borderWidth,r=b.layout.cssNum,o=t;return"border-box"!==n&&(o-=i(e,"Left")+i(e,"Right")),"content-box"===n&&(o-=r(e,"paddingLeft")+r(e,"paddingRight")),d(0,o)},cssHeight:function(e,t){if(0>=t)return 0;var n=b.layout.browser.boxModel?b.support.boxSizing?e.css("boxSizing"):"content-box":"border-box",i=b.layout.borderWidth,r=b.layout.cssNum,o=t;return"border-box"!==n&&(o-=i(e,"Top")+i(e,"Bottom")),"content-box"===n&&(o-=r(e,"paddingTop")+r(e,"paddingBottom")),d(0,o)},cssNum:function(e,t,n){e.jquery||(e=b(e));var i=b.layout.showInvisibly(e);return t=b.css(e[0],t,!0),n=n&&"auto"==t?t:Math.round(parseFloat(t)||0),e.css(i),n},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===b.css(e,n+"Style",!0)?0:Math.round(parseFloat(b.css(e,n+"Width",!0))||0)},isMouseOverElem:function(e,t){var n,i=(n=(o=b(t||this)).offset()).top,r=(n=n.left)+o.outerWidth(),o=i+o.outerHeight(),a=e.pageX,s=e.pageY;return b.layout.browser.msie&&0>a&&0>s||a>=n&&a<=r&&s>=i&&s<=o},msg:function(e,t,n,i){b.isPlainObject(e)&&window.debugData?("string"==typeof t?(i=n,n=t):"object"===(void 0===n?"undefined":(0,_typeof3.default)(n))&&(i=n,n=null),n=n||"log( <object> )",i=b.extend({sort:!1,returnHTML:!1,display:!1},i),!0===t||i.display?debugData(e,n,i):window.console&&console.log(debugData(e,n,i))):t?alert(e):window.console?console.log(e):((t=b("#layoutLogger")).length||((t=b('<div id="layoutLogger" style="position: '+(b.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body")).css("left",b(window).width()-t.outerWidth()-5),b.ui.draggable&&t.draggable({handle:":first-child"})),t.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var h=navigator.userAgent.toLowerCase(),p=/(chrome)[ \/]([\w.]+)/.exec(h)||/(webkit)[ \/]([\w.]+)/.exec(h)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(h)||/(msie) ([\w.]+)/.exec(h)||0>h.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(h)||[],h=p[1]||"",p=p[2]||0,x="msie"===h;b.layout.browser={version:p,safari:"webkit"===h,webkit:"chrome"===h,msie:x,isIE6:x&&6==p,boxModel:!x||!1!==b.support.boxModel},h&&(b.layout.browser[h]=!0),x&&b(function(){b.layout.browser.boxModel=b.support.boxModel}),b.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:b.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},b.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]},b.layout.transformData=function(e,t){var n,i,r,o,a,s,l,c=t?{panes:{},center:{}}:{};if("object"!==(void 0===e?"undefined":(0,_typeof3.default)(e)))return c;for(i in e)for(n=c,a=e[i],l=(r=i.split("__")).length-1,s=0;s<=l;s++)o=r[s],s===l?n[o]=b.isPlainObject(a)?b.layout.transformData(a):a:(n[o]||(n[o]={}),n=n[o]);return c},b.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){function t(t,n){for(var i,r=t.split("."),o=r.length-1,a={branch:e,key:r[o]},s=0;s<o;s++)i=r[s],a.branch=void 0==a.branch[i]?n?a.branch[i]={}:{}:a.branch[i];return a}var n,i,r,o,a=b.layout.backwardCompatibility.map;for(o in a)void 0!==(r=(n=t(o)).branch[n.key])&&((i=t(a[o],!0)).branch[i.key]=r,delete n.branch[n.key])},renameAllOptions:function(e){var t=b.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!==(0,_typeof3.default)(e.panes)&&(e.panes={}),b.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),b.each(b.layout.config.allPanes,function(n,i){e[i]&&t(e[i])}),e}},b.fn.layout=function(h){function p(e){if(!e)return!0;var t=e.keyCode;if(33>t)return!0;var n,i,o,a,s={38:"north",40:"south",37:"west",39:"east"},l=e.shiftKey,c=e.ctrlKey;return c&&37<=t&&40>=t&&r[s[t]].enableCursorHotkey?a=s[t]:(c||l)&&b.each(k.borderPanes,function(e,s){if(n=r[s],i=n.customHotkey,o=n.customHotkeyModifier,(l&&"SHIFT"==o||c&&"CTRL"==o||c&&l)&&i&&t===(isNaN(i)||9>=i?i.toUpperCase().charCodeAt(0):i))return a=s,!1}),!(a&&y[a]&&r[a].closable&&!q[a].isHidden)||(na(a),e.stopPropagation(),e.returnValue=!1)}function x(e){var t;if(H()&&(this&&this.tagName&&(e=this),f(e)?t=y[e]:b(e).data("layoutRole")?t=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole"))return t=b(this),!1}),t&&t.length)){var n=t.data("layoutEdge");if((e=q[n]).cssSaved&&X(n),e.isSliding||e.isResizing||e.isClosed)e.cssSaved=!1;else{var i={zIndex:r.zIndexes.resizer_normal+1},o={},a=t.css("overflow"),s=t.css("overflowX"),l=t.css("overflowY");"visible"!=a&&(o.overflow=a,i.overflow="visible"),s&&!s.match(/(visible|auto)/)&&(o.overflowX=s,i.overflowX="visible"),l&&!l.match(/(visible|auto)/)&&(o.overflowY=s,i.overflowY="visible"),e.cssSaved=o,t.css(i),b.each(k.allPanes,function(e,t){t!=n&&X(t)})}}}function X(e){var t;if(H()&&(this&&this.tagName&&(e=this),f(e)?t=y[e]:b(e).data("layoutRole")?t=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole"))return t=b(this),!1}),t&&t.length)){e=t.data("layoutEdge");var n=(e=q[e]).cssSaved||{};!e.isSliding&&!e.isResizing&&t.css("zIndex",r.zIndexes.pane_normal),t.css(n),e.cssSaved=!1}}var G=b.layout.browser,k=b.layout.config,Q=b.layout.cssWidth,O=b.layout.cssHeight,R=b.layout.getElementDimensions,D=b.layout.getElementStyles,Ma=b.layout.getEventObject,A=b.layout.parsePaneName,r=b.extend(!0,{},b.layout.defaults);r.effects=b.extend(!0,{},b.layout.effects);var q={id:"layout"+b.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},ba={north:null,south:null,east:null,west:null,center:null},M={data:{},set:function(e,t,n){M.clear(e),M.data[e]=setTimeout(t,n)},clear:function(e){var t=M.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},ca=function(e,t,n){var i=r;return(i.showErrorMessages&&!n||n&&i.showDebugMessages)&&b.layout.msg(i.name+" / "+e,!1!==t),!1},C=function C(e,w,m){var a=w&&f(w),g=a?q[w]:q,t=a?r[w]:r,n=r.name,d=e+(e.match(/_/)?"":"_end"),c=d.match(/_end$/)?d.substr(0,d.length-4):"",l=t[d]||t[c],h="NC",k=[];if(!a&&"boolean"===b.type(w)&&(m=w,w=""),l)try{f(l)&&(l.match(/,/)?(k=l.split(","),l=eval(k[0])):l=eval(l)),b.isFunction(l)&&(h=k.length?l(k[1]):a?l(w,y[w],g,t,n):l(z,g,t,n))}catch(e){ca(r.errors.callbackError.replace(/EVENT/,b.trim((w||"")+" "+d)),!1),"string"===b.type(e)&&string.length&&ca("Exception:  "+e,!1)}return!m&&!1!==h&&(a?(m=y[w],t=r[w],g=q[w],m.triggerHandler("layoutpane"+d,[w,m,g,t,n]),c&&m.triggerHandler("layoutpane"+c,[w,m,g,t,n])):(u.triggerHandler("layout"+d,[z,g,t,n]),c&&u.triggerHandler("layout"+c,[z,g,t,n]))),a&&"onresize_end"===e&&db(w+"",!0),h},eb=function(e){if(!G.mozilla){var t=y[e];"IFRAME"===q[e].tagName?t.css(k.hidden).css(k.visible):t.find("IFRAME").css(k.hidden).css(k.visible)}},ya=function(e){var t=y[e];return e=k[e].dir,t={minWidth:1001-Q(t,1e3),minHeight:1001-O(t,1e3)},"horz"===e&&(t.minSize=t.minHeight),"vert"===e&&(t.minSize=t.minWidth),t},fa=function(e,t,n){if(n||(n=k[e].dir),f(t)&&t.match(/%/)&&(t="100%"===t?-1:parseInt(t,10)/100),0===t)return 0;if(1<=t)return parseInt(t,10);var i=r,o=0;if("horz"==n?o=v.innerHeight-(y.north?i.north.spacing_open:0)-(y.south?i.south.spacing_open:0):"vert"==n&&(o=v.innerWidth-(y.west?i.west.spacing_open:0)-(y.east?i.east.spacing_open:0)),-1===t)return o;if(0<t)return c(o*t);if("center"==e)return 0;n="horz"===n?"height":"width",i=y[e],e="height"===n&&U[e];o=b.layout.showInvisibly(i);var a=i.css(n),s=e?e.css(n):0;return i.css(n,"auto"),e&&e.css(n,"auto"),t="height"===n?i.outerHeight():i.outerWidth(),i.css(n,a).css(o),e&&e.css(n,s),t},ga=function(e,t){var n=y[e],i=r[e],o=q[e],a=t?i.spacing_open:0;i=t?i.spacing_closed:0;return!n||o.isHidden?0:o.isClosed||o.isSliding&&t?i:"horz"===k[e].dir?n.outerHeight()+a:n.outerWidth()+a},Y=function(e,t){if(H()){var n=r[e],i=q[e],o=(s=k[e]).dir;s.sizeType.toLowerCase();var s=void 0!=t?t:i.isSliding,l=n.spacing_open,c=k.oppositeEdge[e],u=q[c],h=!(p=y[c])||!1===u.isVisible||u.isSliding?0:"horz"==o?p.outerHeight():p.outerWidth(),p=(c=(!p||u.isHidden?0:r[c][!1!==u.isClosed?"spacing_closed":"spacing_open"])||0,u="horz"==o?v.innerHeight:v.innerWidth,ya("center"));p="horz"==o?d(r.center.minHeight,p.minHeight):d(r.center.minWidth,p.minWidth),s=u-l-(s?0:fa("center",p,o)+h+c),o=i.minSize=d(fa(e,n.minSize),ya(e).minSize),s=i.maxSize=a(n.maxSize?fa(e,n.maxSize):1e5,s),i=i.resizerPosition={},l=v.inset.top,h=v.inset.left,c=v.innerWidth,u=v.innerHeight,n=n.spacing_open;switch(e){case"north":i.min=l+o,i.max=l+s;break;case"west":i.min=h+o,i.max=h+s;break;case"south":i.min=l+u-s-n,i.max=l+u-o-n;break;case"east":i.min=h+c-s-n,i.max=h+c-o-n}}},Na=function(e,t){var n=b(e),i=n.data("layoutRole"),o=n.data("layoutEdge"),a=r[o][i+"Class"],s=(o="-"+o,"-closed"===(l=n.hasClass(a+"-closed")?"-closed":"-open")?"-open":"-closed"),l=a+"-hover "+(a+o)+"-hover "+(a+l)+"-hover "+(a+o+l)+"-hover ";return t&&(l+=a+s+"-hover "+(a+o+s)+"-hover "),"resizer"==i&&n.hasClass(a+"-sliding")&&(l+=a+"-sliding-hover "+(a+o)+"-sliding-hover "),b.trim(l)},Oa=function(e,t){var n=b(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(Na(n))},da=function(e,t){var n=b(t||this);n.removeClass(Na(n,!0))},fb=function(){var e=b(this).data("layoutEdge"),t=q[e];!t.isClosed&&!t.isResizing&&!q.paneResizing&&(b.fn.disableSelection&&b("body").disableSelection(),r.maskPanesEarly&&va(e,{resizing:!0}))},gb=function e(t,n){var i=n||this,o=b(i).data("layoutEdge"),a=o+"ResizerLeave";M.clear(o+"_openSlider"),M.clear(a),n?q.paneResizing||(b.fn.enableSelection&&b("body").enableSelection(),r.maskPanesEarly&&za()):M.set(a,function(){e(t,i)},200)},H=function(){return!(!q.initialized&&!q.creatingLayout)||Aa()},Aa=function e(t){var n=r;return u.is(":visible")?hb("center").length?(q.creatingLayout=!0,b.extend(v,R(u,n.inset)),A(void 0),b.each(k.allPanes,function(e,t){ib(t,!0)}),Pa(),b.each(k.borderPanes,function(e,t){y[t]&&q[t].isVisible&&(Y(t),ha(t))}),ia("center"),b.each(k.allPanes,function(e,t){jb(t)}),n.scrollToBookmarkOnLoad&&((t=self.location).hash&&t.replace(t.hash)),z.hasParentLayout?n.resizeWithWindow=!1:n.resizeWithWindow&&b(window).bind("resize."+K,Ab),delete q.creatingLayout,q.initialized=!0,j(z,b.layout.onReady),C("onload_end"),!0):ca(n.errors.centerPaneMissing):(!t&&G.webkit&&"BODY"===u[0].tagName&&setTimeout(function(){e(!0)},50),!1)},Qa=function(e,t){var n=A.call(this,e),i=y[n];if(i){var o=U[n],a=q[n],s=r[n],l=r.stateManagement||{};s=t?s.children=t:s.children;if(b.isPlainObject(s))s=[s];else if(!s||!b.isArray(s))return;b.each(s,function(e,t){b.isPlainObject(t)&&(t.containerSelector?i.find(t.containerSelector):o||i).each(function(){var e=b(this);if(!(i=e.data("layout"))){if(kb({container:e,options:t},a),l.includeChildren&&q.stateData[n]){var i=(q.stateData[n].children||{})[t.instanceKey],r=t.stateManagement||(t.stateManagement={autoLoad:!0});!0===r.autoLoad&&i&&(r.autoSave=!1,r.includeChildren=!0,r.autoLoad=b.extend(!0,{},i))}(i=e.layout(t))&&Ba(n,i)}})})}},kb=function(e,t){var n=e.container,i=e.options,r=i.stateManagement,o=i.instanceKey||n.data("layoutInstanceKey");return o||(o=(r&&r.cookie?r.cookie.name:"")||i.name),o=o?o.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++t.childIdx,i.instanceKey=o,n.data("layoutInstanceKey",o),o},Ba=function(e,t){var n=y[e],i=ba[e],r=q[e];b.isPlainObject(i)&&(b.each(i,function(e,t){t.destroyed&&delete i[e]}),b.isEmptyObject(i)&&(i=ba[e]=null)),!t&&!i&&(t=n.data("layout")),t&&(t.hasParentLayout=!0,n=t.options,kb(t,r),i||(i=ba[e]={}),i[n.instanceKey]=t.container.data("layout")),z[e].children=ba[e],t||Qa(e)},Ab=function(){var e=r,t=Number(e.resizeWithWindowDelay);10>t&&(t=100),M.clear("winResize"),M.set("winResize",function(){M.clear("winResize"),M.clear("winResizeRepeater");var t=R(u,e.inset);(t.innerWidth!==v.innerWidth||t.innerHeight!==v.innerHeight)&&oa()},t),M.data.winResizeRepeater||lb()},lb=function e(){var t=Number(r.resizeWithWindowMaxDelay);0<t&&M.set("winResizeRepeater",function(){e(),oa()},t)},mb=function(){C("onunload_start"),j(z,b.layout.onUnload),C("onunload_end")},nb=function(e){e=e?e.split(","):k.borderPanes,b.each(e,function(e,t){var n=r[t];if(n.enableCursorHotkey||n.customHotkey)return b(document).bind("keydown."+K,p),!1})},hb=function(e){if("#"===(e=r[e].paneSelector).substr(0,1))return u.find(e).eq(0);var t=u.children(e).eq(0);return t.length?t:u.children("form:first").children(e).eq(0)},ib=function(e,t){if(t||H()){var n,i,o=r[e],s=q[e],l=k[e],c=l.dir,u="center"===e,h={},p=y[e];if(p?Ra(e,!1,!0,!1):U[e]=!1,(p=y[e]=hb(e)).length){for(i in p.data("layoutCSS")||p.data("layoutCSS",D(p,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border")),z[e]={name:e,pane:y[e],content:U[e],options:r[e],state:q[e],children:ba[e]},p.data({parentLayout:z,layoutPane:z[e],layoutEdge:e,layoutRole:"pane"}).css(l.cssReq).css("zIndex",r.zIndexes.pane_normal).css(o.applyDemoStyles?l.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+e).bind("mouseenter."+K,Oa).bind("mouseleave."+K,da),l={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"})p.bind("layoutpane"+i.toLowerCase()+"."+K,z[l[i]||i]);Sa(e,!1),u||(n=s.size=fa(e,o.size),u=fa(e,o.minSize)||1,i=fa(e,o.maxSize)||1e5,0<n&&(n=d(a(n,i),u)),s.autoResize=o.autoResize,s.isClosed=!1,s.isSliding=!1,s.isResizing=!1,s.isHidden=!1,s.pins||(s.pins=[])),s.tagName=p[0].tagName,s.edge=e,s.noRoom=!1,s.isVisible=!0,ob(e),"horz"===c?h.height=O(p,n):"vert"===c&&(h.width=Q(p,n)),p.css(h),"horz"!=c&&ia(e,!0),q.initialized&&(Pa(e),nb(e)),o.initClosed&&o.closable&&!o.initHidden?ja(e,!0,!0):o.initHidden||o.initClosed?Ta(e):s.noRoom||p.css("display","block"),p.css("visibility","visible"),o.showOverflowOnHover&&p.hover(x,X),q.initialized&&jb(e)}else y[e]=!1}},jb=function(e){var t=y[e],n=q[e],i=r[e];t&&(t.data("layout")&&Ba(e,t.data("layout")),n.isVisible&&(q.initialized?oa():pa(e),i.triggerEventsOnLoad?C("onresize_end",e):db(e,!0)),i.initChildren&&i.children&&Qa(e))},ob=function(e){e=e?e.split(","):k.borderPanes,b.each(e,function(e,t){var n=y[t],i=F[t],r=q[t],o=k[t].side,a={};if(n){switch(t){case"north":a.top=v.inset.top,a.left=v.inset.left,a.right=v.inset.right;break;case"south":a.bottom=v.inset.bottom,a.left=v.inset.left,a.right=v.inset.right;break;case"west":a.left=v.inset.left;break;case"east":a.right=v.inset.right}n.css(a),i&&r.isClosed?i.css(o,v.inset[o]):i&&!r.isHidden&&i.css(o,v.inset[o]+ga(t))}})},Pa=function(e){e=e?e.split(","):k.borderPanes,b.each(e,function(e,t){var n=y[t];if(F[t]=!1,P[t]=!1,n){var i=r[t],o=(n=q[t],"#"===i.paneSelector.substr(0,1)?i.paneSelector.substr(1):""),a=i.resizerClass,s=i.togglerClass,l="-"+t,c=(d=z[t]).resizer=F[t]=b("<div></div>"),d=d.toggler=!!i.closable&&(P[t]=b("<div></div>"));!n.isVisible&&i.slidable&&c.attr("title",i.tips.Slide).css("cursor",i.sliderCursor),c.attr("id",o?o+"-resizer":"").data({parentLayout:z,layoutPane:z[t],layoutEdge:t,layoutRole:"resizer"}).css(k.resizers.cssReq).css("zIndex",r.zIndexes.resizer_normal).css(i.applyDemoStyles?k.resizers.cssDemo:{}).addClass(a+" "+a+l).hover(Oa,da).hover(fb,gb).appendTo(u),i.resizerDblClickToggle&&c.bind("dblclick."+K,na),d&&(d.attr("id",o?o+"-toggler":"").data({parentLayout:z,layoutPane:z[t],layoutEdge:t,layoutRole:"toggler"}).css(k.togglers.cssReq).css(i.applyDemoStyles?k.togglers.cssDemo:{}).addClass(s+" "+s+l).hover(Oa,da).bind("mouseenter",fb).appendTo(c),i.togglerContent_open&&b("<span>"+i.togglerContent_open+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",t).addClass("content content-open").css("display","none").appendTo(d),i.togglerContent_closed&&b("<span>"+i.togglerContent_closed+"</span>").data({layoutEdge:t,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(d),pb(t));i=t;var h=b.layout.plugins.draggable;i=i?i.split(","):k.borderPanes;b.each(i,function(e,t){var n=r[t];if(!h||!y[t]||!n.resizable)return n.resizable=!1,!0;var i,o,a=q[t],s=r.zIndexes,l=k[t],c="horz"==l.dir?"top":"left",d=F[t],f=n.resizerClass,m=0,g=f+"-drag",v=f+"-"+t+"-drag",A=f+"-dragging",x=f+"-"+t+"-dragging",_=f+"-dragging-limit",w=f+"-"+t+"-dragging-limit",E=!1;a.isClosed||d.attr("title",n.tips.Resize).css("cursor",n.resizerCursor),d.draggable({containment:u[0],axis:"horz"==l.dir?"y":"x",delay:0,distance:1,grid:n.resizingGrid,helper:"clone",opacity:n.resizerDragOpacity,addClasses:!1,zIndex:s.resizer_drag,start:function(e,s){if(n=r[t],a=q[t],o=n.livePaneResizing,!1===C("ondrag_start",t))return!1;a.isResizing=!0,q.paneResizing=t,M.clear(t+"_closeSlider"),Y(t),i=a.resizerPosition,m=s.position[c],d.addClass(g+" "+v),E=!1,b("body").disableSelection(),va(t,{resizing:!0})},drag:function(e,r){E||(r.helper.addClass(A+" "+x).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),E=!0,a.isSliding&&y[t].css("zIndex",s.pane_sliding));var l=0;r.position[c]<i.min?(r.position[c]=i.min,l=-1):r.position[c]>i.max&&(r.position[c]=i.max,l=1),l?(r.helper.addClass(_+" "+w),window.defaultStatus=0<l&&t.match(/(north|west)/)||0>l&&t.match(/(south|east)/)?n.tips.maxSizeWarning:n.tips.minSizeWarning):(r.helper.removeClass(_+" "+w),window.defaultStatus=""),o&&Math.abs(r.position[c]-m)>=n.liveResizingTolerance&&(m=r.position[c],p(e,r,t))},stop:function(e,n){b("body").enableSelection(),window.defaultStatus="",d.removeClass(g+" "+v),a.isResizing=!1,q.paneResizing=!1,p(e,n,t,!0)}})});var p=function(e,t,n,i){var o,a=t.position,s=k[n];switch(e=r[n],t=q[n],n){case"north":o=a.top;break;case"west":o=a.left;break;case"south":o=v.layoutHeight-a.top-e.spacing_open;break;case"east":o=v.layoutWidth-a.left-e.spacing_open}o-=v.inset[s.side],i?(!1!==C("ondrag_end",n)&&Ca(n,o,!1,!0),za(!0),t.isSliding&&va(n,{resizing:!0})):Math.abs(o-t.size)<e.liveResizingTolerance||(Ca(n,o,!1,!0),ea.each(qb))};n.isVisible?Ua(t):(Da(t),ma(t,!0))}}),qa()},Sa=function(e,t){if(H()){var n,i=r[e],o=i.contentSelector,a=z[e],s=y[e];o&&(n=a.content=U[e]=i.findNestedContent?s.find(o).eq(0):s.children(o).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",D(n,"height")),n.css(k.content.cssReq),i.applyDemoStyles&&(n.css(k.content.cssDemo),s.css(k.content.cssDemoPane)),s.css("overflowX").match(/(scroll|auto)/)&&s.css("overflow","hidden"),q[e].content={},!1!==t&&pa(e)):a.content=U[e]=!1}},qb=function(){var e=b(this),t=e.data("layoutMask");"IFRAME"==(t=q[t]).tagName&&t.isVisible&&e.css({top:t.offsetTop,left:t.offsetLeft,width:t.outerWidth,height:t.outerHeight})},va=function(e,t){var n,i,o=k[e],a=["center"],s=r.zIndexes,l=b.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:q[e].isSliding},t);l.resizing&&a.push(e),l.sliding&&a.push(k.oppositeEdge[e]),"horz"===o.dir&&(a.push("west"),a.push("east")),b.each(a,function(e,t){if(i=q[t],n=r[t],i.isVisible&&(n.maskObjects||!l.objectsOnly&&n.maskContents)){for(var o,a=b([]),c=0,d=ea.length;c<d;c++)(o=ea.eq(c)).data("layoutMask")===t&&(a=a.add(o));if(!a.length){a=y[t],o=q[t];c=r[t],d=r.zIndexes;var h,p,f,m,g,v=b([]);if(c.maskContents||c.maskObjects)for(g=0;g<(c.maskObjects?2:1);g++)h=c.maskObjects&&0==g,p=document.createElement(h?"iframe":"div"),f=b(p).data("layoutMask",t),p.className="ui-layout-mask ui-layout-mask-"+t,(m=p.style).display="block",m.position="absolute",m.background="#FFF",h&&(p.frameborder=0,p.src="about:blank",m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==o.tagName?(m.zIndex=d.pane_normal+1,u.append(p)):(f.addClass("ui-layout-mask-inside-pane"),m.zIndex=c.maskZindex||d.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",a.append(p)),v=v.add(p),ea=ea.add(p);a=v}a.each(function(){qb.call(this),this.style.zIndex=i.isSliding?s.pane_sliding+1:s.pane_normal+1,this.style.display="block"})}})},za=function(e){if(e||!q.paneResizing)ea.hide();else if(!e&&!b.isEmptyObject(q.panesSliding)){e=ea.length-1;for(var t,n;0<=e;e--)t=(n=ea.eq(e)).data("layoutMask"),r[t].maskObjects||n.hide()}},Ra=function(e,t,n,i){if(H()){e=A.call(this,e);var o=y[e],a=U[e],s=F[e],l=P[e];o&&b.isEmptyObject(o.data())&&(o=!1),a&&b.isEmptyObject(a.data())&&(a=!1),s&&b.isEmptyObject(s.data())&&(s=!1),l&&b.isEmptyObject(l.data())&&(l=!1),o&&o.stop(!0,!0);var c=r[e],u=ba[e],d=b.isPlainObject(u)&&!b.isEmptyObject(u);i=void 0!==i?i:c.destroyChildren,d&&i&&(b.each(u,function(e,t){t.destroyed||t.destroy(!0),t.destroyed&&delete u[e]}),b.isEmptyObject(u)&&(u=ba[e]=null,d=!1)),o&&t&&!d?o.remove():o&&o[0]&&(t=[t=c.paneClass,t+"-open",t+"-closed",t+"-sliding",i=t+"-"+e,i+"-open",i+"-closed",i+"-sliding"],b.merge(t,Na(o,!0)),o.removeClass(t.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+K),d&&a?(a.width(a.width()),b.each(u,function(e,t){t.resizeAll()})):a&&a.css(a.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),o.data("layout")||o.css(o.data("layoutCSS")).removeData("layoutCSS")),l&&l.remove(),s&&s.remove(),z[e]=y[e]=U[e]=F[e]=P[e]=!1,n||oa()}},Ea=function(e){var t=y[e],n=t[0].style;r[e].useOffscreenClose?(t.data(k.offscreenReset)||t.data(k.offscreenReset,{left:n.left,right:n.right}),t.css(k.offscreenCSS)):t.hide().removeData(k.offscreenReset)},rb=function(e){var t=y[e];e=r[e];var n=k.offscreenCSS,i=t.data(k.offscreenReset),o=t[0].style;t.show().removeData(k.offscreenReset),e.useOffscreenClose&&i&&(o.left==n.left&&(o.left=i.left),o.right==n.right&&(o.right=i.right))},Ta=function(e,t){if(H()){var n=A.call(this,e),i=r[n],o=q[n],a=F[n];y[n]&&!o.isHidden&&(!q.initialized||!1!==C("onhide_start",n))&&(o.isSliding=!1,delete q.panesSliding[n],a&&a.hide(),!q.initialized||o.isClosed?(o.isClosed=!0,o.isHidden=!0,o.isVisible=!1,q.initialized||Ea(n),ia("horz"===k[n].dir?"":"center"),(q.initialized||i.triggerEventsOnLoad)&&C("onhide_end",n)):(o.isHiding=!0,ja(n,!1,t)))}},Fa=function(e,t,n,i){if(H()){e=A.call(this,e);var r=q[e];y[e]&&r.isHidden&&!1!==C("onshow_start",e)&&(r.isShowing=!0,r.isSliding=!1,delete q.panesSliding[e],!1===t?ja(e,!0):ra(e,!1,n,i))}},na=function(e,t){if(H()){var n=Ma(e),i=A.call(this,e),r=q[i];n&&n.stopImmediatePropagation(),r.isHidden?Fa(i):r.isClosed?ra(i,!!t):ja(i)}},ja=function(e,t,n,i){function o(){f.isMoving=!1,ma(a,!0);var e=k.oppositeEdge[a];q[e].noRoom&&(Y(e),ha(e)),i||!q.initialized&&!p.triggerEventsOnLoad||(c||C("onclose_end",a),c&&C("onshow_end",a),d&&C("onhide_end",a))}var a=A.call(this,e);if(!q.initialized&&y[a]){var s=q[e=a];Ea(e),s.isClosed=!0,s.isVisible=!1,Da(e)}else if(H()){var l,c,d,h=y[a],p=r[a],f=q[a];u.queue(function(e){if(!h||!p.closable&&!f.isShowing&&!f.isHiding||!t&&f.isClosed&&!f.isShowing)return e();var i=!f.isShowing&&!1===C("onclose_start",a);if(c=f.isShowing,d=f.isHiding,delete f.isShowing,delete f.isHiding,i)return e();l=!n&&!f.isClosed&&"none"!=p.fxName_close,f.isMoving=!0,f.isClosed=!0,f.isVisible=!1,d?f.isHidden=!0:c&&(f.isHidden=!1),f.isSliding?wa(a,!1):ia("horz"===k[a].dir?"":"center",!1),Da(a),l?(Ga(a,!0),h.hide(p.fxName_close,p.fxSettings_close,p.fxSpeed_close,function(){Ga(a,!1),f.isClosed&&o(),e()})):(Ea(a),o(),e())})}},Da=function(e){if(F[e]){var t=F[e],n=P[e],i=r[e],o=k[e].side,a=i.resizerClass,s=i.togglerClass,l="-"+e;t.css(o,v.inset[o]).removeClass(a+"-open "+a+l+"-open").removeClass(a+"-sliding "+a+l+"-sliding").addClass(a+"-closed "+a+l+"-closed"),i.resizable&&b.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(s+"-open "+s+l+"-open").addClass(s+"-closed "+s+l+"-closed").attr("title",i.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),Va(e,!1),q.initialized&&qa()}},ra=function(e,t,n,i){function o(){h.isMoving=!1,eb(l),h.isSliding||ia("vert"==k[l].dir?"center":"",!1),Ua(l)}if(H()){var a,s,l=A.call(this,e),c=y[l],d=r[l],h=q[l];u.queue(function(e){if(!c||!d.resizable&&!d.closable&&!h.isShowing||h.isVisible&&!h.isSliding)return e();if(h.isHidden&&!h.isShowing)e(),Fa(l,!0);else{h.autoResize&&h.size!=d.size?ka(l,d.size,!0,!0,!0):Y(l,t);var r=C("onopen_start",l);if("abort"===r)return e();if("NC"!==r&&Y(l,t),h.minSize>h.maxSize)return Va(l,!1),!i&&d.tips.noRoomToOpen&&alert(d.tips.noRoomToOpen),e();t?wa(l,!0):h.isSliding?wa(l,!1):d.slidable&&ma(l,!1),h.noRoom=!1,ha(l),s=h.isShowing,delete h.isShowing,a=!n&&h.isClosed&&"none"!=d.fxName_open,h.isMoving=!0,h.isVisible=!0,h.isClosed=!1,s&&(h.isHidden=!1),a?(Ga(l,!0),c.show(d.fxName_open,d.fxSettings_open,d.fxSpeed_open,function(){Ga(l,!1),h.isVisible&&o(),e()})):(rb(l),o(),e())}})}},Ua=function(e,t){var n=y[e],i=F[e],o=P[e],a=r[e],s=q[e],l=k[e].side,c=a.resizerClass,u=a.togglerClass,d="-"+e;i.css(l,v.inset[l]+ga(e)).removeClass(c+"-closed "+c+d+"-closed").addClass(c+"-open "+c+d+"-open"),s.isSliding?i.addClass(c+"-sliding "+c+d+"-sliding"):i.removeClass(c+"-sliding "+c+d+"-sliding"),da(0,i),a.resizable&&b.layout.plugins.draggable?i.draggable("enable").css("cursor",a.resizerCursor).attr("title",a.tips.Resize):s.isSliding||i.css("cursor","default"),o&&(o.removeClass(u+"-closed "+u+d+"-closed").addClass(u+"-open "+u+d+"-open").attr("title",a.tips.Close),da(0,o),o.children(".content-closed").hide(),o.children(".content-open").css("display","block")),Va(e,!s.isSliding),b.extend(s,R(n)),q.initialized&&(qa(),pa(e,!0)),!t&&(q.initialized||a.triggerEventsOnLoad)&&n.is(":visible")&&(C("onopen_end",e),s.isShowing&&C("onshow_end",e),q.initialized&&C("onresize_end",e))},sb=function(e){function t(){o.isClosed?o.isMoving||ra(i,!0):wa(i,!0)}if(H()){var n=Ma(e),i=A.call(this,e),o=q[i];e=r[i].slideDelay_open,n&&n.stopImmediatePropagation(),o.isClosed&&n&&"mouseenter"===n.type&&0<e?M.set(i+"_openSlider",t,e):t()}},Wa=function(e){function t(){o.isClosed?wa(i,!1):o.isMoving||ja(i)}if(H()){var n=Ma(e),i=A.call(this,e);e=r[i];var o=q[i],a=o.isMoving?1e3:300;!o.isClosed&&!o.isResizing&&("click"===e.slideTrigger_close?t():e.preventQuickSlideClose&&o.isMoving||e.preventPrematureSlideClose&&n&&b.layout.isMouseOverElem(n,y[i])||(n?M.set(i+"_closeSlider",t,d(e.slideDelay_close,a)):t()))}},Ga=function(e,t){var n=y[e],i=q[e],o=r[e],a=r.zIndexes;t?(va(e,{animation:!0,objectsOnly:!0}),n.css({zIndex:a.pane_animate}),"south"==e?n.css({top:v.inset.top+v.innerHeight-n.outerHeight()}):"east"==e&&n.css({left:v.inset.left+v.innerWidth-n.outerWidth()})):(za(),n.css({zIndex:i.isSliding?a.pane_sliding:a.pane_normal}),"south"==e?n.css({top:"auto"}):"east"==e&&!n.css("left").match(/\-99999/)&&n.css({left:"auto"}),G.msie&&o.fxOpacityFix&&"slide"!=o.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},ma=function(e,t){var n=r[e],i=F[e],o=n.slideTrigger_open.toLowerCase();!i||t&&!n.slidable||(o.match(/mouseover/)?o=n.slideTrigger_open="mouseenter":o.match(/(click|dblclick|mouseenter)/)||(o=n.slideTrigger_open="click"),n.resizerDblClickToggle&&o.match(/click/)&&i[t?"unbind":"bind"]("dblclick."+K,na),i[t?"bind":"unbind"](o+"."+K,sb).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},wa=function(e,t){function n(t){M.clear(e+"_closeSlider"),t.stopPropagation()}var i=r[e],o=q[e],a=r.zIndexes,s=i.slideTrigger_close.toLowerCase(),l=t?"bind":"unbind",c=y[e],u=F[e];M.clear(e+"_closeSlider"),t?(o.isSliding=!0,q.panesSliding[e]=!0,ma(e,!1)):(o.isSliding=!1,delete q.panesSliding[e]),c.css("zIndex",t?a.pane_sliding:a.pane_normal),u.css("zIndex",t?a.pane_sliding+2:a.resizer_normal),s.match(/(click|mouseleave)/)||(s=i.slideTrigger_close="mouseleave"),u[l](s,Wa),"mouseleave"===s&&(c[l]("mouseleave."+K,Wa),u[l]("mouseenter."+K,n),c[l]("mouseenter."+K,n)),t?"click"===s&&!i.resizable&&(u.css("cursor",t?i.sliderCursor:"default"),u.attr("title",t?i.tips.Close:"")):M.clear(e+"_closeSlider")},ha=function(e,t,n,i){t=r[e];var o=q[e],a=k[e],s=y[e],l=F[e],c="vert"===a.dir,u=!1;("center"===e||c&&o.noVerticalRoom)&&((u=0<=o.maxHeight)&&o.noRoom?(rb(e),l&&l.show(),o.isVisible=!0,o.noRoom=!1,c&&(o.noVerticalRoom=!1),eb(e)):!u&&!o.noRoom&&(Ea(e),l&&l.hide(),o.isVisible=!1,o.noRoom=!0)),"center"!==e&&(o.minSize<=o.maxSize?(o.size>o.maxSize?ka(e,o.maxSize,n,!0,i):o.size<o.minSize?ka(e,o.minSize,n,!0,i):l&&o.isVisible&&s.is(":visible")&&(n=o.size+v.inset[a.side],b.layout.cssNum(l,a.side)!=n&&l.css(a.side,n)),o.noRoom&&(o.wasOpen&&t.closable?t.autoReopen?ra(e,!1,!0,!0):o.noRoom=!1:Fa(e,o.wasOpen,!0,!0))):o.noRoom||(o.noRoom=!0,o.wasOpen=!o.isClosed&&!o.isSliding,o.isClosed||(t.closable?ja(e,!0,!0):Ta(e,!0))))},Ca=function(e,t,n,i,o){if(H()){e=A.call(this,e);var a=r[e],s=q[e];o=o||a.livePaneResizing&&!s.isResizing,s.autoResize=!1,ka(e,t,n,i,o)}},ka=function(e,t,n,i,o){function s(){for(var e="width"===_?m.outerWidth():m.outerHeight(),i=(e=[{pane:h,count:1,target:t,actual:e,correct:t===e,attempt:t,cssSize:c}])[0],r={},a="Inaccurate size after resizing the "+h+"-pane.";!i.correct&&((r={pane:h,count:i.count+1,target:t}).attempt=i.actual>t?d(0,i.attempt-(i.actual-t)):d(0,i.attempt+(t-i.actual)),r.cssSize=("horz"==k[h].dir?O:Q)(y[h],r.attempt),m.css(_,r.cssSize),r.actual="width"==_?m.outerWidth():m.outerHeight(),r.correct=t===r.actual,1===e.length&&(ca(a,!1,!0),ca(i,!1,!0)),ca(r,!1,!0),!(3<e.length));)e.push(r),i=e[e.length-1];f.size=t,b.extend(f,R(m)),f.isVisible&&m.is(":visible")&&(g&&g.css(x,t+v.inset[x]),pa(h)),!n&&!w&&q.initialized&&f.isVisible&&C("onresize_end",h),n||(f.isSliding||ia("horz"==k[h].dir?"":"center",w,o),qa()),i=k.oppositeEdge[h],t<l&&q[i].noRoom&&(Y(i),ha(i,!1,n)),1<e.length&&ca(a+"\nSee the Error Console for details.",!0,!0)}if(H()){var l,c,h=A.call(this,e),p=r[h],f=q[h],m=y[h],g=F[h],x=k[h].side,_=k[h].sizeType.toLowerCase(),w=f.isResizing&&!p.triggerEventsDuringLiveResize,M=!0!==i&&p.animatePaneSizing;u.queue(function(e){if(Y(h),l=f.size,t=fa(h,t),t=d(t,fa(h,p.minSize)),(t=a(t,f.maxSize))<f.minSize)e(),ha(h,!1,n);else{if(!o&&t===l)return e();if(f.newSize=t,!n&&q.initialized&&f.isVisible&&C("onresize_start",h),c=("horz"==k[h].dir?O:Q)(y[h],t),M&&m.is(":visible")){var i=b.layout.effects.size[h]||b.layout.effects.size.all,u=(i=p.fxSettings_size.easing||i.easing,r.zIndexes),g={};g[_]=c+"px",f.isMoving=!0,m.css({zIndex:u.pane_animate}).show().animate(g,p.fxSpeed_size,i,function(){m.css({zIndex:f.isSliding?u.pane_sliding:u.pane_normal}),f.isMoving=!1,delete f.newSize,s(),e()})}else m.css(_,c),delete f.newSize,m.is(":visible")?s():(f.size=t,b.extend(f,R(m))),e()}})}},ia=function e(t,n,i){t=(t||"east,west,center").split(","),b.each(t,function(t,o){if(y[o]){var a=r[o],s=q[o],l=y[o],c=!0,u={},h=b.layout.showInvisibly(l);if((p={top:ga("north",!0),bottom:ga("south",!0),left:ga("west",!0),right:ga("east",!0),width:0,height:0}).width=v.innerWidth-p.left-p.right,p.height=v.innerHeight-p.bottom-p.top,p.top+=v.inset.top,p.bottom+=v.inset.bottom,p.left+=v.inset.left,p.right+=v.inset.right,b.extend(s,R(l)),"center"===o){if(!i&&s.isVisible&&p.width===s.outerWidth&&p.height===s.outerHeight)return l.css(h),!0;if(b.extend(s,ya(o),{maxWidth:p.width,maxHeight:p.height}),u=p,s.newWidth=u.width,s.newHeight=u.height,u.width=Q(l,u.width),u.height=O(l,u.height),c=0<=u.width&&0<=u.height,!q.initialized&&a.minWidth>p.width){a=a.minWidth-s.outerWidth;var p=r.east.minSize||0,f=r.west.minSize||0,m=q.east.size,g=q.west.size,A=m,x=g;if(0<a&&q.east.isVisible&&m>p&&(a-=m-(A=d(m-p,m-a))),0<a&&q.west.isVisible&&g>f&&(a-=g-(x=d(g-f,g-a))),0===a)return m&&m!=p&&ka("east",A,!0,!0,i),g&&g!=f&&ka("west",x,!0,!0,i),e("center",n,i),void l.css(h)}}else{if(s.isVisible&&!s.noVerticalRoom&&b.extend(s,R(l),ya(o)),!i&&!s.noVerticalRoom&&p.height===s.outerHeight)return l.css(h),!0;u.top=p.top,u.bottom=p.bottom,s.newSize=p.height,u.height=O(l,p.height),s.maxHeight=u.height,(c=0<=s.maxHeight)||(s.noVerticalRoom=!0)}if(c?(!n&&q.initialized&&C("onresize_start",o),l.css(u),"center"!==o&&qa(o),s.noRoom&&!s.isClosed&&!s.isHidden&&ha(o),s.isVisible&&(b.extend(s,R(l)),q.initialized&&pa(o))):!s.noRoom&&s.isVisible&&ha(o),l.css(h),delete s.newSize,delete s.newWidth,delete s.newHeight,!s.isVisible)return!0;"center"===o&&(s=G.isIE6||!G.boxModel,y.north&&(s||"IFRAME"==q.north.tagName)&&y.north.css("width",Q(y.north,v.innerWidth)),y.south&&(s||"IFRAME"==q.south.tagName)&&y.south.css("width",Q(y.south,v.innerWidth))),!n&&q.initialized&&C("onresize_end",o)}})},oa=function(e){if(A(e),u.is(":visible"))if(q.initialized){if(!0===e&&b.isPlainObject(r.outset)&&u.css(r.outset),b.extend(v,R(u,r.inset)),v.outerHeight){if(!0===e&&ob(),!1===C("onresizeall_start"))return!1;var t,n;b.each(["south","north","east","west"],function(e,i){y[i]&&(t=r[i],(n=q[i]).autoResize&&n.size!=t.size?ka(i,t.size,!0,!0,!0):(Y(i),ha(i,!1,!0,!0)))}),ia("",!0,!0),qa(),b.each(k.allPanes,function(e,t){y[t]&&q[t].isVisible&&C("onresize_end",t)}),C("onresizeall_end")}}else Aa()},db=function(e,t){var n=A.call(this,e);r[n].resizeChildren&&(t||Ba(n),n=ba[n],b.isPlainObject(n)&&b.each(n,function(e,t){t.destroyed||t.resizeAll()}))},pa=function(e,t){if(H()){var n=(n=A.call(this,e))?n.split(","):k.allPanes;b.each(n,function(e,n){function i(e){return d(c.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function o(){var e=r[n].contentIgnoreSelector,t=(e=s.nextAll().not(".ui-layout-mask").not(e||":lt(0)")).filter(":visible"),o=t.filter(":last");(u={top:s[0].offsetTop,height:s.outerHeight(),numFooters:e.length,hiddenFooters:e.length-t.length,spaceBelow:0}).spaceAbove=u.top,u.bottom=u.top+u.height,u.spaceBelow=o.length?o[0].offsetTop+o.outerHeight()-u.bottom+i(o):i(s)}var a=y[n],s=U[n],l=r[n],c=q[n],u=c.content;if(!a||!s||!a.is(":visible"))return!0;if((s.length||(Sa(n,!1),s))&&!1!==C("onsizecontent_start",n)){if((!c.isMoving&&!c.isResizing||l.liveContentResizing||t||void 0==u.top)&&(o(),0<u.hiddenFooters&&"hidden"===a.css("overflow")&&(a.css("overflow","visible"),o(),a.css("overflow","hidden"))),a=c.innerHeight-(u.spaceAbove-c.css.paddingTop)-(u.spaceBelow-c.css.paddingBottom),!s.is(":visible")||u.height!=a){var h=s;l=h;f(h)?l=y[h]:h.jquery||(l=b(h)),h=O(l,a),l.css({height:h,visibility:"visible"}),0<h&&0<l.innerWidth()?l.data("autoHidden")&&(l.show().data("autoHidden",!1),G.mozilla||l.css(k.hidden).css(k.visible)):l.data("autoHidden")||l.hide().data("autoHidden",!0),u.height=a}q.initialized&&C("onsizecontent_end",n)}})}},qa=function(e){e=(e=A.call(this,e))?e.split(","):k.borderPanes,b.each(e,function(e,t){var n,i=r[t],o=q[t],a=y[t],s=F[t],l=P[t];if(a&&s){var u,d=k[t].dir,h=i["spacing"+(m=o.isClosed?"_closed":"_open")],p=i["togglerAlign"+m],m=i["togglerLength"+m];if(0===h)s.hide();else{if(!o.noRoom&&!o.isHidden&&s.show(),"horz"===d?(u=v.innerWidth,o.resizerLength=u,a=b.layout.cssNum(a,"left"),s.css({width:Q(s,u),height:O(s,h),left:-9999<a?a:v.inset.left})):(u=a.outerHeight(),o.resizerLength=u,s.css({height:O(s,u),width:Q(s,h),top:v.inset.top+ga("north",!0)})),da(i,s),l){if(0===m||o.isSliding&&i.hideTogglerOnSlide)return void l.hide();if(l.show(),!(0<m)||"100%"===m||m>u)m=u,p=0;else if(f(p))switch(p){case"top":case"left":p=0;break;case"bottom":case"right":p=u-m;break;default:p=c((u-m)/2)}else a=parseInt(p,10),p=0<=p?a:u-m+a;if("horz"===d){var g=Q(l,m);l.css({width:g,height:O(l,h),left:p,top:0}),l.children(".content").each(function(){(n=b(this)).css("marginLeft",c((g-n.outerWidth())/2))})}else{var A=O(l,m);l.css({height:A,width:Q(l,h),top:p,left:0}),l.children(".content").each(function(){(n=b(this)).css("marginTop",c((A-n.outerHeight())/2))})}da(0,l)}q.initialized||!i.initHidden&&!o.isHidden||(s.hide(),l&&l.hide())}}})},pb=function(e){if(H()){var t=A.call(this,e);e=P[t];var n=r[t];e&&(n.closable=!0,e.bind("click."+K,function(e){e.stopPropagation(),na(t)}).css("visibility","visible").css("cursor","pointer").attr("title",q[t].isClosed?n.tips.Open:n.tips.Close).show())}},Va=function(e,t){b.layout.plugins.buttons&&b.each(q[e].pins,function(n,i){b.layout.buttons.setPinState(z,b(i),e,t)})},u=b(this).eq(0);if(!u.length)return ca(r.errors.containerMissing);if(u.data("layoutContainer")&&u.data("layout"))return u.data("layout");var y={},U={},F={},P={},ea=b([]),v=q.container,K=q.id,z={options:r,state:q,container:u,panes:y,contents:U,resizers:F,togglers:P,hide:Ta,show:Fa,toggle:na,open:ra,close:ja,slideOpen:sb,slideClose:Wa,slideToggle:function(e){e=A.call(this,e),na(e,!0)},setSizeLimits:Y,_sizePane:ka,sizePane:Ca,sizeContent:pa,swapPanes:function(e,t){function n(e){var t=y[e],n=U[e];return!!t&&{pane:e,P:!!t&&t[0],C:!!n&&n[0],state:b.extend(!0,{},q[e]),options:b.extend(!0,{},r[e])}}function i(e,t){if(e){var n=e.P,i=e.C,o=e.pane,a=k[t],s=b.extend(!0,{},q[t]),c=r[t],u={resizerCursor:c.resizerCursor};b.each(["fxName","fxSpeed","fxSettings"],function(e,t){u[t+"_open"]=c[t+"_open"],u[t+"_close"]=c[t+"_close"],u[t+"_size"]=c[t+"_size"]}),y[t]=b(n).data({layoutPane:z[t],layoutEdge:t}).css(k.hidden).css(a.cssReq),U[t]=!!i&&b(i),r[t]=b.extend(!0,{},e.options,u),q[t]=b.extend(!0,{},e.state),n.className=n.className.replace(RegExp(c.paneClass+"-"+o,"g"),c.paneClass+"-"+t),Pa(t),a.dir!=k[o].dir?(n=l[t]||0,Y(t),n=d(n,q[t].minSize),Ca(t,n,!0,!0)):F[t].css(a.side,v.inset[a.side]+(q[t].isVisible?ga(t):0)),e.state.isVisible&&!s.isVisible?Ua(t,!0):(Da(t),ma(t,!0)),e=null}}if(H()){var o=A.call(this,e);if(q[o].edge=t,q[t].edge=o,!1===C("onswap_start",o)||!1===C("onswap_start",t))q[o].edge=o,q[t].edge=t;else{var a=n(o),s=n(t),l={};l[o]=a?a.state.size:0,l[t]=s?s.state.size:0,y[o]=!1,y[t]=!1,q[o]={},q[t]={},P[o]&&P[o].remove(),P[t]&&P[t].remove(),F[o]&&F[o].remove(),F[t]&&F[t].remove(),F[o]=F[t]=P[o]=P[t]=!1,i(a,t),i(s,o),a=s=l=null,y[o]&&y[o].css(k.visible),y[t]&&y[t].css(k.visible),oa(),C("onswap_end",o),C("onswap_end",t)}}},showMasks:va,hideMasks:za,initContent:Sa,addPane:ib,removePane:Ra,createChildren:Qa,refreshChildren:Ba,enableClosable:pb,disableClosable:function(e,t){if(H()){var n=A.call(this,e),i=P[n];i&&(r[n].closable=!1,q[n].isClosed&&ra(n,!1,!0),i.unbind("."+K).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(e){if(H()){e=A.call(this,e);var t=F[e];t&&t.data("draggable")&&(r[e].slidable=!0,q[e].isClosed&&ma(e,!0))}},disableSlidable:function(e){if(H()){e=A.call(this,e);var t=F[e];t&&(r[e].slidable=!1,q[e].isSliding?ja(e,!1,!0):(ma(e,!1),t.css("cursor","default").attr("title",""),da(null,t[0])))}},enableResizable:function(e){if(H()){e=A.call(this,e);var t=F[e],n=r[e];t&&t.data("draggable")&&(n.resizable=!0,t.draggable("enable"),q[e].isClosed||t.css("cursor",n.resizerCursor).attr("title",n.tips.Resize))}},disableResizable:function(e){if(H()){e=A.call(this,e);var t=F[e];t&&t.data("draggable")&&(r[e].resizable=!1,t.draggable("disable").css("cursor","default").attr("title",""),da(null,t[0]))}},allowOverflow:x,resetOverflow:X,destroy:function(e,t){for(var n in b(window).unbind("."+K),b(document).unbind("."+K),"object"===(void 0===e?"undefined":(0,_typeof3.default)(e))?A(e):t=e,u.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(r.containerClass).unbind("."+K),ea.remove(),b.each(k.allPanes,function(e,n){Ra(n,!1,!0,t)}),u.data("layoutCSS")&&!u.data("layoutRole")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),"BODY"===v.tagName&&(u=b("html")).data("layoutCSS")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),j(z,b.layout.onDestroy),mb(),z)n.match(/^(container|options)$/)||delete z[n];return z.destroyed=!0,z},initPanes:H,resizeAll:oa,runCallbacks:C,hasParentLayout:!1,children:ba,north:!1,south:!1,west:!1,east:!1,center:!1},Xa,V,Ya,N,Ha,la,sa,W;if(h=b.layout.transformData(h,!0),h=b.layout.backwardCompatibility.renameAllOptions(h),!b.isEmptyObject(h.panes)){for(V=b.layout.optionsMap.noDefault,la=0,sa=V.length;la<sa;la++)N=V[la],delete h.panes[N];for(V=b.layout.optionsMap.layout,la=0,sa=V.length;la<sa;la++)N=V[la],delete h.panes[N]}V=b.layout.optionsMap.layout;var Bb=b.layout.config.optionRootKeys;for(N in h)Ha=h[N],0>b.inArray(N,Bb)&&0>b.inArray(N,V)&&(h.panes[N]||(h.panes[N]=b.isPlainObject(Ha)?b.extend(!0,{},Ha):Ha),delete h[N]);b.extend(!0,r,h),b.each(k.allPanes,function(e,t){if(k[t]=b.extend(!0,{},k.panes,k[t]),Ya=r.panes,W=r[t],"center"===t)for(V=b.layout.optionsMap.center,e=0,sa=V.length;e<sa;e++)N=V[e],h.center[N]||!h.panes[N]&&W[N]||(W[N]=Ya[N]);else{W=r[t]=b.extend(!0,{},Ya,W);var n=r[t],i=r.panes;n.fxSettings||(n.fxSettings={}),i.fxSettings||(i.fxSettings={}),b.each(["_open","_close","_size"],function(e,o){var a="fxName"+o,s="fxSpeed"+o,l="fxSettings"+o,c=n[a]=n[a]||i[a]||n.fxName||i.fxName||"none",u=b.effects&&(b.effects[c]||b.effects.effect&&b.effects.effect[c]);"none"!==c&&r.effects[c]&&u||(c=n[a]="none"),a=(c=r.effects[c]||{}).all||null,c=c[t]||null,n[s]=n[s]||i[s]||n.fxSpeed||i.fxSpeed||null,n[l]=b.extend(!0,{},a,c,i.fxSettings,n.fxSettings,i[l],n[l])}),delete n.fxName,delete n.fxSpeed,delete n.fxSettings,W.resizerClass||(W.resizerClass="ui-layout-resizer"),W.togglerClass||(W.togglerClass="ui-layout-toggler")}W.paneClass||(W.paneClass="ui-layout-pane")});var Ia=h.zIndex,xa=r.zIndexes;0<Ia&&(xa.pane_normal=Ia,xa.content_mask=d(Ia+1,xa.content_mask),xa.resizer_normal=d(Ia+2,xa.resizer_normal)),delete r.panes;var Cb=r,tb=q;if(tb.creatingLayout=!0,j(z,b.layout.onCreate),!1===C("onload_start"))Xa="cancel";else{var Za=u[0],$=b("html"),ub=v.tagName=Za.tagName,vb=v.id=Za.id,wb=v.className=Za.className,L=r,Ja=L.name,$a={},Ka=u.data("parentLayout"),La=u.data("layoutEdge"),ab=Ka&&La,ta=b.layout.cssNum,bb,aa;v.selector=u.selector.split(".slice")[0],v.ref=(L.name?L.name+" layout / ":"")+ub+(vb?"#"+vb:wb?".["+wb+"]":""),v.isBody="BODY"===ub,!ab&&!v.isBody&&(bb=u.closest("."+b.layout.defaults.panes.paneClass),Ka=bb.data("parentLayout"),La=bb.data("layoutEdge"),ab=Ka&&La),u.data({layout:z,layoutContainer:K}).addClass(L.containerClass);var xb={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(Ja in xb)u.bind("layout"+Ja.toLowerCase()+"."+K,z[xb[Ja]||Ja]);ab&&(z.hasParentLayout=!0,Ka.refreshChildren(La,z)),u.data("layoutCSS")||(v.isBody?(u.data("layoutCSS",b.extend(D(u,"position,margin,padding,border"),{height:u.css("height"),overflow:u.css("overflow"),overflowX:u.css("overflowX"),overflowY:u.css("overflowY")})),$.data("layoutCSS",b.extend(D($,"padding"),{height:"auto",overflow:$.css("overflow"),overflowX:$.css("overflowX"),overflowY:$.css("overflowY")}))):u.data("layoutCSS",D(u,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if($a={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},u.css($a),L.inset&&!b.isPlainObject(L.inset)&&(aa=parseInt(L.inset,10)||0,L.inset={top:aa,bottom:aa,left:aa,right:aa}),v.isBody)L.outset?b.isPlainObject(L.outset)||(aa=parseInt(L.outset,10)||0,L.outset={top:aa,bottom:aa,left:aa,right:aa}):L.outset={top:ta($,"paddingTop"),bottom:ta($,"paddingBottom"),left:ta($,"paddingLeft"),right:ta($,"paddingRight")},$.css($a).css({height:"100%",border:"none",padding:0,margin:0}),G.isIE6?(u.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),L.inset||(L.inset=R(u).inset)):(u.css({width:"auto",height:"auto",margin:0,position:"absolute"}),u.css(L.outset)),b.extend(v,R(u,L.inset));else{var yb=u.css("position");(!yb||!yb.match(/(fixed|absolute|relative)/))&&u.css("position","relative"),u.is(":visible")&&(b.extend(v,R(u,L.inset)),1>v.innerHeight&&ca(L.errors.noContainerHeight.replace(/CONTAINER/,v.ref)))}ta(u,"minWidth")&&u.parent().css("overflowX","auto"),ta(u,"minHeight")&&u.parent().css("overflowY","auto")}catch(e){}nb(),b(window).bind("unload."+K,mb),j(z,b.layout.onLoad),Cb.initPanes&&Aa(),delete tb.creatingLayout,Xa=q.initialized}return"cancel"===Xa?null:z}}(jQuery),function(e){e.ui||(e.ui={}),e.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(t){for(var n,i,r=0,o=(n=(n=document.cookie)?n.split(";"):[]).length;r<o;r++)if((i=e.trim(n[r]).split("="))[0]==t)return decodeURIComponent(i[1]);return null},write:function(t,n,i){var r="",o="",a=!1,s=(i=i||{}).expires||null,l=e.type(s);"date"===l?o=s:"string"===l&&0<s&&(s=parseInt(s,10),l="number"),"number"===l&&(o=new Date,0<s?o.setDate(o.getDate()+s):(o.setFullYear(1970),a=!0)),o&&(r+=";expires="+o.toUTCString()),i.path&&(r+=";path="+i.path),i.domain&&(r+=";domain="+i.domain),i.secure&&(r+=";secure"),document.cookie=t+"="+(a?"":encodeURIComponent(n))+r},clear:function(t){e.ui.cookie.write(t,"",{expires:-1})}},e.cookie||(e.cookie=function(t,n,i){var r=e.ui.cookie;if(null===n)r.clear(t);else{if(void 0===n)return r.read(t);r.write(t,n,i)}}),e.layout.plugins.stateManagement=!0,e.layout.config.optionRootKeys.push("stateManagement"),e.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},e.layout.optionsMap.layout.push("stateManagement"),e.layout.state={saveCookie:function(t,n,i){var r=t.options,o=r.stateManagement;return i=e.extend(!0,{},o.cookie,i||null),t=t.state.stateData=t.readState(n||o.stateKeys),e.ui.cookie.write(i.name||r.name||"Layout",e.layout.state.encodeJSON(t),i),e.extend(!0,{},t)},deleteCookie:function(t){t=t.options,e.ui.cookie.clear(t.stateManagement.cookie.name||t.name||"Layout")},readCookie:function(t){return t=t.options,(t=e.ui.cookie.read(t.stateManagement.cookie.name||t.name||"Layout"))?e.layout.state.decodeJSON(t):{}},loadCookie:function(t){var n=e.layout.state.readCookie(t);return n&&(t.state.stateData=e.extend(!0,{},n),t.loadState(n)),n},loadState:function(t,n,i){if(e.isPlainObject(n)&&!e.isEmptyObject(n))if(n=t.state.stateData=e.layout.transformData(n),i=e.extend({animateLoad:!1,includeChildren:t.options.stateManagement.includeChildren},i),t.state.initialized){var r,o,a,l,c,u,d=!i.animateLoad;if(e.each(e.layout.config.borderPanes,function(i,c){h=n[c],e.isPlainObject(h)&&(s=h.size,r=h.initClosed,o=h.initHidden,ar=h.autoResize,a=t.state[c],l=a.isVisible,ar&&(a.autoResize=ar),l||t._sizePane(c,s,!1,!1,!1),!0===o?t.hide(c,d):!0===r?t.close(c,!1,d):!1===r?t.open(c,!1,d):!1===o&&t.show(c,!1,d),l&&t._sizePane(c,s,!1,!1,d))}),i.includeChildren)e.each(t.children,function(t,i){(c=n[t]?n[t].children:0)&&i&&e.each(i,function(e,t){u=c[e],t&&u&&t.loadState(u)})})}else{var h=e.extend(!0,{},n);e.each(e.layout.config.allPanes,function(e,t){h[t]&&delete h[t].children}),e.extend(!0,t.options,h)}},readState:function(t,n){"string"===e.type(n)&&(n={keys:n}),n||(n={});var i,r,o,a,s,l,c=t.options.stateManagement,u=void 0!==(u=n.includeChildren)?u:c.includeChildren,d=(c=n.stateKeys||c.stateKeys,{isClosed:"initClosed",isHidden:"initHidden"}),h=t.state,p=e.layout.config.allPanes,f={};e.isArray(c)&&(c=c.join(","));for(var m=0,g=(c=c.replace(/__/g,".").split(",")).length;m<g;m++)r=(i=c[m].split("."))[0],i=i[1],0>e.inArray(r,p)||void 0!=(o=h[r][i])&&("isClosed"==i&&h[r].isSliding&&(o=!0),(f[r]||(f[r]={}))[d[i]?d[i]:i]=o);return u&&e.each(p,function(n,i){s=t.children[i],a=h.stateData[i],e.isPlainObject(s)&&!e.isEmptyObject(s)&&((l=f[i]||(f[i]={})).children||(l.children={}),e.each(s,function(t,n){n.state.initialized?l.children[t]=e.layout.state.readState(n):a&&a.children&&a.children[t]&&(l.children[t]=e.extend(!0,{},a.children[t]))}))}),f},encodeJSON:function(t){return function t(n){var i,r,o,a=[],s=0,l=e.isArray(n);for(i in n)"string"==(o=void 0===(r=n[i])?"undefined":(0,_typeof3.default)(r))?r='"'+r+'"':"object"==o&&(r=t(r)),a[s++]=(l?"":'"'+i+'":')+r;return(l?"[":"{")+a.join(",")+(l?"]":"}")}(t)},decodeJSON:function(t){try{return e.parseJSON?e.parseJSON(t):window.eval("("+t+")")||{}}catch(e){return{}}},_create:function(t){var n=e.layout.state,i=t.options.stateManagement;if(e.extend(t,{readCookie:function(){return n.readCookie(t)},deleteCookie:function(){n.deleteCookie(t)},saveCookie:function(e,i){return n.saveCookie(t,e,i)},loadCookie:function(){return n.loadCookie(t)},loadState:function(e,i){n.loadState(t,e,i)},readState:function(e){return n.readState(t,e)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),t.state.stateData={},i.autoLoad)if(e.isPlainObject(i.autoLoad))e.isEmptyObject(i.autoLoad)||t.loadState(i.autoLoad);else if(i.enabled)if(e.isFunction(i.autoLoad)){var r={};try{r=i.autoLoad(t,t.state,t.options,t.options.name||"")}catch(e){}r&&e.isPlainObject(r)&&!e.isEmptyObject(r)&&t.loadState(r)}else t.loadCookie()},_unload:function(t){var n=t.options.stateManagement;if(n.enabled&&n.autoSave)if(e.isFunction(n.autoSave))try{n.autoSave(t,t.state,t.options,t.options.name||"")}catch(e){}else t.saveCookie()}},e.layout.onCreate.push(e.layout.state._create),e.layout.onUnload.push(e.layout.state._unload),e.layout.plugins.buttons=!0,e.layout.defaults.autoBindCustomButtons=!1,e.layout.optionsMap.layout.push("autoBindCustomButtons"),e.layout.buttons={init:function(t){var n,i=t.options.name||"";e.each("toggle open close pin toggle-slide open-slide".split(" "),function(r,o){e.each(e.layout.config.borderPanes,function(r,a){e(".ui-layout-button-"+o+"-"+a).each(function(){(void 0==(n=e(this).data("layoutName")||e(this).attr("layoutName"))||n===i)&&t.bindButton(this,o,a)})})})},get:function(t,n,i,r){var o=e(n),a=(t=t.options).errors.addButtonError;return o.length?0>e.inArray(i,e.layout.config.borderPanes)?(e.layout.msg(a+" "+t.errors.pane+": "+i,!0),o=e("")):(n=t[i].buttonClass+"-"+r,o.addClass(n+" "+n+"-"+i).data("layoutName",t.name)):e.layout.msg(a+" "+t.errors.selector+": "+n,!0),o},bind:function(t,n,i,r){var o=e.layout.buttons;switch(i.toLowerCase()){case"toggle":o.addToggle(t,n,r);break;case"open":o.addOpen(t,n,r);break;case"close":o.addClose(t,n,r);break;case"pin":o.addPin(t,n,r);break;case"toggle-slide":o.addToggle(t,n,r,!0);break;case"open-slide":o.addOpen(t,n,r,!0)}return t},addToggle:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"toggle").click(function(e){t.toggle(i,!!r),e.stopPropagation()}),t},addOpen:function(t,n,i,r){return e.layout.buttons.get(t,n,i,"open").attr("title",t.options[i].tips.Open).click(function(e){t.open(i,!!r),e.stopPropagation()}),t},addClose:function(t,n,i){return e.layout.buttons.get(t,n,i,"close").attr("title",t.options[i].tips.Close).click(function(e){t.close(i),e.stopPropagation()}),t},addPin:function(t,n,i){var r=e.layout.buttons,o=r.get(t,n,i,"pin");if(o.length){var a=t.state[i];o.click(function(n){r.setPinState(t,e(this),i,a.isSliding||a.isClosed),a.isSliding||a.isClosed?t.open(i):t.close(i),n.stopPropagation()}),r.setPinState(t,o,i,!a.isClosed&&!a.isSliding),a.pins.push(n)}return t},setPinState:function(e,t,n,i){if(!(r=t.attr("pin"))||i!==("down"==r)){var r,o=(r=(e=e.options[n]).buttonClass+"-pin")+"-"+n;n=r+"-up "+o+"-up",r=r+"-down "+o+"-down",t.attr("pin",i?"down":"up").attr("title",i?e.tips.Unpin:e.tips.Pin).removeClass(i?n:r).addClass(i?r:n)}},syncPinBtns:function(t,n,i){e.each(t.state[n].pins,function(r,o){e.layout.buttons.setPinState(t,e(o),n,i)})},_load:function(t){var n=e.layout.buttons;e.extend(t,{bindButton:function(e,i,r){return n.bind(t,e,i,r)},addToggleBtn:function(e,i,r){return n.addToggle(t,e,i,r)},addOpenBtn:function(e,i,r){return n.addOpen(t,e,i,r)},addCloseBtn:function(e,i){return n.addClose(t,e,i)},addPinBtn:function(e,i){return n.addPin(t,e,i)}});for(var i=0;4>i;i++)t.state[e.layout.config.borderPanes[i]].pins=[];t.options.autoBindCustomButtons&&n.init(t)},_unload:function(){}},e.layout.onLoad.push(e.layout.buttons._load),e.layout.plugins.browserZoom=!0,e.layout.defaults.browserZoomCheckInterval=1e3,e.layout.optionsMap.layout.push("browserZoomCheckInterval"),e.layout.browserZoom={_init:function(t){!1!==e.layout.browserZoom.ratio()&&e.layout.browserZoom._setTimer(t)},_setTimer:function(t){if(!t.destroyed){var n=t.options,i=t.state,r=t.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout(function(){if(!t.destroyed&&n.resizeWithWindow){var r=e.layout.browserZoom.ratio();r!==i.browserZoom&&(i.browserZoom=r,t.resizeAll()),e.layout.browserZoom._setTimer(t)}},r)}},ratio:function(){function t(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}var n,i,r,o=window,a=screen,s=document,l=s.documentElement||s.body,c=e.layout.browser,u=c.version;return!(c.msie&&8<u||!c.msie)&&(a.deviceXDPI&&a.systemXDPI?t(a.deviceXDPI,a.systemXDPI):c.webkit&&(n=s.body.getBoundingClientRect)?t(n.left-n.right,s.body.offsetWidth):c.webkit&&(i=o.outerWidth)?t(i,o.innerWidth):!(!(i=a.width)||!(r=l.clientWidth))&&t(i,r))}},e.layout.onReady.push(e.layout.browserZoom._init)}(jQuery)}).call(this,__webpack_require__(1))},,function(e,t,n){"use strict";(function(e){!function(e){var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},n={duration:"fast",direction:"both"},i=/^(?:html)$/i,r=function(t){var n=e(window),r=i.test(t[0].nodeName);return{border:r?{top:0,left:0,bottom:0,right:0}:function(t,n){n=n||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var i=!(!document.defaultView||!document.defaultView.getComputedStyle),r={top:parseFloat(i?n.borderTopWidth:e.css(t,"borderTopWidth"))||0,left:parseFloat(i?n.borderLeftWidth:e.css(t,"borderLeftWidth"))||0,bottom:parseFloat(i?n.borderBottomWidth:e.css(t,"borderBottomWidth"))||0,right:parseFloat(i?n.borderRightWidth:e.css(t,"borderRightWidth"))||0};return{top:r.top,left:r.left,bottom:r.bottom,right:r.right,vertical:r.top+r.bottom,horizontal:r.left+r.right}}(t[0]),scroll:{top:(r?n:t).scrollTop(),left:(r?n:t).scrollLeft()},scrollbar:{right:r?0:t.innerWidth()-t[0].clientWidth,bottom:r?0:t.innerHeight()-t[0].clientHeight},rect:function(){var e=t[0].getBoundingClientRect();return{top:r?0:e.top,left:r?0:e.left,bottom:r?t[0].clientHeight:e.bottom,right:r?t[0].clientWidth:e.right}}()}};e.fn.extend({scrollintoview:function(o){(o=e.extend({},n,o)).direction=t["string"==typeof o.direction&&o.direction.toLowerCase()]||t.both;var a="";!0===o.direction.x&&(a="horizontal"),!0===o.direction.y&&(a=a?"both":"vertical");var s=this.eq(0),l=s.closest(":scrollable("+a+")");if(l.length>0){l=l.eq(0);var c={e:r(s),s:r(l)},u={top:c.e.rect.top-(c.s.rect.top+c.s.border.top),bottom:c.s.rect.bottom-c.s.border.bottom-c.s.scrollbar.bottom-c.e.rect.bottom,left:c.e.rect.left-(c.s.rect.left+c.s.border.left),right:c.s.rect.right-c.s.border.right-c.s.scrollbar.right-c.e.rect.right},d={};!0===o.direction.y&&(u.top<0?d.scrollTop=c.s.scroll.top+u.top:u.top>0&&u.bottom<0&&(d.scrollTop=c.s.scroll.top+Math.min(u.top,-u.bottom))),!0===o.direction.x&&(u.left<0?d.scrollLeft=c.s.scroll.left+u.left:u.left>0&&u.right<0&&(d.scrollLeft=c.s.scroll.left+Math.min(u.left,-u.right))),e.isEmptyObject(d)?e.isFunction(o.complete)&&o.complete.call(l[0]):(i.test(l[0].nodeName)&&(l=e("html,body")),l.animate(d,o.duration).eq(0).queue(function(t){e.isFunction(o.complete)&&o.complete.call(l[0]),t()}))}return this}});var o={auto:!0,scroll:!0,visible:!1,hidden:!1};e.extend(e.expr[":"],{scrollable:function(e,n,r,a){var s=t["string"==typeof r[3]&&r[3].toLowerCase()]||t.both,l=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,c={x:o[l.overflowX.toLowerCase()]||!1,y:o[l.overflowY.toLowerCase()]||!1,isRoot:i.test(e.nodeName)};if(!c.x&&!c.y&&!c.isRoot)return!1;var u={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(c.x||c.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(c.y||c.isRoot)&&this.height.scroll>this.height.client}};return s.y&&u.scrollableY()||s.x&&u.scrollableX()}})}(e)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.login=c,t.create_pool=function(){var e={},t={check_remote:function(e){i.default.get_remotes({hostname:e.hostname,success:function(t){e.success&&e.success(t)},error:function(t,n,i){e.error&&e.error(t,n,i)}})}};return t.get_remote=function(e){t.check_remote({hostname:e.hostname,get_remote_params:e,success:function(t){t.status?e.success&&e.success(e.hostname):c({hostname:e.hostname,title:e.title,message:e.message,success:function(t){e.success&&e.success(e.hostname)},cancel:function(){e.cancel&&e.cancel()}})},error:function(e,t,n){console.log("Unable to check status of remote session.")}})},t.delete_remote=function(t){t in e&&(i.default.delete_remote({sid:e[t]}),delete e[t])},t};var i=l(n(2)),r=l(n(0)),o=l(n(4)),a=l(n(64)),s=l(n(322));function l(e){return e&&e.__esModule?e:{default:e}}function c(t){var n={cancel:function(){n.container.children().modal("hide"),t.cancel&&t.cancel()},login:function(){n.remote.enable(!1),n.remote.status_type("info"),n.remote.status("Connecting ..."),i.default.post_remotes({hostname:t.hostname,username:n.remote.username(),password:n.remote.password(),success:function(e){n.container.children().modal("hide"),t.success&&t.success(e)},error:function(e,t,i){n.remote.enable(!0),n.remote.status_type("danger"),n.remote.status(i),n.remote.focus("password")}})}};n.title=r.default.observable(t.title||"Login"),n.message=r.default.observable(t.message||""),n.remote=o.default.fromJS({username:null,password:null,status:null,enable:!0,focus:!1,status_type:null}),n.remote.focus.extend({notify:"always"}),n.container=e(e.parseHTML(s.default)).appendTo(e("body")),n.ispasswordrequired=a.default,n.container.children().on("shown.bs.modal",function(){n.remote.focus(!0)}),n.container.children().on("hidden.bs.modal",function(){n.container.remove()}),r.default.applyBindings(n,n.container.get(0)),n.container.children().modal("show")}n(254)}).call(this,n(1))},function(e,t,n){e.exports={default:n(325),__esModule:!0}},function(e,t,n){var i=n(38);(e.exports=n(36)(!1)).push([e.i,"/*\nIMPORTANT:\nIn order to preserve the uniform grid appearance, all cell styles need to have padding, margin and border sizes.\nNo built-in (selected, editable, highlight, flashing, invalid, loading, :focus) or user-specified CSS\nclasses should alter those!\n*/\n\n.slick-header.ui-state-default, .slick-headerrow.ui-state-default {\n  width: 100%;\n  overflow: hidden;\n  border-left: 0px;\n}\n\n.slick-header-columns, .slick-headerrow-columns {\n  position: relative;\n  white-space: nowrap;\n  cursor: default;\n  overflow: hidden;\n}\n\n.slick-header-column.ui-state-default {\n  position: relative;\n  display: inline-block;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  height: 16px;\n  line-height: 16px;\n  margin: 0;\n  padding: 4px;\n  border-right: 1px solid silver;\n  border-left: 0px;\n  border-top: 0px;\n  border-bottom: 0px;\n  float: left;\n}\n\n.slick-headerrow-column.ui-state-default {\n  padding: 4px;\n}\n\n.slick-header-column-sorted {\n  font-style: italic;\n}\n\n.slick-sort-indicator {\n  display: inline-block;\n  width: 8px;\n  height: 5px;\n  margin-left: 4px;\n  margin-top: 6px;\n  float: left;\n}\n\n.slick-sort-indicator-desc {\n  background: url("+i(n(305))+");\n}\n\n.slick-sort-indicator-asc {\n  background: url("+i(n(306))+");\n}\n\n.slick-resizable-handle {\n  position: absolute;\n  font-size: 0.1px;\n  display: block;\n  cursor: col-resize;\n  width: 4px;\n  right: 0px;\n  top: 0;\n  height: 100%;\n}\n\n.slick-sortable-placeholder {\n  background: silver;\n}\n\n.grid-canvas {\n  position: relative;\n  outline: 0;\n}\n\n.slick-row.ui-widget-content, .slick-row.ui-state-active {\n  position: absolute;\n  border: 0px;\n  width: 100%;\n}\n\n.slick-cell, .slick-headerrow-column {\n  position: absolute;\n  border: 1px solid transparent;\n  border-right: 1px dotted silver;\n  border-bottom-color: silver;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  z-index: 1;\n  padding: 1px 2px 2px 1px;\n  margin: 0;\n  white-space: nowrap;\n  cursor: default;\n}\n\n.slick-group {\n}\n\n.slick-group-toggle {\n  display: inline-block;\n}\n\n.slick-cell.highlighted {\n  background: lightskyblue;\n  background: rgba(0, 0, 255, 0.2);\n  -webkit-transition: all 0.5s;\n  -moz-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n}\n\n.slick-cell.flashing {\n  border: 1px solid red !important;\n}\n\n.slick-cell.editable {\n  z-index: 11;\n  overflow: visible;\n  background: white;\n  border-color: black;\n  border-style: solid;\n}\n\n.slick-cell:focus {\n  outline: none;\n}\n\n.slick-reorder-proxy {\n  display: inline-block;\n  background: blue;\n  opacity: 0.15;\n  filter: alpha(opacity = 15);\n  cursor: move;\n}\n\n.slick-reorder-guide {\n  display: inline-block;\n  height: 2px;\n  background: blue;\n  opacity: 0.7;\n  filter: alpha(opacity = 70);\n}\n\n.slick-selection {\n  z-index: 10;\n  position: absolute;\n  border: 2px dashed black;\n}\n",""])},function(e,t){e.exports="data:image/gif;base64,R0lGODlhDQAFAIcAAGGQzUD/QOPu+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAANAAUAAAgeAAUAGEgQgIAACBEKLHgwYcKFBh1KFNhQosOKEgMCADs="},function(e,t){e.exports="data:image/gif;base64,R0lGODlhDQAFAIcAAGGQzUD/QOPu+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAANAAUAAAgbAAMIDABgoEGDABIeRJhQ4cKGEA8KmEiRosGAADs="},function(e,t,n){var i=n(38);(e.exports=n(36)(!1)).push([e.i,"/*\nIMPORTANT:\nIn order to preserve the uniform grid appearance, all cell styles need to have padding, margin and border sizes.\nNo built-in (selected, editable, highlight, flashing, invalid, loading, :focus) or user-specified CSS\nclasses should alter those!\n*/\n\n.slick-header-columns {\n  background: url("+i(n(285))+") repeat-x center bottom;\n  border-bottom: 1px solid silver;\n}\n\n.slick-header-column {\n  background: url("+i(n(285))+") repeat-x center bottom;\n  border-right: 1px solid silver;\n}\n\n.slick-header-column:hover, .slick-header-column-active {\n  background: white url("+i(n(308))+") repeat-x center bottom;\n}\n\n.slick-headerrow {\n  background: #fafafa;\n}\n\n.slick-headerrow-column {\n  background: #fafafa;\n  border-bottom: 0;\n  height: 100%;\n}\n\n.slick-row.ui-state-active {\n  background: #F5F7D7;\n}\n\n.slick-row {\n  position: absolute;\n  background: white;\n  border: 0px;\n  line-height: 20px;\n}\n\n.slick-row.selected {\n  z-index: 10;\n  background: #DFE8F6;\n}\n\n.slick-cell {\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n.slick-group {\n  border-bottom: 2px solid silver;\n}\n\n.slick-group-toggle {\n  width: 9px;\n  height: 9px;\n  margin-right: 5px;\n}\n\n.slick-group-toggle.expanded {\n  background: url("+i(n(309))+") no-repeat center center;\n}\n\n.slick-group-toggle.collapsed {\n  background: url("+i(n(310))+") no-repeat center center;\n}\n\n.slick-group-totals {\n  color: gray;\n  background: white;\n}\n\n.slick-cell.selected {\n  background-color: beige;\n}\n\n.slick-cell.active {\n  border-color: gray;\n  border-style: solid;\n}\n\n.slick-sortable-placeholder {\n  background: silver !important;\n}\n\n.slick-row.odd {\n  background: #fafafa;\n}\n\n.slick-row.ui-state-active {\n  background: #F5F7D7;\n}\n\n.slick-row.loading {\n  opacity: 0.5;\n  filter: alpha(opacity = 50);\n}\n\n.slick-cell.invalid {\n  border-color: red;\n  -moz-animation-duration: 0.2s;\n  -webkit-animation-duration: 0.2s;\n  -moz-animation-name: slickgrid-invalid-hilite;\n  -webkit-animation-name: slickgrid-invalid-hilite;  \n}\n\n@-moz-keyframes slickgrid-invalid-hilite {\n  from { box-shadow: 0 0 6px red; }\n  to { box-shadow: none; }\n}\n\n@-webkit-keyframes slickgrid-invalid-hilite {\n  from { box-shadow: 0 0 6px red; }\n  to { box-shadow: none; }\n}",""])},function(e,t){e.exports="data:image/gif;base64,R0lGODlhAgAWAIcAAKrM9tno++vz/QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAP8ALAAAAAACABYAAAgUAAUIHEiwoIAACBMqXMhwIQAAAQEAOw=="},function(e,t){e.exports="data:image/gif;base64,R0lGODlhCQAJAPcAAAFGeoCAgNXz/+v5/+v6/+z5/+36//L7//X8//j9/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAACQAJAAAIMwADCBxIUIDBgwIEChgwwECBAgQUFjBAkaJCABgxGlB4AGHCAAIQiBypEEECkScJqgwQEAA7"},function(e,t){e.exports="data:image/gif;base64,R0lGODlhCQAJAPcAAAFGeoCAgNXz/+v5/+v6/+z5/+36//L7//X8//j9/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAACQAJAAAIOAADCBxIUIDBgwIEChgwAECBAgQUFjAAQIABAwoBaNSIMYCAAwIqGlSIAEHFkiQTIBCgkqDLAAEBADs="},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,'.slick-column-name,\n.slick-sort-indicator {\n  /**\n   * This makes all "float:right" elements after it that spill over to the next line\n   * display way below the lower boundary of the column thus hiding them.\n   */\n  display: inline-block;\n  float: left;\n  margin-bottom: 100px;\n}\n\n.slick-header-button {\n  display: inline-block;\n  float: right;\n  vertical-align: top;\n  margin: 1px;\n  /**\n  * This makes all "float:right" elements after it that spill over to the next line\n  * display way below the lower boundary of the column thus hiding them.\n  */\n  margin-bottom: 100px;\n  height: 15px;\n  width: 15px;\n  background-repeat: no-repeat;\n  background-position: center center;\n  cursor: pointer;\n}\n\n.slick-header-button-hidden {\n  width: 0;\n\n  -webkit-transition: 0.2s width;\n  -ms-transition: 0.2s width;\n  transition: 0.2s width;\n}\n\n.slick-header-column:hover > .slick-header-button {\n  width: 15px;\n}',""])},function(e,t,n){var i=n(38);(e.exports=n(36)(!1)).push([e.i,'/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n/* Absolute positioning SlickGrid container to get it to fit the box completely */\n#timeseries-table-slickgrid {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n}\n\n.ui-widget {\n\tfont-family: helvetica,arial,sans-serif;\n}\n.slick-header-columns,\n.slick-header-column,\n.slick-header-column:hover, \n.slick-header-column-active\n{\n  background-image: none;\n}\n.slick-header-column.headerSimId.selected {\n\tbackground-color: #888888;\n\tcolor: white;\n}\n.slick-header-column.headerInput.selected {\n\tbackground-color: #3CA654;\n\tcolor: white;\n}\n.slick-header {\n\tbackground-color: transparent;\n\tbackground-image: none;\n}\n.headerSimId,\n.headerOther {\n\tbackground-color: transparent;\n}\n.rowSimId,\n.rowOther {\n\tbackground-color: transparent;\n}\n.rowSimId.selected,\n.rowOther.selected {\n\tbackground-color: #DDDDDD;\n}\n.headerInput {\n    background-color: #EEFFE0;\n}\n.rowInput {\n\tbackground-color: #C7E9C0;\n}\n.rowInput.selected {\n\tbackground-color: #3CA654;\n\tcolor: white;\n}\n.headerOutput {\n    background-color: #EEEEFF;\n}\n.rowOutput {\n\tbackground-color: #DBD9EB;\n}\n.rowOutput.selected {\n\tbackground-color: #7767B0;\n\tcolor: white;\n}\n\n/* Removing zebra striping */\n.slick-row[row$="1"], .slick-row[row$="3"], .slick-row[row$="5"], .slick-row[row$="7"], .slick-row[row$="9"] {\n    background-color: transparent;\n}\n.slick-row.odd {\n\tbackground-color: white;\n}\n\n.slick-cell,\n.slick-header-column\n{\n\tcolor: #666655;\n\tfont-size: small;\n}\n.slick-header-column {\n\tfont-weight: bold;\n}\n.highlight {\n\tpadding: 0;\n\theight: auto !important;\n}\n.highlightWrapper {\n  color: white;\n\tpadding: 2px 4px 3px 4px;\n}\n.highlightWrapper.light {\n\t/*color: #666655;*/\n\tcolor: black;\n}\n/* Stripe backgrounds generated using http://www.stripegenerator.com */\n.highlightWrapper.null {\n\tbackground: #DDDDDD url('+i(n(313))+") !important;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.selected .highlightWrapper.null {\n\tbackground-image: url("+i(n(314))+") !important;\n}\n.highlight .highlightWrapper.null {\n\tposition: static;\n}\n\n/* Removing borders around cells */\n.slick-cell, .slick-headerrow-column {\n\tborder-width: 0px;\n}\n.slick-header-columns {\n\tborder-bottom-width: 0px;\n}\n\n/* Styling sort controls */\n.icon-sort-off {\n\tborder: 1px solid transparent;\n}\n.slick-header-column:hover .icon-sort-off {\n\tborder: 1px solid transparent;\n\tbackground: transparent url("+i(n(288))+") no-repeat center center;\n}\n.icon-sort-off:hover {\n\tborder: 1px solid #C7C7C7 !important;\n}\n.icon-sort-ascending {\n\tborder: 1px solid transparent;\n\tbackground: transparent url("+i(n(289))+") no-repeat center center;\n}\n.icon-sort-descending {\n\tborder: 1px solid transparent;\n\tbackground: transparent url("+i(n(315))+") no-repeat center center;\n}\n.icon-sort-ascending:hover,\n.icon-sort-descending:hover\n{\n\tborder: 1px solid #878787;\n}\n\n/* Alex making buttons always have space */\n.slick-column-name, \n.slick-sort-indicator\n{\n\tdisplay: inline;\n\tfloat: none;\n\tmargin-bottom: 0px;\n}\n.slick-header-button {\n\tfloat: none;\n\tposition: absolute;\n\ttop: 3px;\n  right: 3px;\n}\n.slick-header-button.image-test-class {\n  right: 20px;\n}\n.slick-header-column {\n\tpadding-right: 23px !important;\n}\n.slick-row.nullRow .slick-cell,\n.slick-row.nullRow .slick-cell .highlightWrapper\n{\n\tbackground-color: white !important;\n\tcolor: #666655 !important;\n}\n.slick-row.nullRow .slick-cell.selected,\n.slick-row.nullRow .slick-cell.selected .highlightWrapper\n{\n\tbackground-color: #DDDDDD !important;\n\tcolor: #666655 !important;\n}\n.slick-row.hiddenRow .slick-cell,\n.slick-row.hiddenRow .slick-cell .highlightWrapper\n{\n\tbackground-color: white !important;\n\tcolor: #c7c7c7 !important;\n}\n.slick-row.hiddenRow .slick-cell.selected,\n.slick-row.hiddenRow .slick-cell.selected .highlightWrapper\n{\n\tbackground-color: #F5F5DC !important;\n\tcolor: #c7c7c7 !important;\n}",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAAAH0lEQVQImSXIMQEAMAwCMOpfC1jMjuVM2gKHJNuC3w87vxULvAnaoQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAAAIklEQVQImWNcu3atgYEBAwMD4927dxkYGC5cuMAEoQwMDACgZgqjfO75sQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAFCAYAAACXU8ZrAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB90FAQECOX7ZzfkAAAAIdEVYdENvbW1lbnQA9syWvwAAAC5JREFUCNdjbG9v/89AADAyMDAw4FNYWVnJyAjjYFNYWVnJCDcJm0KYAqwAm4kAaJURLWsFPcIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcdCupowjYAAAA4SURBVBjTjY45DgAgAMKq8VP8f+izdHLxiDZhg4YCoHYuJCmVD+q6AmbOJZUkTxPqVmqLqT8/3RjLHw4SIwEXjwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcnLB3MmbIAAAA8SURBVBjTjYyxDYAwEMT8EUvfBB47aQChiEe4ucbnAlAnDUlq8IOxv4A6911SSYL6WbrFJ8dWmlexLXUsiHoUEn+eNQQAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcGKw83GfIAAABrSURBVBjTjcqxEUFhFEThj0qI1HBTow5tSIRGKHgV6IGRiTcT6kNghCT/wyBwkr2794Ak0yT3JPPWN0luGoP+SHLABDOc0VXVAoZeLDHCEVes+8dTqqoTthhjVVWXL6mxa7l/Hz+ln/wlPQBR6h1u6Vo8IwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcDGiOe7Y0AAAB5SURBVBjTjcoxDkFREIbRczUvdkFlH2Ifau1rZBKlmE5hBWILRGcLSvtQqK/mPREUvmaS+U+BzJzignlEHDJzi0VEDKHoyswzJqWUWa31hl1ELGHQo6ZpVhjVWi94YNNvL9S27RV7jLGOiPsX6jp29/T+/EQ/+ws9AcDpHx8wCF0cAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcIEs6xvHQAAACESURBVBjTVc4xDgFxEMXhb1W04g5a7VxFo3cBichGK0J0ShpxEclcQCNxBIlCo1T4r6xpZjLvze9NBZm5wBxDPHDDJSLG0PGtTRFXmGFQOqiaITMnOOKNdUTUjdaQ4IwXuji09n+mKXp4tqN+cZnZxx2n8vQOo4i4tkl1OVhiX4zbhvQBmakeJ1ciCYkAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB94GGxcHNnUqRGoAAACISURBVBjTTc4xDkFREIXhj4pW7EFrPRq9DciIvOhuPCE6JY3YiCVoJJYgUWg0N1G4T95p5iRn5j/TgZTSEguM8MQd14iYQNdP2xKuMcewTNBpTF3X05zzCR9sIqJqsoYk53zBGz0ctdRt+Rn6eLWr/nUppQEeOJen9xhHxK1NqsrBCoeyuGtIXwQvJB7uu+OBAAAAAElFTkSuQmCC"},function(e,t){e.exports='<div class="bootstrap-styles">\n  <div class="modal fade" data-backdrop="static">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-bind="click:cancel" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n          <h3 class="modal-title" data-bind="text:title"></h3>\n        </div>\n        <div class="modal-body">\n          <p data-bind="visible:message, text:message"></p>\n          \x3c!-- ko if: ispasswordrequired.ssh_passwordrequired --\x3e\n          <form class="form-horizontal" role="form">\n            <slycat-login-controls params="username:remote.username,password:remote.password,status:remote.status,status_type:remote.status_type,enable:remote.enable,focus:remote.focus,activate:login"></slycat-login-controls>\n          </form>\n          \x3c!-- /ko --\x3e\n        </div>\n        <div class="modal-footer">\n          <button class="btn btn-default" data-bind="click:login,enable:remote.enable">Login</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t,n){"use strict";(function(e){var t=r(n(0)),i=r(n(324));function r(e){return e&&e.__esModule?e:{default:e}}t.default.components.register("slycat-login-controls",{viewModel:{createViewModel:function(n,i){var r={};return r.username=n.username,r.password=n.password,r.status=n.status||t.default.observable(null),r.status_type=n.status_type||t.default.observable(null),r.enable=n.enable||t.default.observable(!0),r.focus=n.focus||t.default.observable(!1),r.status_classes=t.default.pureComputed(function(){var e=[];return r.status()&&e.push("in"),r.status_type()&&e.push("alert-"+r.status_type()),e.join(" ")}),r.username()||r.username(localStorage.getItem("slycat-login-controls-username")),r.username.subscribe(function(e){localStorage.setItem("slycat-login-controls-username",e),r.status(null)}),r.password.subscribe(function(e){r.status(null)}),r.focus.subscribe(function(t){var n=r.username(),o=r.password(),a=e(i.element).find("input").eq(0),s=e(i.element).find("input").eq(1);1==t&&(t=r.username()?"password":"username"),"username"==t&&(a.focus(),n&&a.get(0).setSelectionRange(0,n.length)),"password"==t&&(s.focus(),o&&s.get(0).setSelectionRange(0,o.length))}),e(i.element).find("input").keydown(function(e){13==e.which&&n.activate&&n.activate()}),r}},template:i.default})}).call(this,n(1))},function(e,t){e.exports='<div class="form-group">\n  <label for="slycat-login-username" class="col-sm-2 control-label">Username</label>\n  <div class="col-sm-10">\n    <input id="slycat-login-username" class="form-control" type="text" data-bind="enable:enable, textInput:username"></input>\n  </div>\n</div>\n<div class="form-group">\n  <label for="slycat-login-password" class="col-sm-2 control-label">Password</label>\n  <div class="col-sm-10">\n    <input id="slycat-login-password" class="form-control" type="password" data-bind="enable:enable, textInput:password"></input>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-offset-2 col-sm-10">\n    <div class="alert fade" role="alert" data-bind="css:status_classes,text:status"></div>\n  </div>\n</div>\n'},function(e,t,n){n(79),n(78),e.exports=n(326)},function(e,t,n){var i=n(10),r=n(101);e.exports=n(7).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(42));t.default=function(e){return e.hidden?null:i.default.createElement("button",{className:"btn btn-default",type:"button",title:e.title,disabled:e.disabled,onClick:e.click},e.icon&&i.default.createElement("span",{className:"fa "+e.icon,"aria-hidden":"true"}),e.label)}},,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAQAAABFnnJAAAAAAmJLR0QAIn/tYtYAAAAJcEhZcwAAAEgAAABIAEbJaz4AABonSURBVHja7Z17aGXHfcc/Z70br7y2e5W0MRIp3gep+6DsXUsmcXHxVds0awdiaUuaUihItpEaQu3EUChJwXZK6F+x3QTTrklW20ACbkKkNWmyTh+SsWkTR/JqcesmDX5BI1Ga9qruH3JYJ6d/nNfMOfM659yre6Uz30V77z2/ec9vfjNnfr/5TXAcjybjwKAL4DFYeAZoODwDyBgjZGzQhdhNeAYQMcYmsNkkFug1Awx+/IwRVo65CYyjY4Ek5cHXsYeQGcAsAMP0nwm28aOPH8a5j2nD2PJOOrFaDaLu34pZwJTyPpIRIgP0QgCO10ghiZuMw/KoExcCAraALQICQ8p16jh0CNJ9gKSKyTjQIYRC84iI0gkqxU9GmS5/W95hzbK7pmyr4x5CJgHMAtAVpjFonz6i3E1daE6l3tg0TUFiyvXkzJAhKL0TaB5FpjGYNWrVsWNPwTw2zWU3y8AsZZuc2VMozwBmhANvmjE2KzOYeQpKUh58HXuIXjPAXscYm/upe+04OOgCDBm29sfSzh1+J7Dh8AzQcHgGaDg8AzQcngEaDs8ADYdngIbD2wPk4w66/LuMMvYAbhYBNmXMmNEewJyDvXvq2APY1eFR2fcVk5SzB3DTgJmbUN9B45rvrmnbut+W+mbuU5/6vrEGKNoDRNDvhiehTPo2Pd0W28UewFQ6c+72+GaEcdrJ576AbA+g+i5jy0kKqMPYx6eLPYBp/LmVTc8+odXaoExOewJVtIEmheuw2wOYmMsmf5Kae3WwAYNvnLr2AIMu/y7D2wM0HH4jqOHwDNBweAZoODwDNByeARoOzwANh2eAhsObhecRDnCXv/5eaenyH6wXvS+NMMgShNYSVFcF2WMOoObyFBCCUdfv4h8grEApi6p52MofdX1gTMXOHFVju9XAJVSJuAekALbqBw4V0McPHBrIpQqhQdnjUr7AQJM/y+WRUOwtYK6hmYFCS2ywDWKp/OIU4Fp9nbWOvZGCHgj40KiJtM2idUoQprEDJVXMXZVLMrz0ZQgNdHPaWe3Mw0AsZQBlF4Ghw+ixhXLhzmpj3K1zA4fUTR3kkm7VFjANQZe07W1QoJd5DcxEnEsoNc0sAu0cbE7DJmLdRLRtBNlyd1lEVoWdxe10qQRlJICb6Ky3yg0cpUy/yhgYBaxbuoFDmKowT9PmCVAZ96Am0OAw6BLs5fwrxPU7gQ2HZ4CGwzNAw+EZoOHwDNBweAZoODwDNBzy4dDEWergYPcH3k+4tICLRrRaPNvZaNdcSiFjgORglIu792oN0DtUS8tWcrcWMLmazbRxY6VjR3rK5J++DmOVWyDMlRJQHw41H+F00WiPKZ71jgV0abm5htCX360FdHmM5Y7XjpWKndXAJoHqHU0vHNCVj4a5uFO3HcHWHRB1s6Sxl0CXjt2Fu73kbg7p1RqDYtcGObrtYHnWOarziaGUsllhrFNYB8UwZRnAvQGCEnHdSmBuQpf87Wf79fnbYtsYwN4G5g60M4CZgTQMUO4tIGuAKiqLQEhDnXoofZryr4Ks3FXXEKbcx2NqMoOrPQiY8k9iqtcAtpQz3w2m8835Upa0BzA1gLyAMVXfXDhTFU1piFWzm32pusDOgKYabOUcSGyVTsENpu7dSq+9cSslZacAN3Oq0OoiwjwL1ont1rzqerjNwfVN2kzpVL/Uxr4GUML7BxAxZr0xad/BHwwR0bjbAvxWcOPhGaDh8AzQcHgGaDg8AzQcngF6jUGqsysgbw9gg0lf5VL1sZr67n6jfukCy2b3kNW9aA9ggklj7rJLmGjsxh0OmOpR93CV+Xh4YD3+au9gXXxT6gNCthMoFsvu7be42Sgejax2+7frRjOYNHa22IE2nPhUp+00HR4NnajuNd0VqNcAOqMDs74qmxqqGC1EI8duNqX3YRDiqusLSjxV5avK336yeSiRMYCsKCx/gXx0wXrSfeXjB2S6vGoHqLMwdV1QVMvXLUQdHx99QMYAoqKwCg/bbhKwK1vrzo6BIEHUEkL+VIXozShW5SBLj6GRE+IUkKlCVAI8EvCRuZcaW0Z7ABdtv909hBmZLYDapMLc9NkkpPcukoQMSlLFEFUNavoCtTpYt4wBF2WpbhHYC2Wrm9Vi1YWmyyISQwn24GUy3h5AxtCI5t2C3wmU0bDu9wzQeHgGaDg8AzQcngEaDs8ADcfwMUBrWDZJm4E8A7jpsk0qm9CJqgvRorsrr2KD9oMwNCjnLt5NFTNaozxdEiZpGcNVdVmfYR/dAF4HMgOYd6nNu93JqG7RVbJAmG6Uqs/uRaJ/NA3R1cRPvlVzqi5Kn/Iay32IjAFkd+9FZPpwncv0gCDu/m1lXmbRHon+bUYNZ2eT3NX5yxYF+VTc3Ec0DsnRsKzJzB6vbZqspPurz+PbTq6c1af/9U7VE2O2jL6ProCvg4QBkqY1mUyBeGmCGvWvRNHJDzn3fBnkixCKJdyU8g5o2BFQPbLDoWKT6R2M2G+9cL1WQkePWCAsrCMSRbDaK79cnl65lW8AyrwFZE2ss8mzXclkoo+m1C4QFORAIOSumojM9kSy+wiPFGXeAsxGVTYnZzbfHdsp1eU1MnB8lsBmsNZYuF8YYZsiegPzGqAOGnj23wXD5iDCd9IuY/h0AR67Cs8ADYdngIbDM0DDsZ8YYCLdaZjoS/oHORz/G7alcw1EDDAdN9wK05VT+pRF029DyFnJWqBsJ06wln5fU8aeqMUeB3mLm9hhh5t4S8kCE9bSH4+pusMYerotJnwo98+cQ9pL0cGQkAe4BLRYEgJnr2TT6fMZljVJZ+fqFjhrOFlUTD3CLC8KXQhznJcady0XfpL1EnS5hKrSHedl6fcJXpF+H+YmNhgBdmjzfd7UtoA6Dxdn0vqbP22XYkchspa31THdOk84+RIAq5pduCUFg6wyhQ4LmgKMpN92CrRFnkCPNSLHEhE2CVmTclhjUmKByRzdjpeF0kUlzMffYIQjwETMCLpywqSC4lqaOpfPmyGyeJpSwgAb8adohiEW+RLwfXaM27SH48+z2hCHDLHneJF5A31GckExI8kqgHWBBVSjP38+t9ghh3gj/X69sgxHuJ6AawylvNNAM0tAszo+UKRSjsGT7v9N/kF8nM1lXUsC32enEEYuQsQAo4bUdOMGbBIAnk9ZIGSG5xUhEhYodn+EVu6zWLobjCVt8yPuAL5JWxl/HVIWUpdgMpZUk4UJq99Iuv93GZFZwHU9q+r+YgOCWVBFY+dVJc0mARIWQNP9xLmjXeSdyH3mcZjX4283KqhHuEybDaDNZd5RWAPkNalVj5naBb0txO/z5cKzqPsXOAJ8HSCZwN1fA4vdn6/gNVzDNYxwjVZIXs3VXA2oRtiipfthjOeZYYbnNeacE2wxzTRbFdf5I/xi/G+kUL4x3kXIG7Rpc4CQdxlNSic1nX9U+NPhMDbYQnxJ8Sxi+rO8jb8BYIrViFD9jbZYxRFrnO8ZQtokwBhbEI/9LUXzT0h0FQv8fO4z30TRKGkTrYhkOfFONkB4L9igbbAoqiPgd2qGUNt0vBLXL1qfpd1vYgBxJVsUOsXu/zNelH4VYRaJ5jXApOI1rwwd4J25z3wTReuLg6wVXgGzRbL4JL9Msy3y4KvCXxFzLArfq4XQ45WUxYXuHyYHERPArwq/X9QspPqLEBTd38vUIwxG7X2cl+XuHyYG8BgI9pMuwKMCPAM0HJ4BGg7PAA2HZ4D9hU/z6XIRZAZoORzM1sPl5k03TCg16pOCLrv4lj9NKP2bztHnc3TVppOoLT/eBzrAn1vap0Oncrtdxyf4BNdZQs0yy2zyQ3wNbNFlElhT2OavcEe8A/UwSxxjSaGxfoJ1zgILTDAv0ct50Ex0+3L4Sb4bP41SuyW39RPpwxOcLcR31ce3gWjjp/f0JEwAzEr2DgAdVhilC4zSzb+v06ILLPAE85wF5fmJZ7kNeI5fN7TubLyZNMcqr4kMEHV/pE0rskDIeO48fdnbw6PzhB/lcT7K4zzAI5oGmmCdaZYKOj3x6KcqB5fr27/Ne7nEKf6JX9P4OGhzmZCAk4WdvowOGOivcIVDHFfSk+afAxZLtmBCXUjV7SJ9vqCEX1DurE6zxBzLdBODG1EdnGynrjFZyVGLaCug1hzeyiY/4N94nRc1OsEJ1phhWavSrYO/5z1cpM1FbuUftaGivfS2kS7vWcq4orAVSpCMvkUldVRqNZ3lhdra4kaHJwD3A6Px9NhiO1sDnJV209eYNJh16LDNNl26bGsPd/0zv8O3mOXrLBQMOiDp/iUm+rIN/Ft8ldN8g9N8WWm4cRNgOh+Z0AMCrtLSD3FYY/gyK3V8fi+/E3d/cnqyW2ot8Ek+I/3+DJ8shDnKUTrAIywyx/mol8Q1QAjxGkAlwO1TQEA2w4VK+nvZ5Da+w3v4Du8paK2T7lePfnEfXbWmiBzMdAWDlDz9K3yIJ/kwT/JhvsYZjQuJNqCawzP6VfzESFfHz+beCM/mbBA7rKS1iuonrwJaOalaXAOYbw/P2E+i5bWB+pHXZYZljsaiW28PqMNkYY6TGcDc/XJFbSYR28qnf8wR7uMG7uMa/pQzEm2cH8bfNuLPEz2lZ91/XlPm1XgKSGqW7+BtaYoodn8LgOeA24jFey7/aO5flaPlJYA4ivONbkYUohU3f3l7mKji+u5P3gISqN4CRlMXNcU6mBeJycz+L8bS1aEHhIbuV5VQ5UgrYgHVG8D7uMhHeAKY5y85zd9J1FkWeYAui/m4mQQQTRKrdOCCVIEFZRjblSym0b/GLQIL3FLQ/5/gZbpky88TCrr8Ow+b05g69Dlr98NU7jWwiG2BxfO4wu/xFQCeoMsVRYhHgLl8XFd18Mn49cej3+hAXkz3BLMARRb09gANh9cFNByeARoOzwANh2eAhqN5DBCpjTsKSidV5d7kkI5O17fHPBKLDHAybYCTldOr7h+gLlqEnIu/n9NaNTwU6yBWCizwG6xwhjO8m3fzPX6pEDNqnY/Hv8SbjiOc4gOE3MqthHyAU4X4ZvcVeWuGvD1DkW4LMV3IQ6YnFUlfA0+ywSp/ASzSStWexURcXEn2x+p9lkXaXOYkG4pNlSjnRe7mXLzfrt8PP8arFHcKj6Tf3+LHir3QRZ5iiTaX43TkvXq7OjzR73WVimTz3muo0A52cyGC1FBmTeHKN2RUiJGqszMJsMEqUyzzQVpsK07CDB6LwAazbKBSqCZ77Un3q1SuR+NPtSr6TX7MDjv8mLeU9KdYBkZTnf5q6RqcoJteiVGUA4kdlE6GbjMX61rV+tYwTmUCtFL4XYwzzjj/lTzIJEDIDMucYy7mdLM9iy57EWXkgO6GAhEnBbZUSahzgop1kbsL9Lw+LT9CssFwjJcLuT/KxwBYpQNKCSSeeNxRSgB9/iEjscXViDKFSAJ0IVbJvVa4XCeRABPAWaUz75A2B4CfAunRNlkbGHX/3UpPQWHuWzVlj675XXA5PRs3p5yg7oZ09Ku7X7R5yO+1P8lPU/3AyzxWiP9xLpCsHdS7+oeUO/CuOJJ+/gj4WUWIjwGwxAxLHFPIgJDsWGpxQE0A/w38lAP8HC/wcPRYlADbtOKmW6FTweQLYwg3gydTDjYJ8EX+IP2et4uTu1/VgSe5X/j1KV4z5K5isGiM/gSAK1oJoPMiFHJMeh7yWkECiPIj0u2VWwPcDPwnAD/MWjcTe21abPMU06zQUZhEZStetc9v8akqRJD7Z6aqctiIOy/7LiLp/khG3MazEjXp/ilGCZTj9zKfYy7+V+x+2GCRB4CHiVYaRWyzzf/xNq5SnuCftDjYuJZreZVruS7+3wzV2WDbGuBGDnADN3ADcHMSIpsCIv8X0UtSeyh1f3PxW8AlNhQNEHX/c9zNu7mNyCxCRNT9q4b0L7HIt4FfUHQ/wBdZ5RFWeYwuc6CQAhCJWRXWBTOW44XzxzPx4frs/5lciFYqI5LfeYhmMmqTGYVnhLLawEG+BprRopsK/me5Lac1j8zd7LZGaMsfLTG3OcZ2vJw8kHMJA/fwEq+zpW2lkCA9L5BfZh7mV1iLTfIm+decaem0woZSdtmXD1F06Kf0X+DVwSLewcPAg5pRPMsoizFbtfhffqbAYiJUDCB6M+yH3XMFeAZoOJqnC/CQ4Bmg4fAM0HDkGWBa6y/8Ts6nmqTzRpeoHnsI8iJwiWlgufAOCn/EZ3NP7uNzgy68R32IEuB0PPqnOZ0LdWfa/dkO3WeVUmCN0OAm8dVYgnSs5bKH2H2sCdr03fb12zeIDLAAjDJK8VjHGWVc1dMJMDhqPRp/rlhK1VEYbMBs3Piz2ni2EDZ6KFw1UeziSc33PY1sCjjNN8mOht3BRalhNLELT+w7gS3FwU0ZyTFJeeN2VvKSeV4RzxZilkVO8wy3c1GTgptDd1sN9xQyCRCN+la8x7ygCW+7eXfBEDdKv4v65Esn/VR1v2zgoT5fH5lpjMbuF1T00zzNmzzNaU0KwHDsz+0eEgboxPN/N9ZZTVechf89/tOhC2woFpmJ0Nd1vyuW2dZeagPP5D4zuNgyTgDrrLMOfbqWagBIpgBRDVJUiciir44gjM7wbueeZt2u7367K+YQmGOZaRZRC/DTPA3A+7moTWE97dx8CPEqqvX9sgqIJEAn/d0S1IzZ08eVcVVPO5Y1fkCgsGVJ7h8yjf45zXf56SLd1AtPkX6R93OY93PR4Gt7womyzySAbZH3Pr6loP527gx6lpJeMujVyXbhb3eyYAtho4essxCvAtY0Y7zqTSBDiogB1PfsiWLuHj6fo97LFxRxOqwY52+TPYEt7nBgXzKAC25nOjZLhMdYViykmoHGMoDHvoTXBjYcngEaDs8ADYdngIbDM0DD4Rkgj47Fm/8ecwBhg8gAoVILjxSiV1dCDApnLU6wO0ZbhY7VkmHPQZYAHVasTKBGxjwtbQodVmJNQ4eVAgvJ7DevoM9LKalYsOD/olCCeeYN9XPvfherpj2BvK/gCKs8rNyS1XsTDqV4Ifk9/ajxAqDDg3HjmVKY52yBHl2BoIsv18DswyAw0GwpJ9R9siOoXgN0WLHe5a2Ll3S0OEZD4alZwiQp6FBVQkWlKH6rm9Keh5oBVpkyXuWswypTTJFIgGyEBMJTs7onSUEHW/zdwb4Y+xGKDLBasZGTeC1WmCLIpbBKwBQrtAzpu+VctXyyDwI1dcoYV6SGFW5MGErIawDd3J+F0N8oMPwwz/IRsrVKeeqehNcG5tFhxdDFZuoehGeAhsPvBDYcngEaDs8ADYdngIbDM0DDkWcA09lbj32IjAFasavUG7lR42s/0rM9pKF67EkkDNCimzqHOUZX2cltpniMB+k6XCiRV5fM564rmN9luocGyUbQOeb4LPcT8hAPEyrdIUdosUTH6ky26Ko4/1t2lNhvuocGEQO06LLBKeBBnmGVS7Q1t1Mv8ileY4WO5gLTKJzKV/VI7E79EFc4VPCnHXI9b3C94HBdTX9D608/ou3EfyqP/R4KRM6iTwAXAGIv8hdoc6IwgtqcYpE5jjFDlzkeLZXT29Nv6tu/r43/1JfPw3Xx39tR6+OvBUZj+qjvfFfkJUAEtQRIQq4yxTnmtO6Q1RLgl6XfLxVEeH/pHhpEEmCbVTrMxoemZ2mzqrmRImCGJY7ylOGEvQoLvJT7vb6rdA8NkkVgdB/GBhe4izbqGwMya4ApUKhFxdG/Tyzm9j/Ea+Meil8El3loKC+M8OgDvD1Aw+F1AQ2HZ4CGwzNAw+EZoOHIGMB2H0Bd+u08mtIf5fZdp/e7foOmV0TyFmC7D6Au3eZmrt/0ftdv0PTKiBjgTv5WQfsA34i/1aXbHE32m97v+g2aXgPRFJB5/hePTZ1RfBORp9+bXi17b45+l5A+iqd3qZLX0IMK8c8o46vqZ6u/WP7y8delg2m6+Ca6WAp1r5RE3lWs2hm0zZVs5iD2HuAL0pPepe8S356+yh22a/wA9QGzsMTvUEilSP9DAP5K237J01O8QE8OqYkMIOvXiwWw0ZN5N5uP1Q2sayB7+oEyNdcOsKdvZoD67ROkz6vRb+YFoft7wgAH6ych4CfC/+URWiWCGeJx9CopBMJnlfihQ1ybmuwjBtrNXJK6vyfo9RQwC5yn+hRQX8Try1dMoZoIN6XvJkFsEkqX/81ckrq/BxIgWgTa7gNwo98DLLIYfxPp4gtZqHj6BYFqo2Oko6TL5Q8LTx+XKDZ61fZJ6hdWpr8gdb8615KIGOCCVIAEFxTfROTpn08b8PM5+teE9FE8/ZoqeQ09rBD/gjK+qn62+ovlLxs/77yqLB2QhL+6V0riqlGAV/gPPpij3MtX0+916T/gf7gjR7+PL+0avd/1GzS9BiIGgEusss1746eP8ScsSeHq0p/nu7xFO/7113xS6J7doPe7foOmV4Y3CGk4vDaw4fAM0HB4Bmg4PAM0HJ4BGg7PAA2HqAxyvzx9OOkeFSBrA0fSbzvK0HXpHkOH4hRQr+t2rCnUG7lB7RQ8JOQZwNaBO+wY6Yl7Bh1sHajz5Z0grKjr99AgzwAjYOzAEUaM9MhDhx4hZoMJ04UvYDeo8CiJ4hQwUiEVObY5hXrj18ZAHiUhLwJt839dusfQQWQAm2gddrpHBfiNoIbDM0DD4Rmg4fAM0HB4Bmg4PAM0HHuXAcb8hlAvIDNA/X22kAlCJvpe7jE2Ge97Lg2AzADj8d+gYRvdUfdvDbqY+wEyA2zGf4OFbXT77u8hXCVAyFjhrxzCwj81ou7Vs2HS/X4N0BPIyqBNAjY1d2sX/8ph0ilU0v3jRvqWXwP0CjIDmCTAeNo1yV85IbxWeFJkojEhfRWLyd3vJ4EeYJgkgO/+AcBVAtSH/QKHct0/pgnnUQquEmA3YJIuqu73a4AeoNcSoF9Wu4nQz3961IT3D9Bw7F1dgEdP8P+NTFhDa6AzzgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMy0wMi0wMVQwNTozMzoxMC0wODowMClgwJIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTMtMDItMDFUMDU6MzM6MTAtMDg6MDBYPXguAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function i(){}n.r(t),n.d(t,"WebGLRenderTargetCube",function(){return Wt}),n.d(t,"WebGLRenderTarget",function(){return jt}),n.d(t,"WebGLRenderer",function(){return er}),n.d(t,"ShaderLib",function(){return nn}),n.d(t,"UniformsLib",function(){return tn}),n.d(t,"UniformsUtils",function(){return Qt}),n.d(t,"ShaderChunk",function(){return Kt}),n.d(t,"FogExp2",function(){return tr}),n.d(t,"Fog",function(){return nr}),n.d(t,"Scene",function(){return ir}),n.d(t,"Sprite",function(){return or}),n.d(t,"LOD",function(){return ar}),n.d(t,"SkinnedMesh",function(){return cr}),n.d(t,"Skeleton",function(){return sr}),n.d(t,"Bone",function(){return lr}),n.d(t,"Mesh",function(){return Bn}),n.d(t,"LineSegments",function(){return hr}),n.d(t,"LineLoop",function(){return pr}),n.d(t,"Line",function(){return dr}),n.d(t,"Points",function(){return mr}),n.d(t,"Group",function(){return gr}),n.d(t,"VideoTexture",function(){return vr}),n.d(t,"DataTexture",function(){return qt}),n.d(t,"CompressedTexture",function(){return Ar}),n.d(t,"CubeTexture",function(){return Hn}),n.d(t,"CanvasTexture",function(){return Xi}),n.d(t,"DepthTexture",function(){return yr}),n.d(t,"Texture",function(){return Vt}),n.d(t,"CompressedTextureLoader",function(){return Yo}),n.d(t,"DataTextureLoader",function(){return Jo}),n.d(t,"CubeTextureLoader",function(){return Ko}),n.d(t,"TextureLoader",function(){return Qo}),n.d(t,"ObjectLoader",function(){return Qa}),n.d(t,"MaterialLoader",function(){return qa}),n.d(t,"BufferGeometryLoader",function(){return Xa}),n.d(t,"DefaultLoadingManager",function(){return Wo}),n.d(t,"LoadingManager",function(){return jo}),n.d(t,"JSONLoader",function(){return Ka}),n.d(t,"ImageLoader",function(){return Zo}),n.d(t,"ImageBitmapLoader",function(){return is}),n.d(t,"FontLoader",function(){return ss}),n.d(t,"FileLoader",function(){return Xo}),n.d(t,"Loader",function(){return Ja}),n.d(t,"LoaderUtils",function(){return Za}),n.d(t,"Cache",function(){return Go}),n.d(t,"AudioLoader",function(){return cs}),n.d(t,"SpotLightShadow",function(){return Ea}),n.d(t,"SpotLight",function(){return Sa}),n.d(t,"PointLight",function(){return Ca}),n.d(t,"RectAreaLight",function(){return Pa}),n.d(t,"HemisphereLight",function(){return wa}),n.d(t,"DirectionalLightShadow",function(){return Ta}),n.d(t,"DirectionalLight",function(){return Ra}),n.d(t,"AmbientLight",function(){return La}),n.d(t,"LightShadow",function(){return Ma}),n.d(t,"Light",function(){return _a}),n.d(t,"StereoCamera",function(){return us}),n.d(t,"PerspectiveCamera",function(){return Ki}),n.d(t,"OrthographicCamera",function(){return un}),n.d(t,"CubeCamera",function(){return ds}),n.d(t,"ArrayCamera",function(){return Qi}),n.d(t,"Camera",function(){return cn}),n.d(t,"AudioListener",function(){return hs}),n.d(t,"PositionalAudio",function(){return fs}),n.d(t,"AudioContext",function(){return ls}),n.d(t,"AudioAnalyser",function(){return ms}),n.d(t,"Audio",function(){return ps}),n.d(t,"VectorKeyframeTrack",function(){return ja}),n.d(t,"StringKeyframeTrack",function(){return ka}),n.d(t,"QuaternionKeyframeTrack",function(){return Da}),n.d(t,"NumberKeyframeTrack",function(){return Fa}),n.d(t,"ColorKeyframeTrack",function(){return Ia}),n.d(t,"BooleanKeyframeTrack",function(){return Na}),n.d(t,"PropertyMixer",function(){return gs}),n.d(t,"PropertyBinding",function(){return bs}),n.d(t,"KeyframeTrack",function(){return Ga}),n.d(t,"AnimationUtils",function(){return Va}),n.d(t,"AnimationObjectGroup",function(){return xs}),n.d(t,"AnimationMixer",function(){return ws}),n.d(t,"AnimationClip",function(){return Wa}),n.d(t,"Uniform",function(){return Ms}),n.d(t,"InstancedBufferGeometry",function(){return Es}),n.d(t,"BufferGeometry",function(){return Cn}),n.d(t,"Geometry",function(){return pn}),n.d(t,"InterleavedBufferAttribute",function(){return Ss}),n.d(t,"InstancedInterleavedBuffer",function(){return Ts}),n.d(t,"InterleavedBuffer",function(){return Cs}),n.d(t,"InstancedBufferAttribute",function(){return Rs}),n.d(t,"Face3",function(){return dn}),n.d(t,"Object3D",function(){return ln}),n.d(t,"Raycaster",function(){return Ls}),n.d(t,"Layers",function(){return an}),n.d(t,"EventDispatcher",function(){return i}),n.d(t,"Clock",function(){return Ns}),n.d(t,"QuaternionLinearInterpolant",function(){return za}),n.d(t,"LinearInterpolant",function(){return Ua}),n.d(t,"DiscreteInterpolant",function(){return Ha}),n.d(t,"CubicInterpolant",function(){return Ba}),n.d(t,"Interpolant",function(){return Oa}),n.d(t,"Triangle",function(){return Fn}),n.d(t,"Math",function(){return zt}),n.d(t,"Spherical",function(){return Os}),n.d(t,"Cylindrical",function(){return zs}),n.d(t,"Plane",function(){return Jt}),n.d(t,"Frustum",function(){return Zt}),n.d(t,"Sphere",function(){return Yt}),n.d(t,"Ray",function(){return Dn}),n.d(t,"Matrix4",function(){return It}),n.d(t,"Matrix3",function(){return Ut}),n.d(t,"Box3",function(){return Xt}),n.d(t,"Box2",function(){return Ds}),n.d(t,"Line3",function(){return In}),n.d(t,"Euler",function(){return on}),n.d(t,"Vector4",function(){return Gt}),n.d(t,"Vector3",function(){return Bt}),n.d(t,"Vector2",function(){return Dt}),n.d(t,"Quaternion",function(){return Ft}),n.d(t,"Color",function(){return en}),n.d(t,"ImmediateRenderObject",function(){return Is}),n.d(t,"VertexNormalsHelper",function(){return Fs}),n.d(t,"SpotLightHelper",function(){return Bs}),n.d(t,"SkeletonHelper",function(){return Us}),n.d(t,"PointLightHelper",function(){return Hs}),n.d(t,"RectAreaLightHelper",function(){return Vs}),n.d(t,"HemisphereLightHelper",function(){return Gs}),n.d(t,"GridHelper",function(){return js}),n.d(t,"PolarGridHelper",function(){return Ws}),n.d(t,"FaceNormalsHelper",function(){return qs}),n.d(t,"DirectionalLightHelper",function(){return Xs}),n.d(t,"CameraHelper",function(){return Ys}),n.d(t,"BoxHelper",function(){return Js}),n.d(t,"Box3Helper",function(){return Zs}),n.d(t,"PlaneHelper",function(){return Ks}),n.d(t,"ArrowHelper",function(){return Qs}),n.d(t,"AxesHelper",function(){return $s}),n.d(t,"Shape",function(){return xa}),n.d(t,"Path",function(){return ba}),n.d(t,"ShapePath",function(){return rs}),n.d(t,"Font",function(){return os}),n.d(t,"CurvePath",function(){return ya}),n.d(t,"Curve",function(){return $o}),n.d(t,"ShapeUtils",function(){return so}),n.d(t,"WebGLUtils",function(){return Zi}),n.d(t,"WireframeGeometry",function(){return br}),n.d(t,"ParametricGeometry",function(){return xr}),n.d(t,"ParametricBufferGeometry",function(){return _r}),n.d(t,"TetrahedronGeometry",function(){return Er}),n.d(t,"TetrahedronBufferGeometry",function(){return Sr}),n.d(t,"OctahedronGeometry",function(){return Cr}),n.d(t,"OctahedronBufferGeometry",function(){return Tr}),n.d(t,"IcosahedronGeometry",function(){return Rr}),n.d(t,"IcosahedronBufferGeometry",function(){return Lr}),n.d(t,"DodecahedronGeometry",function(){return Pr}),n.d(t,"DodecahedronBufferGeometry",function(){return kr}),n.d(t,"PolyhedronGeometry",function(){return wr}),n.d(t,"PolyhedronBufferGeometry",function(){return Mr}),n.d(t,"TubeGeometry",function(){return Nr}),n.d(t,"TubeBufferGeometry",function(){return Or}),n.d(t,"TorusKnotGeometry",function(){return zr}),n.d(t,"TorusKnotBufferGeometry",function(){return Dr}),n.d(t,"TorusGeometry",function(){return Ir}),n.d(t,"TorusBufferGeometry",function(){return Fr}),n.d(t,"TextGeometry",function(){return fo}),n.d(t,"TextBufferGeometry",function(){return mo}),n.d(t,"SphereGeometry",function(){return go}),n.d(t,"SphereBufferGeometry",function(){return vo}),n.d(t,"RingGeometry",function(){return Ao}),n.d(t,"RingBufferGeometry",function(){return yo}),n.d(t,"PlaneGeometry",function(){return Ln}),n.d(t,"PlaneBufferGeometry",function(){return Pn}),n.d(t,"LatheGeometry",function(){return bo}),n.d(t,"LatheBufferGeometry",function(){return xo}),n.d(t,"ShapeGeometry",function(){return _o}),n.d(t,"ShapeBufferGeometry",function(){return wo}),n.d(t,"ExtrudeGeometry",function(){return uo}),n.d(t,"ExtrudeBufferGeometry",function(){return ho}),n.d(t,"EdgesGeometry",function(){return Eo}),n.d(t,"ConeGeometry",function(){return To}),n.d(t,"ConeBufferGeometry",function(){return Ro}),n.d(t,"CylinderGeometry",function(){return So}),n.d(t,"CylinderBufferGeometry",function(){return Co}),n.d(t,"CircleGeometry",function(){return Lo}),n.d(t,"CircleBufferGeometry",function(){return Po}),n.d(t,"BoxGeometry",function(){return Tn}),n.d(t,"BoxBufferGeometry",function(){return Rn}),n.d(t,"ShadowMaterial",function(){return No}),n.d(t,"SpriteMaterial",function(){return rr}),n.d(t,"RawShaderMaterial",function(){return Oo}),n.d(t,"ShaderMaterial",function(){return zn}),n.d(t,"PointsMaterial",function(){return fr}),n.d(t,"MeshPhysicalMaterial",function(){return Do}),n.d(t,"MeshStandardMaterial",function(){return zo}),n.d(t,"MeshPhongMaterial",function(){return Io}),n.d(t,"MeshToonMaterial",function(){return Fo}),n.d(t,"MeshNormalMaterial",function(){return Bo}),n.d(t,"MeshLambertMaterial",function(){return Uo}),n.d(t,"MeshDepthMaterial",function(){return ji}),n.d(t,"MeshDistanceMaterial",function(){return Wi}),n.d(t,"MeshBasicMaterial",function(){return On}),n.d(t,"LineDashedMaterial",function(){return Ho}),n.d(t,"LineBasicMaterial",function(){return ur}),n.d(t,"Material",function(){return Nn}),n.d(t,"Float64BufferAttribute",function(){return wn}),n.d(t,"Float32BufferAttribute",function(){return _n}),n.d(t,"Uint32BufferAttribute",function(){return xn}),n.d(t,"Int32BufferAttribute",function(){return bn}),n.d(t,"Uint16BufferAttribute",function(){return yn}),n.d(t,"Int16BufferAttribute",function(){return An}),n.d(t,"Uint8ClampedBufferAttribute",function(){return vn}),n.d(t,"Uint8BufferAttribute",function(){return gn}),n.d(t,"Int8BufferAttribute",function(){return mn}),n.d(t,"BufferAttribute",function(){return fn}),n.d(t,"ArcCurve",function(){return ta}),n.d(t,"CatmullRomCurve3",function(){return sa}),n.d(t,"CubicBezierCurve",function(){return da}),n.d(t,"CubicBezierCurve3",function(){return ha}),n.d(t,"EllipseCurve",function(){return ea}),n.d(t,"LineCurve",function(){return pa}),n.d(t,"LineCurve3",function(){return fa}),n.d(t,"QuadraticBezierCurve",function(){return ma}),n.d(t,"QuadraticBezierCurve3",function(){return ga}),n.d(t,"SplineCurve",function(){return va}),n.d(t,"REVISION",function(){return r}),n.d(t,"MOUSE",function(){return o}),n.d(t,"CullFaceNone",function(){return a}),n.d(t,"CullFaceBack",function(){return s}),n.d(t,"CullFaceFront",function(){return l}),n.d(t,"CullFaceFrontBack",function(){return c}),n.d(t,"FrontFaceDirectionCW",function(){return u}),n.d(t,"FrontFaceDirectionCCW",function(){return d}),n.d(t,"BasicShadowMap",function(){return h}),n.d(t,"PCFShadowMap",function(){return p}),n.d(t,"PCFSoftShadowMap",function(){return f}),n.d(t,"FrontSide",function(){return m}),n.d(t,"BackSide",function(){return g}),n.d(t,"DoubleSide",function(){return v}),n.d(t,"FlatShading",function(){return A}),n.d(t,"SmoothShading",function(){return y}),n.d(t,"NoColors",function(){return b}),n.d(t,"FaceColors",function(){return x}),n.d(t,"VertexColors",function(){return _}),n.d(t,"NoBlending",function(){return w}),n.d(t,"NormalBlending",function(){return M}),n.d(t,"AdditiveBlending",function(){return E}),n.d(t,"SubtractiveBlending",function(){return S}),n.d(t,"MultiplyBlending",function(){return C}),n.d(t,"CustomBlending",function(){return T}),n.d(t,"AddEquation",function(){return R}),n.d(t,"SubtractEquation",function(){return L}),n.d(t,"ReverseSubtractEquation",function(){return P}),n.d(t,"MinEquation",function(){return k}),n.d(t,"MaxEquation",function(){return N}),n.d(t,"ZeroFactor",function(){return O}),n.d(t,"OneFactor",function(){return z}),n.d(t,"SrcColorFactor",function(){return D}),n.d(t,"OneMinusSrcColorFactor",function(){return I}),n.d(t,"SrcAlphaFactor",function(){return F}),n.d(t,"OneMinusSrcAlphaFactor",function(){return B}),n.d(t,"DstAlphaFactor",function(){return U}),n.d(t,"OneMinusDstAlphaFactor",function(){return H}),n.d(t,"DstColorFactor",function(){return V}),n.d(t,"OneMinusDstColorFactor",function(){return G}),n.d(t,"SrcAlphaSaturateFactor",function(){return j}),n.d(t,"NeverDepth",function(){return W}),n.d(t,"AlwaysDepth",function(){return q}),n.d(t,"LessDepth",function(){return X}),n.d(t,"LessEqualDepth",function(){return Y}),n.d(t,"EqualDepth",function(){return J}),n.d(t,"GreaterEqualDepth",function(){return Z}),n.d(t,"GreaterDepth",function(){return K}),n.d(t,"NotEqualDepth",function(){return Q}),n.d(t,"MultiplyOperation",function(){return $}),n.d(t,"MixOperation",function(){return ee}),n.d(t,"AddOperation",function(){return te}),n.d(t,"NoToneMapping",function(){return ne}),n.d(t,"LinearToneMapping",function(){return ie}),n.d(t,"ReinhardToneMapping",function(){return re}),n.d(t,"Uncharted2ToneMapping",function(){return oe}),n.d(t,"CineonToneMapping",function(){return ae}),n.d(t,"UVMapping",function(){return se}),n.d(t,"CubeReflectionMapping",function(){return le}),n.d(t,"CubeRefractionMapping",function(){return ce}),n.d(t,"EquirectangularReflectionMapping",function(){return ue}),n.d(t,"EquirectangularRefractionMapping",function(){return de}),n.d(t,"SphericalReflectionMapping",function(){return he}),n.d(t,"CubeUVReflectionMapping",function(){return pe}),n.d(t,"CubeUVRefractionMapping",function(){return fe}),n.d(t,"RepeatWrapping",function(){return me}),n.d(t,"ClampToEdgeWrapping",function(){return ge}),n.d(t,"MirroredRepeatWrapping",function(){return ve}),n.d(t,"NearestFilter",function(){return Ae}),n.d(t,"NearestMipMapNearestFilter",function(){return ye}),n.d(t,"NearestMipMapLinearFilter",function(){return be}),n.d(t,"LinearFilter",function(){return xe}),n.d(t,"LinearMipMapNearestFilter",function(){return _e}),n.d(t,"LinearMipMapLinearFilter",function(){return we}),n.d(t,"UnsignedByteType",function(){return Me}),n.d(t,"ByteType",function(){return Ee}),n.d(t,"ShortType",function(){return Se}),n.d(t,"UnsignedShortType",function(){return Ce}),n.d(t,"IntType",function(){return Te}),n.d(t,"UnsignedIntType",function(){return Re}),n.d(t,"FloatType",function(){return Le}),n.d(t,"HalfFloatType",function(){return Pe}),n.d(t,"UnsignedShort4444Type",function(){return ke}),n.d(t,"UnsignedShort5551Type",function(){return Ne}),n.d(t,"UnsignedShort565Type",function(){return Oe}),n.d(t,"UnsignedInt248Type",function(){return ze}),n.d(t,"AlphaFormat",function(){return De}),n.d(t,"RGBFormat",function(){return Ie}),n.d(t,"RGBAFormat",function(){return Fe}),n.d(t,"LuminanceFormat",function(){return Be}),n.d(t,"LuminanceAlphaFormat",function(){return Ue}),n.d(t,"RGBEFormat",function(){return He}),n.d(t,"DepthFormat",function(){return Ve}),n.d(t,"DepthStencilFormat",function(){return Ge}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return je}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return We}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return qe}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return Xe}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return Ye}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return Je}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Ze}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return Ke}),n.d(t,"RGB_ETC1_Format",function(){return Qe}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return $e}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return et}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return tt}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return nt}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return it}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return rt}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return ot}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return at}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return st}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return lt}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return ct}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return ut}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return dt}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return ht}),n.d(t,"LoopOnce",function(){return pt}),n.d(t,"LoopRepeat",function(){return ft}),n.d(t,"LoopPingPong",function(){return mt}),n.d(t,"InterpolateDiscrete",function(){return gt}),n.d(t,"InterpolateLinear",function(){return vt}),n.d(t,"InterpolateSmooth",function(){return At}),n.d(t,"ZeroCurvatureEnding",function(){return yt}),n.d(t,"ZeroSlopeEnding",function(){return bt}),n.d(t,"WrapAroundEnding",function(){return xt}),n.d(t,"TrianglesDrawMode",function(){return _t}),n.d(t,"TriangleStripDrawMode",function(){return wt}),n.d(t,"TriangleFanDrawMode",function(){return Mt}),n.d(t,"LinearEncoding",function(){return Et}),n.d(t,"sRGBEncoding",function(){return St}),n.d(t,"GammaEncoding",function(){return Ct}),n.d(t,"RGBEEncoding",function(){return Tt}),n.d(t,"LogLuvEncoding",function(){return Rt}),n.d(t,"RGBM7Encoding",function(){return Lt}),n.d(t,"RGBM16Encoding",function(){return Pt}),n.d(t,"RGBDEncoding",function(){return kt}),n.d(t,"BasicDepthPacking",function(){return Nt}),n.d(t,"RGBADepthPacking",function(){return Ot}),n.d(t,"CubeGeometry",function(){return Tn}),n.d(t,"Face4",function(){return el}),n.d(t,"LineStrip",function(){return tl}),n.d(t,"LinePieces",function(){return nl}),n.d(t,"MeshFaceMaterial",function(){return il}),n.d(t,"MultiMaterial",function(){return rl}),n.d(t,"PointCloud",function(){return ol}),n.d(t,"Particle",function(){return al}),n.d(t,"ParticleSystem",function(){return sl}),n.d(t,"PointCloudMaterial",function(){return ll}),n.d(t,"ParticleBasicMaterial",function(){return cl}),n.d(t,"ParticleSystemMaterial",function(){return ul}),n.d(t,"Vertex",function(){return dl}),n.d(t,"DynamicBufferAttribute",function(){return hl}),n.d(t,"Int8Attribute",function(){return pl}),n.d(t,"Uint8Attribute",function(){return fl}),n.d(t,"Uint8ClampedAttribute",function(){return ml}),n.d(t,"Int16Attribute",function(){return gl}),n.d(t,"Uint16Attribute",function(){return vl}),n.d(t,"Int32Attribute",function(){return Al}),n.d(t,"Uint32Attribute",function(){return yl}),n.d(t,"Float32Attribute",function(){return bl}),n.d(t,"Float64Attribute",function(){return xl}),n.d(t,"ClosedSplineCurve3",function(){return _l}),n.d(t,"SplineCurve3",function(){return wl}),n.d(t,"Spline",function(){return Ml}),n.d(t,"AxisHelper",function(){return El}),n.d(t,"BoundingBoxHelper",function(){return Sl}),n.d(t,"EdgesHelper",function(){return Cl}),n.d(t,"WireframeHelper",function(){return Tl}),n.d(t,"XHRLoader",function(){return Rl}),n.d(t,"BinaryTextureLoader",function(){return Ll}),n.d(t,"GeometryUtils",function(){return Pl}),n.d(t,"ImageUtils",function(){return kl}),n.d(t,"Projector",function(){return Nl}),n.d(t,"CanvasRenderer",function(){return Ol}),n.d(t,"SceneUtils",function(){return zl}),n.d(t,"LensFlare",function(){return Dl}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var r="92",o={LEFT:0,MIDDLE:1,RIGHT:2},a=0,s=1,l=2,c=3,u=0,d=1,h=0,p=1,f=2,m=0,g=1,v=2,A=1,y=2,b=0,x=1,_=2,w=0,M=1,E=2,S=3,C=4,T=5,R=100,L=101,P=102,k=103,N=104,O=200,z=201,D=202,I=203,F=204,B=205,U=206,H=207,V=208,G=209,j=210,W=0,q=1,X=2,Y=3,J=4,Z=5,K=6,Q=7,$=0,ee=1,te=2,ne=0,ie=1,re=2,oe=3,ae=4,se=300,le=301,ce=302,ue=303,de=304,he=305,pe=306,fe=307,me=1e3,ge=1001,ve=1002,Ae=1003,ye=1004,be=1005,xe=1006,_e=1007,we=1008,Me=1009,Ee=1010,Se=1011,Ce=1012,Te=1013,Re=1014,Le=1015,Pe=1016,ke=1017,Ne=1018,Oe=1019,ze=1020,De=1021,Ie=1022,Fe=1023,Be=1024,Ue=1025,He=Fe,Ve=1026,Ge=1027,je=33776,We=33777,qe=33778,Xe=33779,Ye=35840,Je=35841,Ze=35842,Ke=35843,Qe=36196,$e=37808,et=37809,tt=37810,nt=37811,it=37812,rt=37813,ot=37814,at=37815,st=37816,lt=37817,ct=37818,ut=37819,dt=37820,ht=37821,pt=2200,ft=2201,mt=2202,gt=2300,vt=2301,At=2302,yt=2400,bt=2401,xt=2402,_t=0,wt=1,Mt=2,Et=3e3,St=3001,Ct=3007,Tt=3002,Rt=3003,Lt=3004,Pt=3005,kt=3006,Nt=3200,Ot=3201,zt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*zt.DEG2RAD},radToDeg:function(e){return e*zt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Dt(e,t){this.x=e||0,this.y=t||0}function It(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Ft(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function Bt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Ut(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Dt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Dt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new Dt,t=new Dt;return function(n,i){return e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}}),Object.assign(It.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new It).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Bt;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var d=o*c,h=o*u,p=a*c,f=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=h+p*l,t[5]=d-f*l,t[9]=-a*s,t[2]=f-d*l,t[6]=p+h*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,g=s*u,v=l*c,A=l*u;t[0]=m+A*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=g*a-v,t[6]=A+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*c,g=s*u,v=l*c,A=l*u;t[0]=m-A*a,t[4]=-o*u,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*c,t[9]=A-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){d=o*c,h=o*u,p=a*c,f=a*u;t[0]=s*c,t[4]=p*l-h,t[8]=d*l+f,t[1]=s*u,t[5]=f*l+d,t[9]=h*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var y=o*s,b=o*l,x=a*s,_=a*l;t[0]=s*c,t[4]=_-y*u,t[8]=x*u+b,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=b*u+x,t[10]=y-_*u}else if("XZY"===e.order){y=o*s,b=o*l,x=a*s,_=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=y*u+_,t[5]=o*c,t[9]=b*u-x,t[2]=x*u-b,t[6]=a*c,t[10]=_*u+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,o=e._w,a=n+n,s=i+i,l=r+r,c=n*a,u=n*s,d=n*l,h=i*s,p=i*l,f=r*l,m=o*a,g=o*s,v=o*l;return t[0]=1-(h+f),t[4]=u-v,t[8]=d+g,t[1]=u+v,t[5]=1-(c+f),t[9]=p-m,t[2]=d-g,t[6]=p+m,t[10]=1-(c+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new Bt,t=new Bt,n=new Bt;return function(i,r,o){var a=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],A=n[7],y=n[11],b=n[15],x=i[0],_=i[4],w=i[8],M=i[12],E=i[1],S=i[5],C=i[9],T=i[13],R=i[2],L=i[6],P=i[10],k=i[14],N=i[3],O=i[7],z=i[11],D=i[15];return r[0]=o*x+a*E+s*R+l*N,r[4]=o*_+a*S+s*L+l*O,r[8]=o*w+a*C+s*P+l*z,r[12]=o*M+a*T+s*k+l*D,r[1]=c*x+u*E+d*R+h*N,r[5]=c*_+u*S+d*L+h*O,r[9]=c*w+u*C+d*P+h*z,r[13]=c*M+u*T+d*k+h*D,r[2]=p*x+f*E+m*R+g*N,r[6]=p*_+f*S+m*L+g*O,r[10]=p*w+f*C+m*P+g*z,r[14]=p*M+f*T+m*k+g*D,r[3]=v*x+A*E+y*R+b*N,r[7]=v*_+A*S+y*L+b*O,r[11]=v*w+A*C+y*P+b*z,r[15]=v*M+A*T+y*k+b*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Bt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+r*s*u-i*l*u-r*a*d+n*l*d+i*a*h-n*s*h)+e[7]*(+t*s*h-t*l*d+r*o*d-i*o*h+i*l*c-r*s*c)+e[11]*(+t*l*u-t*a*h-r*o*u+n*o*h+r*a*c-n*l*c)+e[15]*(-i*a*c-t*s*u+t*a*d+i*o*u-n*o*d+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],A=i[14],y=i[15],b=p*A*d-v*f*d+v*u*m-c*A*m-p*u*y+c*f*y,x=g*f*d-h*A*d-g*u*m+l*A*m+h*u*y-l*f*y,_=h*v*d-g*p*d+g*c*m-l*v*m-h*c*y+l*p*y,w=g*p*u-h*v*u-g*c*f+l*v*f+h*c*A-l*p*A,M=r*b+o*x+a*_+s*w;if(0===M){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var S=1/M;return n[0]=b*S,n[1]=(v*f*s-p*A*s-v*a*m+o*A*m+p*a*y-o*f*y)*S,n[2]=(c*A*s-v*u*s+v*a*d-o*A*d-c*a*y+o*u*y)*S,n[3]=(p*u*s-c*f*s-p*a*d+o*f*d+c*a*m-o*u*m)*S,n[4]=x*S,n[5]=(h*A*s-g*f*s+g*a*m-r*A*m-h*a*y+r*f*y)*S,n[6]=(g*u*s-l*A*s-g*a*d+r*A*d+l*a*y-r*u*y)*S,n[7]=(l*f*s-h*u*s+h*a*d-r*f*d-l*a*m+r*u*m)*S,n[8]=_*S,n[9]=(g*p*s-h*v*s-g*o*m+r*v*m+h*o*y-r*p*y)*S,n[10]=(l*v*s-g*c*s+g*o*d-r*v*d-l*o*y+r*c*y)*S,n[11]=(h*c*s-l*p*s-h*o*d+r*p*d+l*o*m-r*c*m)*S,n[12]=w*S,n[13]=(h*v*a-g*p*a+g*o*f-r*v*f-h*o*A+r*p*A)*S,n[14]=(g*c*a-l*v*a-g*o*u+r*v*u+l*o*A-r*c*A)*S,n[15]=(l*p*a-h*c*a+h*o*u-r*p*u-l*o*f+r*c*f)*S,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new Bt,t=new It;return function(n,i,r){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var c=1/a,u=1/s,d=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,i.setFromRotationMatrix(t),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),d=-(o+r)/(o-r),h=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){var a=this.elements,s=1/(t-e),l=1/(n-i),c=1/(o-r),u=(t+e)*s,d=(n+i)*l,h=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Ft,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,a){var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],d=r[o+0],h=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==d||l!==h||c!==p){var m=1-a,g=s*d+l*h+c*p+u*f,v=g>=0?1:-1,A=1-g*g;if(A>Number.EPSILON){var y=Math.sqrt(A),b=Math.atan2(y,g*v);m=Math.sin(m*b)/y,a=Math.sin(a*b)/y}var x=a*v;if(s=s*m+d*x,l=l*m+h*x,c=c*m+p*x,u=u*m+f*x,m===1-a){var _=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=_,l*=_,c*=_,u*=_}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(Ft.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Ft.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),d=s(n/2),h=s(i/2),p=s(r/2);return"XYZ"===o?(this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p):"YXZ"===o?(this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p):"ZXY"===o?(this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p):"ZYX"===o?(this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p):"YZX"===o?(this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p):"XZY"===o&&(this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=i+s+d;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-r)*t):i>s&&i>d?(t=2*Math.sqrt(1+i-s-d),this._w=(u-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(o+c)/t):s>d?(t=2*Math.sqrt(1+s-i-d),this._w=(o-c)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+d-i-s),this._w=(a-r)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Bt;return function(n,i){return void 0===t&&(t=new Bt),(e=n.dot(i)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(s,a),c=Math.sin((1-t)*l)/s,u=Math.sin(t*l)/s;return this._w=o*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Bt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Ft;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new Ft;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*i-a*n,c=s*n+a*t-r*i,u=s*i+r*n-o*t,d=-r*t-o*n-a*i;return this.x=l*s+d*-r+c*-a-u*-o,this.y=c*s+d*-o+u*-r-l*-a,this.z=u*s+d*-a+l*-o-c*-r,this},project:function(){var e=new It;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new It;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Bt,t=new Bt;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Bt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Bt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(zt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Ut.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,a,s,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Bt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],A=i[4],y=i[7],b=i[2],x=i[5],_=i[8];return r[0]=o*f+a*v+s*b,r[3]=o*m+a*A+s*x,r[6]=o*g+a*y+s*_,r[1]=l*f+c*v+u*b,r[4]=l*m+c*A+u*x,r[7]=l*g+c*y+u*_,r[2]=d*f+h*v+p*b,r[5]=d*m+h*A+p*x,r[8]=d*g+h*y+p*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*r*c+n*a*s+i*r*l-i*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],d=n[7],h=n[8],p=h*l-c*d,f=c*u-h*s,m=d*s-l*u,g=r*p+o*f+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var A=1/g;return i[0]=p*A,i[1]=(a*d-h*o)*A,i[2]=(c*o-a*l)*A,i[3]=f*A,i[4]=(h*r-a*u)*A,i[5]=(a*s-c*r)*A,i[6]=m*A,i[7]=(o*u-d*r)*A,i[8]=(l*r-o*s)*A,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-i*l,i*s,-i*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*l,i[6]=t*a+n*c,i[1]=-n*r+t*s,i[4]=-n*o+t*l,i[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Ht=0;function Vt(e,t,n,i,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:Ht++}),this.uuid=zt.generateUUID(),this.name="",this.image=void 0!==e?e:Vt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Vt.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ge,this.wrapT=void 0!==i?i:ge,this.magFilter=void 0!==r?r:xe,this.minFilter=void 0!==o?o:we,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Fe,this.type=void 0!==s?s:Me,this.offset=new Dt(0,0),this.repeat=new Dt(1,1),this.center=new Dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ut,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Et,this.version=0,this.onUpdate=null}function Gt(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function jt(e,t,n){this.width=e,this.height=t,this.scissor=new Gt(0,0,e,t),this.scissorTest=!1,this.viewport=new Gt(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=xe),this.texture=new Vt(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Wt(e,t,n){jt.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function qt(e,t,n,i,r,o,a,s,l,c,u,d){Vt.call(this,null,o,a,s,l,c,i,r,u,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:Ae,this.minFilter=void 0!==c?c:Ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Xt(e,t){this.min=void 0!==e?e:new Bt(1/0,1/0,1/0),this.max=void 0!==t?t:new Bt(-1/0,-1/0,-1/0)}function Yt(e,t){this.center=void 0!==e?e:new Bt,this.radius=void 0!==t?t:0}function Jt(e,t){this.normal=void 0!==e?e:new Bt(1,0,0),this.constant=void 0!==t?t:0}function Zt(e,t,n,i,r,o){this.planes=[void 0!==e?e:new Jt,void 0!==t?t:new Jt,void 0!==n?n:new Jt,void 0!==i?i:new Jt,void 0!==r?r:new Jt,void 0!==o?o:new Jt]}Vt.DEFAULT_IMAGE=void 0,Vt.DEFAULT_MAPPING=se,Vt.prototype=Object.assign(Object.create(i.prototype),{constructor:Vt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=zt.generateUUID()),t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===se){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case me:e.x=e.x-Math.floor(e.x);break;case ge:e.x=e.x<0?0:1;break;case ve:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case me:e.y=e.y-Math.floor(e.y);break;case ge:e.y=e.y<0?0:1;break;case ve:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(Vt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Gt.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],d=o[9],h=o[2],p=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-h)<.01&&Math.abs(d-p)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+h)<.1&&Math.abs(d+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(u+1)/2,v=(f+1)/2,A=(s+c)/4,y=(l+h)/4,b=(d+p)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=A/(n=Math.sqrt(m)),r=y/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=A/(i=Math.sqrt(g)),r=b/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=y/(r=Math.sqrt(v)),i=b/r),this.set(n,i,r,t),this}var x=Math.sqrt((p-d)*(p-d)+(l-h)*(l-h)+(c-s)*(c-s));return Math.abs(x)<.001&&(x=1),this.x=(p-d)/x,this.y=(l-h)/x,this.z=(c-s)/x,this.w=Math.acos((a+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new Gt,t=new Gt),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),jt.prototype=Object.assign(Object.create(i.prototype),{constructor:jt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Wt.prototype=Object.create(jt.prototype),Wt.prototype.constructor=Wt,Wt.prototype.isWebGLRenderTargetCube=!0,qt.prototype=Object.create(Vt.prototype),qt.prototype.constructor=qt,qt.prototype.isDataTexture=!0,Object.assign(Xt.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],d=e[s+2];c<t&&(t=c),u<n&&(n=u),d<i&&(i=d),c>r&&(r=c),u>o&&(o=u),d>a&&(a=d)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),d=e.getZ(s);c<t&&(t=c),u<n&&(n=u),d<i&&(i=d),c>r&&(r=c),u>o&&(o=u),d>a&&(a=d)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Bt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Bt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Bt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,i=new Bt;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)i.copy(a[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)i.fromBufferAttribute(s,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Bt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Bt;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new Bt,t=new Bt,n=new Bt,i=new Bt,r=new Bt,o=new Bt,a=new Bt,s=new Bt,l=new Bt,c=new Bt;function u(i){var r,o;for(r=0,o=i.length-3;r<=o;r+=3){a.fromArray(i,r);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=e.dot(a),u=t.dot(a),d=n.dot(a);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),i.subVectors(t,e),r.subVectors(n,t),o.subVectors(e,n);var d=[0,-i.z,i.y,0,-r.z,r.y,0,-o.z,o.y,i.z,0,-i.x,r.z,0,-r.x,o.z,0,-o.x,-i.y,i.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!u(d)&&(!!u(d=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,r),u(d=[c.x,c.y,c.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Bt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Bt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Bt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new Yt),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt,new Bt];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Yt.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Xt;return function(t,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(t).getCenter(i);for(var r=0,o=0,a=t.length;o<a;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Bt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Xt),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Jt.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Bt,t=new Bt;return function(n,i,r){var o=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Bt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Bt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Bt);var i=t.delta(e),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Bt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Bt,t=new Ut;return function(n,i){var r=i||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Zt.prototype,{set:function(e,t,n,i,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],A=n[15];return t[0].setComponents(a-i,u-s,f-d,A-m).normalize(),t[1].setComponents(a+i,u+s,f+d,A+m).normalize(),t[2].setComponents(a+r,u+l,f+h,A+g).normalize(),t[3].setComponents(a-r,u-l,f-h,A-g).normalize(),t[4].setComponents(a-o,u-c,f-p,A-v).normalize(),t[5].setComponents(a+o,u+c,f+p,A+v).normalize(),this},intersectsObject:function(){var e=new Yt;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Yt;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var e=new Bt,t=new Bt;return function(n){for(var i=this.planes,r=0;r<6;r++){var o=i[r];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Kt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Qt={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}},$t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function en(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(en.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=zt.euclideanModulo(t,1),n=zt.clamp(n,0,1),i=zt.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=e(o,r,t+1/3),this.g=e(o,r,t),this.b=e(o,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,u=(c=n[1]).length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=$t[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=l<=.5?c/(a+s):c/(2-a-s),a){case i:t=(r-o)/c+(r<o?6:0);break;case r:t=(o-i)/c+2;break;case o:t=(i-r)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,i){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=i,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var tn={common:{diffuse:{value:new en(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ut},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new en(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new en(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Ut}}},nn={basic:{uniforms:Qt.merge([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.fog]),vertexShader:Kt.meshbasic_vert,fragmentShader:Kt.meshbasic_frag},lambert:{uniforms:Qt.merge([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.fog,tn.lights,{emissive:{value:new en(0)}}]),vertexShader:Kt.meshlambert_vert,fragmentShader:Kt.meshlambert_frag},phong:{uniforms:Qt.merge([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.gradientmap,tn.fog,tn.lights,{emissive:{value:new en(0)},specular:{value:new en(1118481)},shininess:{value:30}}]),vertexShader:Kt.meshphong_vert,fragmentShader:Kt.meshphong_frag},standard:{uniforms:Qt.merge([tn.common,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.roughnessmap,tn.metalnessmap,tn.fog,tn.lights,{emissive:{value:new en(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag},points:{uniforms:Qt.merge([tn.points,tn.fog]),vertexShader:Kt.points_vert,fragmentShader:Kt.points_frag},dashed:{uniforms:Qt.merge([tn.common,tn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Kt.linedashed_vert,fragmentShader:Kt.linedashed_frag},depth:{uniforms:Qt.merge([tn.common,tn.displacementmap]),vertexShader:Kt.depth_vert,fragmentShader:Kt.depth_frag},normal:{uniforms:Qt.merge([tn.common,tn.bumpmap,tn.normalmap,tn.displacementmap,{opacity:{value:1}}]),vertexShader:Kt.normal_vert,fragmentShader:Kt.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Kt.cube_vert,fragmentShader:Kt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Kt.equirect_vert,fragmentShader:Kt.equirect_frag},distanceRGBA:{uniforms:Qt.merge([tn.common,tn.displacementmap,{referencePosition:{value:new Bt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Kt.distanceRGBA_vert,fragmentShader:Kt.distanceRGBA_frag},shadow:{uniforms:Qt.merge([tn.lights,tn.fog,{color:{value:new en(0)},opacity:{value:1}}]),vertexShader:Kt.shadow_vert,fragmentShader:Kt.shadow_frag}};function rn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();var a=e.FLOAT;return i instanceof Float32Array?a=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=e.UNSIGNED_SHORT:i instanceof Int16Array?a=e.SHORT:i instanceof Uint32Array?a=e.UNSIGNED_INT:i instanceof Int32Array?a=e.INT:i instanceof Int8Array?a=e.BYTE:i instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(function(t,n,i){var r=n.array,o=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===o.count?e.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function on(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||on.DefaultOrder}function an(){this.mask=1}nn.physical={uniforms:Qt.merge([nn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag},on.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],on.DefaultOrder="XYZ",Object.defineProperties(on.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(on.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=zt.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],p=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(h,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new It;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Ft;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Bt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(an.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var sn=0;function ln(){Object.defineProperty(this,"id",{value:sn++}),this.uuid=zt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DefaultUp.clone();var e=new Bt,t=new on,n=new Ft,i=new Bt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new It},normalMatrix:{value:new Ut}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=ln.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new an,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function cn(){ln.call(this),this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It}function un(e,t,n,i,r,o){cn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function dn(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Bt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new en,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}ln.DefaultUp=new Bt(0,1,0),ln.DefaultMatrixAutoUpdate=!0,ln.prototype=Object.assign(Object.create(i.prototype),{constructor:ln,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Ft;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new Ft;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Bt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Bt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Bt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Bt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Bt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Bt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Bt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new It;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new It,t=new Bt;return function(n,i,r){n.isVector3?t.copy(n):t.set(n,i,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Bt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Bt,t=new Bt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new Ft),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new Bt,t=new Ft;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Bt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Ft;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Bt),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),void 0!==this.geometry){i.geometry=r(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];r(e.shapes,c)}else r(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(r(e.materials,this.material[s]));i.material=u}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(t){var d=m(e.geometries),h=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes);d.length>0&&(n.geometries=d),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),cn.prototype=Object.assign(Object.create(ln.prototype),{constructor:cn,isCamera:!0,copy:function(e,t){return ln.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Ft;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Bt),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){ln.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),un.prototype=Object.assign(Object.create(cn.prototype),{constructor:un,isOrthographicCamera:!0,copy:function(e,t){return cn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;o=(r+=u*(this.view.offsetX/l))+u*(this.view.width/l),s=(a-=d*(this.view.offsetY/c))-d*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far)},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(dn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var hn=0;function pn(){Object.defineProperty(this,"id",{value:hn+=2}),this.uuid=zt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function fn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function mn(e,t,n){fn.call(this,new Int8Array(e),t,n)}function gn(e,t,n){fn.call(this,new Uint8Array(e),t,n)}function vn(e,t,n){fn.call(this,new Uint8ClampedArray(e),t,n)}function An(e,t,n){fn.call(this,new Int16Array(e),t,n)}function yn(e,t,n){fn.call(this,new Uint16Array(e),t,n)}function bn(e,t,n){fn.call(this,new Int32Array(e),t,n)}function xn(e,t,n){fn.call(this,new Uint32Array(e),t,n)}function _n(e,t,n){fn.call(this,new Float32Array(e),t,n)}function wn(e,t,n){fn.call(this,new Float64Array(e),t,n)}function Mn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function En(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}pn.prototype=Object.assign(Object.create(i.prototype),{constructor:pn,isGeometry:!0,applyMatrix:function(e){for(var t=(new Ut).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new It;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new It;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new It;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new It;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new It;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ln;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=[],u=[],d=[],h=0,p=0;h<r.length;h+=3,p+=2)t.vertices.push(new Bt(r[h],r[h+1],r[h+2])),void 0!==o&&c.push(new Bt(o[h],o[h+1],o[h+2])),void 0!==a&&t.colors.push(new en(a[h],a[h+1],a[h+2])),void 0!==s&&u.push(new Dt(s[p],s[p+1])),void 0!==l&&d.push(new Dt(l[p],l[p+1]));function f(e,n,i,r){var h=new dn(e,n,i,void 0!==o?[c[e].clone(),c[n].clone(),c[i].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()]:[],r);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[i].clone()]),void 0!==l&&t.faceVertexUvs[1].push([d[e].clone(),d[n].clone(),d[i].clone()])}var m=e.groups;if(m.length>0)for(h=0;h<m.length;h++)for(var g=m[h],v=g.start,A=(p=v,v+g.count);p<A;p+=3)void 0!==n?f(n[p],n[p+1],n[p+2],g.materialIndex):f(p,p+1,p+2,g.materialIndex);else if(void 0!==n)for(h=0;h<n.length;h+=3)f(n[h],n[h+1],n[h+2]);else for(h=0;h<r.length/3;h+=3)f(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new Bt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new It;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Bt,t=new Bt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Bt;if(e){var s,l,c,u=new Bt,d=new Bt;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),d.subVectors(s,l),u.cross(d),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)a[(o=this.faces[i]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var h=(o=this.faces[i]).vertexNormals;3===h.length?(h[0].copy(a[o.a]),h[1].copy(a[o.b]),h[2].copy(a[o.c])):(h[0]=a[o.a].clone(),h[1]=a[o.b].clone(),h[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new pn;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Bt,c={a:new Bt,b:new Bt,c:new Bt},a.push(l),s.push(c)}var l,c,u=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=u.faceNormals[n],c=u.vertexNormals[n],l.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Yt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],d=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Ut).getNormalMatrix(t));for(var p=0,f=a.length;p<f;p++){var m=a[p].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(p=0,f=h.length;p<f;p++)d.push(h[p].clone());for(p=0,f=l.length;p<f;p++){var g,v,A,y=l[p],b=y.vertexNormals,x=y.vertexColors;(g=new dn(y.a+r,y.b+r,y.c+r)).normal.copy(y.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var _=0,w=b.length;_<w;_++)v=b[_].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);g.color.copy(y.color);for(_=0,w=x.length;_<w;_++)A=x[_],g.vertexColors.push(A.clone());g.materialIndex=y.materialIndex+n,s.push(g)}for(p=0,f=u.length;p<f;p++){var M=u[p],E=[];if(void 0!==M){for(_=0,w=M.length;_<w;_++)E.push(M[_].clone());c.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,o,a,s,l={},c=[],u=[],d=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=n,c.push(this.vertices[n]),u[n]=c.length-1):u[n]=u[l[t]];var h=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var f=h[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Bt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(i=[]),a&&a.length===t&&(r=[]);for(n=0;n<t;n++){var s=e[n]._id;i&&i.push(o[s]),r&&r.push(a[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}var a=[],s=[],l={},c=[],u={},d=[],h={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,A=p.vertexColors.length>0,y=0;if(y=w(y=w(y=w(y=w(y=w(y=w(y=w(y=w(y,0,0),1,!0),2,!1),3,f),4,m),5,g),6,v),7,A),a.push(y),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];a.push(S(b[0]),S(b[1]),S(b[2]))}if(m&&a.push(M(p.normal)),g){var x=p.vertexNormals;a.push(M(x[0]),M(x[1]),M(x[2]))}if(v&&a.push(E(p.color)),A){var _=p.vertexColors;a.push(E(_[0]),E(_[1]),E(_[2]))}}function w(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t])}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=c.length,c.push(e.getHex()),u[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=d.length/2,d.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=i,e.data.normals=s,c.length>0&&(e.data.colors=c),d.length>0&&(e.data.uvs=[d]),e.data.faces=a,e},clone:function(){return(new pn).copy(this)},copy:function(e){var t,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=u.length;i<r;i++){var d=u[i],h=[];for(o=0,a=d.length;o<a;o++){var p=d[o];h.push(p.clone())}this.faceVertexUvs[t].push(h)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var A=g[t].vertexNormals[i],y={};y.a=A.a.clone(),y.b=A.b.clone(),y.c=A.c.clone(),v.vertexNormals.push(y)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)v.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var x=e.skinIndices;for(t=0,n=x.length;t<n;t++)this.skinIndices.push(x[t].clone());var _=e.lineDistances;for(t=0,n=_.length;t<n;t++)this.lineDistances.push(_[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(fn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(fn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new en),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Dt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Bt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Gt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),mn.prototype=Object.create(fn.prototype),mn.prototype.constructor=mn,gn.prototype=Object.create(fn.prototype),gn.prototype.constructor=gn,vn.prototype=Object.create(fn.prototype),vn.prototype.constructor=vn,An.prototype=Object.create(fn.prototype),An.prototype.constructor=An,yn.prototype=Object.create(fn.prototype),yn.prototype.constructor=yn,bn.prototype=Object.create(fn.prototype),bn.prototype.constructor=bn,xn.prototype=Object.create(fn.prototype),xn.prototype.constructor=xn,_n.prototype=Object.create(fn.prototype),_n.prototype.constructor=_n,wn.prototype=Object.create(fn.prototype),wn.prototype.constructor=wn,Object.assign(Mn.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var u,d=e.morphNormals,h=d.length;if(h>0){u=[];for(c=0;c<h;c++)u[c]=[];this.morphTargets.normal=u}var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,g=f.length===i.length;for(c=0;c<n.length;c++){var v=n[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var A=v.vertexNormals;if(3===A.length)this.normals.push(A[0],A[1],A[2]);else{var y=v.normal;this.normals.push(y,y,y)}var b,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var _=v.color;this.colors.push(_,_,_)}if(!0===o)void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Dt,new Dt,new Dt));if(!0===a)void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Dt,new Dt,new Dt));for(var w=0;w<l;w++){var M=s[w].vertices;t[w].push(M[v.a],M[v.b],M[v.c])}for(w=0;w<h;w++){var E=d[w].vertexNormals[c];u[w].push(E.a,E.b,E.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Sn=1;function Cn(){Object.defineProperty(this,"id",{value:Sn+=2}),this.uuid=zt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Tn(e,t,n,i,r,o){pn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Rn(e,t,n,i,r,o)),this.mergeVertices()}function Rn(e,t,n,i,r,o){Cn.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1;var s=[],l=[],c=[],u=[],d=0,h=0;function p(e,t,n,i,r,o,p,f,m,g,v){var A,y,b=o/m,x=p/g,_=o/2,w=p/2,M=f/2,E=m+1,S=g+1,C=0,T=0,R=new Bt;for(y=0;y<S;y++){var L=y*x-w;for(A=0;A<E;A++){var P=A*b-_;R[e]=P*i,R[t]=L*r,R[n]=M,l.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[n]=f>0?1:-1,c.push(R.x,R.y,R.z),u.push(A/m),u.push(1-y/g),C+=1}}for(y=0;y<g;y++)for(A=0;A<m;A++){var k=d+A+E*y,N=d+A+E*(y+1),O=d+(A+1)+E*(y+1),z=d+(A+1)+E*y;s.push(k,N,z),s.push(N,O,z),T+=6}a.addGroup(h,T,v),h+=T,d+=C}p("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new _n(l,3)),this.addAttribute("normal",new _n(c,3)),this.addAttribute("uv",new _n(u,2))}function Ln(e,t,n,i){pn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Pn(e,t,n,i)),this.mergeVertices()}function Pn(e,t,n,i){Cn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,c=Math.floor(i)||1,u=l+1,d=c+1,h=e/l,p=t/c,f=[],m=[],g=[],v=[];for(o=0;o<d;o++){var A=o*p-s;for(r=0;r<u;r++){var y=r*h-a;m.push(y,-A,0),g.push(0,0,1),v.push(r/l),v.push(1-o/c)}}for(o=0;o<c;o++)for(r=0;r<l;r++){var b=r+u*o,x=r+u*(o+1),_=r+1+u*(o+1),w=r+1+u*o;f.push(b,x,w),f.push(x,_,w)}this.setIndex(f),this.addAttribute("position",new _n(m,3)),this.addAttribute("normal",new _n(g,3)),this.addAttribute("uv",new _n(v,2))}Cn.prototype=Object.assign(Object.create(i.prototype),{constructor:Cn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(En(e)>65535?xn:yn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new fn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Ut).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new It;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new It;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new It;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new It;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new It;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ln;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Bt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new _n(3*t.vertices.length,3),i=new _n(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new _n(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new _n(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Mn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new fn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new fn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new fn(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new fn(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new fn(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],c=0,u=l.length;c<u;c++){var d=l[c],h=new _n(3*d.length,3);s.push(h.copyVector3sArray(d))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new _n(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new _n(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Xt);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Xt,t=new Bt;return function(){null===this.boundingSphere&&(this.boundingSphere=new Yt);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new fn(new Float32Array(i.length),3));else for(var r=t.normal.array,o=0,a=r.length;o<a;o++)r[o]=0;var s,l,c,u=t.normal.array,d=new Bt,h=new Bt,p=new Bt,f=new Bt,m=new Bt;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,A=n.length;v<A;++v){var y=n[v],b=y.start;for(o=b,a=b+y.count;o<a;o+=3)s=3*g[o+0],l=3*g[o+1],c=3*g[o+2],d.fromArray(i,s),h.fromArray(i,l),p.fromArray(i,c),f.subVectors(p,h),m.subVectors(d,h),f.cross(m),u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[l]+=f.x,u[l+1]+=f.y,u[l+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z}}else for(o=0,a=i.length;o<a;o+=9)d.fromArray(i,o),h.fromArray(i,o+3),p.fromArray(i,o+6),f.subVectors(p,h),m.subVectors(d,h),f.cross(m),u[o]=f.x,u[o+1]=f.y,u[o+2]=f.z,u[o+3]=f.x,u[o+4]=f.y,u[o+5]=f.z,u[o+6]=f.x,u[o+7]=f.y,u[o+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,o=e.attributes[i],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)r[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Bt;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Cn,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,a=r.itemSize,s=new o.constructor(t.length*a),l=0,c=0,u=0,d=t.length;u<d;u++){l=t[u]*a;for(var h=0;h<a;h++)s[c++]=o[l++]}e.addAttribute(i,new fn(s,a))}var p=this.groups;for(u=0,d=p.length;u<d;u++){var f=p[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var a=o[n];r=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Cn).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var l=[],c=s[t];for(n=0,i=c.length;n<i;n++)l.push(c[n].clone());this.morphAttributes[t]=l}var u=e.groups;for(n=0,i=u.length;n<i;n++){var d=u[n];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Tn.prototype=Object.create(pn.prototype),Tn.prototype.constructor=Tn,Rn.prototype=Object.create(Cn.prototype),Rn.prototype.constructor=Rn,Ln.prototype=Object.create(pn.prototype),Ln.prototype.constructor=Ln,Pn.prototype=Object.create(Cn.prototype),Pn.prototype.constructor=Pn;var kn=0;function Nn(){Object.defineProperty(this,"id",{value:kn++}),this.uuid=zt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=M,this.side=m,this.flatShading=!1,this.vertexColors=b,this.opacity=1,this.transparent=!1,this.blendSrc=F,this.blendDst=B,this.blendEquation=R,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Y,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function On(e){Nn.call(this),this.type="MeshBasicMaterial",this.color=new en(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function zn(e){Nn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Dn(e,t){this.origin=void 0!==e?e:new Bt,this.direction=void 0!==t?t:new Bt}function In(e,t){this.start=void 0!==e?e:new Bt,this.end=void 0!==t?t:new Bt}function Fn(e,t,n){this.a=void 0!==e?e:new Bt,this.b=void 0!==t?t:new Bt,this.c=void 0!==n?n:new Bt}function Bn(e,t){ln.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Cn,this.material=void 0!==t?t:new On({color:16777215*Math.random()}),this.drawMode=_t,this.updateMorphTargets()}function Un(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Hn(e,t,n,i,r,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:le,Vt.call(this,e,t,n,i,r,o,a,s,l,c),this.flipY=!1}Nn.prototype=Object.assign(Object.create(i.prototype),{constructor:Nn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===A;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==M&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==m&&(n.side=this.side),this.vertexColors!==b&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),o=i(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),On.prototype=Object.create(Nn.prototype),On.prototype.constructor=On,On.prototype.isMeshBasicMaterial=!0,On.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},zn.prototype=Object.create(Nn.prototype),zn.prototype.constructor=zn,zn.prototype.isShaderMaterial=!0,zn.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qt.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},zn.prototype.toJSON=function(e){var t=Nn.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Dn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Bt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Bt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Bt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Bt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Bt,t=new Bt,n=new Bt;return function(i,r,o,a){e.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),n.copy(this.origin).sub(e);var s,l,c,u,d=.5*i.distanceTo(r),h=-this.direction.dot(t),p=n.dot(this.direction),f=-n.dot(t),m=n.lengthSq(),g=Math.abs(1-h*h);if(g>0)if(l=h*p-f,u=d*g,(s=h*f-p)>=0)if(l>=-u)if(l<=u){var v=1/g;c=(s*=v)*(s+h*(l*=v)+2*p)+l*(h*s+l+2*f)+m}else l=d,c=-(s=Math.max(0,-(h*l+p)))*s+l*(l+2*f)+m;else l=-d,c=-(s=Math.max(0,-(h*l+p)))*s+l*(l+2*f)+m;else l<=-u?c=-(s=Math.max(0,-(-h*d+p)))*s+(l=s>0?-d:Math.min(Math.max(-d,-f),d))*(l+2*f)+m:l<=u?(s=0,c=(l=Math.min(Math.max(-d,-f),d))*(l+2*f)+m):c=-(s=Math.max(0,-(h*d+p)))*s+(l=s>0?d:Math.min(Math.max(-d,-f),d))*(l+2*f)+m;else l=h>0?-d:d,c=-(s=Math.max(0,-(h*l+p)))*s+l*(l+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),c}}(),intersectSphere:function(){var e=new Bt;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,o=t.radius*t.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,l=i+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(r=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(r=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(){var e=new Bt;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Bt,t=new Bt,n=new Bt,i=new Bt;return function(r,o,a,s,l){t.subVectors(o,r),n.subVectors(a,r),i.crossVectors(t,n);var c,u=this.direction.dot(i);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,r);var d=c*this.direction.dot(n.crossVectors(e,n));if(d<0)return null;var h=c*this.direction.dot(t.cross(e));if(h<0)return null;if(d+h>u)return null;var p=-c*e.dot(i);return p<0?null:this.at(p/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(In.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Bt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Bt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Bt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Bt,t=new Bt;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),o=t.dot(e)/r;return i&&(o=zt.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Bt),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Fn,{getNormal:function(){var e=new Bt;return function(t,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Bt),r.subVectors(i,n),e.subVectors(t,n),r.cross(e);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var e=new Bt,t=new Bt,n=new Bt;return function(i,r,o,a,s){e.subVectors(a,r),t.subVectors(o,r),n.subVectors(i,r);var l=e.dot(e),c=e.dot(t),u=e.dot(n),d=t.dot(t),h=t.dot(n),p=l*d-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Bt),0===p)return s.set(-2,-1,-1);var f=1/p,m=(d*u-c*h)*f,g=(l*h-c*u)*f;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new Bt;return function(t,n,i,r){return Fn.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(Fn.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Bt,t=new Bt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Bt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Fn.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Bt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Fn.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Fn.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Jt,t=[new In,new In,new In],n=new Bt,i=new Bt;return function(r,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new Bt);var a=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),!0===this.containsPoint(n))o.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(n,!0,i);var l=n.distanceToSquared(i);l<a&&(a=l,o.copy(i))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Bn.prototype=Object.assign(Object.create(ln.prototype),{constructor:Bn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ln.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new It,t=new Dn,n=new Yt,i=new Bt,r=new Bt,o=new Bt,a=new Bt,s=new Bt,l=new Bt,c=new Dt,u=new Dt,d=new Dt,h=new Bt,p=new Bt,f=new Bt;function m(e,t,n,i,r,o,a){return Fn.getBarycoord(e,t,n,i,h),r.multiplyScalar(h.x),o.multiplyScalar(h.y),a.multiplyScalar(h.z),r.add(o).add(a),r.clone()}function A(e,t,n,i,r,o,a,s){if(null===(t.side===g?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,t.side!==v,s)))return null;f.copy(s),f.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(f);return l<n.near||l>n.far?null:{distance:l,point:f.clone(),object:e}}function y(e,t,n,a,s,l,h,f){i.fromBufferAttribute(a,l),r.fromBufferAttribute(a,h),o.fromBufferAttribute(a,f);var g=A(e,e.material,t,n,i,r,o,p);if(g){s&&(c.fromBufferAttribute(s,l),u.fromBufferAttribute(s,h),d.fromBufferAttribute(s,f),g.uv=m(p,i,r,o,c,u,d));var v=new dn(l,h,f);Fn.getNormal(i,r,o,v.normal),g.face=v,g.faceIndex=l}return g}return function(h,f){var g,v=this.geometry,b=this.material,x=this.matrixWorld;if(void 0!==b&&(null===v.boundingSphere&&v.computeBoundingSphere(),n.copy(v.boundingSphere),n.applyMatrix4(x),!1!==h.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(h.ray).applyMatrix4(e),null===v.boundingBox||!1!==t.intersectsBox(v.boundingBox))))if(v.isBufferGeometry){var _,w,M,E,S,C=v.index,T=v.attributes.position,R=v.attributes.uv;if(null!==C)for(E=0,S=C.count;E<S;E+=3)_=C.getX(E),w=C.getX(E+1),M=C.getX(E+2),(g=y(this,h,t,T,R,_,w,M))&&(g.faceIndex=Math.floor(E/3),f.push(g));else if(void 0!==T)for(E=0,S=T.count;E<S;E+=3)(g=y(this,h,t,T,R,_=E,w=E+1,M=E+2))&&f.push(g)}else if(v.isGeometry){var L,P,k,N,O=Array.isArray(b),z=v.vertices,D=v.faces,I=v.faceVertexUvs[0];I.length>0&&(N=I);for(var F=0,B=D.length;F<B;F++){var U=D[F],H=O?b[U.materialIndex]:b;if(void 0!==H){if(L=z[U.a],P=z[U.b],k=z[U.c],!0===H.morphTargets){var V=v.morphTargets,G=this.morphTargetInfluences;i.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var j=0,W=V.length;j<W;j++){var q=G[j];if(0!==q){var X=V[j].vertices;i.addScaledVector(a.subVectors(X[U.a],L),q),r.addScaledVector(s.subVectors(X[U.b],P),q),o.addScaledVector(l.subVectors(X[U.c],k),q)}}i.add(L),r.add(P),o.add(k),L=i,P=r,k=o}if(g=A(this,H,h,t,L,P,k,p)){if(N&&N[F]){var Y=N[F];c.copy(Y[0]),u.copy(Y[1]),d.copy(Y[2]),g.uv=m(p,L,P,k,c,u,d)}g.face=U,g.faceIndex=F,f.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Hn.prototype=Object.create(Vt.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isCubeTexture=!0,Object.defineProperty(Hn.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Vn=new Vt,Gn=new Hn;function jn(){this.seq=[],this.map={}}var Wn=[],qn=[],Xn=new Float32Array(16),Yn=new Float32Array(9);function Jn(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,o=Wn[r];if(void 0===o&&(o=new Float32Array(r),Wn[r]=o),0!==t){i.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Zn(e,t){var n=qn[t];void 0===n&&(n=new Int32Array(t),qn[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function Kn(e,t){e.uniform1f(this.addr,t)}function Qn(e,t){e.uniform1i(this.addr,t)}function $n(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function ei(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function ti(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function ni(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function ii(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Yn.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Yn))}function ri(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Xn.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Xn))}function oi(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||Vn,i)}function ai(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||Gn,i)}function si(e,t){e.uniform2iv(this.addr,t)}function li(e,t){e.uniform3iv(this.addr,t)}function ci(e,t){e.uniform4iv(this.addr,t)}function ui(e,t){e.uniform1fv(this.addr,t)}function di(e,t){e.uniform1iv(this.addr,t)}function hi(e,t){e.uniform2fv(this.addr,Jn(t,this.size,2))}function pi(e,t){e.uniform3fv(this.addr,Jn(t,this.size,3))}function fi(e,t){e.uniform4fv(this.addr,Jn(t,this.size,4))}function mi(e,t){e.uniformMatrix2fv(this.addr,!1,Jn(t,this.size,4))}function gi(e,t){e.uniformMatrix3fv(this.addr,!1,Jn(t,this.size,9))}function vi(e,t){e.uniformMatrix4fv(this.addr,!1,Jn(t,this.size,16))}function Ai(e,t,n){var i=t.length,r=Zn(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Vn,r[o])}function yi(e,t,n){var i=t.length,r=Zn(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTextureCube(t[o]||Gn,r[o])}function bi(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return Kn;case 35664:return $n;case 35665:return ei;case 35666:return ti;case 35674:return ni;case 35675:return ii;case 35676:return ri;case 35678:case 36198:return oi;case 35680:return ai;case 5124:case 35670:return Qn;case 35667:case 35671:return si;case 35668:case 35672:return li;case 35669:case 35673:return ci}}(t.type)}function xi(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ui;case 35664:return hi;case 35665:return pi;case 35666:return fi;case 35674:return mi;case 35675:return gi;case 35676:return vi;case 35678:return Ai;case 35680:return yi;case 5124:case 35670:return di;case 35667:case 35671:return si;case 35668:case 35672:return li;case 35669:case 35673:return ci}}(t.type)}function _i(e){this.id=e,jn.call(this)}_i.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(e,t[o.id])}};var wi=/([\w\d_]+)(\])?(\[|\.)?/g;function Mi(e,t){e.seq.push(t),e.map[t.id]=t}function Ei(e,t,n){var i=e.name,r=i.length;for(wi.lastIndex=0;;){var o=wi.exec(i),a=wi.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Mi(n,void 0===c?new bi(s,e,t):new xi(s,e,t));break}var u=n.map[s];void 0===u&&Mi(n,u=new _i(s)),n=u}}function Si(e,t,n){jn.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=e.getActiveUniform(t,r);Ei(o,e.getUniformLocation(t,o.name),this)}}function Ci(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}Si.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},Si.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Si.upload=function(e,t,n,i){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}},Si.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var o=e[i];o.id in t&&n.push(o)}return n};var Ti=0;function Ri(e){switch(e){case Et:return["Linear","( value )"];case St:return["sRGB","( value )"];case Tt:return["RGBE","( value )"];case Lt:return["RGBM","( value, 7.0 )"];case Pt:return["RGBM","( value, 16.0 )"];case kt:return["RGBD","( value, 256.0 )"];case Ct:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Li(e,t){var n=Ri(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Pi(e){return""!==e}function ki(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Ni(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Oi(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=Kt[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Oi(n)})}function zi(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r})}function Di(e,t,n,i,r,o){var a=e.context,s=i.defines,l=r.vertexShader,c=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";o.shadowMapType===p?u="SHADOWMAP_TYPE_PCF":o.shadowMapType===f&&(u="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case le:case ce:d="ENVMAP_TYPE_CUBE";break;case pe:case fe:d="ENVMAP_TYPE_CUBE_UV";break;case ue:case de:d="ENVMAP_TYPE_EQUIREC";break;case he:d="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ce:case de:h="ENVMAP_MODE_REFRACTION"}switch(i.combine){case $:m="ENVMAP_BLENDING_MULTIPLY";break;case ee:m="ENVMAP_BLENDING_MIX";break;case te:m="ENVMAP_BLENDING_ADD"}}var g,v,A=e.gammaFactor>0?e.gammaFactor:1,y=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Pi).join("\n")}(i.extensions,o,t),b=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),x=a.createProgram();i.isRawShaderMaterial?((g=[b].filter(Pi).join("\n")).length>0&&(g+="\n"),(v=[y,b].filter(Pi).join("\n")).length>0&&(v+="\n")):(g=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Pi).join("\n"),v=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+A,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+h:"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ne?"#define TONE_MAPPING":"",o.toneMapping!==ne?Kt.tonemapping_pars_fragment:"",o.toneMapping!==ne?function(e,t){var n;switch(t){case ie:n="Linear";break;case re:n="Reinhard";break;case oe:n="Uncharted2";break;case ae:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Kt.encodings_pars_fragment:"",o.mapEncoding?Li("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Li("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Li("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(e,t){var n=Ri(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Pi).join("\n")),l=Ni(l=ki(l=Oi(l),o),o),c=Ni(c=ki(c=Oi(c),o),o);var _=g+(l=zi(l)),w=v+(c=zi(c)),M=Ci(a,a.VERTEX_SHADER,_),E=Ci(a,a.FRAGMENT_SHADER,w);a.attachShader(x,M),a.attachShader(x,E),void 0!==i.index0AttributeName?a.bindAttribLocation(x,0,i.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(x,0,"position"),a.linkProgram(x);var S,C,T=a.getProgramInfoLog(x).trim(),R=a.getShaderInfoLog(M).trim(),L=a.getShaderInfoLog(E).trim(),P=!0,k=!0;return!1===a.getProgramParameter(x,a.LINK_STATUS)?(P=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(x,a.VALIDATE_STATUS),"gl.getProgramInfoLog",T,R,L)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):""!==R&&""!==L||(k=!1),k&&(this.diagnostics={runnable:P,material:i,programLog:T,vertexShader:{log:R,prefix:g},fragmentShader:{log:L,prefix:v}}),a.deleteShader(M),a.deleteShader(E),this.getUniforms=function(){return void 0===S&&(S=new Si(a,x,e)),S},this.getAttributes=function(){return void 0===C&&(C=function(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=e.getActiveAttrib(t,r).name;n[o]=e.getAttribLocation(t,o)}return n}(a,x)),C},this.destroy=function(){a.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Ti++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=E,this}function Ii(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Et,n===Et&&t&&(n=Ct),n}this.getParameters=function(t,i,o,s,l,c,u){var d=r[t.type],h=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),o=Math.min(r,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(u):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var f=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:a(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===pe||t.envMap.mapping===fe),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===v,flipSided:t.side===g,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var a=0;a<o.length;a++)i.push(n[o[a]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(n,r,o,a){for(var s,l=0,c=i.length;l<c;l++){var u=i[l];if(u.code===a){++(s=u).usedTimes;break}}return void 0===s&&(s=new Di(e,t,a,n,r,o),i.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function Fi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Bi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ui(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new function(){var e=[],t=0,n=[],i=[];return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(r,o,a,s,l){var c=e[t];void 0===c?(c={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:l},e[t]=c):(c.id=r.id,c.object=r,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=r.renderOrder,c.z=s,c.group=l),(!0===a.transparent?i:n).push(c),t++},sort:function(){n.length>1&&n.sort(Fi),i.length>1&&i.sort(Bi)}}},e[i]=r),r},dispose:function(){e={}}}}var Hi=0;function Vi(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Bt,color:new en,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"SpotLight":n={position:new Bt,direction:new Bt,color:new en,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt};break;case"PointLight":n={position:new Bt,color:new en,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Dt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Bt,skyColor:new en,groundColor:new en};break;case"RectAreaLight":n={color:new en,position:new Bt,halfWidth:new Bt,halfHeight:new Bt}}return e[t.id]=n,n}}},t={id:Hi++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Bt,i=new It,r=new It;return{setup:function(o,a,s){for(var l=0,c=0,u=0,d=0,h=0,p=0,f=0,m=0,g=s.matrixWorldInverse,v=0,A=o.length;v<A;v++){var y=o[v],b=y.color,x=y.intensity,_=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=b.r*x,c+=b.g*x,u+=b.b*x;else if(y.isDirectionalLight){if((E=e.get(y)).color.copy(y.color).multiplyScalar(y.intensity),E.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(g),E.shadow=y.castShadow,y.castShadow){var M=y.shadow;E.shadowBias=M.bias,E.shadowRadius=M.radius,E.shadowMapSize=M.mapSize}t.directionalShadowMap[d]=w,t.directionalShadowMatrix[d]=y.shadow.matrix,t.directional[d]=E,d++}else if(y.isSpotLight)(E=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(g),E.color.copy(b).multiplyScalar(x),E.distance=_,E.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(n),E.direction.transformDirection(g),E.coneCos=Math.cos(y.angle),E.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),E.decay=0===y.distance?0:y.decay,E.shadow=y.castShadow,y.castShadow&&(M=y.shadow,E.shadowBias=M.bias,E.shadowRadius=M.radius,E.shadowMapSize=M.mapSize),t.spotShadowMap[p]=w,t.spotShadowMatrix[p]=y.shadow.matrix,t.spot[p]=E,p++;else if(y.isRectAreaLight)(E=e.get(y)).color.copy(b).multiplyScalar(x),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(g),r.identity(),i.copy(y.matrixWorld),i.premultiply(g),r.extractRotation(i),E.halfWidth.set(.5*y.width,0,0),E.halfHeight.set(0,.5*y.height,0),E.halfWidth.applyMatrix4(r),E.halfHeight.applyMatrix4(r),t.rectArea[f]=E,f++;else if(y.isPointLight)(E=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(g),E.color.copy(y.color).multiplyScalar(y.intensity),E.distance=y.distance,E.decay=0===y.distance?0:y.decay,E.shadow=y.castShadow,y.castShadow&&(M=y.shadow,E.shadowBias=M.bias,E.shadowRadius=M.radius,E.shadowMapSize=M.mapSize,E.shadowCameraNear=M.camera.near,E.shadowCameraFar=M.camera.far),t.pointShadowMap[h]=w,t.pointShadowMatrix[h]=y.shadow.matrix,t.point[h]=E,h++;else if(y.isHemisphereLight){var E;(E=e.get(y)).direction.setFromMatrixPosition(y.matrixWorld),E.direction.transformDirection(g),E.direction.normalize(),E.skyColor.copy(y.color).multiplyScalar(x),E.groundColor.copy(y.groundColor).multiplyScalar(x),t.hemi[m]=E,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=d,t.spot.length=p,t.rectArea.length=f,t.point.length=h,t.hemi.length=m,t.hash=t.id+","+d+","+h+","+p+","+f+","+m+","+a.length},state:t}}function Gi(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new function(){var e=new Vi,t=[],n=[],i=[];return{init:function(){t.length=0,n.length=0,i.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:i,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){i.push(e)}}},e[i]=r),r},dispose:function(){e={}}}}function ji(e){Nn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Nt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Wi(e){Nn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Bt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function qi(e,t,n){for(var i=new Zt,r=new It,o=new Dt,a=new Dt(n,n),s=new Bt,l=new Bt,c=1,u=2,d=1+(c|u),h=new Array(d),f=new Array(d),A={},y={0:g,1:m,2:v},b=[new Bt(1,0,0),new Bt(-1,0,0),new Bt(0,0,1),new Bt(0,0,-1),new Bt(0,1,0),new Bt(0,-1,0)],x=[new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,1,0),new Bt(0,0,1),new Bt(0,0,-1)],_=[new Gt,new Gt,new Gt,new Gt,new Gt,new Gt],w=0;w!==d;++w){var M=0!=(w&c),E=0!=(w&u),S=new ji({depthPacking:Ot,morphTargets:M,skinning:E});h[w]=S;var C=new Wi({morphTargets:M,skinning:E});f[w]=C}var T=this;function R(t,n,i,r,o,a){var s=t.geometry,l=null,d=h,p=t.customDepthMaterial;if(i&&(d=f,p=t.customDistanceMaterial),p)l=p;else{var m=!1;n.morphTargets&&(s&&s.isBufferGeometry?m=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(m=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var g=t.isSkinnedMesh&&n.skinning,v=0;m&&(v|=c),g&&(v|=u),l=d[v]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=l.uuid,x=n.uuid,_=A[b];void 0===_&&(_={},A[b]=_);var w=_[x];void 0===w&&(w=l.clone(),_[x]=w),l=w}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:y[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function L(n,r,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),c=n.material;if(Array.isArray(c))for(var u=s.groups,d=0,h=u.length;d<h;d++){var p=u[d],f=c[p.materialIndex];if(f&&f.visible){var m=R(n,f,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,p)}}else if(c.visible){m=R(n,c,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var g=n.children,v=0,A=g.length;v<A;v++)L(g[v],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(t,n,c){if(!1!==T.enabled&&(!1!==T.autoUpdate||!1!==T.needsUpdate)&&0!==t.length){var u,d=e.context,h=e.state;h.disable(d.BLEND),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var m=t[p],g=m.shadow,v=m&&m.isPointLight;if(void 0!==g){var A=g.camera;if(o.copy(g.mapSize),o.min(a),v){var y=o.x,w=o.y;_[0].set(2*y,w,y,w),_[1].set(0,w,y,w),_[2].set(3*y,w,y,w),_[3].set(y,w,y,w),_[4].set(3*y,0,y,w),_[5].set(y,0,y,w),o.x*=4,o.y*=2}if(null===g.map){var M={minFilter:Ae,magFilter:Ae,format:Fe};g.map=new jt(o.x,o.y,M),g.map.texture.name=m.name+".shadowMap",A.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(m);var E=g.map,S=g.matrix;l.setFromMatrixPosition(m.matrixWorld),A.position.copy(l),v?(u=6,S.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(m.target.matrixWorld),A.lookAt(s),A.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(A.projectionMatrix),S.multiply(A.matrixWorldInverse)),e.setRenderTarget(E),e.clear();for(var C=0;C<u;C++){if(v){s.copy(A.position),s.add(b[C]),A.up.copy(x[C]),A.lookAt(s),A.updateMatrixWorld();var R=_[C];h.viewport(R)}r.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),i.setFromMatrix(r),L(n,c,A,v)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}T.needsUpdate=!1}}}function Xi(e,t,n,i,r,o,a,s,l){Vt.call(this,e,t,n,i,r,o,a,s,l),this.needsUpdate=!0}function Yi(e,t,n,i,r){var o,a,s,l,c,u,d=new Bt,h=new Ft,p=new Bt;function f(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),s=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(i),t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),e}(),l={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},c={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var d=i.getContext("2d");d.fillStyle="white",d.fillRect(0,0,8,8),u=new Xi(i)}function m(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(r,g,v){if(0!==r.length){void 0===s&&f(),n.useProgram(s),n.initAttributes(),n.enableAttribute(l.position),n.enableAttribute(l.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(l.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(l.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.uniformMatrix4fv(c.projectionMatrix,!1,v.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(c.map,0);var A=0,y=0,b=g.fog;b?(t.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(t.uniform1f(c.fogNear,b.near),t.uniform1f(c.fogFar,b.far),t.uniform1i(c.fogType,1),A=1,y=1):b.isFogExp2&&(t.uniform1f(c.fogDensity,b.density),t.uniform1i(c.fogType,2),A=2,y=2)):(t.uniform1i(c.fogType,0),A=0,y=0);for(var x=0,_=r.length;x<_;x++){(E=r[x]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}r.sort(m);var w=[],M=[];for(x=0,_=r.length;x<_;x++){var E,S=(E=r[x]).material;if(!1!==S.visible){E.onBeforeRender(e,g,v,void 0,S,void 0),t.uniform1f(c.alphaTest,S.alphaTest),t.uniformMatrix4fv(c.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(d,h,p),w[0]=p.x,w[1]=p.y,M[0]=E.center.x-.5,M[1]=E.center.y-.5;var C=0;g.fog&&S.fog&&(C=y),A!==C&&(t.uniform1i(c.fogType,C),A=C),null!==S.map?(t.uniform2f(c.uvOffset,S.map.offset.x,S.map.offset.y),t.uniform2f(c.uvScale,S.map.repeat.x,S.map.repeat.y)):(t.uniform2f(c.uvOffset,0,0),t.uniform2f(c.uvScale,1,1)),t.uniform1f(c.opacity,S.opacity),t.uniform3f(c.color,S.color.r,S.color.g,S.color.b),t.uniform1f(c.rotation,S.rotation),t.uniform2fv(c.center,M),t.uniform2fv(c.scale,w),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),i.setTexture2D(S.map||u,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),E.onAfterRender(e,g,v,void 0,S,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Ji(e,t,n,i,r,o,a){var s,l="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,c={};function u(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function d(e){return zt.isPowerOfTwo(e.width)&&zt.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ae&&e.minFilter!==xe}function p(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function f(t){return t===Ae||t===ye||t===be?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}(n),n.isVideoTexture&&delete c[n.id],a.memory.textures--}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}(n),a.memory.textures--}function v(t,f){var g=i.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;c[t]!==n&&(c[t]=n,e.update())}(t),t.version>0&&g.__version!==t.version){var v=t.image;if(void 0===v)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==v.complete)return void function(t,i,c){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++);n.activeTexture(e.TEXTURE0+c),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var f=u(i.image,r.maxTextureSize);(function(e){return e.wrapS!==ge||e.wrapT!==ge||e.minFilter!==Ae&&e.minFilter!==xe})(i)&&!1===d(f)&&(f=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=zt.floorPowerOfTwo(e.width),s.height=zt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height,e),s):e}(f));var g=d(f),v=o.convert(i.format),y=o.convert(i.type);A(e.TEXTURE_2D,i,g);var b,x=i.mipmaps;if(i.isDepthTexture){var _=e.DEPTH_COMPONENT;if(i.type===Le){if(!l)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else l&&(_=e.DEPTH_COMPONENT16);i.format===Ve&&_===e.DEPTH_COMPONENT&&i.type!==Ce&&i.type!==Re&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ce,y=o.convert(i.type)),i.format===Ge&&(_=e.DEPTH_STENCIL,i.type!==ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ze,y=o.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,_,f.width,f.height,0,v,y,null)}else if(i.isDataTexture)if(x.length>0&&g){for(var w=0,M=x.length;w<M;w++)b=x[w],n.texImage2D(e.TEXTURE_2D,w,v,b.width,b.height,0,v,y,b.data);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,f.width,f.height,0,v,y,f.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(var w=0,M=x.length;w<M;w++)b=x[w],i.format!==Fe&&i.format!==Ie?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(e.TEXTURE_2D,w,v,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,w,v,b.width,b.height,0,v,y,b.data);t.__maxMipLevel=x.length-1}else if(x.length>0&&g){for(var w=0,M=x.length;w<M;w++)b=x[w],n.texImage2D(e.TEXTURE_2D,w,v,v,y,b);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,v,y,f),t.__maxMipLevel=0;h(i,g)&&p(e.TEXTURE_2D,i,f.width,f.height);t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(g,t,f);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+f),n.bindTexture(e.TEXTURE_2D,g.__webglTexture)}function A(n,a,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===ge&&a.wrapT===ge||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==Ae&&a.minFilter!==xe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Le&&null===t.get("OES_texture_float_linear"))return;if(a.type===Pe&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function y(t,r,a,s){var l=o.convert(r.texture.format),c=o.convert(r.texture.type);n.texImage2D(s,0,l,r.width,r.height,0,l,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function b(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function x(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ve)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),b(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),b(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=v,this.setTextureCube=function(t,s){var l=i.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",m),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,g=[],v=0;v<6;v++)g[v]=c||f?f?t.image[v].image:t.image[v]:u(t.image[v],r.maxCubemapSize);var y=g[0],b=d(y),x=o.convert(t.format),_=o.convert(t.type);for(A(e.TEXTURE_CUBE_MAP,t,b),v=0;v<6;v++)if(c)for(var w,M=g[v].mipmaps,E=0,S=M.length;E<S;E++)w=M[E],t.format!==Fe&&t.format!==Ie?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,E,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,E,x,w.width,w.height,0,x,_,w.data);else f?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,g[v].width,g[v].height,0,x,_,g[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,x,_,g[v]);l.__maxMipLevel=c?M.length-1:0,h(t,b)&&p(e.TEXTURE_CUBE_MAP,t,y.width,y.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=i.get(t),o=i.get(t.texture);t.addEventListener("dispose",g),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=d(t);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),A(e.TEXTURE_CUBE_MAP,t.texture,l),c=0;c<6;c++)y(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);h(t.texture,l)&&p(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),A(e.TEXTURE_2D,t.texture,l),y(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,l)&&p(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&x(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(h(r,d(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(o,a),p(o,r,t.width,t.height),n.bindTexture(o,null)}}}function Zi(e,t){return{convert:function(n){var i;if(n===me)return e.REPEAT;if(n===ge)return e.CLAMP_TO_EDGE;if(n===ve)return e.MIRRORED_REPEAT;if(n===Ae)return e.NEAREST;if(n===ye)return e.NEAREST_MIPMAP_NEAREST;if(n===be)return e.NEAREST_MIPMAP_LINEAR;if(n===xe)return e.LINEAR;if(n===_e)return e.LINEAR_MIPMAP_NEAREST;if(n===we)return e.LINEAR_MIPMAP_LINEAR;if(n===Me)return e.UNSIGNED_BYTE;if(n===ke)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ne)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Oe)return e.UNSIGNED_SHORT_5_6_5;if(n===Ee)return e.BYTE;if(n===Se)return e.SHORT;if(n===Ce)return e.UNSIGNED_SHORT;if(n===Te)return e.INT;if(n===Re)return e.UNSIGNED_INT;if(n===Le)return e.FLOAT;if(n===Pe&&null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===De)return e.ALPHA;if(n===Ie)return e.RGB;if(n===Fe)return e.RGBA;if(n===Be)return e.LUMINANCE;if(n===Ue)return e.LUMINANCE_ALPHA;if(n===Ve)return e.DEPTH_COMPONENT;if(n===Ge)return e.DEPTH_STENCIL;if(n===R)return e.FUNC_ADD;if(n===L)return e.FUNC_SUBTRACT;if(n===P)return e.FUNC_REVERSE_SUBTRACT;if(n===O)return e.ZERO;if(n===z)return e.ONE;if(n===D)return e.SRC_COLOR;if(n===I)return e.ONE_MINUS_SRC_COLOR;if(n===F)return e.SRC_ALPHA;if(n===B)return e.ONE_MINUS_SRC_ALPHA;if(n===U)return e.DST_ALPHA;if(n===H)return e.ONE_MINUS_DST_ALPHA;if(n===V)return e.DST_COLOR;if(n===G)return e.ONE_MINUS_DST_COLOR;if(n===j)return e.SRC_ALPHA_SATURATE;if((n===je||n===We||n===qe||n===Xe)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===je)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===We)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===qe)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Xe)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===Ye||n===Je||n===Ze||n===Ke)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===Ye)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Je)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ze)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ke)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Qe&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===$e||n===et||n===tt||n===nt||n===it||n===rt||n===ot||n===at||n===st||n===lt||n===ct||n===ut||n===dt||n===ht)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if((n===k||n===N)&&null!==(i=t.get("EXT_blend_minmax"))){if(n===k)return i.MIN_EXT;if(n===N)return i.MAX_EXT}return n===ze&&null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}}}function Ki(e,t,n,i){cn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Qi(e){Ki.call(this),this.cameras=e||[]}function $i(e){var t=this,n=null,i=null,r=null,o=new It,a=new It;"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",g,!1));var s=new It,l=new Ft,c=new Bt,u=new Ki;u.bounds=new Gt(0,0,.5,1),u.layers.enable(1);var d=new Ki;d.bounds=new Gt(.5,0,.5,1),d.layers.enable(2);var h,p,f=new Qi([u,d]);function m(){return null!==n&&!0===n.isPresenting}function g(){if(m()){var i=n.getEyeParameters("left"),r=i.renderWidth,o=i.renderHeight;p=e.getPixelRatio(),h=e.getSize(),e.setDrawingBufferSize(2*r,o,1)}else t.enabled&&e.setDrawingBufferSize(h.width,h.height,p)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e)},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(i);var h=n.stageParameters;h?o.fromArray(h.sittingToStandingTransform):o.makeTranslation(0,t.userHeight,0);var p=i.pose,m=null!==r?r:e;if(m.matrix.copy(o),m.matrix.decompose(m.position,m.quaternion,m.scale),null!==p.orientation&&(l.fromArray(p.orientation),m.quaternion.multiply(l)),null!==p.position&&(l.setFromRotationMatrix(o),c.fromArray(p.position),c.applyQuaternion(l),m.position.add(c)),m.updateMatrixWorld(),!1===n.isPresenting)return e;u.near=e.near,d.near=e.near,u.far=e.far,d.far=e.far,f.matrixWorld.copy(e.matrixWorld),f.matrixWorldInverse.copy(e.matrixWorldInverse),u.matrixWorldInverse.fromArray(i.leftViewMatrix),d.matrixWorldInverse.fromArray(i.rightViewMatrix),a.getInverse(o),u.matrixWorldInverse.multiply(a),d.matrixWorldInverse.multiply(a);var g=m.parent;null!==g&&(s.getInverse(g.matrixWorld),u.matrixWorldInverse.multiply(s),d.matrixWorldInverse.multiply(s)),u.matrixWorld.getInverse(u.matrixWorldInverse),d.matrixWorld.getInverse(d.matrixWorldInverse),u.projectionMatrix.fromArray(i.leftProjectionMatrix),d.projectionMatrix.fromArray(i.rightProjectionMatrix),f.projectionMatrix.copy(u.projectionMatrix);var v=n.getLayers();if(v.length){var A=v[0];null!==A.leftBounds&&4===A.leftBounds.length&&u.bounds.fromArray(A.leftBounds),null!==A.rightBounds&&4===A.rightBounds.length&&d.bounds.fromArray(A.rightBounds)}return f},this.getStandingMatrix=function(){return o},this.submitFrame=function(){m()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",g)}}function er(e){console.log("THREE.WebGLRenderer",r);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,c=void 0===e.stencil||e.stencil,u=void 0!==e.antialias&&e.antialias,d=void 0===e.premultipliedAlpha||e.premultipliedAlpha,h=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,p=void 0!==e.powerPreference?e.powerPreference:"default",f=null,m=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ie,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var A,y,x,_,R,L,P,k,N,O,z,D,I,F,B,U,H,V,G,j=this,$=!1,ee=null,te=null,ne=-1,re="",oe=null,ae=null,se=new Gt,le=new Gt,ce=null,ue=0,de=t.width,he=t.height,pe=1,fe=new Gt(0,0,de,he),me=new Gt(0,0,de,he),ge=!1,ve=new Zt,Ae=new function(){var e=this,t=null,n=0,i=!1,r=!1,o=new Jt,a=new Ut,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==r||null===c){var u=i+4*l,d=n.matrixWorldInverse;a.getNormalMatrix(d),(null===c||c.length<u)&&(c=new Float32Array(u));for(var h=0,p=i;h!==l;++h,p+=4)o.copy(t[h]).applyMatrix4(d,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var a=0!==e.length||r||0!==n||i;return i=r,t=c(e,o,0),n=e.length,a},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,o,a,u,d,h){if(!i||null===e||0===e.length||r&&!a)r?c(null):l();else{var p=r?0:n,f=4*p,m=d.clippingState||null;s.value=m,m=c(e,u,f,h);for(var g=0;g!==f;++g)m[g]=t[g];d.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}},ye=!1,be=!1,xe=new It,_e=new Bt;function we(){return null===ee?pe:1}try{var Ee={alpha:i,depth:o,stencil:c,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:h,powerPreference:p};if(t.addEventListener("webglcontextlost",Re,!1),t.addEventListener("webglcontextrestored",ke,!1),null===(A=n||t.getContext("webgl",Ee)||t.getContext("experimental-webgl",Ee)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===A.getShaderPrecisionFormat&&(A.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Se(){(y=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}(A)).get("WEBGL_depth_texture"),y.get("OES_texture_float"),y.get("OES_texture_float_linear"),y.get("OES_texture_half_float"),y.get("OES_texture_half_float_linear"),y.get("OES_standard_derivatives"),y.get("OES_element_index_uint"),y.get("ANGLE_instanced_arrays"),G=new Zi(A,y),x=new function(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,v=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:d,maxAttributes:h,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}(A,y,e),(_=new function(e,t,n){var i=new function(){var t=!1,n=new Gt,i=null,r=new Gt(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},r=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?te(e.DEPTH_TEST):ne(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case W:e.depthFunc(e.NEVER);break;case q:e.depthFunc(e.ALWAYS);break;case X:e.depthFunc(e.LESS);break;case Y:e.depthFunc(e.LEQUAL);break;case J:e.depthFunc(e.EQUAL);break;case Z:e.depthFunc(e.GEQUAL);break;case K:e.depthFunc(e.GREATER);break;case Q:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},o=new function(){var t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?te(e.STENCIL_TEST):ne(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&l===i||(e.stencilOp(t,n,i),a=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}},c=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=new Uint8Array(c),d=new Uint8Array(c),h=new Uint8Array(c),p={},f=null,m=null,A=null,y=null,b=null,x=null,_=null,R=null,L=null,P=!1,k=null,N=null,O=null,z=null,D=null,I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),F=!1,B=0,U=e.getParameter(e.VERSION);-1!==U.indexOf("WebGL")?(B=parseFloat(/^WebGL\ ([0-9])/.exec(U)[1]),F=B>=1):-1!==U.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(U)[1]),F=B>=2);var H=null,V={},G=new Gt,j=new Gt;function $(t,n,i){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<i;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}var ee={};function te(t){!0!==p[t]&&(e.enable(t),p[t]=!0)}function ne(t){!1!==p[t]&&(e.disable(t),p[t]=!1)}function ie(t,i,r,o,a,s,l,c){if(t!==w?te(e.BLEND):ne(e.BLEND),t!==T){if(t!==A||c!==P)switch(t){case E:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case S:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case C:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}y=null,b=null,x=null,_=null,R=null,L=null}else a=a||i,s=s||r,l=l||o,i===y&&a===_||(e.blendEquationSeparate(n.convert(i),n.convert(a)),y=i,_=a),r===b&&o===x&&s===R&&l===L||(e.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(l)),b=r,x=o,R=s,L=l);A=t,P=c}function re(t){k!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),k=t)}function oe(t){t!==a?(te(e.CULL_FACE),t!==N&&(t===s?e.cullFace(e.BACK):t===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):ne(e.CULL_FACE),N=t}function ae(t,n,i){t?(te(e.POLYGON_OFFSET_FILL),z===n&&D===i||(e.polygonOffset(n,i),z=n,D=i)):ne(e.POLYGON_OFFSET_FILL)}function se(t){void 0===t&&(t=e.TEXTURE0+I-1),H!==t&&(e.activeTexture(t),H=t)}return ee[e.TEXTURE_2D]=$(e.TEXTURE_2D,e.TEXTURE_2D,1),ee[e.TEXTURE_CUBE_MAP]=$(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),r.setClear(1),o.setClear(0),te(e.DEPTH_TEST),r.setFunc(Y),re(!1),oe(s),te(e.CULL_FACE),te(e.BLEND),ie(M),{buffers:{color:i,depth:r,stencil:o},initAttributes:function(){for(var e=0,t=u.length;e<t;e++)u[e]=0},enableAttribute:function(n){u[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),0!==h[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),h[n]=0)},enableAttributeAndDivisor:function(n,i){u[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),h[n]!==i&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),h[n]=i)},disableUnusedAttributes:function(){for(var t=0,n=d.length;t!==n;++t)d[t]!==u[t]&&(e.disableVertexAttribArray(t),d[t]=0)},enable:te,disable:ne,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)f.push(n[i]);return f},useProgram:function(t){return m!==t&&(e.useProgram(t),m=t,!0)},setBlending:ie,setMaterial:function(t,n){t.side===v?ne(e.CULL_FACE):te(e.CULL_FACE);var o=t.side===g;n&&(o=!o),re(o),!0===t.transparent?ie(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):ie(w),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),i.setMask(t.colorWrite),ae(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:re,setCullFace:oe,setLineWidth:function(t){t!==O&&(F&&e.lineWidth(t),O=t)},setPolygonOffset:ae,setScissorTest:function(t){t?te(e.SCISSOR_TEST):ne(e.SCISSOR_TEST)},activeTexture:se,bindTexture:function(t,n){null===H&&se();var i=V[H];void 0===i&&(i={type:void 0,texture:void 0},V[H]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||ee[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===G.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),G.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);p={},f=null,H=null,V={},m=null,A=null,k=null,N=null,i.reset(),r.reset(),o.reset()}}}(A,y,G)).scissor(le.copy(me).multiplyScalar(pe)),_.viewport(se.copy(fe).multiplyScalar(pe)),R=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(r=r||1,t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(n-2);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}(A),L=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}},P=new Ji(A,y,_,L,x,G,R),k=new rn(A),N=new function(e,t,n){var i={},r={};function o(e){var a=e.target,s=i[a.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete i[a.id];var c=r[a.id];c&&(t.remove(c),delete r[a.id]),(c=r[s.id])&&(t.remove(c),delete r[s.id]),n.memory.geometries--}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Cn).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(n){var i=n.index,r=n.attributes;for(var o in null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],l=0,c=s.length;l<c;l++)t.update(s[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var i=r[n.id];if(i)return i;var o,a=[],s=n.index,l=n.attributes;if(null!==s)for(var c=0,u=(o=s.array).length;c<u;c+=3){var d=o[c+0],h=o[c+1],p=o[c+2];a.push(d,h,h,p,p,d)}else for(c=0,u=(o=l.position.array).length/3-1;c<u;c+=3)d=c+0,h=c+1,p=c+2,a.push(d,h,h,p,p,d);return i=new(En(a)>65535?xn:yn)(a,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),r[n.id]=i,i}}}(A,k,R),O=new function(e,t){var n={};return{update:function(i){var r=t.render.frame,o=i.geometry,a=e.get(i,o);return n[a.id]!==r&&(o.isGeometry&&a.updateFromObject(i),e.update(a),n[a.id]=r),a},dispose:function(){n={}}}}(N,R),B=new function(e){var t={},n=new Float32Array(8);return{update:function(i,r,o,a){var s=i.morphTargetInfluences,l=s.length,c=t[r.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[r.id]=c}var d=o.morphTargets&&r.morphAttributes.position,h=o.morphNormals&&r.morphAttributes.normal;for(u=0;u<l;u++)0!==(p=c[u])[1]&&(d&&r.removeAttribute("morphTarget"+u),h&&r.removeAttribute("morphNormal"+u));for(u=0;u<l;u++)(p=c[u])[0]=u,p[1]=s[u];for(c.sort(Un),u=0;u<8;u++){var p;if(p=c[u]){var f=p[0],m=p[1];if(m){d&&r.addAttribute("morphTarget"+u,d[f]),h&&r.addAttribute("morphNormal"+u,h[f]),n[u]=m;continue}}n[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(A),z=new Ii(j,y,x),D=new Ui,I=new Gi,F=new function(e,t,n,i){var r,o,a,s=new en(0),l=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){c(s,l=e)},render:function(t,i,u,d){var h=i.background;null===h?c(s,l):h&&h.isColor&&(c(h,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),h&&h.isCubeTexture?(void 0===a&&((a=new Bn(new Rn(1,1,1),new zn({uniforms:nn.cube.uniforms,vertexShader:nn.cube.vertexShader,fragmentShader:nn.cube.fragmentShader,side:g,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a.geometry)),a.material.uniforms.tCube.value=h,t.push(a,a.geometry,a.material,0,null)):h&&h.isTexture&&(void 0===r&&(r=new un(-1,1,1,-1,0,1),o=new Bn(new Pn(2,2),new On({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o.geometry)),o.material.map=h,e.renderBufferDirect(r,null,o.geometry,o.material,o,null))}}}(j,_,N,d),U=new function(e,t,n){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(e,r,o){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var s=e.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(i,0,o,e.maxInstancedCount)):a.drawArraysInstancedANGLE(i,r,o,e.maxInstancedCount),n.update(o,i,e.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(A,y,R),H=new function(e,t,n){var i,r,o;this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(i,a,r,t*o),n.update(a,i)},this.renderInstances=function(e,a,s){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(i,s,r,a*o,e.maxInstancedCount),n.update(s,i,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(A,y,R),V=new Yi(j,A,_,P,x),R.programs=z.programs,j.context=A,j.capabilities=x,j.extensions=y,j.properties=L,j.renderLists=D,j.state=_,j.info=R}Se();var Ce=new $i(j);this.vr=Ce;var Te=new qi(j,O,x.maxTextureSize);function Re(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),$=!1,Se()}function Ne(e){var t=e.target;t.removeEventListener("dispose",Ne),function(e){Oe(e),L.remove(e)}(t)}function Oe(e){var t=L.get(e).program;e.program=void 0,void 0!==t&&z.releaseProgram(t)}this.shadowMap=Te,this.getContext=function(){return A},this.getContextAttributes=function(){return A.getContextAttributes()},this.forceContextLoss=function(){var e=y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(e){void 0!==e&&(pe=e,this.setSize(de,he,!1))},this.getSize=function(){return{width:de,height:he}},this.setSize=function(e,n,i){var r=Ce.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(de=e,he=n,t.width=e*pe,t.height=n*pe,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:de*pe,height:he*pe}},this.setDrawingBufferSize=function(e,n,i){de=e,he=n,pe=i,t.width=e*i,t.height=n*i,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return se},this.setViewport=function(e,t,n,i){fe.set(e,he-t-i,n,i),_.viewport(se.copy(fe).multiplyScalar(pe))},this.setScissor=function(e,t,n,i){me.set(e,he-t-i,n,i),_.scissor(le.copy(me).multiplyScalar(pe))},this.setScissorTest=function(e){_.setScissorTest(ge=e)},this.getClearColor=function(){return F.getClearColor()},this.setClearColor=function(){F.setClearColor.apply(F,arguments)},this.getClearAlpha=function(){return F.getClearAlpha()},this.setClearAlpha=function(){F.setClearAlpha.apply(F,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=A.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=A.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=A.STENCIL_BUFFER_BIT),A.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.dispose=function(){t.removeEventListener("webglcontextlost",Re,!1),t.removeEventListener("webglcontextrestored",ke,!1),D.dispose(),I.dispose(),L.dispose(),O.dispose(),Ce.dispose(),Ie()},this.renderBufferImmediate=function(e,t,n){_.initAttributes();var i=L.get(e);e.hasPositions&&!i.position&&(i.position=A.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=A.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=A.createBuffer()),e.hasColors&&!i.color&&(i.color=A.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(A.bindBuffer(A.ARRAY_BUFFER,i.position),A.bufferData(A.ARRAY_BUFFER,e.positionArray,A.DYNAMIC_DRAW),_.enableAttribute(r.position),A.vertexAttribPointer(r.position,3,A.FLOAT,!1,0,0)),e.hasNormals){if(A.bindBuffer(A.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,u=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=c,s[o+2]=u,s[o+3]=l,s[o+4]=c,s[o+5]=u,s[o+6]=l,s[o+7]=c,s[o+8]=u}A.bufferData(A.ARRAY_BUFFER,e.normalArray,A.DYNAMIC_DRAW),_.enableAttribute(r.normal),A.vertexAttribPointer(r.normal,3,A.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(A.bindBuffer(A.ARRAY_BUFFER,i.uv),A.bufferData(A.ARRAY_BUFFER,e.uvArray,A.DYNAMIC_DRAW),_.enableAttribute(r.uv),A.vertexAttribPointer(r.uv,2,A.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==b&&(A.bindBuffer(A.ARRAY_BUFFER,i.color),A.bufferData(A.ARRAY_BUFFER,e.colorArray,A.DYNAMIC_DRAW),_.enableAttribute(r.color),A.vertexAttribPointer(r.color,3,A.FLOAT,!1,0,0)),_.disableUnusedAttributes(),A.drawArrays(A.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){var a=r.isMesh&&r.matrixWorld.determinant()<0;_.setMaterial(i,a);var s=je(e,t,i,r),l=n.id+"_"+s.id+"_"+(!0===i.wireframe),c=!1;l!==re&&(re=l,c=!0),r.morphTargetInfluences&&(B.update(r,n,i,s),c=!0);var u,d=n.index,h=n.attributes.position,p=1;!0===i.wireframe&&(d=N.getWireframeAttribute(n),p=2);var f=U;null!==d&&(u=k.get(d),(f=H).setIndex(u)),c&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&null===y.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_.initAttributes();var i=n.attributes,r=t.getAttributes(),o=e.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var l=i[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,d=k.get(l);if(void 0===d)continue;var h=d.buffer,p=d.type,f=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,g=m.stride,v=l.offset;m&&m.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):_.enableAttribute(s),A.bindBuffer(A.ARRAY_BUFFER,h),A.vertexAttribPointer(s,u,p,c,g*f,v*f)}else l.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):_.enableAttribute(s),A.bindBuffer(A.ARRAY_BUFFER,h),A.vertexAttribPointer(s,u,p,c,0,0)}else if(void 0!==o){var b=o[a];if(void 0!==b)switch(b.length){case 2:A.vertexAttrib2fv(s,b);break;case 3:A.vertexAttrib3fv(s,b);break;case 4:A.vertexAttrib4fv(s,b);break;default:A.vertexAttrib1fv(s,b)}}}}_.disableUnusedAttributes()}(i,s,n),null!==d&&A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,u.buffer));var m=1/0;null!==d?m=d.count:void 0!==h&&(m=h.count);var g=n.drawRange.start*p,v=n.drawRange.count*p,b=null!==o?o.start*p:0,x=null!==o?o.count*p:1/0,w=Math.max(g,b),M=Math.min(m,g+v,b+x)-1,E=Math.max(0,M-w+1);if(0!==E){if(r.isMesh)if(!0===i.wireframe)_.setLineWidth(i.wireframeLinewidth*we()),f.setMode(A.LINES);else switch(r.drawMode){case _t:f.setMode(A.TRIANGLES);break;case wt:f.setMode(A.TRIANGLE_STRIP);break;case Mt:f.setMode(A.TRIANGLE_FAN)}else if(r.isLine){var S=i.linewidth;void 0===S&&(S=1),_.setLineWidth(S*we()),r.isLineSegments?f.setMode(A.LINES):r.isLineLoop?f.setMode(A.LINE_LOOP):f.setMode(A.LINE_STRIP)}else r.isPoints&&f.setMode(A.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,w,E):f.render(w,E)}},this.compile=function(e,t){(m=I.get(e,t)).init(),e.traverse(function(e){e.isLight&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),m.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Ge(t.material[n],e.fog,t);else Ge(t.material,e.fog,t)})};var ze=!1,De=null;function Ie(){ze=!1}function Be(){var e=Ce.getDevice();e&&e.isPresenting?e.requestAnimationFrame(Ue):window.requestAnimationFrame(Ue)}function Ue(e){!1!==ze&&(De(e),Be())}function He(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.object,l=a.geometry,c=void 0===i?a.material:i,u=a.group;if(n.isArrayCamera){ae=n;for(var d=n.cameras,h=0,p=d.length;h<p;h++){var f=d[h];if(s.layers.test(f.layers)){var m=f.bounds,g=m.x*de,v=m.y*he,A=m.z*de,y=m.w*he;_.viewport(se.set(g,v,A,y).multiplyScalar(pe)),Ve(s,t,f,l,c,u)}}}else ae=null,Ve(s,t,n,l,c,u)}}function Ve(e,t,n,i,r,o){if(e.onBeforeRender(j,t,n,i,r,o),m=I.get(t,ae||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;_.setMaterial(r,a);var s=je(n,t.fog,r,e);re="",function(e,t,n){e.render(function(e){j.renderBufferImmediate(e,t,n)})}(e,s,r)}else j.renderBufferDirect(n,t.fog,i,r,e,o);e.onAfterRender(j,t,n,i,r,o),m=I.get(t,ae||n)}function Ge(e,t,n){var i=L.get(e),r=m.state.lights,o=m.state.shadowsArray,a=z.getParameters(e,r.state,o,t,Ae.numPlanes,Ae.numIntersection,n),s=z.getProgramCode(e,a),l=i.program,c=!0;if(void 0===l)e.addEventListener("dispose",Ne);else if(l.code!==s)Oe(e);else if(i.lightsHash!==r.state.hash)L.update(e,"lightsHash",r.state.hash),c=!1;else{if(void 0!==a.shaderID)return;c=!1}if(c){if(a.shaderID){var u=nn[a.shaderID];i.shader={name:e.type,uniforms:Qt.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,j),l=z.acquireProgram(e,i.shader,a,s),i.program=l,e.program=l}var d=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var h=0;h<j.maxMorphTargets;h++)d["morphTarget"+h]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(h=0;h<j.maxMorphNormals;h++)d["morphNormal"+h]>=0&&e.numSupportedMorphNormals++}var p=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=Ae.numPlanes,i.numIntersection=Ae.numIntersection,p.clippingPlanes=Ae.uniform),i.fog=t,i.lightsHash=r.state.hash,e.lights&&(p.ambientLightColor.value=r.state.ambient,p.directionalLights.value=r.state.directional,p.spotLights.value=r.state.spot,p.rectAreaLights.value=r.state.rectArea,p.pointLights.value=r.state.point,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);var f=i.program.getUniforms(),g=Si.seqWithValue(f.seq,p);i.uniformsList=g}function je(e,t,n,i){ue=0;var r=L.get(n),o=m.state.lights;if(ye&&(be||e!==oe)){var a=e===oe&&n.id===ne;Ae.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,a)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Ae.numPlanes&&r.numIntersection===Ae.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Ge(n,t,i),n.needsUpdate=!1);var s=!1,l=!1,c=!1,u=r.program,d=u.getUniforms(),h=r.shader.uniforms;if(_.useProgram(u.program)&&(s=!0,l=!0,c=!0),n.id!==ne&&(ne=n.id,l=!0),s||e!==oe){if(d.setValue(A,"projectionMatrix",e.projectionMatrix),x.logarithmicDepthBuffer&&d.setValue(A,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),oe!==(ae||e)&&(oe=ae||e,l=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=d.map.cameraPosition;void 0!==p&&p.setValue(A,_e.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&d.setValue(A,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){d.setOptional(A,i,"bindMatrix"),d.setOptional(A,i,"bindMatrixInverse");var f=i.skeleton;if(f){var g=f.bones;if(x.floatVertexTextures){if(void 0===f.boneTexture){var v=Math.sqrt(4*g.length);v=zt.ceilPowerOfTwo(v),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(f.boneMatrices);var b=new qt(y,v,v,Fe,Le);b.needsUpdate=!0,f.boneMatrices=y,f.boneTexture=b,f.boneTextureSize=v}d.setValue(A,"boneTexture",f.boneTexture),d.setValue(A,"boneTextureSize",f.boneTextureSize)}else d.setOptional(A,f,"boneMatrices")}}return l&&(d.setValue(A,"toneMappingExposure",j.toneMappingExposure),d.setValue(A,"toneMappingWhitePoint",j.toneMappingWhitePoint),n.lights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(h,c),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(h,t),n.isMeshBasicMaterial?We(h,n):n.isMeshLambertMaterial?(We(h,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(h,n)):n.isMeshPhongMaterial?(We(h,n),n.isMeshToonMaterial?function(e,t){qe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(h,n):qe(h,n)):n.isMeshStandardMaterial?(We(h,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Xe(e,t)}(h,n):Xe(h,n)):n.isMeshDepthMaterial?(We(h,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(h,n)):n.isMeshDistanceMaterial?(We(h,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(h,n)):n.isMeshNormalMaterial?(We(h,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(h,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(h,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(h,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*pe,e.scale.value=.5*he,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(h,n):n.isShadowMaterial&&(h.color.value=n.color,h.opacity.value=n.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=tn.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=tn.LTC_2),Si.upload(A,r.uniformsList,h,j)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Si.upload(A,r.uniformsList,h,j),n.uniformsNeedUpdate=!1),d.setValue(A,"modelViewMatrix",i.modelViewMatrix),d.setValue(A,"normalMatrix",i.normalMatrix),d.setValue(A,"modelMatrix",i.matrixWorld),u}function We(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=L.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function qe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Xe(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}this.animate=function(e){null!==(De=e)?ze||(Be(),ze=!0):Ie()},this.render=function(e,t,n,i){if(t&&t.isCamera){if(!$){re="",ne=-1,oe=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ce.enabled&&(t=Ce.getCamera(t)),(m=I.get(e,t)).init(),e.onBeforeRender(j,e,t,n),xe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ve.setFromMatrix(xe),be=this.localClippingEnabled,ye=Ae.init(this.clippingPlanes,be,t),(f=D.get(e,t)).init(),function e(t,n,i){if(!1===t.visible)return;var r=t.layers.test(n.layers);if(r)if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!ve.intersectsSprite(t)||m.pushSprite(t);else if(t.isImmediateRenderObject)i&&_e.setFromMatrixPosition(t.matrixWorld).applyMatrix4(xe),f.push(t,null,t.material,_e.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ve.intersectsObject(t))){i&&_e.setFromMatrixPosition(t.matrixWorld).applyMatrix4(xe);var o=O.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,l=0,c=s.length;l<c;l++){var u=s[l],d=a[u.materialIndex];d&&d.visible&&f.push(t,o,d,_e.z,u)}else a.visible&&f.push(t,o,a,_e.z,null)}var h=t.children;for(var l=0,c=h.length;l<c;l++)e(h[l],n,i)}(e,t,j.sortObjects),!0===j.sortObjects&&f.sort(),ye&&Ae.beginShadows();var r=m.state.shadowsArray;Te.render(r,e,t),m.setupLights(t),ye&&Ae.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),F.render(f,e,t,i);var o=f.opaque,a=f.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&He(o,e,t,s),a.length&&He(a,e,t,s)}else o.length&&He(o,e,t),a.length&&He(a,e,t);var l=m.state.spritesArray;V.render(l,e,t),n&&P.updateRenderTargetMipmap(n),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),e.onAfterRender(j,e,t),Ce.enabled&&Ce.submitFrame(),f=null,m=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ue;return e>=x.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+x.maxTextures),ue+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),P.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),P.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?P.setTextureCube(t,n):P.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return ee},this.setRenderTarget=function(e){ee=e,e&&void 0===L.get(e).__webglFramebuffer&&P.setupRenderTarget(e);var t=null,n=!1;if(e){var i=L.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,se.copy(e.viewport),le.copy(e.scissor),ce=e.scissorTest}else se.copy(fe).multiplyScalar(pe),le.copy(me).multiplyScalar(pe),ce=ge;if(te!==t&&(A.bindFramebuffer(A.FRAMEBUFFER,t),te=t),_.viewport(se),_.scissor(le),_.setScissorTest(ce),n){var r=L.get(e.texture);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,o){if(e&&e.isWebGLRenderTarget){var a=L.get(e).__webglFramebuffer;if(a){var s=!1;a!==te&&(A.bindFramebuffer(A.FRAMEBUFFER,a),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==Fe&&G.convert(c)!==A.getParameter(A.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Me||G.convert(u)===A.getParameter(A.IMPLEMENTATION_COLOR_READ_TYPE)||u===Le&&(y.get("OES_texture_float")||y.get("WEBGL_color_buffer_float"))||u===Pe&&y.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");A.checkFramebufferStatus(A.FRAMEBUFFER)===A.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&A.readPixels(t,n,i,r,G.convert(c),G.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&A.bindFramebuffer(A.FRAMEBUFFER,te)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,o=G.convert(t.format);this.setTexture2D(t,0),A.copyTexImage2D(A.TEXTURE_2D,n||0,o,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,o=t.image.height,a=G.convert(n.format),s=G.convert(n.type),l=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),A.texSubImage2D(A.TEXTURE_2D,i||0,e.x,e.y,r,o,a,s,l)}}function tr(e,t){this.name="",this.color=new en(e),this.density=void 0!==t?t:25e-5}function nr(e,t,n){this.name="",this.color=new en(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function ir(){ln.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function rr(e){Nn.call(this),this.type="SpriteMaterial",this.color=new en(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function or(e){ln.call(this),this.type="Sprite",this.material=void 0!==e?e:new rr,this.center=new Dt(.5,.5)}function ar(){ln.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function sr(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new It)}}function lr(){ln.call(this),this.type="Bone"}function cr(e,t){Bn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new It,this.bindMatrixInverse=new It;var n=new sr(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function ur(e){Nn.call(this),this.type="LineBasicMaterial",this.color=new en(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function dr(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new hr(e,t);ln.call(this),this.type="Line",this.geometry=void 0!==e?e:new Cn,this.material=void 0!==t?t:new ur({color:16777215*Math.random()})}function hr(e,t){dr.call(this,e,t),this.type="LineSegments"}function pr(e,t){dr.call(this,e,t),this.type="LineLoop"}function fr(e){Nn.call(this),this.type="PointsMaterial",this.color=new en(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function mr(e,t){ln.call(this),this.type="Points",this.geometry=void 0!==e?e:new Cn,this.material=void 0!==t?t:new fr({color:16777215*Math.random()})}function gr(){ln.call(this),this.type="Group"}function vr(e,t,n,i,r,o,a,s,l){Vt.call(this,e,t,n,i,r,o,a,s,l),this.generateMipmaps=!1}function Ar(e,t,n,i,r,o,a,s,l,c,u,d){Vt.call(this,null,o,a,s,l,c,i,r,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function yr(e,t,n,i,r,o,a,s,l,c){if((c=void 0!==c?c:Ve)!==Ve&&c!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ve&&(n=Ce),void 0===n&&c===Ge&&(n=ze),Vt.call(this,null,i,r,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Ae,this.minFilter=void 0!==s?s:Ae,this.flipY=!1,this.generateMipmaps=!1}function br(e){Cn.call(this),this.type="WireframeGeometry";var t,n,i,r,o,a,s,l,c,u,d=[],h=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var g=m[t];for(n=0;n<3;n++)s=g[f[n]],l=g[f[(n+1)%3]],h[0]=Math.min(s,l),h[1]=Math.max(s,l),void 0===p[c=h[0]+","+h[1]]&&(p[c]={index1:h[0],index2:h[1]})}for(c in p)a=p[c],u=e.vertices[a.index1],d.push(u.x,u.y,u.z),u=e.vertices[a.index2],d.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var v,A,y,b,x,_,w;if(u=new Bt,null!==e.index){for(v=e.attributes.position,A=e.index,0===(y=e.groups).length&&(y=[{start:0,count:A.count,materialIndex:0}]),r=0,o=y.length;r<o;++r)for(t=x=(b=y[r]).start,i=x+b.count;t<i;t+=3)for(n=0;n<3;n++)s=A.getX(t+n),l=A.getX(t+(n+1)%3),h[0]=Math.min(s,l),h[1]=Math.max(s,l),void 0===p[c=h[0]+","+h[1]]&&(p[c]={index1:h[0],index2:h[1]});for(c in p)a=p[c],u.fromBufferAttribute(v,a.index1),d.push(u.x,u.y,u.z),u.fromBufferAttribute(v,a.index2),d.push(u.x,u.y,u.z)}else for(t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)_=3*t+n,u.fromBufferAttribute(v,_),d.push(u.x,u.y,u.z),w=3*t+(n+1)%3,u.fromBufferAttribute(v,w),d.push(u.x,u.y,u.z)}this.addAttribute("position",new _n(d,3))}function xr(e,t,n){pn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new _r(e,t,n)),this.mergeVertices()}function _r(e,t,n){Cn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,o=[],a=[],s=[],l=[],c=new Bt,u=new Bt,d=new Bt,h=new Bt,p=new Bt,f=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var g=r/t;e(g,m,u),a.push(u.x,u.y,u.z),g-1e-5>=0?(e(g-1e-5,m,d),h.subVectors(u,d)):(e(g+1e-5,m,d),h.subVectors(d,u)),m-1e-5>=0?(e(g,m-1e-5,d),p.subVectors(u,d)):(e(g,m+1e-5,d),p.subVectors(d,u)),c.crossVectors(h,p).normalize(),s.push(c.x,c.y,c.z),l.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var v=i*f+r,A=i*f+r+1,y=(i+1)*f+r+1,b=(i+1)*f+r;o.push(v,A,b),o.push(A,y,b)}this.setIndex(o),this.addAttribute("position",new _n(a,3)),this.addAttribute("normal",new _n(s,3)),this.addAttribute("uv",new _n(l,2))}function wr(e,t,n,i){pn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Mr(e,t,n,i)),this.mergeVertices()}function Mr(e,t,n,i){Cn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],o=[];function a(e,t,n,i){var r,o,a=Math.pow(2,i),l=[];for(r=0;r<=a;r++){l[r]=[];var c=e.clone().lerp(n,r/a),u=t.clone().lerp(n,r/a),d=a-r;for(o=0;o<=d;o++)l[r][o]=0===o&&r===a?c:c.clone().lerp(u,o/d)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var h=Math.floor(o/2);o%2==0?(s(l[r][h+1]),s(l[r+1][h]),s(l[r][h])):(s(l[r][h+1]),s(l[r+1][h+1]),s(l[r+1][h]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var n=new Bt,i=new Bt,r=new Bt,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),a(n,i,r,e)}(i=i||0),function(e){for(var t=new Bt,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new Bt,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=u(e)/2/Math.PI+.5,i=d(e)/Math.PI+.5;o.push(n,1-i)}(function(){for(var e=new Bt,t=new Bt,n=new Bt,i=new Bt,a=new Dt,s=new Dt,l=new Dt,d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=u(i);c(a,h+0,e,p),c(s,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new _n(r,3)),this.addAttribute("normal",new _n(r.slice(),3)),this.addAttribute("uv",new _n(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Er(e,t){pn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Sr(e,t)),this.mergeVertices()}function Sr(e,t){Mr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Cr(e,t){pn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Tr(e,t)),this.mergeVertices()}function Tr(e,t){Mr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Rr(e,t){pn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Lr(e,t)),this.mergeVertices()}function Lr(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Mr.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Pr(e,t){pn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new kr(e,t)),this.mergeVertices()}function kr(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];Mr.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Nr(e,t,n,i,r,o){pn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Or(e,t,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Or(e,t,n,i,r){Cn.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Bt,c=new Bt,u=new Dt,d=new Bt,h=[],p=[],f=[],m=[];function g(r){d=e.getPointAt(r/t,d);var a=o.normals[r],u=o.binormals[r];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);c.x=g*a.x+m*u.x,c.y=g*a.y+m*u.y,c.z=g*a.z+m*u.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=d.x+n*c.x,l.y=d.y+n*c.y,l.z=d.z+n*c.z,h.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===r?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=i;s++)u.x=a/t,u.y=s/i,f.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=i;a++){var e=(i+1)*(s-1)+(a-1),n=(i+1)*s+(a-1),r=(i+1)*s+a,o=(i+1)*(s-1)+a;m.push(e,n,o),m.push(n,r,o)}}()}(),this.setIndex(m),this.addAttribute("position",new _n(h,3)),this.addAttribute("normal",new _n(p,3)),this.addAttribute("uv",new _n(f,2))}function zr(e,t,n,i,r,o,a){pn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Dr(e,t,n,i,r,o)),this.mergeVertices()}function Dr(e,t,n,i,r,o){Cn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var a,s,l=[],c=[],u=[],d=[],h=new Bt,p=new Bt,f=new Bt,m=new Bt,g=new Bt,v=new Bt,A=new Bt;for(a=0;a<=n;++a){var y=a/n*r*Math.PI*2;for(C(y,r,o,e,f),C(y+.01,r,o,e,m),v.subVectors(m,f),A.addVectors(m,f),g.crossVectors(v,A),A.crossVectors(g,v),g.normalize(),A.normalize(),s=0;s<=i;++s){var b=s/i*Math.PI*2,x=-t*Math.cos(b),_=t*Math.sin(b);h.x=f.x+(x*A.x+_*g.x),h.y=f.y+(x*A.y+_*g.y),h.z=f.z+(x*A.z+_*g.z),c.push(h.x,h.y,h.z),p.subVectors(h,f).normalize(),u.push(p.x,p.y,p.z),d.push(a/n),d.push(s/i)}}for(s=1;s<=n;s++)for(a=1;a<=i;a++){var w=(i+1)*(s-1)+(a-1),M=(i+1)*s+(a-1),E=(i+1)*s+a,S=(i+1)*(s-1)+a;l.push(w,M,S),l.push(M,E,S)}function C(e,t,n,i,r){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new _n(c,3)),this.addAttribute("normal",new _n(u,3)),this.addAttribute("uv",new _n(d,2))}function Ir(e,t,n,i,r){pn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Fr(e,t,n,i,r)),this.mergeVertices()}function Fr(e,t,n,i,r){Cn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,a,s=[],l=[],c=[],u=[],d=new Bt,h=new Bt,p=new Bt;for(o=0;o<=n;o++)for(a=0;a<=i;a++){var f=a/i*r,m=o/n*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(f),h.y=(e+t*Math.cos(m))*Math.sin(f),h.z=t*Math.sin(m),l.push(h.x,h.y,h.z),d.x=e*Math.cos(f),d.y=e*Math.sin(f),p.subVectors(h,d).normalize(),c.push(p.x,p.y,p.z),u.push(a/i),u.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var g=(i+1)*o+a-1,v=(i+1)*(o-1)+a-1,A=(i+1)*(o-1)+a,y=(i+1)*o+a;s.push(g,v,y),s.push(v,A,y)}this.setIndex(s),this.addAttribute("position",new _n(l,3)),this.addAttribute("normal",new _n(c,3)),this.addAttribute("uv",new _n(u,2))}ji.prototype=Object.create(Nn.prototype),ji.prototype.constructor=ji,ji.prototype.isMeshDepthMaterial=!0,ji.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Wi.prototype=Object.create(Nn.prototype),Wi.prototype.constructor=Wi,Wi.prototype.isMeshDistanceMaterial=!0,Wi.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Xi.prototype=Object.create(Vt.prototype),Xi.prototype.constructor=Xi,Ki.prototype=Object.assign(Object.create(cn.prototype),{constructor:Ki,isPerspectiveCamera:!0,copy:function(e,t){return cn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*zt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*zt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*zt.RAD2DEG*Math.atan(Math.tan(.5*zt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*zt.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,t-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Qi.prototype=Object.assign(Object.create(Ki.prototype),{constructor:Qi,isArrayCamera:!0}),tr.prototype.isFogExp2=!0,tr.prototype.clone=function(){return new tr(this.color.getHex(),this.density)},tr.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},nr.prototype.isFog=!0,nr.prototype.clone=function(){return new nr(this.color.getHex(),this.near,this.far)},nr.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ir.prototype=Object.assign(Object.create(ln.prototype),{constructor:ir,copy:function(e,t){return ln.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),rr.prototype=Object.create(Nn.prototype),rr.prototype.constructor=rr,rr.prototype.isSpriteMaterial=!0,rr.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},or.prototype=Object.assign(Object.create(ln.prototype),{constructor:or,isSprite:!0,raycast:function(){var e=new Bt,t=new Bt,n=new Bt;return function(i,r){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var a=i.ray.origin.distanceTo(e);a<i.near||a>i.far||r.push({distance:a,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return ln.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),ar.prototype=Object.assign(Object.create(ln.prototype),{constructor:ar,copy:function(e){ln.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new Bt;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),update:function(){var e=new Bt,t=new Bt;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(sr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new It;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new It,t=new It;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var l=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(l,i[a]),e.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new sr(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),lr.prototype=Object.assign(Object.create(ln.prototype),{constructor:lr,isBone:!0}),cr.prototype=Object.assign(Object.create(Bn.prototype),{constructor:cr,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new lr,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Gt,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),(e=1/i.manhattanLength())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){Bn.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ur.prototype=Object.create(Nn.prototype),ur.prototype.constructor=ur,ur.prototype.isLineBasicMaterial=!0,ur.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},dr.prototype=Object.assign(Object.create(ln.prototype),{constructor:dr,isLine:!0,computeLineDistances:function(){var e=new Bt,t=new Bt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,a=i.count;o<a;o++)e.fromBufferAttribute(i,o-1),t.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new _n(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(r=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new It,t=new Dn,n=new Yt;return function(i,r){var o=i.linePrecision,a=o*o,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var c=new Bt,u=new Bt,d=new Bt,h=new Bt,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var g=f.array,v=0,A=g.length-1;v<A;v+=p){var y=g[v],b=g[v+1];if(c.fromArray(m,3*y),u.fromArray(m,3*b),!(t.distanceSqToSegment(c,u,h,d)>a))h.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(h))<i.near||w>i.far||r.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(v=0,A=m.length/3-1;v<A;v+=p){if(c.fromArray(m,3*v),u.fromArray(m,3*v+3),!(t.distanceSqToSegment(c,u,h,d)>a))h.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(h))<i.near||w>i.far||r.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(s.isGeometry){var x=s.vertices,_=x.length;for(v=0;v<_-1;v+=p){var w;if(!(t.distanceSqToSegment(x[v],x[v+1],h,d)>a))h.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(h))<i.near||w>i.far||r.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),hr.prototype=Object.assign(Object.create(dr.prototype),{constructor:hr,isLineSegments:!0,computeLineDistances:function(){var e=new Bt,t=new Bt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2)e.fromBufferAttribute(i,o),t.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);n.addAttribute("lineDistance",new _n(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t)}return this}}()}),pr.prototype=Object.assign(Object.create(dr.prototype),{constructor:pr,isLineLoop:!0}),fr.prototype=Object.create(Nn.prototype),fr.prototype.constructor=fr,fr.prototype.isPointsMaterial=!0,fr.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},mr.prototype=Object.assign(Object.create(ln.prototype),{constructor:mr,isPoints:!0,raycast:function(){var e=new It,t=new Dn,n=new Yt;return function(i,r){var o=this,a=this.geometry,s=this.matrixWorld,l=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==i.ray.intersectsSphere(n)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,d=new Bt,h=new Bt;if(a.isBufferGeometry){var p=a.index,f=a.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var A=m[g];d.fromArray(f,3*A),x(d,A)}else{g=0;for(var y=f.length/3;g<y;g++)d.fromArray(f,3*g),x(d,g)}}else{var b=a.vertices;for(g=0,y=b.length;g<y;g++)x(b[g],g)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<u){t.closestPointToPoint(e,h),h.applyMatrix4(s);var l=i.ray.origin.distanceTo(h);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:h.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),gr.prototype=Object.assign(Object.create(ln.prototype),{constructor:gr,isGroup:!0}),vr.prototype=Object.assign(Object.create(Vt.prototype),{constructor:vr,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ar.prototype=Object.create(Vt.prototype),Ar.prototype.constructor=Ar,Ar.prototype.isCompressedTexture=!0,yr.prototype=Object.create(Vt.prototype),yr.prototype.constructor=yr,yr.prototype.isDepthTexture=!0,br.prototype=Object.create(Cn.prototype),br.prototype.constructor=br,xr.prototype=Object.create(pn.prototype),xr.prototype.constructor=xr,_r.prototype=Object.create(Cn.prototype),_r.prototype.constructor=_r,wr.prototype=Object.create(pn.prototype),wr.prototype.constructor=wr,Mr.prototype=Object.create(Cn.prototype),Mr.prototype.constructor=Mr,Er.prototype=Object.create(pn.prototype),Er.prototype.constructor=Er,Sr.prototype=Object.create(Mr.prototype),Sr.prototype.constructor=Sr,Cr.prototype=Object.create(pn.prototype),Cr.prototype.constructor=Cr,Tr.prototype=Object.create(Mr.prototype),Tr.prototype.constructor=Tr,Rr.prototype=Object.create(pn.prototype),Rr.prototype.constructor=Rr,Lr.prototype=Object.create(Mr.prototype),Lr.prototype.constructor=Lr,Pr.prototype=Object.create(pn.prototype),Pr.prototype.constructor=Pr,kr.prototype=Object.create(Mr.prototype),kr.prototype.constructor=kr,Nr.prototype=Object.create(pn.prototype),Nr.prototype.constructor=Nr,Or.prototype=Object.create(Cn.prototype),Or.prototype.constructor=Or,zr.prototype=Object.create(pn.prototype),zr.prototype.constructor=zr,Dr.prototype=Object.create(Cn.prototype),Dr.prototype.constructor=Dr,Ir.prototype=Object.create(pn.prototype),Ir.prototype.constructor=Ir,Fr.prototype=Object.create(Cn.prototype),Fr.prototype.constructor=Fr;var Br=function(e,t,n){n=n||2;var i,r,o,a,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,h=Ur(e,0,d,n,!0),p=[];if(!h)return p;if(u&&(h=function(e,t,n,i){var r,o,a,s,l,c=[];for(r=0,o=t.length;r<o;r++)a=t[r]*i,s=r<o-1?t[r+1]*i:e.length,(l=Ur(e,a,s,i,!1))===l.next&&(l.steiner=!0),c.push(Zr(l));for(c.sort(Xr),r=0;r<c.length;r++)Yr(c[r],n),n=Hr(n,n.next);return n}(e,t,h,n)),e.length>80*n){i=o=e[0],r=a=e[1];for(var f=n;f<d;f+=n)s=e[f],l=e[f+1],s<i&&(i=s),l<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-i,a-r))?1/c:0}return Vr(h,p,n,i,r,c),p};function Ur(e,t,n,i,r){var o,a;if(r===function(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)a=ro(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=ro(o,e[o],e[o+1],a);return a&&eo(a,a.next)&&(oo(a),a=a.next),a}function Hr(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!eo(i,i.next)&&0!==$r(i.prev,i,i.next))i=i.next;else{if(oo(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Vr(e,t,n,i,r,o,a){if(e){!a&&o&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Jr(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,o);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?jr(e,i,r,o):Gr(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),oo(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?Vr(e=Wr(e,t,n),t,n,i,r,o,2):2===a&&qr(e,t,n,i,r,o):Vr(Hr(e),t,n,i,r,o,1);break}}}function Gr(e){var t=e.prev,n=e,i=e.next;if($r(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Kr(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&$r(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function jr(e,t,n,i){var r=e.prev,o=e,a=e.next;if($r(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,d=Jr(s,l,t,n,i),h=Jr(c,u,t,n,i),p=e.nextZ;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Kr(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&$r(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&Kr(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&$r(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function Wr(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!eo(r,o)&&to(r,i,i.next,o)&&no(r,o)&&no(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),oo(i),oo(i.next),i=e=o),i=i.next}while(i!==e);return i}function qr(e,t,n,i,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Qr(a,s)){var l=io(a,s);return a=Hr(a,a.next),l=Hr(l,l.next),Vr(a,t,n,i,r,o),void Vr(l,t,n,i,r,o)}s=s.next}a=a.next}while(a!==e)}function Xr(e,t){return e.x-t.x}function Yr(e,t){if(t=function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n.prev;var l,c=n,u=n.x,d=n.y,h=1/0;i=n.next;for(;i!==c;)r>=i.x&&i.x>=u&&r!==i.x&&Kr(o<d?r:a,o,u,d,o<d?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<h||l===h&&i.x>n.x)&&no(i,e)&&(n=i,h=l),i=i.next;return n}(e,t)){var n=io(t,e);Hr(n,n.next)}}function Jr(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Zr(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Kr(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function Qr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&to(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&no(e,t)&&no(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function $r(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function eo(e,t){return e.x===t.x&&e.y===t.y}function to(e,t,n,i){return!!(eo(e,t)&&eo(n,i)||eo(e,i)&&eo(n,t))||$r(e,t,n)>0!=$r(e,t,i)>0&&$r(n,i,e)>0!=$r(n,i,t)>0}function no(e,t){return $r(e.prev,e,e.next)<0?$r(e,t,e.next)>=0&&$r(e,e.prev,t)>=0:$r(e,t,e.prev)<0||$r(e,e.next,t)<0}function io(e,t){var n=new ao(e.i,e.x,e.y),i=new ao(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function ro(e,t,n,i){var r=new ao(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function oo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ao(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var so={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return so.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];lo(e),co(n,e);var o=e.length;t.forEach(lo);for(var a=0;a<t.length;a++)i.push(o),o+=t[a].length,co(n,t[a]);var s=Br(n,i);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function lo(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function co(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function uo(e,t){pn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ho(e,t)),this.mergeVertices()}function ho(e,t){Cn.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,i=[],r=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++){s(e[o])}function s(e){var o,a,s,l,c,u,d,h,p=[],f=void 0!==t.curveSegments?t.curveSegments:12,m=void 0!==t.steps?t.steps:1,g=void 0!==t.amount?t.amount:100,v=void 0===t.bevelEnabled||t.bevelEnabled,A=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:A-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,x=t.extrudePath,_=void 0!==t.UVGenerator?t.UVGenerator:po,w=!1;x&&(o=x.getSpacedPoints(m),w=!0,v=!1,a=x.computeFrenetFrames(m,!1),s=new Bt,l=new Bt,c=new Bt),v||(b=0,A=0,y=0);var M=e.extractPoints(f),E=M.shape,S=M.holes;if(!so.isClockWise(E))for(E=E.reverse(),d=0,h=S.length;d<h;d++)u=S[d],so.isClockWise(u)&&(S[d]=u.reverse());var C=so.triangulateShape(E,S),T=E;for(d=0,h=S.length;d<h;d++)u=S[d],E=E.concat(u);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,P,k,N,O,z,D=E.length,I=C.length;function F(e,t,n){var i,r,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,d=a*c-s*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=t.x-s/h,m=t.y+a/h,g=((n.x-c/p-f)*c-(n.y+l/p-m)*l)/(a*c-s*l),v=(i=f+a*g-e.x)*i+(r=m+s*g-e.y)*r;if(v<=2)return new Dt(i,r);o=Math.sqrt(v/2)}else{var A=!1;a>Number.EPSILON?l>Number.EPSILON&&(A=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(A=!0):Math.sign(s)===Math.sign(c)&&(A=!0),A?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new Dt(i/o,r/o)}for(var B=[],U=0,H=T.length,V=H-1,G=U+1;U<H;U++,V++,G++)V===H&&(V=0),G===H&&(G=0),B[U]=F(T[U],T[V],T[G]);var j,W,q=[],X=B.concat();for(d=0,h=S.length;d<h;d++){for(u=S[d],j=[],U=0,V=(H=u.length)-1,G=U+1;U<H;U++,V++,G++)V===H&&(V=0),G===H&&(G=0),j[U]=F(u[U],u[V],u[G]);q.push(j),X=X.concat(j)}for(L=0;L<b;L++){for(k=L/b,N=A*Math.cos(k*Math.PI/2),P=y*Math.sin(k*Math.PI/2),U=0,H=T.length;U<H;U++)J((O=R(T[U],B[U],P)).x,O.y,-N);for(d=0,h=S.length;d<h;d++)for(u=S[d],j=q[d],U=0,H=u.length;U<H;U++)J((O=R(u[U],j[U],P)).x,O.y,-N)}for(P=y,U=0;U<D;U++)O=v?R(E[U],X[U],P):E[U],w?(l.copy(a.normals[0]).multiplyScalar(O.x),s.copy(a.binormals[0]).multiplyScalar(O.y),c.copy(o[0]).add(l).add(s),J(c.x,c.y,c.z)):J(O.x,O.y,0);for(W=1;W<=m;W++)for(U=0;U<D;U++)O=v?R(E[U],X[U],P):E[U],w?(l.copy(a.normals[W]).multiplyScalar(O.x),s.copy(a.binormals[W]).multiplyScalar(O.y),c.copy(o[W]).add(l).add(s),J(c.x,c.y,c.z)):J(O.x,O.y,g/m*W);for(L=b-1;L>=0;L--){for(k=L/b,N=A*Math.cos(k*Math.PI/2),P=y*Math.sin(k*Math.PI/2),U=0,H=T.length;U<H;U++)J((O=R(T[U],B[U],P)).x,O.y,g+N);for(d=0,h=S.length;d<h;d++)for(u=S[d],j=q[d],U=0,H=u.length;U<H;U++)O=R(u[U],j[U],P),w?J(O.x,O.y+o[m-1].y,o[m-1].x+N):J(O.x,O.y,g+N)}function Y(e,t){var n,i;for(U=e.length;--U>=0;){n=U,(i=U-1)<0&&(i=e.length-1);var r=0,o=m+2*b;for(r=0;r<o;r++){var a=D*r,s=D*(r+1);K(t+n+a,t+i+a,t+i+s,t+n+s)}}}function J(e,t,n){p.push(e),p.push(t),p.push(n)}function Z(e,t,r){Q(e),Q(t),Q(r);var o=i.length/3,a=_.generateTopUV(n,i,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function K(e,t,r,o){Q(e),Q(t),Q(o),Q(t),Q(r),Q(o);var a=i.length/3,s=_.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function Q(e){i.push(p[3*e+0]),i.push(p[3*e+1]),i.push(p[3*e+2])}function $(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(v){var t=0,r=D*t;for(U=0;U<I;U++)Z((z=C[U])[2]+r,z[1]+r,z[0]+r);for(r=D*(t=m+2*b),U=0;U<I;U++)Z((z=C[U])[0]+r,z[1]+r,z[2]+r)}else{for(U=0;U<I;U++)Z((z=C[U])[2],z[1],z[0]);for(U=0;U<I;U++)Z((z=C[U])[0]+D*m,z[1]+D*m,z[2]+D*m)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(Y(T,t),t+=T.length,d=0,h=S.length;d<h;d++)Y(u=S[d],t),t+=u.length;n.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new _n(i,3)),this.addAttribute("uv",new _n(r,2)),this.computeVertexNormals()}uo.prototype=Object.create(pn.prototype),uo.prototype.constructor=uo,ho.prototype=Object.create(Cn.prototype),ho.prototype.constructor=ho;var po={generateTopUV:function(e,t,n,i,r){var o=t[3*n],a=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Dt(o,a),new Dt(s,l),new Dt(c,u)]},generateSideWallUV:function(e,t,n,i,r,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<.01?[new Dt(a,1-l),new Dt(c,1-d),new Dt(h,1-f),new Dt(m,1-v)]:[new Dt(s,1-l),new Dt(u,1-d),new Dt(p,1-f),new Dt(g,1-v)]}};function fo(e,t){pn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new mo(e,t)),this.mergeVertices()}function mo(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new pn;var i=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ho.call(this,i,t),this.type="TextBufferGeometry"}function go(e,t,n,i,r,o,a){pn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new vo(e,t,n,i,r,o,a)),this.mergeVertices()}function vo(e,t,n,i,r,o,a){Cn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,l,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),u=0,d=[],h=new Bt,p=new Bt,f=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var A=[],y=l/n;for(s=0;s<=t;s++){var b=s/t;h.x=-e*Math.cos(i+b*r)*Math.sin(o+y*a),h.y=e*Math.cos(o+y*a),h.z=e*Math.sin(i+b*r)*Math.sin(o+y*a),m.push(h.x,h.y,h.z),p.set(h.x,h.y,h.z).normalize(),g.push(p.x,p.y,p.z),v.push(b,1-y),A.push(u++)}d.push(A)}for(l=0;l<n;l++)for(s=0;s<t;s++){var x=d[l][s+1],_=d[l][s],w=d[l+1][s],M=d[l+1][s+1];(0!==l||o>0)&&f.push(x,_,M),(l!==n-1||c<Math.PI)&&f.push(_,w,M)}this.setIndex(f),this.addAttribute("position",new _n(m,3)),this.addAttribute("normal",new _n(g,3)),this.addAttribute("uv",new _n(v,2))}function Ao(e,t,n,i,r,o){pn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new yo(e,t,n,i,r,o)),this.mergeVertices()}function yo(e,t,n,i,r,o){Cn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,l,c=[],u=[],d=[],h=[],p=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new Bt,g=new Dt;for(s=0;s<=i;s++){for(l=0;l<=n;l++)a=r+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),d.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,h.push(g.x,g.y);p+=f}for(s=0;s<i;s++){var v=s*(n+1);for(l=0;l<n;l++){var A=a=l+v,y=a+n+1,b=a+n+2,x=a+1;c.push(A,y,x),c.push(y,b,x)}}this.setIndex(c),this.addAttribute("position",new _n(u,3)),this.addAttribute("normal",new _n(d,3)),this.addAttribute("uv",new _n(h,2))}function bo(e,t,n,i){pn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new xo(e,t,n,i)),this.mergeVertices()}function xo(e,t,n,i){Cn.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=zt.clamp(i,0,2*Math.PI);var r,o,a,s=[],l=[],c=[],u=1/t,d=new Bt,h=new Dt;for(o=0;o<=t;o++){var p=n+o*u*i,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)d.x=e[a].x*f,d.y=e[a].y,d.z=e[a].x*m,l.push(d.x,d.y,d.z),h.x=o/t,h.y=a/(e.length-1),c.push(h.x,h.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=r=a+o*e.length,v=r+e.length,A=r+e.length+1,y=r+1;s.push(g,v,y),s.push(v,A,y)}if(this.setIndex(s),this.addAttribute("position",new _n(l,3)),this.addAttribute("uv",new _n(c,2)),this.computeVertexNormals(),i===2*Math.PI){var b=this.attributes.normal.array,x=new Bt,_=new Bt,w=new Bt;for(r=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)x.x=b[a+0],x.y=b[a+1],x.z=b[a+2],_.x=b[r+a+0],_.y=b[r+a+1],_.z=b[r+a+2],w.addVectors(x,_).normalize(),b[a+0]=b[r+a+0]=w.x,b[a+1]=b[r+a+1]=w.y,b[a+2]=b[r+a+2]=w.z}}function _o(e,t){pn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new wo(e,t)),this.mergeVertices()}function wo(e,t){Cn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(a,s,l),a+=s,s=0;function c(e){var a,l,c,u=i.length/3,d=e.extractPoints(t),h=d.shape,p=d.holes;if(!1===so.isClockWise(h))for(h=h.reverse(),a=0,l=p.length;a<l;a++)c=p[a],!0===so.isClockWise(c)&&(p[a]=c.reverse());var f=so.triangulateShape(h,p);for(a=0,l=p.length;a<l;a++)c=p[a],h=h.concat(c);for(a=0,l=h.length;a<l;a++){var m=h[a];i.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var g=f[a],v=g[0]+u,A=g[1]+u,y=g[2]+u;n.push(v,A,y),s+=3}}this.setIndex(n),this.addAttribute("position",new _n(i,3)),this.addAttribute("normal",new _n(r,3)),this.addAttribute("uv",new _n(o,2))}function Mo(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function Eo(e,t){Cn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,o,a=[],s=Math.cos(zt.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];e.isBufferGeometry?(o=new pn).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var d=o.vertices,h=o.faces,p=0,f=h.length;p<f;p++)for(var m=h[p],g=0;g<3;g++)n=m[u[g]],i=m[u[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var v=c[r];if(void 0===v.face2||h[v.face1].normal.dot(h[v.face2].normal)<=s){var A=d[v.index1];a.push(A.x,A.y,A.z),A=d[v.index2],a.push(A.x,A.y,A.z)}}this.addAttribute("position",new _n(a,3))}function So(e,t,n,i,r,o,a,s){pn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Co(e,t,n,i,r,o,a,s)),this.mergeVertices()}function Co(e,t,n,i,r,o,a,s){Cn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],d=[],h=[],p=0,f=[],m=n/2,g=0;function v(n){var r,o,f,v=new Dt,A=new Bt,y=0,b=!0===n?e:t,x=!0===n?1:-1;for(o=p,r=1;r<=i;r++)u.push(0,m*x,0),d.push(0,x,0),h.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var _=r/i*s+a,w=Math.cos(_),M=Math.sin(_);A.x=b*M,A.y=m*x,A.z=b*w,u.push(A.x,A.y,A.z),d.push(0,x,0),v.x=.5*w+.5,v.y=.5*M*x+.5,h.push(v.x,v.y),p++}for(r=0;r<i;r++){var E=o+r,S=f+r;!0===n?c.push(S,S+1,E):c.push(S+1,S,E),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){var o,v,A=new Bt,y=new Bt,b=0,x=(t-e)/n;for(v=0;v<=r;v++){var _=[],w=v/r,M=w*(t-e)+e;for(o=0;o<=i;o++){var E=o/i,S=E*s+a,C=Math.sin(S),T=Math.cos(S);y.x=M*C,y.y=-w*n+m,y.z=M*T,u.push(y.x,y.y,y.z),A.set(C,x,T).normalize(),d.push(A.x,A.y,A.z),h.push(E,1-w),_.push(p++)}f.push(_)}for(o=0;o<i;o++)for(v=0;v<r;v++){var R=f[v][o],L=f[v+1][o],P=f[v+1][o+1],k=f[v][o+1];c.push(R,L,k),c.push(L,P,k),b+=6}l.addGroup(g,b,0),g+=b}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.addAttribute("position",new _n(u,3)),this.addAttribute("normal",new _n(d,3)),this.addAttribute("uv",new _n(h,2))}function To(e,t,n,i,r,o,a){So.call(this,0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Ro(e,t,n,i,r,o,a){Co.call(this,0,e,t,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Lo(e,t,n,i){pn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Po(e,t,n,i)),this.mergeVertices()}function Po(e,t,n,i){Cn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,o,a=[],s=[],l=[],c=[],u=new Bt,d=new Dt;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,r=3;o<=t;o++,r+=3){var h=n+o/t*i;u.x=e*Math.cos(h),u.y=e*Math.sin(h),s.push(u.x,u.y,u.z),l.push(0,0,1),d.x=(s[r]/e+1)/2,d.y=(s[r+1]/e+1)/2,c.push(d.x,d.y)}for(r=1;r<=t;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new _n(s,3)),this.addAttribute("normal",new _n(l,3)),this.addAttribute("uv",new _n(c,2))}fo.prototype=Object.create(pn.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(ho.prototype),mo.prototype.constructor=mo,go.prototype=Object.create(pn.prototype),go.prototype.constructor=go,vo.prototype=Object.create(Cn.prototype),vo.prototype.constructor=vo,Ao.prototype=Object.create(pn.prototype),Ao.prototype.constructor=Ao,yo.prototype=Object.create(Cn.prototype),yo.prototype.constructor=yo,bo.prototype=Object.create(pn.prototype),bo.prototype.constructor=bo,xo.prototype=Object.create(Cn.prototype),xo.prototype.constructor=xo,_o.prototype=Object.create(pn.prototype),_o.prototype.constructor=_o,_o.prototype.toJSON=function(){var e=pn.prototype.toJSON.call(this);return Mo(this.parameters.shapes,e)},wo.prototype=Object.create(Cn.prototype),wo.prototype.constructor=wo,wo.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return Mo(this.parameters.shapes,e)},Eo.prototype=Object.create(Cn.prototype),Eo.prototype.constructor=Eo,So.prototype=Object.create(pn.prototype),So.prototype.constructor=So,Co.prototype=Object.create(Cn.prototype),Co.prototype.constructor=Co,To.prototype=Object.create(So.prototype),To.prototype.constructor=To,Ro.prototype=Object.create(Co.prototype),Ro.prototype.constructor=Ro,Lo.prototype=Object.create(pn.prototype),Lo.prototype.constructor=Lo,Po.prototype=Object.create(Cn.prototype),Po.prototype.constructor=Po;var ko=Object.freeze({WireframeGeometry:br,ParametricGeometry:xr,ParametricBufferGeometry:_r,TetrahedronGeometry:Er,TetrahedronBufferGeometry:Sr,OctahedronGeometry:Cr,OctahedronBufferGeometry:Tr,IcosahedronGeometry:Rr,IcosahedronBufferGeometry:Lr,DodecahedronGeometry:Pr,DodecahedronBufferGeometry:kr,PolyhedronGeometry:wr,PolyhedronBufferGeometry:Mr,TubeGeometry:Nr,TubeBufferGeometry:Or,TorusKnotGeometry:zr,TorusKnotBufferGeometry:Dr,TorusGeometry:Ir,TorusBufferGeometry:Fr,TextGeometry:fo,TextBufferGeometry:mo,SphereGeometry:go,SphereBufferGeometry:vo,RingGeometry:Ao,RingBufferGeometry:yo,PlaneGeometry:Ln,PlaneBufferGeometry:Pn,LatheGeometry:bo,LatheBufferGeometry:xo,ShapeGeometry:_o,ShapeBufferGeometry:wo,ExtrudeGeometry:uo,ExtrudeBufferGeometry:ho,EdgesGeometry:Eo,ConeGeometry:To,ConeBufferGeometry:Ro,CylinderGeometry:So,CylinderBufferGeometry:Co,CircleGeometry:Lo,CircleBufferGeometry:Po,BoxGeometry:Tn,BoxBufferGeometry:Rn});function No(e){Nn.call(this),this.type="ShadowMaterial",this.color=new en(0),this.transparent=!0,this.setValues(e)}function Oo(e){zn.call(this,e),this.type="RawShaderMaterial"}function zo(e){Nn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new en(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Do(e){zo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Io(e){Nn.call(this),this.type="MeshPhongMaterial",this.color=new en(16777215),this.specular=new en(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Fo(e){Io.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Bo(e){Nn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Uo(e){Nn.call(this),this.type="MeshLambertMaterial",this.color=new en(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ho(e){ur.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}No.prototype=Object.create(Nn.prototype),No.prototype.constructor=No,No.prototype.isShadowMaterial=!0,No.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this},Oo.prototype=Object.create(zn.prototype),Oo.prototype.constructor=Oo,Oo.prototype.isRawShaderMaterial=!0,zo.prototype=Object.create(Nn.prototype),zo.prototype.constructor=zo,zo.prototype.isMeshStandardMaterial=!0,zo.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Do.prototype=Object.create(zo.prototype),Do.prototype.constructor=Do,Do.prototype.isMeshPhysicalMaterial=!0,Do.prototype.copy=function(e){return zo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Io.prototype=Object.create(Nn.prototype),Io.prototype.constructor=Io,Io.prototype.isMeshPhongMaterial=!0,Io.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Fo.prototype=Object.create(Io.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isMeshToonMaterial=!0,Fo.prototype.copy=function(e){return Io.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Bo.prototype=Object.create(Nn.prototype),Bo.prototype.constructor=Bo,Bo.prototype.isMeshNormalMaterial=!0,Bo.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Uo.prototype=Object.create(Nn.prototype),Uo.prototype.constructor=Uo,Uo.prototype.isMeshLambertMaterial=!0,Uo.prototype.copy=function(e){return Nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ho.prototype=Object.create(ur.prototype),Ho.prototype.constructor=Ho,Ho.prototype.isLineDashedMaterial=!0,Ho.prototype.copy=function(e){return ur.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Vo=Object.freeze({ShadowMaterial:No,SpriteMaterial:rr,RawShaderMaterial:Oo,ShaderMaterial:zn,PointsMaterial:fr,MeshPhysicalMaterial:Do,MeshStandardMaterial:zo,MeshPhongMaterial:Io,MeshToonMaterial:Fo,MeshNormalMaterial:Bo,MeshLambertMaterial:Uo,MeshDepthMaterial:ji,MeshDistanceMaterial:Wi,MeshBasicMaterial:On,LineDashedMaterial:Ho,LineBasicMaterial:ur,Material:Nn}),Go={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function jo(e,t,n){var i=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Wo=new jo,qo={};function Xo(e){this.manager=void 0!==e?e:Wo}function Yo(e){this.manager=void 0!==e?e:Wo,this._parser=null}function Jo(e){this.manager=void 0!==e?e:Wo,this._parser=null}function Zo(e){this.manager=void 0!==e?e:Wo}function Ko(e){this.manager=void 0!==e?e:Wo}function Qo(e){this.manager=void 0!==e?e:Wo}function $o(){this.type="Curve",this.arcLengthDivisions=200}function ea(e,t,n,i,r,o,a,s){$o.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ta(e,t,n,i,r,o){ea.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function na(){var e=0,t=0,n=0,i=0;function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+s)+(i-n)/s;r(t,n,l*=a,c*=a)},calc:function(r){var o=r*r;return e+t*r+n*o+i*(o*r)}}}Object.assign(Xo.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Go.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(void 0===qo[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],l=!!a[2],c=a[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var u,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var h=new Uint8Array(c.length),p=0;p<c.length;p++)h[p]=c.charCodeAt(p);u="blob"===d?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(c,s);break;case"json":u=JSON.parse(c);break;default:u=c}window.setTimeout(function(){t&&t(u),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{qo[e]=[],qo[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Go.add(e,n);var i=qo[e];if(delete qo[e],200===this.status){for(var o=0,a=i.length;o<a;o++){(s=i[o]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(o=0,a=i.length;o<a;o++){(s=i[o]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(o=0,a=i.length;o<a;o++){var s;(s=i[o]).onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=qo[e],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=qo[e];delete qo[e];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}qo[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Yo.prototype,{load:function(e,t,n,i){var r=this,o=[],a=new Ar;a.image=o;var s=new Xo(this.manager);function l(l){s.load(e[l],function(e){var n=r._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=xe),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,d=e.length;u<d;++u)l(u);else s.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=xe),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,i);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Jo.prototype,{load:function(e,t,n,i){var r=this,o=new qt,a=new Xo(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ge,o.wrapT=void 0!==n.wrapT?n.wrapT:ge,o.magFilter=void 0!==n.magFilter?n.magFilter:xe,o.minFilter=void 0!==n.minFilter?n.minFilter:we,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=xe),o.needsUpdate=!0,t&&t(o,n))},n,i),o}}),Object.assign(Zo.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Go.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Go.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),a.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ko.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new Hn,o=new Zo(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){r.images[n]=e,6===++a&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(var l=0;l<e.length;++l)s(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Qo.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new Vt,o=new Zo(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){r.image=n;var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Ie:Fe,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign($o.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,o=i.length;n=t||e*i[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(o-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,o=new Bt,a=[],s=[],l=[],c=new Bt,u=new It;for(n=0;n<=e;n++)i=n/e,a[n]=this.getTangentAt(i),a[n].normalize();s[0]=new Bt,l[0]=new Bt;var d=Number.MAX_VALUE,h=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(h<=d&&(d=h,o.set(1,0,0)),p<=d&&(d=p,o.set(0,1,0)),f<=d&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(zt.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(c,r))),l[n].crossVectors(a[n],s[n]);if(!0===t)for(r=Math.acos(zt.clamp(s[0].dot(s[e]),-1,1)),r/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(r=-r),n=1;n<=e;n++)s[n].applyMatrix4(u.makeRotationAxis(a[n],r*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ea.prototype=Object.create($o.prototype),ea.prototype.constructor=ea,ea.prototype.isEllipseCurve=!0,ea.prototype.getPoint=function(e,t){for(var n=t||new Dt,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var a=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*c-h*u+this.aX,l=d*u+h*c+this.aY}return n.set(s,l)},ea.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ea.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ea.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ta.prototype=Object.create(ea.prototype),ta.prototype.constructor=ta,ta.prototype.isArcCurve=!0;var ia=new Bt,ra=new na,oa=new na,aa=new na;function sa(e,t,n,i){$o.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function la(e,t,n,i,r){var o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}function ca(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function ua(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function da(e,t,n,i){$o.call(this),this.type="CubicBezierCurve",this.v0=e||new Dt,this.v1=t||new Dt,this.v2=n||new Dt,this.v3=i||new Dt}function ha(e,t,n,i){$o.call(this),this.type="CubicBezierCurve3",this.v0=e||new Bt,this.v1=t||new Bt,this.v2=n||new Bt,this.v3=i||new Bt}function pa(e,t){$o.call(this),this.type="LineCurve",this.v1=e||new Dt,this.v2=t||new Dt}function fa(e,t){$o.call(this),this.type="LineCurve3",this.v1=e||new Bt,this.v2=t||new Bt}function ma(e,t,n){$o.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Dt,this.v1=t||new Dt,this.v2=n||new Dt}function ga(e,t,n){$o.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Bt,this.v1=t||new Bt,this.v2=n||new Bt}function va(e){$o.call(this),this.type="SplineCurve",this.points=e||[]}sa.prototype=Object.create($o.prototype),sa.prototype.constructor=sa,sa.prototype.isCatmullRomCurve3=!0,sa.prototype.getPoint=function(e,t){var n,i,r,o,a=t||new Bt,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),d=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===d&&u===l-1&&(u=l-2,d=1),this.closed||u>0?n=s[(u-1)%l]:(ia.subVectors(s[0],s[1]).add(s[0]),n=ia),i=s[u%l],r=s[(u+1)%l],this.closed||u+2<l?o=s[(u+2)%l]:(ia.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=ia),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),h),f=Math.pow(i.distanceToSquared(r),h),m=Math.pow(r.distanceToSquared(o),h);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),ra.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,p,f,m),oa.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,p,f,m),aa.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(ra.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),oa.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),aa.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return a.set(ra.calc(d),oa.calc(d),aa.calc(d)),a},sa.prototype.copy=function(e){$o.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},sa.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},sa.prototype.fromJSON=function(e){$o.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Bt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},da.prototype=Object.create($o.prototype),da.prototype.constructor=da,da.prototype.isCubicBezierCurve=!0,da.prototype.getPoint=function(e,t){var n=t||new Dt,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(ua(e,i.x,r.x,o.x,a.x),ua(e,i.y,r.y,o.y,a.y)),n},da.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},da.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},da.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ha.prototype=Object.create($o.prototype),ha.prototype.constructor=ha,ha.prototype.isCubicBezierCurve3=!0,ha.prototype.getPoint=function(e,t){var n=t||new Bt,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(ua(e,i.x,r.x,o.x,a.x),ua(e,i.y,r.y,o.y,a.y),ua(e,i.z,r.z,o.z,a.z)),n},ha.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ha.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ha.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},pa.prototype=Object.create($o.prototype),pa.prototype.constructor=pa,pa.prototype.isLineCurve=!0,pa.prototype.getPoint=function(e,t){var n=t||new Dt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},pa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},pa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},pa.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},pa.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},pa.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fa.prototype=Object.create($o.prototype),fa.prototype.constructor=fa,fa.prototype.isLineCurve3=!0,fa.prototype.getPoint=function(e,t){var n=t||new Bt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},fa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},fa.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},fa.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},fa.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ma.prototype=Object.create($o.prototype),ma.prototype.constructor=ma,ma.prototype.isQuadraticBezierCurve=!0,ma.prototype.getPoint=function(e,t){var n=t||new Dt,i=this.v0,r=this.v1,o=this.v2;return n.set(ca(e,i.x,r.x,o.x),ca(e,i.y,r.y,o.y)),n},ma.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ma.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ma.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ga.prototype=Object.create($o.prototype),ga.prototype.constructor=ga,ga.prototype.isQuadraticBezierCurve3=!0,ga.prototype.getPoint=function(e,t){var n=t||new Bt,i=this.v0,r=this.v1,o=this.v2;return n.set(ca(e,i.x,r.x,o.x),ca(e,i.y,r.y,o.y),ca(e,i.z,r.z,o.z)),n},ga.prototype.copy=function(e){return $o.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ga.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ga.prototype.fromJSON=function(e){return $o.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},va.prototype=Object.create($o.prototype),va.prototype.constructor=va,va.prototype.isSplineCurve=!0,va.prototype.getPoint=function(e,t){var n=t||new Dt,i=this.points,r=(i.length-1)*e,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(la(a,s.x,l.x,c.x,u.x),la(a,s.y,l.y,c.y,u.y)),n},va.prototype.copy=function(e){$o.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},va.prototype.toJSON=function(){var e=$o.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},va.prototype.fromJSON=function(e){$o.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Dt).fromArray(i))}return this};var Aa=Object.freeze({ArcCurve:ta,CatmullRomCurve3:sa,CubicBezierCurve:da,CubicBezierCurve3:ha,EllipseCurve:ea,LineCurve:pa,LineCurve3:fa,QuadraticBezierCurve:ma,QuadraticBezierCurve3:ga,SplineCurve:va});function ya(){$o.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ba(e){ya.call(this),this.type="Path",this.currentPoint=new Dt,e&&this.setFromPoints(e)}function xa(e){ba.call(this,e),this.uuid=zt.generateUUID(),this.type="Shape",this.holes=[]}function _a(e,t){ln.call(this),this.type="Light",this.color=new en(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function wa(e,t,n){_a.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ln.DefaultUp),this.updateMatrix(),this.groundColor=new en(t)}function Ma(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Dt(512,512),this.map=null,this.matrix=new It}function Ea(){Ma.call(this,new Ki(50,1,.5,500))}function Sa(e,t,n,i,r,o){_a.call(this,e,t),this.type="SpotLight",this.position.copy(ln.DefaultUp),this.updateMatrix(),this.target=new ln,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Ea}function Ca(e,t,n,i){_a.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Ma(new Ki(90,1,.5,500))}function Ta(){Ma.call(this,new un(-5,5,5,-5,.5,500))}function Ra(e,t){_a.call(this,e,t),this.type="DirectionalLight",this.position.copy(ln.DefaultUp),this.updateMatrix(),this.target=new ln,this.shadow=new Ta}function La(e,t){_a.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Pa(e,t,n,i){_a.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function ka(e,t,n,i){Ga.call(this,e,t,n,i)}function Na(e,t,n){Ga.call(this,e,t,n)}function Oa(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function za(e,t,n,i){Oa.call(this,e,t,n,i)}function Da(e,t,n,i){Ga.call(this,e,t,n,i)}function Ia(e,t,n,i){Ga.call(this,e,t,n,i)}function Fa(e,t,n,i){Ga.call(this,e,t,n,i)}function Ba(e,t,n,i){Oa.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ua(e,t,n,i){Oa.call(this,e,t,n,i)}function Ha(e,t,n,i){Oa.call(this,e,t,n,i)}ya.prototype=Object.assign(Object.create($o.prototype),{constructor:ya,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new pa(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){$o.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=$o.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){$o.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new Aa[i.type]).fromJSON(i))}return this}}),ba.prototype=Object.assign(Object.create(ya.prototype),{constructor:ba,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new pa(this.currentPoint.clone(),new Dt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new ma(this.currentPoint.clone(),new Dt(e,t),new Dt(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,o){var a=new da(this.currentPoint.clone(),new Dt(e,t),new Dt(n,i),new Dt(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(e){var t=new va([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,i,r,o)},absarc:function(e,t,n,i,r,o){this.absellipse(e,t,n,n,i,r,o)},ellipse:function(e,t,n,i,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,n,i,r,o,a,s)},absellipse:function(e,t,n,i,r,o,a,s){var l=new ea(e,t,n,i,r,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return ya.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=ya.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ya.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),xa.prototype=Object.assign(Object.create(ba.prototype),{constructor:xa,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ba.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=ba.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){ba.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new ba).fromJSON(i))}return this}}),_a.prototype=Object.assign(Object.create(ln.prototype),{constructor:_a,isLight:!0,copy:function(e){return ln.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),wa.prototype=Object.assign(Object.create(_a.prototype),{constructor:wa,isHemisphereLight:!0,copy:function(e){return _a.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ma.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ea.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Ea,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*zt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),Sa.prototype=Object.assign(Object.create(_a.prototype),{constructor:Sa,isSpotLight:!0,copy:function(e){return _a.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ca.prototype=Object.assign(Object.create(_a.prototype),{constructor:Ca,isPointLight:!0,copy:function(e){return _a.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ta.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Ta}),Ra.prototype=Object.assign(Object.create(_a.prototype),{constructor:Ra,isDirectionalLight:!0,copy:function(e){return _a.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),La.prototype=Object.assign(Object.create(_a.prototype),{constructor:La,isAmbientLight:!0}),Pa.prototype=Object.assign(Object.create(_a.prototype),{constructor:Pa,isRectAreaLight:!0,copy:function(e){return _a.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=_a.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ka.prototype=Object.assign(Object.create(Ga.prototype),{constructor:ka,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Na.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Na,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:gt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Oa.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var o;n:{i:if(!(e<i)){for(var a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;if(r=i,e<(i=t[++n]))break t}o=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,e>=(r=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Oa.prototype,{beforeStart_:Oa.prototype.copySampleValue_,afterEnd_:Oa.prototype.copySampleValue_}),za.prototype=Object.assign(Object.create(Oa.prototype),{constructor:za,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(i-t),c=s+a;s!==c;s+=4)Ft.slerpFlat(r,0,o,s-a,o,s,l);return r}}),Da.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Da,ValueTypeName:"quaternion",DefaultInterpolation:vt,InterpolantFactoryMethodLinear:function(e){return new za(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ia.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Ia,ValueTypeName:"color"}),Fa.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Fa,ValueTypeName:"number"}),Ba.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Ba,DefaultSettings_:{endingStart:yt,endingEnd:yt},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case bt:r=e,a=2*t-n;break;case xt:a=t+i[r=i.length-2]-i[r+1];break;default:r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case bt:o=e,s=2*n-t;break;case xt:o=1,s=n+i[1]-i[0];break;default:o=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,A=(-1-h)*m+(1.5+h)*f+.5*p,y=h*m-h*f,b=0;b!==a;++b)r[b]=g*o[c+b]+v*o[l+b]+A*o[s+b]+y*o[u+b];return r}}),Ua.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Ua,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(i-t),u=1-c,d=0;d!==a;++d)r[d]=o[l+d]*u+o[s+d]*c;return r}}),Ha.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Ha,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Va={arraySlice:function(e,t,n){return Va.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*t,l=0;l!==t;++l)r[a++]=e[s+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)}}};function Ga(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Va.convertArray(t,this.TimeBufferType),this.values=Va.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function ja(e,t,n,i){Ga.call(this,e,t,n,i)}function Wa(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=zt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function qa(e){this.manager=void 0!==e?e:Wo,this.textures={}}function Xa(e){this.manager=void 0!==e?e:Wo}Object.assign(Ga,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Ga._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];Va.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Va.convertArray(e.times,Array),values:Va.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fa;case"vector":case"vector2":case"vector3":case"vector4":return ja;case"color":return Ia;case"quaternion":return Da;case"bool":case"boolean":return Na;case"string":return ka}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Ga.prototype,{constructor:Ga,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:vt,InterpolantFactoryMethodDiscrete:function(e){return new Ha(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Ua(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ba(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case gt:t=this.InterpolantFactoryMethodDiscrete;break;case vt:t=this.InterpolantFactoryMethodLinear;break;case At:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gt;case this.InterpolantFactoryMethodLinear:return vt;case this.InterpolantFactoryMethodSmooth:return At}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Va.arraySlice(n,r,o),this.values=Va.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==i&&Va.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===At,r=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(i)s=!0;else for(var c=a*n,u=c-n,d=c+n,h=0;h!==n;++h){var p=t[c+h];if(p!==t[u+h]||p!==t[d+h]){s=!0;break}}if(s){if(a!==r){e[r]=e[a];var f=a*n,m=r*n;for(h=0;h!==n;++h)t[m+h]=t[f+h]}++r}}if(o>0){e[r]=e[o];for(f=o*n,m=r*n,h=0;h!==n;++h)t[m+h]=t[f+h];++r}return r!==e.length&&(this.times=Va.arraySlice(e,0,r),this.values=Va.arraySlice(t,0,r*n)),this}}),ja.prototype=Object.assign(Object.create(Ga.prototype),{constructor:ja,ValueTypeName:"vector"}),Object.assign(Wa,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,o=n.length;r!==o;++r)t.push(Ga.parse(n[r]).scale(i));return new Wa(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,o=n.length;r!==o;++r)t.push(Ga.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=Va.getKeyframeOrder(s);s=Va.sortedArray(s,1,c),l=Va.sortedArray(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new Fa(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new Wa(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(r);if(l&&l.length>1){var c=i[d=l[1]];c||(i[d]=c=[]),c.push(s)}}var u=[];for(var d in i)u.push(Wa.CreateFromMorphTargetSequence(d,i[d],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var o=[],a=[];Va.flattenJSON(n,o,a,i),0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},d=0;d<c.length;d++)if(c[d].morphTargets)for(var h=0;h<c[d].morphTargets.length;h++)u[c[d].morphTargets[h]]=-1;for(var p in u){var f=[],m=[];for(h=0;h!==c[d].morphTargets.length;++h){var g=c[d];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new Fa(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{var v=".bones["+t[l].name+"]";n(ja,v+".position",c,"pos",i),n(Da,v+".quaternion",c,"rot",i),n(ja,v+".scale",c,"scl",i)}}return 0===i.length?null:new Wa(r,o,i)}}),Object.assign(Wa.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(qa.prototype,{load:function(e,t,n,i){var r=this;new Xo(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Vo[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new Dt).fromArray(r)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i}}),Object.assign(Xa.prototype,{load:function(e,t,n,i){var r=this;new Xo(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new Cn,n=e.data.index;if(void 0!==n){var i=new Ya[n.type](n.array);t.setIndex(new fn(i,1))}var r=e.data.attributes;for(var o in r){var a=r[o];i=new Ya[a.type](a.array);t.addAttribute(o,new fn(i,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var u=s[l];t.addGroup(u.start,u.count,u.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var h=new Bt;void 0!==d.center&&h.fromArray(d.center),t.boundingSphere=new Yt(h,d.radius)}return t}});var Ya={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ja(){}Ja.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],o=t[n+1];if(r.test(e))return o}return null}},Object.assign(Ja.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:w,NormalBlending:M,AdditiveBlending:E,SubtractiveBlending:S,MultiplyBlending:C,CustomBlending:T},t=new en,n=new Qo,i=new qa;return function(r,o,a){var s={};function l(e,t,i,r,l){var c,u=o+e,d=Ja.Handlers.get(u);null!==d?c=d.load(u):(n.setCrossOrigin(a),c=n.load(u)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=me),1!==t[1]&&(c.wrapT=me)),void 0!==i&&c.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(c.wrapS=me),"mirror"===r[0]&&(c.wrapS=ve),"repeat"===r[1]&&(c.wrapT=me),"mirror"===r[1]&&(c.wrapT=ve)),void 0!==l&&(c.anisotropy=l);var h=zt.generateUUID();return s[h]=c,h}var c={uuid:zt.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var d=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=d;break;case"blending":c.blending=e[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(d).getHex();break;case"colorSpecular":c.specular=t.fromArray(d).getHex();break;case"colorEmissive":c.emissive=t.fromArray(d).getHex();break;case"specularCoef":c.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=l(d,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=l(d,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=l(d,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=l(d,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=l(d,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=d;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=l(d,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=d;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=l(d,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=l(d,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=l(d,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=l(d,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=g;break;case"doubleSided":c.side=v;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=d;break;case"vertexColors":!0===d&&(c.vertexColors=_),"face"===d&&(c.vertexColors=x);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,d)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),i.setTextures(s),i.parse(c)}}()});var Za={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ka(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Wo,this.withCredentials=!1}function Qa(e){this.manager=void 0!==e?e:Wo,this.texturePath=""}Object.assign(Ka.prototype,{load:function(e,t,n,i){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Za.extractUrlBase(e),a=new Xo(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var i=JSON.parse(n),a=i.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=r.parse(i,o);t(l.geometry,l.materials)},n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new pn;return function(e,t){function n(e,t){return e&1<<t}var i,r,o,a,s,l,c,u,d,h,p,f,m,g,v,A,y,b,x,_,w,M,E,S,C,T=e.faces,R=e.vertices,L=e.normals,P=e.colors,k=e.scale,N=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&N++;for(i=0;i<N;i++)t.faceVertexUvs[i]=[]}for(a=0,s=R.length;a<s;)(b=new Bt).x=R[a++]*k,b.y=R[a++]*k,b.z=R[a++]*k,t.vertices.push(b);for(a=0,s=T.length;a<s;)if(p=n(h=T[a++],0),f=n(h,1),m=n(h,3),g=n(h,4),v=n(h,5),A=n(h,6),y=n(h,7),p){if((_=new dn).a=T[a],_.b=T[a+1],_.c=T[a+3],(w=new dn).a=T[a+1],w.b=T[a+2],w.c=T[a+3],a+=4,f&&(d=T[a++],_.materialIndex=d,w.materialIndex=d),o=t.faces.length,m)for(i=0;i<N;i++)for(S=e.uvs[i],t.faceVertexUvs[i][o]=[],t.faceVertexUvs[i][o+1]=[],r=0;r<4;r++)C=new Dt(S[2*(u=T[a++])],S[2*u+1]),2!==r&&t.faceVertexUvs[i][o].push(C),0!==r&&t.faceVertexUvs[i][o+1].push(C);if(g&&(c=3*T[a++],_.normal.set(L[c++],L[c++],L[c]),w.normal.copy(_.normal)),v)for(i=0;i<4;i++)c=3*T[a++],E=new Bt(L[c++],L[c++],L[c]),2!==i&&_.vertexNormals.push(E),0!==i&&w.vertexNormals.push(E);if(A&&(M=P[l=T[a++]],_.color.setHex(M),w.color.setHex(M)),y)for(i=0;i<4;i++)M=P[l=T[a++]],2!==i&&_.vertexColors.push(new en(M)),0!==i&&w.vertexColors.push(new en(M));t.faces.push(_),t.faces.push(w)}else{if((x=new dn).a=T[a++],x.b=T[a++],x.c=T[a++],f&&(d=T[a++],x.materialIndex=d),o=t.faces.length,m)for(i=0;i<N;i++)for(S=e.uvs[i],t.faceVertexUvs[i][o]=[],r=0;r<3;r++)C=new Dt(S[2*(u=T[a++])],S[2*u+1]),t.faceVertexUvs[i][o].push(C);if(g&&(c=3*T[a++],x.normal.set(L[c++],L[c++],L[c])),v)for(i=0;i<3;i++)c=3*T[a++],E=new Bt(L[c++],L[c++],L[c]),x.vertexNormals.push(E);if(A&&(l=T[a++],x.color.setHex(P[l])),y)for(i=0;i<3;i++)l=T[a++],x.vertexColors.push(new en(P[l]));t.faces.push(x)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var o=e.skinWeights[i],a=n>1?e.skinWeights[i+1]:0,s=n>2?e.skinWeights[i+2]:0,l=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new Gt(o,a,s,l))}if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=n){var c=e.skinIndices[i],u=n>1?e.skinIndices[i+1]:0,d=n>2?e.skinIndices[i+2]:0,h=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new Gt(c,u,d,h))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var o=t.morphTargets[i].vertices,a=e.morphTargets[i].vertices,s=0,l=a.length;s<l;s+=3){var c=new Bt;c.x=a[s]*n,c.y=a[s+1]*n,c.z=a[s+2]*n,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces,d=e.morphColors[0].colors;for(i=0,r=u.length;i<r;i++)u[i].color.fromArray(d,3*i)}}(e,n),function(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var o=Wa.parseAnimation(i[r],t.bones);o&&n.push(o)}if(t.morphTargets){var a=Wa.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Ja.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}()}),Object.assign(Qa.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new Xo(r.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new xa).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Ka,r=new Xa,o=0,a=e.length;o<a;o++){var s,l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new ko[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new ko[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new ko[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new ko[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new ko[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new ko[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new ko[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new ko[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new ko[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new ko[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new ko[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new ko[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],u=0,d=l.shapes.length;u<d;u++){var h=t[l.shapes[u]];c.push(h)}s=new ko[l.type](c,l.curveSegments);break;case"BufferGeometry":s=r.parse(l);break;case"Geometry":s=i.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),n[l.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new qa;i.setTextures(t);for(var r=0,o=e.length;r<o;r++){var a=e[r];if("MultiMaterial"===a.type){for(var s=[],l=0;l<a.materials.length;l++)s.push(i.parse(a.materials[l]));n[a.uuid]=s}else n[a.uuid]=i.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=Wa.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new Zo(new jo(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;i[l.uuid]=r(c)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new Vt(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,es)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],ts),s.wrapT=n(a.wrap[1],ts)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,ns)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,ns)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),i[a.uuid]=s}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new ir,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new en(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new nr(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new tr(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Ki(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new un(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new La(e.color,e.intensity);break;case"DirectionalLight":i=new Ra(e.color,e.intensity);break;case"PointLight":i=new Ca(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Pa(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Sa(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new wa(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),s=o(e.material);i=a.bones&&a.bones.length>0?new cr(a,s):new Bn(a,s);break;case"LOD":i=new ar;break;case"Line":i=new dr(r(e.geometry),o(e.material),e.mode);break;case"LineLoop":i=new pr(r(e.geometry),o(e.material));break;case"LineSegments":i=new hr(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":i=new mr(r(e.geometry),o(e.material));break;case"Sprite":i=new or(o(e.material));break;case"Group":i=new gr;break;default:i=new ln}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],t,n));if("LOD"===e.type)for(var u=e.levels,d=0;d<u.length;d++){var h=u[d],p=i.getObjectByProperty("uuid",h.object);void 0!==p&&i.addLevel(p,h.distance)}return i}});var $a,es={UVMapping:se,CubeReflectionMapping:le,CubeRefractionMapping:ce,EquirectangularReflectionMapping:ue,EquirectangularRefractionMapping:de,SphericalReflectionMapping:he,CubeUVReflectionMapping:pe,CubeUVRefractionMapping:fe},ts={RepeatWrapping:me,ClampToEdgeWrapping:ge,MirroredRepeatWrapping:ve},ns={NearestFilter:Ae,NearestMipMapNearestFilter:ye,NearestMipMapLinearFilter:be,LinearFilter:xe,LinearMipMapNearestFilter:_e,LinearMipMapLinearFilter:we};function is(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Wo,this.options=void 0}function rs(){this.type="ShapePath",this.color=new en,this.subPaths=[],this.currentPath=null}function os(e){this.type="Font",this.data=e}function as(e,t,n,i,r,o){var a=o.glyphs[e]||o.glyphs["?"];if(a){var s,l,c,u,d,h,p,f,m=new rs;if(a.o)for(var g=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,A=g.length;v<A;){switch(g[v++]){case"m":s=g[v++]*n+i,l=g[v++]*n+r,m.moveTo(s,l);break;case"l":s=g[v++]*n+i,l=g[v++]*n+r,m.lineTo(s,l);break;case"q":c=g[v++]*n+i,u=g[v++]*n+r,d=g[v++]*n+i,h=g[v++]*n+r,m.quadraticCurveTo(d,h,c,u);break;case"b":c=g[v++]*n+i,u=g[v++]*n+r,d=g[v++]*n+i,h=g[v++]*n+r,p=g[v++]*n+i,f=g[v++]*n+r,m.bezierCurveTo(d,h,p,f,c,u)}}return{offsetX:a.ha*n,path:m}}}function ss(e){this.manager=void 0!==e?e:Wo}is.prototype={constructor:is,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,o=Go.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){Go.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(rs.prototype,{moveTo:function(e,t){this.currentPath=new ba,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,o){this.currentPath.bezierCurveTo(e,t,n,i,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new xa;o.curves=r.curves,t.push(o)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=t[r],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],l=-l,s=t[r],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return i}var r=so.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,c=[];if(1===o.length)return s=o[0],(l=new xa).curves=s.curves,c.push(l),c;var u=!r(o[0].getPoints());u=e?!u:u;var d,h,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,A=o.length;v<A;v++)a=r(d=(s=o[v]).getPoints()),(a=e?!a:a)?(!u&&f[g]&&g++,f[g]={s:new xa,p:d},f[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:d[0]});if(!f[0])return n(o);if(f.length>1){for(var y=!1,b=[],x=0,_=f.length;x<_;x++)p[x]=[];for(x=0,_=f.length;x<_;x++)for(var w=m[x],M=0;M<w.length;M++){for(var E=w[M],S=!0,C=0;C<f.length;C++)i(E.p,f[C].p)&&(x!==C&&b.push({froms:x,tos:C,hole:M}),S?(S=!1,p[C].push(E)):y=!0);S&&p[x].push(E)}b.length>0&&(y||(m=p))}v=0;for(var T=f.length;v<T;v++){l=f[v].s,c.push(l);for(var R=0,L=(h=m[v]).length;R<L;R++)l.holes.push(h[R].h)}return c}}),Object.assign(os.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var i=[],r=function(e,t,n,i){for(var r=String(e).split(""),o=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,s=[],l=0,c=0,u=0;u<r.length;u++){var d=r[u];if("\n"===d)l=0,c-=a;else{var h=as(d,n,o,l,c,i);l+=h.offsetX,s.push(h.path)}}return s}(e,t,n,this.data),o=0,a=r.length;o<a;o++)Array.prototype.push.apply(i,r[o].toShapes());return i}}),Object.assign(ss.prototype,{load:function(e,t,n,i){var r=this,o=new Xo(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new os(e)},setPath:function(e){return this.path=e,this}});var ls={getContext:function(){return void 0===$a&&($a=new(window.AudioContext||window.webkitAudioContext)),$a},setContext:function(e){$a=e}};function cs(e){this.manager=void 0!==e?e:Wo}function us(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ki,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ki,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function ds(e,t,n){ln.call(this),this.type="CubeCamera";var i=new Ki(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Bt(1,0,0)),this.add(i);var r=new Ki(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Bt(-1,0,0)),this.add(r);var o=new Ki(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Bt(0,1,0)),this.add(o);var a=new Ki(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Bt(0,-1,0)),this.add(a);var s=new Ki(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Bt(0,0,1)),this.add(s);var l=new Ki(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Bt(0,0,-1)),this.add(l);var c={format:Ie,magFilter:xe,minFilter:xe};this.renderTarget=new Wt(n,n,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,c=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=c,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function hs(){ln.call(this),this.type="AudioListener",this.context=ls.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function ps(e){ln.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function fs(e){ps.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function ms(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function gs(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(cs.prototype,{load:function(e,t,n,i){var r=new Xo(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){ls.getContext().decodeAudioData(e,function(e){t(e)})},n,i)}}),Object.assign(us.prototype,{update:function(){var e,t,n,i,r,o,a,s,l=new It,c=new It;return function(u){if(e!==this||t!==u.focus||n!==u.fov||i!==u.aspect*this.aspect||r!==u.near||o!==u.far||a!==u.zoom||s!==this.eyeSep){e=this,t=u.focus,n=u.fov,i=u.aspect*this.aspect,r=u.near,o=u.far,a=u.zoom;var d,h,p=u.projectionMatrix.clone(),f=(s=this.eyeSep/2)*r/t,m=r*Math.tan(zt.DEG2RAD*n*.5)/a;c.elements[12]=-s,l.elements[12]=s,d=-m*i+f,h=m*i+f,p.elements[0]=2*r/(h-d),p.elements[8]=(h+d)/(h-d),this.cameraL.projectionMatrix.copy(p),d=-m*i-f,h=m*i-f,p.elements[0]=2*r/(h-d),p.elements[8]=(h+d)/(h-d),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(l)}}()}),ds.prototype=Object.create(ln.prototype),ds.prototype.constructor=ds,hs.prototype=Object.assign(Object.create(ln.prototype),{constructor:hs,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new Bt,t=new Ft,n=new Bt,i=new Bt;return function(r){ln.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),ps.prototype=Object.assign(Object.create(ln.prototype),{constructor:ps,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),fs.prototype=Object.assign(Object.create(ps.prototype),{constructor:fs,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Bt;return function(t){ln.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(ms.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(gs.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*t;this._mixBufferRegion(n,i,a,1-r,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){Ft.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*i}}});var vs,As;function ys(e,t,n){var i=n||bs.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function bs(e,t,n){this.path=t,this.parsedPath=n||bs.parseTrackName(t),this.node=bs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function xs(){this.uuid=zt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function _s(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,o=new Array(r),a={endingStart:yt,endingEnd:yt},s=0;s!==r;++s){var l=i[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ft,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ws(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ms(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Es(){Cn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ss(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Cs(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ts(e,t,n){Cs.call(this,e,t),this.meshPerAttribute=n||1}function Rs(e,t,n){fn.call(this,e,t),this.meshPerAttribute=n||1}function Ls(e,t,n,i){this.ray=new Dn(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ps(e,t){return e.distance-t.distance}function ks(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,o=0,a=r.length;o<a;o++)ks(r[o],t,n,!0)}function Ns(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Os(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function zs(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Ds(e,t){this.min=void 0!==e?e:new Dt(1/0,1/0),this.max=void 0!==t?t:new Dt(-1/0,-1/0)}function Is(e){ln.call(this),this.material=e,this.render=function(){}}function Fs(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Cn,c=new _n(2*a*3,3);l.addAttribute("position",c),hr.call(this,l,new ur({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Bs(e,t){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Cn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new _n(i,3));var l=new ur({fog:!1});this.cone=new hr(n,l),this.add(this.cone),this.update()}function Us(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Cn,i=[],r=[],o=new en(0,0,1),a=new en(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new _n(i,3)),n.addAttribute("color",new _n(r,3));var c=new ur({vertexColors:_,depthTest:!1,depthWrite:!1,transparent:!0});hr.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Hs(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new vo(t,4,2),r=new On({wireframe:!0,fog:!1});Bn.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Vs(e,t){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new ur({fog:!1}),i=new Cn;i.addAttribute("position",new fn(new Float32Array(15),3)),this.line=new dr(i,n),this.add(this.line),this.update()}function Gs(e,t,n){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Tr(t);i.rotateY(.5*Math.PI),this.material=new On({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=_);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new fn(o,3)),this.add(new Bn(i,this.material)),this.update()}function js(e,t,n,i){e=e||10,t=t||10,n=new en(void 0!==n?n:4473924),i=new en(void 0!==i?i:8947848);for(var r=t/2,o=e/t,a=e/2,s=[],l=[],c=0,u=0,d=-a;c<=t;c++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);var h=c===r?n:i;h.toArray(l,u),u+=3,h.toArray(l,u),u+=3,h.toArray(l,u),u+=3,h.toArray(l,u),u+=3}var p=new Cn;p.addAttribute("position",new _n(s,3)),p.addAttribute("color",new _n(l,3));var f=new ur({vertexColors:_});hr.call(this,p,f)}function Ws(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new en(void 0!==r?r:4473924),o=new en(void 0!==o?o:8947848);var a,s,l,c,u,d,h,p=[],f=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),h=1&c?r:o,f.push(h.r,h.g,h.b),f.push(h.r,h.g,h.b);for(c=0;c<=n;c++)for(h=1&c?r:o,d=e-e/n*c,u=0;u<i;u++)l=u/i*(2*Math.PI),a=Math.sin(l)*d,s=Math.cos(l)*d,p.push(a,0,s),f.push(h.r,h.g,h.b),l=(u+1)/i*(2*Math.PI),a=Math.sin(l)*d,s=Math.cos(l)*d,p.push(a,0,s),f.push(h.r,h.g,h.b);var m=new Cn;m.addAttribute("position",new _n(p,3)),m.addAttribute("color",new _n(f,3));var g=new ur({vertexColors:_});hr.call(this,m,g)}function qs(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Cn,c=new _n(2*a*3,3);l.addAttribute("position",c),hr.call(this,l,new ur({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Xs(e,t,n){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Cn;i.addAttribute("position",new _n([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new ur({fog:!1});this.lightPlane=new dr(i,r),this.add(this.lightPlane),(i=new Cn).addAttribute("position",new _n([0,0,0,0,0,1],3)),this.targetLine=new dr(i,r),this.add(this.targetLine),this.update()}function Ys(e){var t=new Cn,n=new ur({color:16777215,vertexColors:x}),i=[],r=[],o={},a=new en(16755200),s=new en(16711680),l=new en(43775),c=new en(16777215),u=new en(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",c),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u),t.addAttribute("position",new _n(i,3)),t.addAttribute("color",new _n(r,3)),hr.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Js(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Cn;r.setIndex(new fn(n,1)),r.addAttribute("position",new fn(i,3)),hr.call(this,r,new ur({color:t})),this.matrixAutoUpdate=!1,this.update()}function Zs(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Cn;r.setIndex(new fn(i,1)),r.addAttribute("position",new _n([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),hr.call(this,r,new ur({color:n})),this.geometry.computeBoundingSphere()}function Ks(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Cn;r.addAttribute("position",new _n([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),dr.call(this,r,new ur({color:i}));var o=new Cn;o.addAttribute("position",new _n([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Bn(o,new On({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function Qs(e,t,n,i,r,o){ln.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===vs&&((vs=new Cn).addAttribute("position",new _n([0,0,0,0,1,0],3)),(As=new Co(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new dr(vs,new ur({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bn(As,new On({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function $s(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Cn;n.addAttribute("position",new _n(t,3)),n.addAttribute("color",new _n([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new ur({vertexColors:_});hr.call(this,n,i)}function el(e,t,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new dn(e,t,n,r,o,a)}Object.assign(ys.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(bs,{Composite:ys,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new bs.Composite(e,t,n):new bs(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("[\\[\\]\\.:\\/]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^\\[\\]\\.:\\/]",t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+i+r+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var o=i(r.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(bs.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=bs.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[i];if(void 0!==s){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(bs.prototype,{_getValue_unbound:bs.prototype.getValue,_setValue_unbound:bs.prototype.setValue}),Object.assign(xs.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var d=arguments[c],h=d.uuid,p=i[h];if(void 0===p){p=t++,i[h]=p,e.push(d);for(var f=0,m=s;f!==m;++f)a[f].push(new bs(d,r[f],o[f]))}else if(p<n){l=e[p];var g=--n,v=e[g];i[v.uuid]=p,e[p]=v,i[h]=g,e[g]=d;for(f=0,m=s;f!==m;++f){var A=a[f],y=A[g],b=A[p];A[p]=y,void 0===b&&(b=new bs(d,r[f],o[f])),A[g]=b}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=n[l];if(void 0!==c&&c>=t){var u=t++,d=e[u];n[d.uuid]=c,e[c]=d,n[l]=u,e[u]=s;for(var h=0,p=r;h!==p;++h){var f=i[h],m=f[u],g=f[c];f[c]=m,f[u]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){var u=--n,d=e[u],h=e[v=--t];i[d.uuid]=c,e[c]=d,i[h.uuid]=u,e[u]=h,e.pop();for(var p=0,f=o;p!==f;++p){var m=(A=r[p])[u],g=A[v];A[c]=m,A[u]=g,A.pop()}}else{var v;i[(h=e[v=--t]).uuid]=c,e[c]=h,e.pop();for(p=0,f=o;p!==f;++p){var A;(A=r[p])[c]=A[v],A.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(u);for(var d=c,h=s.length;d!==h;++d){var p=s[d];u[d]=new bs(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(_s.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,o=r/i,a=i/r;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(e-r)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===pt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=i===mt;if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=bt,i.endingEnd=bt):(i.endingStart=e?this.zeroSlopeAtStart?bt:yt:xt,i.endingEnd=t?this.zeroSlopeAtEnd?bt:yt:xt)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}),ws.prototype=Object.assign(Object.create(i.prototype),{constructor:ws,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var d=i[u],h=d.name,p=c[h];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,h));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(p=new gs(bs.create(n,h,f),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,s,h),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],o=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r];e:{for(var c in a)break e;delete o[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Ua(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Wa.findByName(n,e):e,o=null!==r?r.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new _s(this,r,t);return this._bindAction(c,s),this._addInactiveAction(c,o,i),c},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Wa.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(i,e,r,o)}var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ms.prototype.clone=function(){return new Ms(void 0===this.value.clone?this.value:this.value.clone())},Es.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Es,isInstancedBufferGeometry:!0,copy:function(e){return Cn.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Ss.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ss.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(Cs.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Cs.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Ts.prototype=Object.assign(Object.create(Cs.prototype),{constructor:Ts,isInstancedInterleavedBuffer:!0,copy:function(e){return Cs.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Rs.prototype=Object.assign(Object.create(fn.prototype),{constructor:Rs,isInstancedBufferAttribute:!0,copy:function(e){return fn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Ls.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return ks(e,this,i,t),i.sort(Ps),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=e.length;r<o;r++)ks(e[r],this,i,t);return i.sort(Ps),i}}),Object.assign(Ns.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Os.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(zt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(zs.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Ds.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Dt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Dt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Dt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Dt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Dt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Dt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Is.prototype=Object.create(ln.prototype),Is.prototype.constructor=Is,Is.prototype.isImmediateRenderObject=!0,Fs.prototype=Object.create(hr.prototype),Fs.prototype.constructor=Fs,Fs.prototype.update=function(){var e=new Bt,t=new Bt,n=new Ut;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,d=l.length;u<d;u++)for(var h=l[u],p=0,f=h.vertexNormals.length;p<f;p++){var m=s[h[i[p]]],g=h.vertexNormals[p];e.copy(m).applyMatrix4(r),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,A=a.attributes.normal;for(c=0,p=0,f=v.count;p<f;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(r),t.set(A.getX(p),A.getY(p),A.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),Bs.prototype=Object.create(ln.prototype),Bs.prototype.constructor=Bs,Bs.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Bs.prototype.update=function(){var e=new Bt,t=new Bt;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Us.prototype=Object.create(hr.prototype),Us.prototype.constructor=Us,Us.prototype.updateMatrixWorld=function(){var e=new Bt,t=new It,n=new It;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,ln.prototype.updateMatrixWorld.call(this,i)}}(),Hs.prototype=Object.create(Bn.prototype),Hs.prototype.constructor=Hs,Hs.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Hs.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Vs.prototype=Object.create(ln.prototype),Vs.prototype.constructor=Vs,Vs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Vs.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Gs.prototype=Object.create(ln.prototype),Gs.prototype.constructor=Gs,Gs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Gs.prototype.update=function(){var e=new Bt,t=new en,n=new en;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?t:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),js.prototype=Object.create(hr.prototype),js.prototype.constructor=js,Ws.prototype=Object.create(hr.prototype),Ws.prototype.constructor=Ws,qs.prototype=Object.create(hr.prototype),qs.prototype.constructor=qs,qs.prototype.update=function(){var e=new Bt,t=new Bt,n=new Ut;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var d=s[c],h=d.normal;e.copy(a[d.a]).add(a[d.b]).add(a[d.c]).divideScalar(3).applyMatrix4(i),t.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),Xs.prototype=Object.create(ln.prototype),Xs.prototype.constructor=Xs,Xs.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Xs.prototype.update=function(){var e=new Bt,t=new Bt,n=new Bt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),Ys.prototype=Object.create(hr.prototype),Ys.prototype.constructor=Ys,Ys.prototype.update=function(){var e,t,n=new Bt,i=new cn;function r(r,o,a,s){n.set(o,a,s).unproject(i);var l=t[r];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,d=l.length;u<d;u++)c.setXYZ(l[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Js.prototype=Object.create(hr.prototype),Js.prototype.constructor=Js,Js.prototype.update=function(){var e=new Xt;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Js.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Zs.prototype=Object.create(hr.prototype),Zs.prototype.constructor=Zs,Zs.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ln.prototype.updateMatrixWorld.call(this,e))},Ks.prototype=Object.create(dr.prototype),Ks.prototype.constructor=Ks,Ks.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),ln.prototype.updateMatrixWorld.call(this,e)},Qs.prototype=Object.create(ln.prototype),Qs.prototype.constructor=Qs,Qs.prototype.setDirection=function(){var e,t=new Bt;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),Qs.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Qs.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},$s.prototype=Object.create(hr.prototype),$s.prototype.constructor=$s;var tl=0,nl=1;function il(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function rl(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function ol(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new mr(e,t)}function al(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new or(e)}function sl(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new mr(e,t)}function ll(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new fr(e)}function cl(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new fr(e)}function ul(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new fr(e)}function dl(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Bt(e,t,n)}function hl(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new fn(e,t).setDynamic(!0)}function pl(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new mn(e,t)}function fl(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new gn(e,t)}function ml(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new vn(e,t)}function gl(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new An(e,t)}function vl(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new yn(e,t)}function Al(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new bn(e,t)}function yl(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new xn(e,t)}function bl(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new _n(e,t)}function xl(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new wn(e,t)}function _l(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),sa.call(this,e),this.type="catmullrom",this.closed=!0}function wl(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),sa.call(this,e),this.type="catmullrom"}function Ml(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),sa.call(this,e),this.type="catmullrom"}function El(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new $s(e)}function Sl(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Js(e,t)}function Cl(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new hr(new Eo(e.geometry),new ur({color:void 0!==t?t:16777215}))}function Tl(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new hr(new br(e.geometry),new ur({color:void 0!==t?t:16777215}))}function Rl(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Xo(e)}function Ll(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Jo(e)}$o.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create($o.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(ya.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new pn,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Bt(r.x,r.y,r.z||0))}return t}}),Object.assign(ba.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),_l.prototype=Object.create(sa.prototype),wl.prototype=Object.create(sa.prototype),Ml.prototype=Object.create(sa.prototype),Object.assign(Ml.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),js.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Us.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ja.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Za.extractUrlBase(e)}}),Object.assign(Ds.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Xt.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),In.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(zt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),zt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),zt.ceilPowerOfTwo(e)}}),Object.assign(Ut.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(It.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Bt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),Jt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Ft.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Dn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Fn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Fn,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Fn.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Fn.getNormal(e,t,n,i)}}),Object.assign(xa.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new uo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _o(this,e)}}),Object.assign(Dt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Bt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(pn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(ln.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(ln.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ar.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(sr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty($o.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Ki.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(_a.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(fn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Cn.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Cn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(ho.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ms.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new en}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===A}}}),Object.defineProperties(Io.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(zn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(er.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(er.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(qi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(jt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties($i.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),ps.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new cs).load(e,function(e){t.setBuffer(e)}),this},ms.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ds.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Pl={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},kl={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Qo;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ko;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Nl(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Ol(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var zl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Dl(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(205)),r=c(n(206)),o=c(n(207)),a=c(n(208)),s=c(n(209)),l=c(n(42));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props.items.map(function(t){return l.default.createElement("li",{role:"presentation",key:t.key,className:t.key==e.props.selected?"active":""},l.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:function(n){return e.props.set_selected(e.props.state_label,t.key,e.props.trigger,n)}},t.name))}),n=l.default.createElement(l.default.Fragment,null,l.default.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:this.props.id,"data-toggle":"dropdown","aria-expanded":"true",title:this.props.title},this.props.label," ",l.default.createElement("span",{className:"caret"})),l.default.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":this.props.id},t));return l.default.createElement(l.default.Fragment,null,1!=this.props.single?l.default.createElement("div",{className:"btn-group btn-group-xs"},n):l.default.createElement(l.default.Fragment,null,n))}}]),t}(l.default.Component);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(42));t.default=function(e){return i.default.createElement("button",{className:"btn btn-default btn-xs "+(e.active?"active":""),"data-toggle":"button",title:e.title,"aria-pressed":e.active,onClick:e.set_active_state},i.default.createElement("span",{className:"fa "+e.icon,"aria-hidden":"true"}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"createStore",function(){return l}),n.d(t,"combineReducers",function(){return u}),n.d(t,"bindActionCreators",function(){return h}),n.d(t,"applyMiddleware",function(){return f}),n.d(t,"compose",function(){return p}),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return r});var i=n(388),r={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function s(e){if("object"!==(void 0===e?"undefined":o(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l(e,t,n){var a;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(l)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var c=e,u=t,d=[],h=d,p=!1;function f(){h===d&&(h=d.slice())}function m(){if(p)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(p)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return f(),h.push(e),function(){if(t){if(p)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,f();var n=h.indexOf(e);h.splice(n,1)}}}function v(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,u=c(u,e)}finally{p=!1}for(var t=d=h,n=0;n<t.length;n++){(0,t[n])()}return e}return v({type:r.INIT}),(a={dispatch:v,subscribe:g,getState:m,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,v({type:r.REPLACE})}})[i.a]=function(){var e,t=g;return(e={subscribe:function(e){if("object"!==(void 0===e?"undefined":o(e))||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[i.a]=function(){return this},e},a}function c(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function u(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var o=t[i];0,"function"==typeof e[o]&&(n[o]=e[o])}var a=Object.keys(n);var s=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:r.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+r.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var i=!1,r={},o=0;o<a.length;o++){var l=a[o],u=n[l],d=e[l],h=u(d,t);if(void 0===h){var p=c(l,t);throw new Error(p)}r[l]=h,i=i||h!==d}return i?r:e}}function d(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return d(e,t);if("object"!==(void 0===e?"undefined":o(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":o(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),i={},r=0;r<n.length;r++){var a=n[r],s=e[a];"function"==typeof s&&(i[a]=d(s,t))}return i}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=e.apply(void 0,i),s=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},l={getState:o.getState,dispatch:function(){return s.apply(void 0,arguments)}},c=t.map(function(e){return e(l)});return s=p.apply(void 0,c)(o.dispatch),a({},o,{dispatch:s})}}}},,,,,,,,,,,,,function(e,t,n){var i=n(356);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(36)(!1)).push([e.i,"/* \n * jQuery UI Stickies\n * @VERSION 0.0.5\n */\n.ui-sticky-header {\n\theight: 16px;\n\tleft: 0;\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n}\n\n.ui-sticky-close-button {\n\tcursor: pointer;\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n}\n.ui-sticky-pin {\n\tleft: 0;\n\tposition: absolute;\n\ttop: 0;\n}\n\n.ui-sticky-text {\n\tfont-size: 1em;\n\theight: 100%;\n\toutline: none;\n\tpadding: 0.25em;\n\tresize: none;\n\twidth: 100%;\n}\n\n.ui-sticky-wrapper {\n\tborder: 1px solid #555;\n\theight: 8em;\n\tpadding: 1em 0 0;\n\tposition: absolute;\n\twidth: 10em;\n}\n\n.ui-sticky-pinned {\n\tposition: fixed;\n}\n",""])},function(e,t,n){var i=n(358);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(37)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(38);(e.exports=n(36)(!1)).push([e.i,"/* Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. */\n\n/* Page header */\n\n#edit-model-button\n{\n  float: right;\n}\n\n#table\n{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.x-axis,\n.y-axis\n{\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  shape-rendering: crispEdges;\n  cursor: default;\n}\n\n.x-axis path,\n.y-axis path\n{\n  fill: none;\n  stroke: black;\n}\n\n#remote-error\n{\n  background-color: red;\n  color: yellow;\n  padding: 1em;\n}\n\n/* Model */\n#parameter-image-plus-layout {\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n/* New CCA table styles */\n#barplot-table {\n  /*height: 250px;*/\n  overflow: hidden;\n}\n.barplotHeader {\n  /*overflow: hidden;*/\n  white-space: nowrap;\n}\n.barplotHeaderColumns {\n  /*outline: 1px solid blue;*/\n  white-space: nowrap;\n  display: inline-block;\n}\n.barplotHeaderColumn {\n  text-align: right !important;\n  display: inline-block;\n  /*padding: 3px;*/\n  cursor: pointer;\n  /*outline: 1px solid red;*/\n}\n.wrapper {\n  /*No longer using box-sizing since we are sizing cells based on an wrapper div inside them*/\n/*  box-sizing: border-box;\n  -moz-box-sizing: border-box;*/\n}\n.barplotHeaderColumn .wrapper {\n  padding: 3px;\n}\n.mask\n{\n  background-color: white;\n  position: relative; /* needed to get this cell to cover scrolling header row */\n  z-index: 1;\n}\n.mask .wrapper {\n  padding: 3px;\n}\n.barplotViewport {\n\n}\n.barplotGroup {\n  overflow: hidden;\n  width: auto !important; /* Need to force auto width since jQuery Resizable Widget sets static width on resize, which then breaks horizontal expansion/contraction on pane resize */\n}\n.barplotColumn {\n  float: left;\n  clear: left;\n}\n.barplotGroup.inputs,\n.barplotHeader,\n.barplotColumn,\n.mask,\n.inputs .ui-resizable-s\n{\n  border-color: #C0C0C0;\n  border-style: solid;\n  border-width: 0;\n}\n/*.barplotGroup.inputs,*/\n.barplotHeader\n{\n  border-bottom-width: 1px;\n}\n.barplotColumn,\n.mask\n{\n  border-right-width: 1px;\n}\n.inputs .ui-resizable-s {\n  bottom: 0;\n  height: 3px;\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  background-color: #DDDDCC;\n}\n.inputs .ui-resizable-s.ui-resizable-hover {\n  background-color: #FFCC66;\n}\n.noVerticalResize .ui-resizable-s {\n  display: none !important;\n}\n.toggle-control-s {\n  width: 50px;\n  height: 100%;\n  margin: 0 auto;\n  background-color: #CCCCBB;\n}\n.toggle-control-s.toggle-control-hover {\n  cursor: pointer;\n  background-color: #FFCC66;\n}\n/*.barplotGroup.inputs {\n  border-bottom: 7px solid red;\n}*/\n.barplotColumn .barplotCell {\n  display: block;\n}\n.barplotCanvas {\n  /*overflow: auto;*/\n  /*display: relative;*/ /* Only needed if using DOM's scrollIntoView() function instead of jQuery plugin */\n  height: 100%;\n}\n.barplotCanvas.input {\n  overflow-x: hidden;\n  /*overflow-y: auto;*/\n}\n.barplotRow {\n  white-space: nowrap;\n}\n.barplotCell {\n  display: inline-block;\n  text-align: right;\n}\n#rsquared-label sup {\n  position: absolute;\n  margin-top: -3px;\n}\n.rowInput,\n.rowOutput\n{\n  cursor: pointer;\n}\n#barplot-table .inputLabel .wrapper,\n#barplot-table .outputLabel .wrapper\n{\n  padding: 3px;\n}\n#barplot-table .inputLabel,\n#barplot-table .outputLabel,\n.barplotCell.col0,\n.barplotHeaderColumn\n{\n  font-weight: bold;\n  text-align: center;\n}\n#barplot-table .inputLabel\n{\n  background: #eeffe0;\n}\n#barplot-table .inputLabel.selected-variable,\n#barplot-table .barplotRow.rowInput.selected-variable,\n#barplot-table .barplotCell.rowInput.selected-variable\n{\n  background: #3ca654;\n  color: white;\n}\n#barplot-table .outputLabel\n{\n  background: #eeeeff;\n}\n#barplot-table .outputLabel.selected-variable,\n#barplot-table .barplotRow.rowOutput.selected-variable,\n#barplot-table .barplotCell.rowOutput.selected-variable\n{\n  background: #7767b0;\n  color: white;\n}\n.barplotHeaderColumnLabelWrapper,\n.selectCCAComponent,\n.wrapper,\n.barplotCellValue,\n.selected-component .spacer,\n.negative,\n.positive\n{\n  display: inline-block;\n}\n.barplotCellValue\n{\n  padding: 3px 23px 3px 18px;\n  width: 40px;\n}\n.selected-component .barplotCellValue,\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  background-color: #DDDDDD;\n  border-width: 0px 1px;\n  border-style: solid;\n  border-color: #808080;\n  color: #666655;\n}\n.barplotHeaderColumn.selected-component .wrapper {\n  padding: 0;\n}\n.barplotHeaderColumn.selected-component .barplotHeaderColumnLabelWrapper\n{\n  padding: 3px 3px 3px 3px;\n  width: 75px;\n}\n.spacer\n{\n  width: 100px;\n  display: none;\n}\n.negativeSpacer\n{\n  text-align: right;\n}\n.positiveSpacer\n{\n  text-align: left;\n}\n.negative,\n.positive\n{\n  height: 12px;\n}\n.negative\n{\n  background-color: blue;\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n}\n.positive\n{\n  background-color: red;\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n#barplot-table span.sortCCAComponent\n{\n  width: 15px;\n  height: 15px;\n  display: inline-block;\n  border: 1px solid transparent;\n  cursor: pointer;\n  position: relative;\n  top: 3px;\n  margin-left: 3px;\n}\n.barplotHeaderColumn.mask.col0 {\n  vertical-align: top;\n}\n.slick-header-column {\n  padding-right: 41px !important;\n}\n.icon-sort-off {\n  border: 1px solid transparent;\n  background: transparent url("+i(n(288))+") no-repeat center center;\n}\n.icon-sort-off:hover {\n  border: 1px solid transparent !important;\n  background: transparent url("+i(n(289))+") no-repeat center center !important;\n}\n.icon-sort-ascending:hover,\n.icon-sort-descending:hover\n{\n  border: 1px solid transparent;\n}\n.slick-header-button,\n.slick-header-column:hover > .slick-header-button\n{\n  width: 10px;\n}\n.slick-header-button.icon-image-on,\n.slick-header-button.icon-image-off\n{\n  right: 16px;\n  top: 4px;\n}\n.slick-header-button.icon-image-off {\n  background: transparent url("+i(n(316))+") no-repeat center center;\n}\n.slick-header-button.icon-image-on,\n.slick-header-button.icon-image-off:hover\n{\n  background: transparent url("+i(n(317))+") no-repeat center center;\n}\n.slick-header-button.icon-y-on,\n.slick-header-button.icon-y-off\n{\n  right: 16px;\n  top: 4px;\n}\n.slick-header-button.icon-y-off {\n  background: transparent url("+i(n(318))+") no-repeat center center;\n}\n.slick-header-button.icon-y-on,\n.slick-header-button.icon-y-off:hover\n{\n  background: transparent url("+i(n(319))+") no-repeat center center;\n}\n.slick-header-button.icon-x-on,\n.slick-header-button.icon-x-off\n{\n  right: 26px;\n  top: 4px;\n}\n.slick-header-button.icon-x-off {\n  background: transparent url("+i(n(320))+") no-repeat center center;\n}\n.slick-header-button.icon-x-on,\n.slick-header-button.icon-x-off:hover\n{\n  background: transparent url("+i(n(321))+') no-repeat center center;\n}\n#page-title {\n  padding-top: 5px;\n  padding-bottom: 35px;\n}\n#controls-pane {\n  z-index: 3 !important; /* Required to make bootstrap dropdowns appear over lower panes */\n}\n.center {\n  text-align: center;\n}\n#color-switcher ul.dropdown-menu\n{\n  background-color: #F2F2F2;\n}\n.bootstrap-styles #color-switcher .dropdown-menu > li > a:hover\n{\n  background-color: #E4E4E4;\n}\n.bootstrap-styles #color-switcher .dropdown-menu > .active > a:hover\n{\n  background-color: #337AB7;\n}\n#controls\n{\n\n}\n#controls {\n  margin: 2px 0;\n}\n#controls label {\n  font-weight: bold;\n  margin-right: 5px;\n}\n#controls label.disabled,\n#controls select:disabled\n{\n  color: gray;\n}\n#controls select {\n  margin-right: 10px;\n  padding: 2px 4px;\n}\n#controls label[for="auto-scale-option"]\n{\n  margin-right: 10px;\n}\n#controls #filter-selector {\n  width: 90px;\n}\n\n#scatterplot-controls {\n  margin-right: 4px;\n}\n\n.ControlsGroup {\n  margin: 0px 0px;\n}\n/* Making text unselectable inside of the scatterplot because dragging usually is supposed to do other things,\n   like selecting points or moving pins. */\n#scatterplot,\n.slycat-pim-filter .varName,\n.category-filter .varName\n{\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n#scatterplot .media-layer .frame-icon,\n#sliders-pane .frame-icon\n{\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-image: url('+i(n(338))+");\n  background-repeat: no-repeat;\n  display: block;\n  overflow: hidden;\n  text-indent: -99999px;\n  background-color: white;\n}\n#scatterplot .media-layer .frame-footer {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 20px;\n  background: black;\n}\n.frame-button {\n  float: right;\n  font-size: 14px;\n  color: #c8c8c8 !important;\n  padding: 2px 4px;\n}\n.frame-button:hover {\n  color: white !important;\n  cursor: pointer;\n}\n.frame-button.download-button {\n  float: left;\n  font-size: 12px;\n  text-decoration: none !important;\n  padding: 5px 4px;\n}\n.frame-button.close-button {\n  float: left;\n  padding: 3px 4px;\n}\n.frame-button.pin-button {\n  padding: 4px 22px 4px 4px;\n}\n.frame-button.resize-handle {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  padding: 2px 3px;\n}\n.frame-button.resize-handle:hover {\n  cursor: nwse-resize;\n}\n.frame-button.jump-button {\n  padding: 0;\n}\n.frame-button.table-index {\n  padding: 0px 0px 0px 2px;\n}\n.frame-button.table-button {\n  padding: 4px 15px 4px 0px;\n}\n.frame-button.arrow-button {\n  padding: 3px 0px 4px 2px;\n  font-size: 9px;\n}\n.frame-button.jump-button:hover * { \n  color: white !important; \n}\n\n#scatterplot .media-layer .reload-button {\n  position: absolute;\n  left: 1px;\n  font-size: 32px;\n}\n\n#scatterplot rect.outline:hover,\n#scatterplot g.image-frame image.image,\n#scatterplot .media-layer .image-frame\n{\n  cursor: move;\n}\n#scatterplot.resizing,\n#scatterplot.resizing .media-layer .image-frame\n{\n  cursor: nwse-resize !important;\n}\n#scatterplot g.open-image image.image {\n\n}\n#scatterplot .close-button,\n#scatterplot .resize-handle,\n#scatterplot .pin-button,\n{\n  visibility: hidden;\n}\n#scatterplot g.open-image:hover .close-button,\n#scatterplot g.open-image.resizing .close-button,\n#scatterplot g.image-frame:hover .resize-handle,\n#scatterplot g.open-image.resizing .resize-handle,\n#scatterplot g.hover-image .pin-button,\n#scatterplot g.hover-image .resize-handle,\n#scatterplot .media-layer .image-frame:hover .resize-handle,\n#scatterplot .media-layer .image-frame.resizing .resize-handle,\n#scatterplot .media-layer .image-frame:hover .pin-button,\n#scatterplot .media-layer .open-image:hover .close-button,\n{\n  visibility: visible;\n}\n#scatterplot g.legend:hover {\n  cursor: move;\n}\n#scatterplot .image-frame rect.outline {\n  shape-rendering: crispEdges;\n}\n.legend-axis path,\n.legend-axis line\n{\n  fill: none;\n  stroke: black;\n  shape-rendering: crispEdges;\n}\n.dialogErrorMessage {\n  color: red;\n}\n#scatterplot canvas {\n  z-index: -1;\n}\n\n/* ui layout */\n.ui-layout-resizer\n{\n  background: #ddc;\n}\n.ui-layout-resizer-hover\n{\n  background: #fc6;\n}\n.ui-layout-resizer-dragging\n{\n  background: #fc6;\n}\n.ui-layout-toggler\n{\n  background: #ccb;\n}\n.ui-layout-toggler-hover\n{\n  background: #fc6;\n}\n.ui-layout-pane, .ui-layout-container\n{\n  background: white;\n  padding: 0;\n  border: 0;\n  margin: 0;\n}\n\n/* Image Preview */\n#scatterplot-pane #image-preview {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  display: none;\n  text-align: center;\n}\n#scatterplot-pane #image-preview-image {\n  max-height: 100%;\n  max-width: 100%;\n}\n\n/* Media Layer */\n#scatterplot .media-layer {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n#scatterplot .image-frame.html {\n  position: absolute;\n  background-color: black;\n  border: 1px solid black;\n  height: auto;\n  padding-bottom: 20px;\n  overflow: hidden;\n}\n#scatterplot .image-frame.html img {\n  display: block;\n}\n#scatterplot .image-frame.html img.image {\n  width: 100%;\n  height: auto;\n}\n#scatterplot .image-frame.html video {\n  display: block;\n  width: 100%;\n  height: auto;\n  cursor: auto;\n}\n#scatterplot .image-frame .loading-image {\n  margin: auto;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n\n  background-image: url("+i(n(359))+");\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n}\n#scatterplot .image-frame.selected {\n  box-shadow: 0px 0px 25px 0px rgba(0, 0, 0, 0.8);\n}\n\n/* Sliders */\n#sliders-pane {\n  white-space: nowrap;\n  overflow: auto;\n  background: #e7e7e7;\n}\n#sliders {\n  margin: 20px 0 0 20px;\n}\n.slycat-range-slider.vertical\n{\n  display: inline-block;\n  margin: 28px 0 22px 0;\n  left: 20px;\n}\n/* undoing vertical class cause it's making vertical sliders horizontal */\n.slycat-range-slider.vertical {\n  transform: rotate(0deg);\n  -ms-transform: rotate(0deg);\n  -webkit-transform: rotate(0deg);\n}\n.slycat-pim-filter {\n  position: relative;\n  display: inline-block;\n  width: 115px;\n  padding-left: 5px;\n  margin-right: 20px;\n  background-color: white;\n}\n.category-filter {\n  position: relative;\n  display: inline-block;\n  width: 95px;\n  min-width: 95px;\n  padding-left: 5px;\n  margin-right: 20px;\n}\n.category-filter.auto-width {\n  width: auto;\n}\n.slycat-pim-filter .button\n{\n  cursor: pointer;\n  position: absolute;\n}\n.slycat-pim-filter .close-button\n{\n  top: 4px;\n  left: 6px;\n}\n.slycat-pim-filter .reset-button\n{\n  position: static;\n}\n.category-filter .auto-width-button {\n  top: 5px;\n  right: 5px;\n  font-size: 12px;\n}\n.slycat-pim-filter .invert-button,\n.slycat-pim-filter .select-all-button,\n.slycat-pim-filter .select-none-button,\n.slycat-pim-filter .auto-width-button,\n.slycat-pim-filter .null-button\n{\n  position: absolute;\n}\n.slycat-pim-filter .fa-arrows-v {\n  left: 28px;\n  bottom: 7px;\n}\n.slycat-pim-filter .fa-compress {\n  transform: rotate(135deg);\n  -ms-transform: rotate(135deg);\n  -webkit-transform: rotate(135deg);\n  left: 25px;\n  bottom: 7px;\n}\n.category-filter .invert-button {\n  left: 46px;\n  bottom: 7px;\n}\n.category-filter .select-all-button {\n  left: 25px;\n  bottom: 7px;\n}\n.category-filter .select-none-button {\n  left: 65px;\n  bottom: 7px;\n}\n.slycat-pim-filter .null-button {\n  bottom: 7px;\n  left: 7px;\n}\n.slycat-pim-filter .minMaxHighLow .max,\n.slycat-pim-filter .minMaxHighLow .min,\n.slycat-pim-filter .minMaxHighLow .high,\n.slycat-pim-filter .minMaxHighLow .low\n{\n  position: absolute;\n  left: 44px;\n}\n.slycat-pim-filter:hover .minMaxHighLow .low,\n.slycat-pim-filter:hover .minMaxHighLow .high,\n.slycat-pim-filter .minMaxHighLow .high_precision.editing\n{\n  z-index: 6;\n}\n.slycat-pim-filter .minMaxHighLow .low_precision\n{\n  position: absolute;\n  top: 0;\n}\n.slycat-pim-filter .minMaxHighLow .high_precision\n{\n  visibility: hidden;\n  padding-right: 5px;\n  background-color: white;\n  position: relative;\n}\n/* Hide low precision label when... */\n/* Hovering over filter */\n.slycat-pim-filter:hover .minMaxHighLow .low_precision,\n/* Editing high precision label */\n.slycat-pim-filter .minMaxHighLow .high_precision.editing ~ .low_precision\n{\n  visibility: hidden;\n}\n/* Show high precision label when... */\n/* Hovering over filter */\n.slycat-pim-filter:hover .minMaxHighLow .high_precision,\n/* Editing high precision label */\n.slycat-pim-filter .minMaxHighLow .high_precision.editing\n{\n  visibility: visible;\n}\n.slycat-pim-filter .minMaxHighLow .max\n{\n  top: 3px;\n}\n.slycat-pim-filter .max .editing,\n.slycat-pim-filter .min .editing,\n.slycat-pim-filter .max .edited,\n.slycat-pim-filter .min .edited,\n.slycat-pim-filter .max .hover,\n.slycat-pim-filter .min .hover,\n.slycat-pim-filter .high .editing,\n.slycat-pim-filter .low .editing,\n.slycat-pim-filter .high .hover,\n.slycat-pim-filter .low .hover\n{\n  background-color: #F0AD4E;\n  border: 1px solid #CCC;\n  border-radius: 4px;\n  padding: 0 3px;\n  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset;\n}\n.slycat-pim-filter .minMax\n{\n  z-index: 20;\n}\n.slycat-pim-filter .min-max-field\n{\n  display: inline-block;\n}\n.slycat-pim-filter .min\n{\n\n}\n.slycat-pim-filter .varNameContainer,\n.category-filter .varNameContainer\n{\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n.slycat-pim-filter .varName,\n.category-filter .varName\n{\n  transform: rotate(270deg);\n  -ms-transform: rotate(270deg);\n  -webkit-transform: rotate(270deg);\n  position: absolute;\n  width: 1000px;\n  text-align: center;\n  left: -493px;\n  top: 50%;\n  font-size: 13px;\n  font-weight: bold;\n  cursor: default;\n}\n\n.category-filter {\n  background-color: white;\n}\n.slycat-category-filter {\n  overflow-x: hidden;\n  overflow-y: auto;\n  display: inline-block;\n  margin: 20px 4px 20px 20px;\n  /*left: 20px;*/\n  position: relative;\n  width: 70px;\n  min-width: 70px;\n}\n.auto-width .slycat-category-filter {\n  width: auto;\n}\n.slycat-category-filter .category-button {\n  border-width: 1px 1px 1px 1px;\n  border-style: solid;\n  border-color: #cfcfcf;\n  /*border-color: #78f;*/\n  background-color: #e7e7e7;\n  color: #8f8f8f;\n  font-size: 13px;\n  padding: 1px 5px;\n  margin-top: -1px;\n}\n.slycat-category-filter .category-button div {\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.slycat-category-filter .category-button.fresh:hover\n{\n  border-color: #cfcfcf;\n  background-color: #e7e7e7;\n  color: #8f8f8f;\n}\n.auto-width .slycat-category-filter .category-button {\n  padding-right: 30px;\n  overflow: visible;\n}\n.slycat-category-filter .category-button:first-child {\n  border-radius: 3px 3px 0 0;\n  margin-top: 0;\n}\n.slycat-category-filter .category-button:last-child {\n  border-bottom-width: 1px;\n  border-radius: 0 0 3px 3px;\n}\n.slycat-category-filter .category-button.active,\n .slycat-category-filter .category-button.active.fresh:hover\n{\n  background-color: #abf;\n  border-color: #97A3FE;\n  color: #333;\n  z-index: 5;\n  position: relative;\n}\n.slycat-category-filter .category-button:hover {\n  cursor: pointer;\n  background-color: #78f;\n  border-color: #78f;\n  color: #333;\n}\n.slycat-category-filter .category-button.active:hover {\n  background-color: #cccccc;\n  border-color: #cccccc;\n  color: #8f8f8f;\n}\n.slycat-category-select {\n  /*max-width: 70px;*/\n}\n.slycat-category-select button {\n  /*width: 50px;*/\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.cat-button:hover, .cat-button:focus {\n  outline: none !important;\n  outline-style: none;\n}\n\n.cat-button:focus:not(.active) {\n  background-color: white !important;\n}\n\n/* Note Layer */\n.ui-sticky {\n  z-index: 3\n}\n\n.ui-sticky-header {\n  cursor: move;\n}\n\n.ui-sticky-header i.fa {\n  padding-right: 2px;\n  padding-left: 2px;\n  cursor: pointer;\n  visibility: hidden;\n}\n\n.ui-sticky:hover i.fa, .ui-sticky:hover .ui-icon.ui-icon-gripsmall-diagonal-se {\n  visibility: visible;\n}\n\n.ui-resizable-handle.ui-resizable-e {\n  cursor: ew-resize;\n}\n\n.ui-resizable-handle.ui-resizable-s {\n  cursor: ns-resize;\n}\n\n.ui-icon.ui-icon-gripsmall-diagonal-se {\n  cursor: nwse-resize;\n  visibility: hidden;\n  bottom: 2px;\n  right: 2px;\n  background-position: -80px -224px;\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-image: url("+i(n(338))+");\n  background-repeat: no-repeat;\n  display: block;\n  overflow: hidden;\n  text-indent: -99999px;\n  background-color: white;\n}\n\n.ui-sticky.title textarea {\n  font-size: 28px;\n  padding: 3.5px;\n}\n\na {\n  cursor: pointer;\n}\n\n.remap-ui-label {\n  display: inline-block;\n  width: 60px;\n}\n\n.remap-ui-label.shorter {\n  width: 57px;\n}\n\n.remap-ui-label.faded {\n  opacity: 0.5;\n}\n\n.remap-ui-input {\n  width: 85%;\n}\n.bootstrap-styles .dropdown-header {\n    display: block;\n    padding: 3px 20px;\n    font-size: 14px;\n    font-weight: bold;\n    line-height: 1.42857;\n    color: #333;\n    white-space: nowrap;\n    margin-left: -7px;\n}\n.bootstrap-styles .btn-default:hover,\n.bootstrap-styles .btn-default.focus,\n.bootstrap-styles .btn-default:focus\n{\n    background-color: white;\n}\n.bootstrap-styles .btn-default:active,\n.bootstrap-styles .btn-default.active,\n.bootstrap-styles .btn-default.focus.active,\n.bootstrap-styles .open > .btn-default.dropdown-toggle,\n.bootstrap-styles .open > .btn-default.dropdown-toggle:hover\n{\n    background-color: #E6E6E6;\n}\n#controls-pane .bootstrap-styles .dropdown-menu\n{\n  max-height: 500px;\n  overflow-y: auto;\n}\n.image-frame .download-link,\n.image-frame .open-link\n{\n  padding: 20px;\n  display: block;\n  text-align: center;\n  word-break: break-all;\n}\n.image-frame a.download-link,\n.image-frame a.open-link\n{\n  color: #c8c8c8;\n}\n.image-frame a.download-link:hover,\n.image-frame a.open-link:hover\n{\n  color: white;\n}\n#video-controls .video-sync-time {\n  width: 75px;\n}\n#playback-controls .play-button,\n#playback-controls .pause-button\n{\n  width: 22px;\n}\n.slick-cell.flashing {\n  border-width: 0px !important;\n  opacity: 0.5;\n}\n\nslycat-3d-viewer .header-bar {\n  height: 37px;\n  white-space: nowrap;\n}\n\n.mouseEventOverlay {\n  width: 100%;\n  height: calc(100% - 20px);\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n}",""])},function(e,t){e.exports="data:image/gif;base64,R0lGODlhIAAgAPMAAP///wAAAMbGxoSEhLa2tpqamjY2NlZWVtjY2OTk5Ly8vB4eHgQEBAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA=="},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(15)),r=o(n(47));function o(e){return e&&e.__esModule?e:{default:e}}function a(t,n,i){var r=this;if(r.model_id=t,r.bookmarker=n,r.bookmark=i,"notes"in i&&i.notes.length>0){r.notes=i.notes;var o=e.map(r.notes,function(e){return e.id});r.id_counter=Math.max.apply(Math,o)+1,e.each(r.notes,function(e,t){r.build_note_in_dom(t)})}else r.notes=[],r.id_counter=0;r.button=e("<button class='btn btn-default' title='Add Note'>                      <span class='fa fa-comment-o' aria-hidden='true'></span>                    </button>").prependTo(e("#controls #add-note")).on("click",function(){r.add_note()})}n(280),n(361),a.prototype.build_note_in_dom=function(t){var n=this,i=e('<textarea placeholder="Write a note...">'+t.text+"</textarea>");e(".media-layer").append(i),i.stickies();var o=i.parent(),a=o.find("i.fa.fa-close"),s=o.find(".ui-sticky-header"),l=e('<i class="fa fa-text-height">'),c=e('<i class="fa fa-file-text-o">');s.append(l).append(c),o.attr("id","note-"+t.id),o.css({top:t.top,left:t.left,width:t.width,height:t.height}),i.css({width:parseInt(s.css("width"))-7,height:o.outerHeight()-s.outerHeight()-7}),t.title?(o.addClass("title"),l.hide()):c.hide(),l.on("click",function(){l.hide(),c.show(),o.addClass("title"),n.edit_note(t.id,{title:!0})}),c.on("click",function(){c.hide(),l.show(),o.removeClass("title"),n.edit_note(t.id,{title:!1})}),a.on("click",function(){n.remove_note(t.id)}),i.on("keyup",r.default.debounce(function(e){n.edit_note(t.id,{text:e.target.value})},1e3)),o.on("dragstop",function(i){n.edit_note(t.id,{top:e(i.target).css("top"),left:e(i.target).css("left")})}),o.on("resize",function(e){i.css({width:parseInt(s.css("width"))-7,height:o.outerHeight()-s.outerHeight()-7})}),o.on("resizestop",function(i){n.edit_note(t.id,{width:e(i.target).css("width"),height:e(i.target).css("height")})})},a.prototype.add_note=function(){var e={id:this.id_counter++,text:"",title:!1,top:window.innerHeight/2+"px",left:window.innerWidth/2+"px",width:"140px",height:"110px"};this.notes.push(e),this.build_note_in_dom(e),this.sync_remote()},a.prototype.remove_note=function(e){this.notes=this.notes.filter(function(t){return t.id!==e}),this.sync_remote()},a.prototype.edit_note=function(t,n){var i;for(var r in e.each(this.notes,function(e,n){n.id===t&&(i=e)}),n)this.notes[i][r]=n[r];this.sync_remote()},a.prototype.sync_remote=function(){e.ajax({type:"POST",url:i.default+"events/models/"+this.model_id+"/select/opennotes/count/"+this.notes.length}),this.bookmarker.updateState({notes:this.notes})},t.default=a}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var t=function(e){return e&&e.__esModule?e:{default:e}}(n(100));!function(e){e.widget("ot.stickies",{options:{pinned:0,position:{my:"left top",at:"left+32 top+32",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}}},_create:function(){this._createWrapper(),this._createHeader(),this._createCloseButton(),this.element.addClass("ui-sticky-text ui-widget-content").appendTo(this.uiSticky),this.uiSticky.resizable().draggable({containment:"window"}).position(this.options.position).css("position","absolute")},_createCloseButton:function(){this.uiStickyCloseButton=e("<i>").addClass("fa fa-close pull-right").appendTo(this.uiStickyHeader),this._on(this.uiStickyCloseButton,{click:function(){this._destroy()}})},_createWrapper:function(){this.uiSticky=e("<div>").addClass("ui-sticky ui-sticky-wrapper").appendTo("body")},_createHeader:function(){this.uiStickyHeader=e("<div>").addClass("ui-sticky-header ui-widget-header").prependTo(this.uiSticky)},_createPin:function(){this.uiStickyPin=e("<span>").addClass("ui-sticky-pin ui-icon ui-icon-pin-s").prependTo(this.uiStickyHeader),this._on(this.uiStickyPin,{click:this._pin})},_pin:function(e){"object"===(void 0===e?"undefined":(0,t.default)(e))&&(this.options.pinned=!this.options.pinned,e=this.options.pinned),this.uiStickyPin.toggleClass("ui-icon-pin-s",!e).toggleClass("ui-icon-pin-w",e),this.uiSticky.toggleClass("ui-sticky-pinned",e)},_setOption:function(e,t){this._super(e,t),"pinned"===e&&this._pin(t)},_destroy:function(){this.uiSticky.remove()}})}(e)}).call(this,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(15)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3)),o=l(n(47)),a=l(n(0)),s=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,i,r,o,s,l){this.model_id=e,this.bookmarker=t,this.layout=n,this.input_columns=i,this.output_columns=r,this.image_columns=o,this.rating_columns=s,this.category_columns=l,this.other_columns=null,this.sliders_ready=!1,this.slidersPaneHeight=a.default.observable(),this.controls_ready=!1,this.allFilters=null,this.active_filters=null,this.active_filters_ready=a.default.observable(!1),this.foundMismatches=!1}n(301),c.prototype.set_bookmark=function(e){this.bookmark=e},c.prototype.set_other_columns=function(e){this.other_columns=e},c.prototype.set_table_metadata=function(e){this.table_metadata=e},c.prototype.set_table_statistics=function(e){this.table_statistics=e},c.prototype.notify_controls_ready=function(){this.controls_ready=!0},c.prototype.build_sliders=function(t){var n=this;if(!n.sliders_ready&&n.controls_ready&&n.table_metadata&&n.table_statistics&&n.table_statistics.length==n.table_metadata["column-count"]&&n.other_columns){n.sliders_ready=!0,e("#sliders-pane .load-status").css("display","none");for(var l,c,u,d=n.input_columns.concat(n.output_columns,n.rating_columns,n.category_columns,n.other_columns),h=[],p=0;p<n.table_metadata["column-count"];p++)"string"!=n.table_metadata["column-types"][p]&&!o.default.includes(n.category_columns,p)&&n.table_metadata["column-count"]-1>p&&h.push(p);n.allFilters=a.default.observableArray();var f=function(e){u=a.default.pureComputed(function(){return o.default.filter(e(),function(e){return e.active()})}),n.active_filters=a.default.pureComputed(function(){return o.default.filter(e(),function(e){return e.active()})}).extend({rateLimit:{timeout:0,method:"notifyWhenChangesStop"}}),l=a.default.pureComputed(function(){return o.default.filter(e(),function(e){return"numeric"===e.type()})}),c=a.default.pureComputed(function(){return o.default.filter(e(),function(e){return"category"===e.type()})})},m=function(e){var t=a.default.observableArray();n.allFilters.push({name:a.default.observable(n.table_metadata["column-names"][e]),type:a.default.observable("category"),index:a.default.observable(e),active:a.default.observable(!1),categories:t,selected:a.default.pureComputed(function(){return o.default.filter(t(),function(e){return!0===e.selected()})}).extend({rateLimit:{timeout:0,method:"notifyWhenChangesStop"}}),autowidth:a.default.observable(!1),nulls:a.default.observable(!1),order:a.default.observable(d.indexOf(e))})},g=function(e){var t=a.default.observable(n.table_statistics[e].max),i=a.default.observable(n.table_statistics[e].min);n.allFilters.push({name:a.default.observable(n.table_metadata["column-names"][e]),type:a.default.observable("numeric"),index:a.default.observable(e),max_stats:a.default.observable(n.table_statistics[e].max),min_stats:a.default.observable(n.table_statistics[e].min),max:a.default.observable(n.table_statistics[e].max).extend({notify:"always"}),min:a.default.observable(n.table_statistics[e].min).extend({notify:"always"}),high:t,low:i,invert:a.default.observable(!1),active:a.default.observable(!1),nulls:a.default.observable(!1),order:a.default.observable(d.indexOf(e)),rateLimitedHigh:a.default.pureComputed(t).extend({rateLimit:{timeout:v,method:"notifyWhenChangesStop"}}),rateLimitedLow:a.default.pureComputed(i).extend({rateLimit:{timeout:v,method:"notifyWhenChangesStop"}})})},v=500;if("allFilters"in n.bookmark){n.allFilters=s.default.fromJS(n.bookmark.allFilters);for(p=n.allFilters().length-1;p>=0;p--){var A=n.allFilters()[p];"category"==A.type()&&-1==n.category_columns.indexOf(A.index())?(n.allFilters.splice(p,1),g(A.index()),n.foundMismatches=!0):"numeric"==A.type()&&-1==h.indexOf(A.index())&&(n.allFilters.splice(p,1),m(A.index()),n.foundMismatches=!0)}f(n.allFilters),o.default.each(l(),function(e){e.max.extend({notify:"always"}),e.min.extend({notify:"always"}),e.rateLimitedHigh=a.default.pureComputed(e.high).extend({rateLimit:{timeout:v,method:"notifyWhenChangesStop"}}),e.rateLimitedLow=a.default.pureComputed(e.low).extend({rateLimit:{timeout:v,method:"notifyWhenChangesStop"}}),"max_stats"in e||(e.max_stats=a.default.observable(n.table_statistics[e.index()].max)),"min_stats"in e||(e.min_stats=a.default.observable(n.table_statistics[e.index()].min))}),o.default.each(c(),function(e){e.selected=a.default.pureComputed(function(){return o.default.filter(e.categories(),function(e){return!0===e.selected()})}).extend({rateLimit:{timeout:0,method:"notifyWhenChangesStop"}})}),n.foundMismatches&&n.bookmarker.updateState({allFilters:s.default.toJS(n.allFilters())})}else o.default.each(n.category_columns,m),o.default.each(h,g),f(n.allFilters);a.default.applyBindings(new function(t){var d=this;n.slidersPaneHeight(e("#sliders-pane").innerHeight()),d.model_id=a.default.observable(n.model_id),d.sliderHeight=a.default.pureComputed(function(){return n.slidersPaneHeight()-95},this),d.thumb_length=a.default.observable(12),d.allFilters=n.allFilters,d.numericFilters=l,d.categoryFilters=c,d.activeFilters=u,d.availableFilters=a.default.observableArray(d.allFilters.slice(0).sort(function(e,t){return e.order()<t.order()?-1:1})),d.activeFilters().length>0&&n.layout.open("west"),o.default.each(d.numericFilters(),function(e){e.rateLimitedHigh.subscribe(function(e){n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})}),e.rateLimitedLow.subscribe(function(e){n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})})}),o.default.each(d.categoryFilters(),function(e){e.categories.subscribe(function(e){n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})}),e.selected.subscribe(function(e){n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})})}),d.activateFilter=function(t,r){0===d.activeFilters().length&&n.layout.open("west");for(var l,c,u,h=r.target.dataset.value,p=d.allFilters().length-1;p>=0;p--)(l=d.allFilters()[p]).index()==Number(h)&&(u=l.type(),c=d.allFilters.remove(l)[0],"category"==u&&0==c.categories().length&&(a.default.observableArray(),e.ajax({type:"GET",url:i.default+"models/"+d.model_id()+"/arraysets/data-table/metadata?unique=0/"+c.index()+"/...",success:function(e){(0,o.default)(e.unique[0].values[0]).sort().each(function(e){c.categories.push({value:a.default.observable(e),selected:a.default.observable(!0)})}).value(),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})},error:function(e){}})),d.allFilters.push(c),c.active(!0));e("#sliders-pane #sliders .slycat-pim-filter:last-child").get(0).scrollIntoView(),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})},d.removeFilter=function(e,t){e.active(!1),0==d.activeFilters().length&&n.layout.close("west"),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})},d.toggleAutoWidth=function(e,t){e.autowidth()?e.autowidth(!1):e.autowidth(!0),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})},d.toggleNull=function(e,t){e.nulls()?e.nulls(!1):e.nulls(!0),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})},d.invertFilter=function(e,t){"numeric"===e.type()?(e.invert(!e.invert()),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})):"category"===e.type()&&o.default.each(e.categories(),function(e){e.selected()?e.selected(!1):e.selected(!0)})},d.selectAll=function(e,t){o.default.each(e.categories(),function(e){e.selected(!0)})},d.selectNone=function(e,t){o.default.each(e.categories(),function(e){e.selected(!1)})},d.maxMinKeyPress=function(e,t){return 13!=t.which||(t.target.blur(),!1)},d.maxMinKeyUp=function(e,t){return 27!=t.which||(t.target.blur(),!1)},d.maxMinFocus=function(t,n){var i="";e(n.target).hasClass("max-field")?i=this.max():e(n.target).hasClass("min-field")?i=this.min():e(n.target).hasClass("high_value")?i=this.high():e(n.target).hasClass("low_value")&&(i=this.low()),e(n.target).toggleClass("editing",!0),n.target.textContent=i},d.maxMinBlur=function(t,i){var o,a,l=Number(i.target.textContent);e(i.target).hasClass("max-field")?(o=t.max_stats(),a=t.min()):(o=t.max(),a=t.min_stats()),isNaN(l)||l>o||l<a?r.dialog({title:isNaN(l)?"Oops, Please Enter A Number":"Oops, Number Outside Of Data Range",message:"Please enter a number between "+a+" and "+o+".",buttons:[{className:"btn-primary",label:"OK"}],callback:function(t){"OK"==t.label&&e(i.target).focus()}}):(e(i.target).toggleClass("editing",!1),e(i.target).hasClass("max-field")?(this.low()>l&&this.low(l),this.high()>l&&this.high(l),this.max(l)):(this.high()<l&&this.high(l),this.low()<l&&this.low(l),this.min(l)),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())}))},d.highLowBlur=function(t,i){var o,a,l=Number(i.target.textContent);e(i.target).hasClass("high_value")?(o=t.max(),a=t.low()):(o=t.high(),a=t.min()),isNaN(l)||l>o||l<a?r.dialog({title:isNaN(l)?"Oops, Please Enter A Number":"Oops, Number Outside Of Data Range",message:"Please enter a number between "+a+" and "+o+".",buttons:[{className:"btn-primary",label:"OK"}],callback:function(t){"OK"==t.label&&e(i.target).focus()}}):(e(i.target).toggleClass("editing",!1),e(i.target).hasClass("high_value")?this.high(l):this.low(l),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())}))},d.maxMinMouseOver=function(t,n){e(n.target).toggleClass("hover",!0)},d.maxMinMouseOut=function(t,n){e(n.target).toggleClass("hover",!1)},d.maxMinReset=function(t,i){e(i.target).hasClass("max-reset")?(this.high()>this.max_stats()&&this.high(this.max_stats()),this.max(this.max_stats())):(this.low()<this.min_stats()&&this.low(this.min_stats()),this.min(this.min_stats())),n.bookmarker.updateState({allFilters:s.default.toJS(d.allFilters())})}},document.getElementById("parameter-image-plus-layout")),n.active_filters_ready(!0),n.foundMismatches&&n.allFilters.valueHasMutated()}},t.default=c}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var t=l(n(15)),i=l(n(281)),r=l(n(25)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(302)),a=l(n(47)),s=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}n(280),n(323),n(364);var c=i.default.behavior.drag();c.on("dragstart",function(){}),e.widget("parameter_image.scatterplot",{options:{model:null,width:300,height:300,pick_distance:3,drag_threshold:3,indices:[],x_label:"X Label",y_label:"Y Label",v_label:"V Label",x:[],y:[],v:[],x_string:!1,y_string:!1,v_string:!1,images:[],selection:[],colorscale:i.default.scale.linear().domain([-1,0,1]).range(["blue","white","red"]),border:25,open_images:[],gradient:null,hidden_simulations:[],filtered_indices:[],filtered_selection:[],filtered_x:[],filtered_y:[],filtered_v:[],scale_x:[],scale_y:[],scale_v:[],"auto-scale":!0,canvas_square_size:8,canvas_square_border_size:1,canvas_selected_square_size:16,canvas_selected_square_border_size:2,pinned_width:200,pinned_height:200,pinned_stl_width:200,pinned_stl_height:200,hover_time:250,image_cache:{},video_file_extensions:["3gp","3g2","h261","h263","h264","jpgv","jpm","jpgm","mj2","mjp2","mp4","mp4v","mpg4","mpeg","mpg","mpe","m1v","m2v","ogv","qt","mov","uvh","uvvh","uvm","uvvm","uvp","uvvp","uvs","uvvs","uvv","uvvv","dvb","fvt","mxu","m4u","pyv","uvu","uvvu","viv","webm","f4v","fli","flv","m4v","mkv","mk3d","mks","mng","asf","asx","vob","wm","wmv","wmx","wvx","avi","movie","smv","ice"],link_protocols:["http","https"],"video-sync":!1,"video-sync-time":0,frameLength:.04,highest_z_index:0},syncing_videos:[],pausing_videos:[],playing_videos:[],current_frame:null,_create:function(){var t=this;t.options["auto-scale"]?(t.options.filtered_x=t._filterValues(t.options.x),t.options.filtered_y=t._filterValues(t.options.y),t.options.filtered_v=t._filterValues(t.options.v),t.options.scale_x=t.options.filtered_x,t.options.scale_y=t.options.filtered_y,t.options.scale_v=t.options.filtered_v):(t.options.scale_x=t.options.x,t.options.scale_y=t.options.y,t.options.scale_v=t.options.v),this.remotes=o.create_pool(),t.hover_timer=null,t.close_hover_timer=null,t.hover_timer_canvas=null,t.opening_image=null,t.state="",t.start_drag=null,t.current_drag=null,t.end_drag=null,t.login_open=!1,t.media_layer=i.default.select(t.element.get(0)).append("div").attr("class","media-layer bootstrap-styles"),e(".media-layer").delegate("*","mousedown",function(e){e.stopPropagation(),e.preventDefault()}),t.svg=i.default.select(t.element.get(0)).append("svg").style({opacity:".99"}),t.x_axis_layer=t.svg.append("g").attr("class","x-axis"),t.y_axis_layer=t.svg.append("g").attr("class","y-axis"),t.legend_layer=t.svg.append("g").attr("class","legend"),t.legend_axis_layer=t.legend_layer.append("g").attr("class","legend-axis"),t.canvas_datum=i.default.select(t.element.get(0)).append("canvas").style({position:"absolute"}).node(),t.canvas_datum_layer=t.canvas_datum.getContext("2d"),t.canvas_selected=i.default.select(t.element.get(0)).append("canvas").style({position:"absolute"}).node(),t.canvas_selected_layer=t.canvas_selected.getContext("2d"),t.selection_layer=t.svg.append("g").attr("class","selection-layer"),t.line_layer=t.svg.append("g").attr("class","line-layer"),t.options.image_cache={},t.updates={},t.update_timer=null,t._schedule_update({update_indices:!0,update_width:!0,update_height:!0,update_x:!0,update_y:!0,update_x_label:!0,update_y_label:!0,render_data:!0,render_selection:!0,open_images:!0,render_legend:!0,update_legend_colors:!0,update_legend_position:!0,update_legend_axis:!0,update_v_label:!0}),t.legend_layer.call(i.default.behavior.drag().on("drag",function(){if(0<=i.default.event.y&&i.default.event.y<=t.options.height&&0<=i.default.event.x&&i.default.event.x<=t.options.width){var e=i.default.select(this),n=Number(e.attr("data-transx")),r=Number(e.attr("data-transy"));n+=i.default.event.dx,r+=i.default.event.dy,e.attr("data-transx",n),e.attr("data-transy",r),e.attr("transform","translate("+n+", "+r+")")}}).on("dragstart",function(){t.state="moving",i.default.event.sourceEvent.stopPropagation()}).on("dragend",function(){t.state="",i.default.select(this).attr("data-status","moved")})),t.element.mousedown(function(e){e.preventDefault();t.start_drag=[t._offsetX(e),t._offsetY(e)];t.start_drag;t.end_drag=null;t.start_drag}),t.element.mousemove(function(e){if(null===t.start_drag)"svg"===e.target.nodeName&&t.options.images.length>0&&t._schedule_hover_canvas(e);else if(t.start_drag)if(t.end_drag){t.end_drag=[t._offsetX(e),t._offsetY(e)];t.element.width(),t.element.height();t.selection_layer.selectAll(".rubberband").attr("x",Math.min(t.start_drag[0],t.end_drag[0])).attr("y",Math.min(t.start_drag[1],t.end_drag[1])).attr("width",Math.abs(t.start_drag[0]-t.end_drag[0])).attr("height",Math.abs(t.start_drag[1]-t.end_drag[1]))}else(Math.abs(t._offsetX(e)-t.start_drag[0])>t.options.drag_threshold||Math.abs(t._offsetY(e)-t.start_drag[1])>t.options.drag_threshold)&&(t.state="rubber-band-drag",t.end_drag=[t._offsetX(e),t._offsetY(e)],t.selection_layer.append("rect").attr("class","rubberband").attr("x",Math.min(t.start_drag[0],t.end_drag[0])).attr("y",Math.min(t.start_drag[1],t.end_drag[1])).attr("width",Math.abs(t.start_drag[0]-t.end_drag[0])).attr("height",Math.abs(t.start_drag[1]-t.end_drag[1])).attr("fill","rgba(255, 255, 0, 0.3)").attr("stroke","rgb(255, 255, 0)").attr("linewidth",2))}),t.element.mouseout(function(e){t._cancel_hover_canvas()}),t.element.mouseup(function(e){if("resizing"!=t.state&&"moving"!=t.state){e.ctrlKey||e.metaKey||(t.options.selection=[],t.options.filtered_selection=[]);var n,i,r=t.options.x,o=t.options.y,a=r.length;if("rubber-band-drag"==t.state){if(t.selection_layer.selectAll(".rubberband").remove(),t.start_drag&&t.end_drag)for(var s=Math.min(t.start_drag[0],t.end_drag[0]),l=Math.max(t.start_drag[0],t.end_drag[0]),c=Math.min(t.start_drag[1],t.end_drag[1]),u=Math.max(t.start_drag[1],t.end_drag[1]),d=0;d!=a;++d){if(n=t.x_scale(r[d]),i=t.y_scale(o[d]),s<=n&&n<=l&&c<=i&&i<=u)-1==(h=t.options.selection.indexOf(t.options.indices[d]))&&t.options.selection.push(t.options.indices[d])}}else for(s=t._offsetX(e)-t.options.pick_distance,l=t._offsetX(e)+t.options.pick_distance,c=t._offsetY(e)-t.options.pick_distance,u=t._offsetY(e)+t.options.pick_distance,d=a-1;d>-1;d--)if(n=t.x_scale(r[d]),i=t.y_scale(o[d]),s<=n&&n<=l&&c<=i&&i<=u){var h;-1==(h=t.options.selection.indexOf(t.options.indices[d]))?t.options.selection.push(t.options.indices[d]):t.options.selection.splice(h,1);break}t.start_drag=null,t.end_drag=null,t.state="",t._filterIndices(),t.options.selection=t.options.filtered_selection.slice(0),t._schedule_update({render_selection:!0}),t.element.trigger("selection-changed",[t.options.selection])}}),t._filterIndices()},_filterIndices:function(){var e=this,t=e.options.x,n=e.options.y,i=e.options.indices,r=e.options.selection,o=e.options.hidden_simulations;e.options.filtered_indices=a.default.difference(e._cloneArrayBuffer(i).filter(function(i,r,o){return e._validateValue(t[r])&&e._validateValue(n[r])}),o),e.options.filtered_selection=a.default.difference(r.filter(function(i,r,o){return e._validateValue(t[i])&&e._validateValue(n[i])}),o)},_filterValues:function(e){for(var t=this.options.hidden_simulations.sort(i.default.ascending),n=t.length,r=this._cloneArrayBuffer(e),o=n-1;o>=0;o--)r.splice(t[o],1);return r},_cloneArrayBuffer:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},_createScale:function(e,t,n,r){if(e){var o=i.default.set(t).values().sort();return!0===r&&o.reverse(),i.default.scale.ordinal().domain(o).rangePoints(n)}var a=[i.default.min(t),i.default.max(t)];return!0===r&&a.reverse(),i.default.scale.linear().domain(a).range(n)},_getDefaultXPosition:function(e,t){var n,i=this.svg.attr("width"),r=this.x_scale.range(),o=r.length-1,a=(this.x_scale(this.options.x[e])-r[0])/(r[o]-r[0]);return n=a<.5?a*r[0]:i-(i-r[o])*(1-a)-t,parseInt(n)},_getDefaultYPosition:function(e,t){var n=this.svg.attr("height"),i=this.y_scale(this.options.y[e]);return parseInt(i/n*(n-t))},_validateValue:function(e){return"number"==typeof e&&!isNaN(e)||"string"==typeof e&&""!==e.trim()},_setOption:function(e,t){this.options[e]=t,"x_label"==e?this._schedule_update({update_x_label:!0}):"y_label"==e?this._schedule_update({update_y_label:!0}):"v_label"==e?this._schedule_update({update_v_label:!0}):"x"==e?(this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.scale_x=this.options.filtered_x):this.options.scale_x=this.options.x,this._filterIndices(),this._close_hidden_simulations(),this._schedule_update({update_x:!0,update_leaders:!0,render_data:!0,render_selection:!0})):"y"==e?(this.options["auto-scale"]?(this.options.filtered_y=this._filterValues(this.options.y),this.options.scale_y=this.options.filtered_y):this.options.scale_y=this.options.y,this._filterIndices(),this._close_hidden_simulations(),this._schedule_update({update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0})):"v"==e?(this.options["auto-scale"]?(this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_v=this.options.filtered_v):this.options.scale_v=this.options.v,this._schedule_update({render_data:!0,render_selection:!0,update_legend_axis:!0})):"images"==e||("selection"==e?(this._filterIndices(),this._schedule_update({render_selection:!0})):"colorscale"==e?this._schedule_update({render_data:!0,render_selection:!0}):"width"==e?this._schedule_update({update_width:!0,update_x_label:!0,update_x:!0,update_leaders:!0,render_data:!0,render_selection:!0}):"height"==e?this._schedule_update({update_height:!0,update_y:!0,update_y_label:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_position:!0,update_legend_axis:!0,update_v_label:!0}):"border"==e?this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_position:!0,update_v_label:!0}):"gradient"==e?this._schedule_update({update_legend_colors:!0}):"hidden_simulations"==e?(this._filterIndices(),this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.filtered_y=this._filterValues(this.options.y),this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_x=this.options.filtered_x,this.options.scale_y=this.options.filtered_y,this.options.scale_v=this.options.filtered_v):(this.options.scale_x=this.options.x,this.options.scale_y=this.options.y,this.options.scale_v=this.options.v),this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_axis:!0}),this._close_hidden_simulations(),this._open_shown_simulations()):"auto-scale"==e?(this.options["auto-scale"]?(this.options.filtered_x=this._filterValues(this.options.x),this.options.filtered_y=this._filterValues(this.options.y),this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_x=this.options.filtered_x,this.options.scale_y=this.options.filtered_y,this.options.scale_v=this.options.filtered_v):(this.options.scale_x=this.options.x,this.options.scale_y=this.options.y,this.options.scale_v=this.options.v),this._schedule_update({update_x:!0,update_y:!0,update_leaders:!0,render_data:!0,render_selection:!0,update_legend_axis:!0})):"video-sync"==e?this.options["video-sync"]&&this._schedule_update({update_video_sync_time:!0}):"video-sync-time"==e&&this.options["video-sync"]&&this._schedule_update({update_video_sync_time:!0}))},update_color_scale_and_v:function(e){this.options.colorscale=e.colorscale,this.options.v=e.v,void 0!==e.v_string&&(this.options.v_string=e.v_string),this.options["auto-scale"]?(this.options.filtered_v=this._filterValues(this.options.v),this.options.scale_v=this.options.filtered_v):this.options.scale_v=this.options.v,this._schedule_update({render_data:!0,render_selection:!0,update_legend_axis:!0})},_schedule_update:function(e){var t=this;for(var n in e)t.updates[n]=e[n];t.update_timer||(t.update_timer=window.setTimeout(function(){t._update()},0))},_update:function(){var t=this;t.update_timer=null;if(t.updates.update_width){t.element.attr("width",t.options.width),t.svg.attr("width",t.options.width),t.media_layer.style({width:t.options.width+"px"});var n=t.options.width,r=t.options.height,o=(n-(c=Math.min(n,r)))/2;i.default.select(t.canvas_datum).style({left:o+t.options.border-t.options.canvas_square_size/2+"px"}).attr("width",c-2*t.options.border-0+t.options.canvas_square_size),i.default.select(t.canvas_selected).style({left:o+t.options.border-t.options.canvas_selected_square_size/2+"px"}).attr("width",c-2*t.options.border-0+t.options.canvas_selected_square_size)}if(t.updates.update_height){t.element.attr("height",t.options.height),t.svg.attr("height",t.options.height),t.media_layer.style({height:t.options.height+"px"});n=t.options.width;var a=((r=t.options.height)-(u=Math.min(n,r)))/2;i.default.select(t.canvas_datum).style({top:a+t.options.border-t.options.canvas_square_size/2+"px"}).attr("height",u-2*t.options.border-40+t.options.canvas_square_size),i.default.select(t.canvas_selected).style({top:a+t.options.border-t.options.canvas_selected_square_size/2+"px"}).attr("height",u-2*t.options.border-40+t.options.canvas_selected_square_size)}if(t.updates.update_x){n=t.options.width,r=t.options.height;var s=[0+(o=(n-(c=Math.min(t.options.width,t.options.height)))/2)+t.options.border,n-o-t.options.border-0],l=[0,c-2*t.options.border-0];t.x_scale=t._createScale(t.options.x_string,t.options.scale_x,s,!1),t.x_scale_canvas=t._createScale(t.options.x_string,t.options.scale_x,l,!1);a=(r-(u=Math.min(t.options.width,t.options.height)))/2;t.x_axis_offset=r-a-t.options.border-40,t.x_axis=i.default.svg.axis().scale(t.x_scale).orient("bottom"),t.x_axis_layer.attr("transform","translate(0,"+t.x_axis_offset+")").call(t.x_axis)}if(t.updates.update_y){n=t.options.width,r=t.options.height;var c=Math.min(t.options.width,t.options.height),u=Math.min(t.options.width,t.options.height);o=(n-c)/2,s=[r-(a=(r-u)/2)-t.options.border-40,0+a+t.options.border],l=[u-2*t.options.border-40,0];t.y_axis_offset=0+o+t.options.border,t.y_scale=t._createScale(t.options.y_string,t.options.scale_y,s,!1),t.y_scale_canvas=t._createScale(t.options.y_string,t.options.scale_y,l,!1),t.y_axis=i.default.svg.axis().scale(t.y_scale).orient("left"),t.y_axis_layer.attr("transform","translate("+t.y_axis_offset+",0)").call(t.y_axis)}if(t.updates.update_indices){t.inverse_indices={};for(var d=t.options.indices.length,h=0;h!=d;++h)t.inverse_indices[t.options.indices[h]]=h}if(t.updates.update_x_label){var p=t.svg.attr("width")/2,f=40;t.x_axis_layer.selectAll(".label").remove(),t.x_axis_layer.append("text").attr("class","label").attr("x",p).attr("y",f).style("text-anchor","middle").style("font-weight","bold").text(t.options.x_label)}if(t.updates.update_y_label){t.y_axis_layer.selectAll(".label").remove();p=-(t.y_axis_layer.node().getBBox().width+15),f=t.svg.attr("height")/2;t.y_axis_layer.append("text").attr("class","label").attr("x",p).attr("y",f).attr("transform","rotate(-90,"+p+","+f+")").style("text-anchor","middle").style("font-weight","bold").text(t.options.y_label)}if(t.updates.render_data){p=t.options.x,f=t.options.y;var m=t.options.v,g=t.options.filtered_indices,v=t.canvas_datum_layer,A=(h=-1,g.length),y=t.options.canvas_square_size,b=(T=t.options.canvas_square_border_size)/2,x=R=y-2*T,_=L=y-T,w=Date;window.performance&&(w=window.performance);w.now();for(v.clearRect(0,0,t.canvas_datum.width,t.canvas_datum.height),v.strokeStyle="black",v.lineWidth=T;++h<A;){var M=m[k=g[h]];C=t._validateValue(M)?t.options.colorscale(M):e("#color-switcher").colorswitcher("get_null_color"),v.fillStyle=C,E=Math.round(t.x_scale_canvas(p[k])),S=Math.round(t.y_scale_canvas(f[k])),v.fillRect(E+T,S+T,R,x),v.strokeRect(E+b,S+b,L,_)}w.now()}if(t.updates.render_selection){p=t.options.x,f=t.options.y,m=t.options.v;var E,S,C,T,R,L,P=t.options.filtered_selection;v=t.canvas_selected_layer,h=-1,A=P.length,y=t.options.canvas_selected_square_size,b=(T=t.options.canvas_selected_square_border_size)/2,x=R=y-2*T;for(_=L=y-T,v.clearRect(0,0,t.canvas_selected.width,t.canvas_selected.height),v.strokeStyle="black",v.lineWidth=T;++h<A;){var k;M=m[k=P[h]];C=t._validateValue(M)?t.options.colorscale(M):e("#color-switcher").colorswitcher("get_null_color"),v.fillStyle=C,E=Math.round(t.x_scale_canvas(p[k])),S=Math.round(t.y_scale_canvas(f[k])),v.fillRect(E+T,S+T,R,x),v.strokeRect(E+b,S+b,L,_)}}if(t.updates.open_images){t.options.open_images.forEach(function(e){void 0===e.uri&&(e.uri=t.options.images[e.index]),void 0===e.width&&(e.width=t.options.pinned_width),void 0===e.height&&(e.height=t.options.pinned_height)});c=Number(t.svg.attr("width")),u=Number(t.svg.attr("height"));var N=[];t.options.open_images.forEach(function(e,n){null!=e.index&&void 0!=e.uri&&N.push({index:e.index,uri:e.uri.trim(),image_class:"open-image",x:c*e.relx,y:u*e.rely,width:e.width,height:e.height,target_x:t.x_scale(t.options.x[e.index]),target_y:t.y_scale(t.options.y[e.index]),video:e.video,currentTime:e.currentTime,current_frame:e.current_frame}),e.current_frame&&(t.current_frame=e.index)}),t._open_images(N)}if(t.updates.update_leaders&&e(".open-image").each(function(n,i){i=e(i);var r=Number(i.attr("data-index")),o=i.attr("data-uri");t.line_layer.select("line[data-uri='"+o+"']").attr("x2",t.x_scale(t.options.x[r])).attr("y2",t.y_scale(t.options.y[r])).attr("data-targetx",t.x_scale(t.options.x[r])).attr("data-targety",t.y_scale(t.options.y[r]))}),t.updates.render_legend){t.legend_layer.append("defs").append("linearGradient").attr("id","color-gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");t.legend_layer.append("rect").classed("color",!0).attr("width",10).attr("height",200).attr("x",0).attr("y",0).style("fill","url(#color-gradient)")}if(t.updates.update_legend_colors){var O=t.legend_layer.select("#color-gradient").selectAll("stop").data(t.options.gradient);O.exit().remove(),O.enter().append("stop"),O.attr("offset",function(e){return e.offset+"%"}).attr("stop-color",function(e){return e.color})}if(t.updates.update_legend_position){n=Number(t.options.width),r=Number(t.options.height),c=Math.min(t.options.width,t.options.height),u=Math.min(t.options.width,t.options.height);var z=parseInt((u-t.options.border-40)/2),D=t.y_axis_layer.node().getBBox().width;o=(n+t.x_axis_layer.node().getBBox().width)/2;if("moved"!=t.legend_layer.attr("data-status")){var I=parseInt(D+10+o),F=parseInt(r/2-z/2);t.legend_layer.attr("transform","translate("+I+","+F+")").attr("data-transx",I).attr("data-transy",F)}t.legend_layer.select("rect.color").attr("height",z)}if(t.updates.update_legend_axis){s=[0,parseInt(t.legend_layer.select("rect.color").attr("height"))];t.legend_scale=t._createScale(t.options.v_string,t.options.scale_v,s,!0),t.legend_axis=i.default.svg.axis().scale(t.legend_scale).orient("right"),t.legend_axis_layer.attr("transform","translate("+parseInt(t.legend_layer.select("rect.color").attr("width"))+",0)").call(t.legend_axis)}if(t.updates.update_v_label){t.legend_layer.selectAll(".label").remove();p=-15,f=(z=parseInt(t.legend_layer.select("rect.color").attr("height")))/2;t.legend_layer.append("text").attr("class","label").attr("x",p).attr("y",f).attr("transform","rotate(-90,"+p+","+f+")").style("text-anchor","middle").style("font-weight","bold").text(t.options.v_label)}t.updates.update_video_sync_time&&t._update_video_sync_time(),t.updates={}},_update_video_sync_time:function(){var t=this;e(".open-image video").each(function(n,i){var r=t.options["video-sync-time"];t._is_video_playing(i)||(t.syncing_videos.push(e(i.parentElement).data("index")),i.currentTime=Math.min(r,i.duration-1e-6))}),t._sync_open_images()},_sync_open_images:function(){var t=this,n=Number(t.svg.attr("width")),i=Number(t.svg.attr("height"));t.options.open_images=[],e(".open-image").sort(function(e,t){return parseInt(e.style["z-index"],10)-parseInt(t.style["z-index"],10)}).each(function(r,o){o=e(o);var a={index:Number(o.attr("data-index")),uri:o.attr("data-uri"),relx:Number(o.attr("data-transx"))/n,rely:Number(o.attr("data-transy"))/i,width:o.outerWidth(),height:o.outerHeight(),current_frame:o.hasClass("selected")},s=o.find("video")[0];if(void 0!=s){var l=s.currentTime;a.currentTime=l,a.video=!0,a.playing=t._is_video_playing(s)}t.options.open_images.push(a)}),t.element.trigger("open-images-changed",[t.options.open_images])},_is_video_playing:function(e){return!(e.paused||e.ended||!(e.readyState>2))},_open_images:function(n,o){var a=this;if(0!=n.length){var l=n[0],u=l.uri.split("/"),d=-1!==u[u.length-1].indexOf(".stl"),h=null,p=function(e){if(e.close_hover_timer)return window.clearTimeout(e.close_hover_timer),e.close_hover_timer=null},f={move:function(){var e,t,n;(function(e,t){return 0<=e.y&&e.y<=t.height&&0<=e.x&&e.x<=t.width})(i.default.event,a.options)&&(e=i.default.select(this),t=Number(e.attr("data-transx"))+i.default.event.dx,n=Number(e.attr("data-transy"))+i.default.event.dy,e.attr("data-transx",t).attr("data-transy",n).style({left:t+"px",top:n+"px"}),a._adjust_leader_line(e))},move_start:function(){var t,n;e(".mouseEventOverlay",this.closest(".image-frame")).show(),a.state="moving",((n=i.default.select(i.default.event.sourceEvent.target)).classed("image-frame")||n.classed("image")||n.classed("bootstrap-styles")||"VIDEO"==i.default.event.sourceEvent.target.nodeName)&&(t=i.default.select(this)).classed("hover-image")&&(a.opening_image=null,p(a),t.classed("hover-image",!1).classed("open-image",!0),l.image_class="open-image")},move_end:function(){e(".mouseEventOverlay",this.closest(".image-frame")).hide(),a.state="",a._sync_open_images()},close:function(){var e=i.default.select(i.default.event.target.closest(".image-frame"));a._remove_image_and_leader_line(e),a._sync_open_images()},frame_mousedown:function(){var e=i.default.select(i.default.event.target);e.classed("close-button")||(e.classed("slycat-3d-btn-settings")&&i.default.select("#slycat-3d-modal").on(".drag",null).call(c),a._move_frame_to_front(this))},hover:function(){return p(a),a.close_hover_timer=window.setTimeout(function(){return a._hover_timeout(l.index,0)},1e3)},resize:function(){var t,n,r,o,s;if(50,o=i.default.event.x,0<=(s=i.default.event.y)&&s<=a.options.height&&0<=o&&o<=a.options.width&&o>50&&s>50){var l=(t=i.default.select(this.closest(".image-frame"))).attr("data-ratio")?t.attr("data-ratio"):1;t.attr("data-type");n=a._scale_width(l,o,s),r=a._scale_height(l,o,s),r+=20,t.style({width:n+"px",height:r+"px"}),a._adjust_leader_line(t)}e(window).trigger("resize")},resize_start:function(){var t;e(".mouseEventOverlay",this.closest(".image-frame")).show(),a._move_frame_to_front(this.closest(".image-frame")),a.state="resizing",t=i.default.select(this.closest(".image-frame")),i.default.select("#scatterplot").classed("resizing",!0),t.classed("hover-image")&&(a.opening_image=null,p(a),t.classed("hover-image",!1).classed("open-image",!0),l.image_class="open-image"),i.default.event.sourceEvent.stopPropagation()},resize_end:function(){e(".mouseEventOverlay",this.closest(".image-frame")).hide(),i.default.selectAll([this.closest(".image-frame"),i.default.select("#scatterplot").node()]).classed("resizing",!1),a.state="",a._sync_open_images()},pin:function(){var t,n,r,o,s,c,u;a.opening_image=null,p(a),(t=i.default.select(i.default.event.target.closest(".image-frame"))).classed("hover-image",!1).classed("open-image",!0),r=d?a.options.pinned_stl_width:a.options.pinned_width,n=d?a.options.pinned_stl_height:a.options.pinned_height;var h=e("#scatterplot svg"),f=h.height(),m=h.width();(r>=f||n>=m)&&(n=r=Math.min(f,m)-20);var g=t.attr("data-ratio")?t.attr("data-ratio"):1;o=a._scale_width(g,r,n),s=a._scale_height(g,r,n),s+=20,c=a._getDefaultXPosition(l.index,r),u=a._getDefaultYPosition(l.index,n),t.attr("data-transx",c).attr("data-transy",u).style({left:c+"px",top:u+"px",width:o+"px",height:s+"px"}),d&&t.style("height",n+20+"px"),a._adjust_leader_line(t),a._sync_open_images(),e(window).trigger("resize")},pause_video:function(){P(a)},seeked_video:function(){P(a)},jump:function(){var e=i.default.select(i.default.event.target.closest(".image-frame")).attr("data-index");a.element.trigger("jump_to_simulation",e)}};if(-1==e.inArray(l.index,a.options.hidden_simulations)){if(e(".open-image[data-uri='"+l.uri+"']:not(.scaffolding)").size()>0)a._open_images(n.slice(1));else if("hover-image"!=l.image_class||a.opening_image==l.index){a.media_layer.select("div[data-uri='"+l.uri+"']").filter("."+l.image_class+",.open-image").empty()&&(h=function(e){e.width||(e.width=a.options.pinned_width),e.height||(e.height=a.options.pinned_height),void 0===e.x&&(e.x=a._getDefaultXPosition(e.index,e.width)),void 0===e.y&&(e.y=a._getDefaultYPosition(e.index,e.height)),a.options.highest_z_index++;var t=a.media_layer.append("div").attr("data-uri",e.uri).attr("data-transx",e.x).attr("data-transy",e.y).style({left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+20+"px","z-index":a.options.highest_z_index}).attr("class",e.image_class+" image-frame scaffolding html ").classed("selected",e.current_frame).attr("data-index",e.index).attr("data-uri",e.uri).call(i.default.behavior.drag().on("drag",f.move).on("dragstart",f.move_start).on("dragend",f.move_end)).on("mousedown",f.frame_mousedown);t.append("div").attr("class","frame-footer").append("i").attr("class","close-button frame-button fa fa-times").attr("aria-hidden","true").attr("title","Close").on("click",f.close);"target_x"in e&&"target_y"in e&&a.line_layer.append("line").attr("data-uri",e.uri).attr("class","leader").attr("x1",e.x+e.width/2).attr("y1",e.y+e.height/2).attr("x2",e.target_x).attr("y2",e.target_y).attr("data-targetx",e.target_x).attr("data-targety",e.target_y).style("stroke","black").style("stroke-width",1);t.append("div").attr("class","loading-image");return a.element.one("mousemove",f.hover),t}(l));var m=(0,r.default)(l.uri),g=a.options.link_protocols.indexOf(m.protocol())>-1,v=l.uri in a.options.image_cache;if(g||v){if(void 0===l.width&&(l.width=a.options.pinned_width),void 0===l.height&&(l.height=a.options.pinned_height),void 0===l.x&&(l.x=a._getDefaultXPosition(l.index,l.width)),void 0===l.y&&(l.y=a._getDefaultYPosition(l.index,l.height)),(h=a.media_layer.select("div."+l.image_class+"[data-uri='"+l.uri+"']")).classed("scaffolding",!1),h.select("span.reload-button").remove(),g){h.style({width:l.width+"px",height:l.height+"px"}),a._adjust_leader_line(h);h.append("a").attr("href",m).attr("class","open-link").attr("target","_blank").text(l.uri)}else if(v){var A=function(e,t){var n=i.default.select(t.parentElement);n.classed("hover-image")&&(e.opening_image=null,p(e),n.classed("hover-image",!1).classed("open-image",!0),l.image_class="open-image")};console.log("Displaying image "+l.uri+" from cache...");var y=window.URL||window.webkitURL,b=a.options.image_cache[l.uri],x=y.createObjectURL(b);if(0==b.type.indexOf("image/")){var _=h.append("img").attr("class","image resize").attr("src",x).attr("data-ratio",l.width/l.height).style({display:"none"});e(_.node()).one("load",function(){var e=this.naturalWidth,t=this.naturalHeight,n=e/t,i=a._scale_width(n,l.width,l.height);h.attr("data-width",e).attr("data-height",t).attr("data-ratio",n).style({width:i+"px",height:"auto"}),_.style({display:"block"}),a._adjust_leader_line(h)})}else if(0==b.type.indexOf("video/")){var w=h.append("video").attr("data-uri",l.uri).attr("src",x).attr("controls",!0).attr("loop",!0).style({display:"none"}).on("mousedown",function(e){}).on("click",function(e){}).on("loadedmetadata",function(){var e=this.videoWidth,t=this.videoHeight,n=e/t,i=a._scale_width(n,l.width,l.height);h.attr("data-width",e).attr("data-height",t).attr("data-ratio",n).attr("data-type","video").style({width:i+"px",height:"auto"}),w.style({display:"block"}),a._adjust_leader_line(h),a.options["video-sync"]&&this.currentTime!=a.options["video-sync-time"]&&(a.syncing_videos.push(l.index),this.currentTime=a.options["video-sync-time"])}).on("playing",function(){a._sync_open_images()}).on("pause",function(){var e=a.pausing_videos.indexOf(l.index);e<0?(a.options["video-sync-time"]=this.currentTime,a.options["video-sync"]||(this.currentTime=a.options["video-sync-time"]),f.pause_video(),a._move_frame_to_front(this.closest(".image-frame"))):a.pausing_videos.splice(e,1)}).on("seeked",function(e){var t=a.syncing_videos.indexOf(l.index);t<0?(a.options["video-sync-time"]=this.currentTime,f.seeked_video(),A(a,this),a._move_frame_to_front(this.closest(".image-frame"))):a.syncing_videos.splice(t,1)}).on("play",function(e){A(a,this);var t=a.playing_videos.indexOf(l.index);t<0?a._move_frame_to_front(this.closest(".image-frame")):a.playing_videos.splice(t,1)}).on("volumechange",function(e){a._move_frame_to_front(this.closest(".image-frame"))});void 0!=l.currentTime&&l.currentTime>0&&(a.syncing_videos.push(l.index),w.property("currentTime",l.currentTime))}else if(0==b.type.indexOf("application/pdf")){h.style({width:"320px",height:11/8.5*320+10+"px"}).attr("data-ratio",8.5/11).append("object").attr("data-uri",l.uri).attr("data",x).attr("type","application/pdf").attr("width","100%").attr("height","100%").append("iframe").attr("data-uri",l.uri).attr("src",x).attr("width","100%").attr("height","100%").attr("frameborder","0").append("a").attr("href",x).attr("class","download-link").attr("download","download").text("Download "+l.uri);h.append("div").classed("mouseEventOverlay",!0)}else if(d){var M=h[0][0],E=document.createElement("slycat-3d-viewer"),S=document.createAttribute("params"),C=x;S.value="backgroundColor: '#FFFFFF', uri: '"+C+"', container: $element";var T=document.createAttribute("style");T.value="width: 100%; height: 100%;",E.setAttributeNode(S),E.setAttributeNode(T),M.appendChild(E),s.default.applyBindings({},M),e(window).trigger("resize")}else{h.style({width:"200px",height:"200px"}),a._adjust_leader_line(h);h.append("a").attr("href",x).attr("class","download-link").attr("download","download").text("Download "+l.uri)}}h.select(".loading-image").remove();var R=h.select(".frame-footer");return a._adjust_leader_line(h),function(e){e.append("i").attr("class","resize-handle frame-button fa fa-expand fa-rotate-90").attr("aria-hidden","true").attr("title","Resize").call(i.default.behavior.drag().on("drag",f.resize).on("dragstart",f.resize_start).on("dragend",f.resize_end))}(h),function(e){e.append("i").attr("class","pin-button frame-button fa fa-thumb-tack").attr("title","Pin").attr("aria-hidden","true").on("click",f.pin)}(R),g||function(e,t,n){e.append("a").attr("href",t).attr("class","download-button frame-button fa fa-download").attr("title","Download media file").attr("download",n)}(R,x,l.uri.split("/").pop()),function(e,t){var n=e.append("span").attr("class","jump-button frame-button").on("click",f.jump);n.append("i").attr("class","table-button jump-button frame-button fa fa-table").attr("title","Jump to row "+t+" in table").attr("aria-hidden","true"),n.append("i").attr("class","arrow-button jump-button frame-button fa fa-arrow-right").attr("title","Jump to row "+t+" in table").attr("aria-hidden","true"),n.append("span").attr("class","table-index jump-button frame-button").attr("title","Index of current media. Click to jump to row "+t+" in table.").attr("aria-hidden","true").text(t)}(R,l.index),l.no_sync||a._sync_open_images(),void a._open_images(n.slice(1),!0)}(0,r.default)(t.default+"projects/"+a.options.model.project+"/cache/"+r.default.encode(m.host()+m.path()));console.log("Attempting to load image from server-side cache..."),console.log("Loading image "+l.uri+" from server...");var L=new XMLHttpRequest;a.options.video_file_extensions.indexOf(m.suffix())>-1&&"/file",L.image=l,L.open("GET",t.default+"projects/"+a.options.model.project+"/cache/"+r.default.encode(m.host()+m.path()),!0),L.responseType="arraybuffer",L.onload=function(o){if(404==this.status)a.login_open||(a.login_open=!0,a.remotes.get_remote({hostname:m.hostname(),title:"Login to "+m.hostname(),message:"Loading "+m.pathname(),cancel:function(){var t=e(".scaffolding."+l.image_class+'[data-uri="'+l.uri+'"]'),n=(i.default.select(t[0]),t.closest(".media-layer").children(".scaffolding").filter(function(t,n){return(0,r.default)(e(n).attr("data-uri")).hostname()==m.hostname()}));n.find(".loading-image").remove();i.default.selectAll(n.filter(":not(:has(>.reload-button))")).append("span").attr("class","fa fa-refresh reload-button").attr("title","Could not load image. Click to reconnect.").each(function(){var e=i.default.select(this.parentNode);i.default.select(this).style({top:parseInt(e.style("height"))/2-16+"px",left:parseInt(e.style("width"))/2-16+"px",cursor:"pointer"})}).on("click",function(t,n){return function(){var n=(0,r.default)(t.uri).hostname(),o=e(this).closest(".media-layer").children(".scaffolding").filter(function(t,i){return(0,r.default)(e(i).attr("data-uri")).hostname()==n});i.default.selectAll(o).append("div").attr("class","loading-image");o.find(".reload-button").remove(),a._open_images(o.map(function(t,n){return{uri:e(n).attr("data-uri"),image_class:l.image_class}}))}}(l));a.login_open=!1},success:function(e){var i=new XMLHttpRequest,o="/file";a.options.video_file_extensions.indexOf(m.suffix())>-1&&(o="/file"),i.image=l,i.open("GET",t.default+"remotes/"+e+o+m.pathname()+"?cache=project&project="+a.options.model.project+"&key="+r.default.encode(r.default.encode(m.host()+m.path())),!0),i.responseType="arraybuffer",i.onload=function(e){if(404==this.status||500==this.status)return a.remotes.delete_remote(m.hostname()),void a._open_images(n);if(400!=this.status){var t=new Uint8Array(this.response),i=new Blob([t],{type:this.getResponseHeader("content-type")});a.options.image_cache[l.uri]=i,a._open_images(n,!0)}else{var r=this.getResponseHeader("slycat-message"),o=this.getResponseHeader("slycat-hint");r&&o?window.alert(r+"\n\n"+o):r?window.alert(r):window.alert("Error loading image "+this.image.uri+": "+this.statusText)}},i.send(),a.login_open=!1}}));else{var s=new Uint8Array(this.response),c=new Blob([s],{type:this.getResponseHeader("content-type")});a.options.image_cache[l.uri]=c,a._open_images(n,!0)}},L.send()}}else a._open_images(n.slice(1))}function P(e){var t=e;t.options["video-sync"]&&t._schedule_update({update_video_sync_time:!0}),t.element.trigger("video-sync-time",t.options["video-sync-time"]),t._sync_open_images()}},_close_hidden_simulations:function(){var t=this;e(".media-layer div.image-frame").filter(function(){return-1==e.inArray(e(this).data("index"),t.options.filtered_indices)}).each(function(){t._remove_image_and_leader_line(i.default.select(this))})},_open_shown_simulations:function(){var t=this,n=[];e(".media-layer div.image-frame").each(function(){n.push(e(this).data("index"))});var i=Number(t.svg.attr("width")),r=Number(t.svg.attr("height")),o=[];t.options.open_images.forEach(function(e,a){null!=e.index&&void 0!=e.uri&&-1!=t.options.filtered_indices.indexOf(e.index)&&-1==n.indexOf(e.index)&&o.push({index:e.index,uri:e.uri.trim(),image_class:"open-image",x:i*e.relx,y:r*e.rely,width:e.width,height:e.height,target_x:t.x_scale(t.options.x[e.index]),target_y:t.y_scale(t.options.y[e.index])})}),t._open_images(o)},close_all_simulations:function(){var t=this;e(".media-layer div.image-frame").each(function(){t._remove_image_and_leader_line(i.default.select(this))}),t._sync_open_images()},_schedule_hover_canvas:function(e){var t=this;t._cancel_hover_canvas(),""==t.state&&(t.hover_timer_canvas=window.setTimeout(function(){t._open_hover_canvas(e)},t.options.hover_time))},_open_hover_canvas:function(e){if(""==this.state){var t=this._offsetX(e),n=this._offsetY(e),i=this.options.filtered_indices,r=this.options.filtered_selection,o=this.options.canvas_square_size,a=o/2,s=this.options.canvas_selected_square_size,l=s/2;this._open_first_match(t,n,r,l,s)||this._open_first_match(t,n,i,a,o)}},_open_first_match:function(e,t,n,i,r){for(var o=this.options.x,a=this.options.y,s=n.length-1;s>-1;s--){var l=n[s],c=Math.round(this.x_scale(o[l]))-i,u=Math.round(this.y_scale(a[l]))-i;if(e>=c&&e<=c+r&&t>=u&&t<=u+r)return""!=this.options.images[l].trim()&&this._open_hover(l),!0}return!1},_open_hover:function(e){this._close_hover(),this.opening_image=e;var t=this.svg.attr("width"),n=this.svg.attr("height"),i=.85*Math.min(t,n),r=.85*Math.min(t,n);this._open_images([{index:this.options.indices[e],uri:this.options.images[this.options.indices[e]].trim(),image_class:"hover-image",x:Math.min(this.x_scale(this.options.x[e])+10,t-i-this.options.border-10),y:Math.min(this.y_scale(this.options.y[e])+10,n-r-this.options.border-10),width:i,height:r,target_x:this.x_scale(this.options.x[e]),target_y:this.y_scale(this.options.y[e]),no_sync:!0}])},_cancel_hover_canvas:function(){this.hover_timer_canvas&&(window.clearTimeout(this.hover_timer_canvas),this.hover_timer_canvas=null)},_hover_timeout:function(e,t){var n=this;t>1e3?n._close_hover():n._is_hovering(e)?n.close_hover_timer=window.setTimeout(function(){n._hover_timeout(e,0)},50):n.close_hover_timer=window.setTimeout(function(){n._hover_timeout(e,t+50)},50)},_is_hovering:function(e){return!this.media_layer.selectAll(".hover-image[data-index='"+e+"']:hover").empty()},_close_hover:function(){var e=this;e.opening_image=null,e.close_hover_timer&&(window.clearTimeout(e.close_hover_timer),e.close_hover_timer=null),e._cancel_hover_canvas(),e.media_layer.selectAll(".hover-image").each(function(){e._remove_image_and_leader_line(i.default.select(this))})},_adjust_leader_line:function(t){var n=e(t.node()).width(),i=e(t.node()).height(),r=t.attr("data-uri"),o=Number(t.attr("data-transx"))+n/2,a=Number(t.attr("data-transy"))+i/2;this.line_layer.select("line[data-uri='"+r+"']").attr("x1",o).attr("y1",a)},_move_frame_to_front:function(t){(t=e(t)).hasClass("selected")||(this.options.highest_z_index++,t.css("z-index",this.options.highest_z_index),e(".open-image").removeClass("selected"),t.addClass("selected"),this.current_frame=Number(t.data("index")),this._sync_open_images())},_remove_image_and_leader_line:function(e){var t=e.attr("data-uri"),n=e.attr("data-index"),i=this.line_layer.select("line[data-uri='"+t+"']");e.remove(),i.remove(),this.current_frame==n&&(this.current_frame=null)},_scale_width:function(e,t,n){return e>t/n?t:e*n},_scale_height:function(e,t,n){return e>t/n?t/e:n},_offsetX:function(t){return t.pageX-t.currentTarget.getBoundingClientRect().left-e(document).scrollLeft()},_offsetY:function(t){return t.pageY-t.currentTarget.getBoundingClientRect().top-e(document).scrollTop()},pin:function(e){var t=this,n=t.options.pinned_width,i=t.options.pinned_height,r=[];e.forEach(function(e,o){r.push({index:t.options.indices[e],uri:t.options.images[t.options.indices[e]].trim(),image_class:"open-image",x:t._getDefaultXPosition(e,n),y:t._getDefaultYPosition(e,i),width:n,height:i,target_x:t.x_scale(t.options.x[e]),target_y:t.y_scale(t.options.y[e])})}),t._open_images(r)},jump_to_start:function(){var t=this;if(t.options["video-sync"])e(".open-image video").each(function(n,i){t.pausing_videos.push(e(i.parentElement).data("index")),i.pause()}),t.options["video-sync-time"]=0,t._schedule_update({update_video_sync_time:!0}),t.element.trigger("video-sync-time",t.options["video-sync-time"]);else{var n=e(".open-image[data-index='"+t.current_frame+"'] video").get(0);null!=n&&t._set_single_video_time(n,0)}},jump_to_end:function(){var t=this;if(t.options["video-sync"]){var n=1/0;e(".open-image video").each(function(i,r){t.pausing_videos.push(e(r.parentElement).data("index")),r.pause(),n=Math.min(r.duration,n)}),t.options["video-sync-time"]=n,t._schedule_update({update_video_sync_time:!0}),t.element.trigger("video-sync-time",t.options["video-sync-time"])}else{var i=e(".open-image[data-index='"+t.current_frame+"'] video").get(0);null!=i&&t._set_single_video_time(i,i.duration-t.options.frameLength)}},frame_back:function(){var t=this;if(t.options["video-sync"]){var n=e(".open-image video"),i=n.get(0);void 0!=i&&(t.options["video-sync-time"]=Math.max(i.currentTime-t.options.frameLength,0),t.element.trigger("video-sync-time",t.options["video-sync-time"])),n.each(function(n,i){t.pausing_videos.push(e(i.parentElement).data("index")),i.pause()}),t._schedule_update({update_video_sync_time:!0})}else{var r=e(".open-image[data-index='"+t.current_frame+"'] video").get(0);if(null!=r){var o=Math.max(r.currentTime-t.options.frameLength,0);t._set_single_video_time(r,o)}}},frame_forward:function(){var t=this;if(t.options["video-sync"]){var n=e(".open-image video"),i=1/0;n.each(function(n,r){t.pausing_videos.push(e(r.parentElement).data("index")),r.pause(),i=Math.min(r.duration,i)});var r=n.get(0);void 0!=r&&(t.options["video-sync-time"]=Math.min(r.currentTime+t.options.frameLength,i-t.options.frameLength),t._schedule_update({update_video_sync_time:!0}),t.element.trigger("video-sync-time",t.options["video-sync-time"]))}else{var o=e(".open-image[data-index='"+t.current_frame+"'] video").get(0);if(null!=o){var a=Math.min(o.currentTime+t.options.frameLength,o.duration-t.options.frameLength);t._set_single_video_time(o,a)}}},play:function(){var t=this;if(t.options["video-sync"])e(".open-image video").each(function(n,i){t.playing_videos.push(e(i.parentElement).data("index")),i.play()});else{var n=e(".open-image[data-index='"+t.current_frame+"'] video").get(0);null!=n&&(t.playing_videos.push(e(n.parentElement).data("index")),n.play())}},pause:function(){var t=this;if(t.options["video-sync"]){var n=e(".open-image video"),i=n.get(0);void 0!=i&&(t.options["video-sync-time"]=i.currentTime,t.element.trigger("video-sync-time",t.options["video-sync-time"])),n.each(function(n,i){t.pausing_videos.push(e(i.parentElement).data("index")),i.pause()}),t._schedule_update({update_video_sync_time:!0})}else{var r,o=e(".open-image[data-index='"+t.current_frame+"'] video").get(0);null!=o&&(r=e(o.parentElement).data("index"),t.pausing_videos.push(r),o.pause(),t.options["video-sync-time"]=o.currentTime,t.syncing_videos.push(r),o.currentTime=t.options["video-sync-time"],t.element.trigger("video-sync-time",t.options["video-sync-time"]),t._sync_open_images())}},_set_single_video_time:function(t,n){null!=t&&(this.pausing_videos.push(e(t.parentElement).data("index")),t.pause(),t.currentTime=n,this.options["video-sync-time"]=n,this.element.trigger("video-sync-time",this.options["video-sync-time"]),this._sync_open_images())}})}).call(this,n(1))},function(e,t,n){"use strict";(function(e){c(n(5));var t=c(n(0)),i=(c(n(4)),c(n(25))),r=c(n(365)),o=c(n(366)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(339)),s=c(n(367)),l=c(n(368));function c(e){return e&&e.__esModule?e:{default:e}}var u=(0,s.default)(a),d=0;t.default.components.register("slycat-3d-viewer",{viewModel:function(n){if(!y())return b(e(".slycat-3d-viewer"));var r=this;r.settings_modal_id=t.default.observable("slycat-3d-modal-"+d),r.settings_scene_href=t.default.observable("#stl-settings-scene-"+d),r.settings_scene_id=t.default.observable("stl-settings-scene-"+d),r.settings_geometry_href=t.default.observable("#stl-settings-geometry-"+d),r.settings_geometry_id=t.default.observable("stl-settings-geometry-"+d),r.settings_lights_href=t.default.observable("#stl-settings-lights-"+d),r.settings_lights_id=t.default.observable("stl-settings-lights-"+d),r.settings_controls_href=t.default.observable("#stl-settings-controls-"+d),r.settings_controls_id=t.default.observable("stl-settings-controls-"+d++),r.settings=t.default.observable(!1),r.ambientLightColor=t.default.observable("#F2F2F2"),r.backgroundColor=t.default.observable(n.backgroundColor||"#F2F2F2"),r.lightOneColor=t.default.observable("#FFFFFF"),r.lightOneX=t.default.observable(0),r.lightOneY=t.default.observable(0),r.lightOneZ=t.default.observable(0),r.lightTwoColor=t.default.observable("#FFFFFF"),r.lightTwoX=t.default.observable(0),r.lightTwoY=t.default.observable(0),r.lightTwoZ=t.default.observable(0),r.materialColor=t.default.observable("#337AB7"),r.wireframe=t.default.observable(!1),r.transparency=t.default.observable(!1),r.opacity=t.default.observable(1),r.controlsRotationSpeed=t.default.observable(2),r.controlsZoomingSpeed=t.default.observable(1.5),r.controlsPanningSpeed=t.default.observable(1),r.controlsDynamicDampingFactor=t.default.observable(.3),r.rotating=t.default.observable(!1),r.rotate_x=t.default.observable(!1),r.rotate_y=t.default.observable(!0),r.rotate_z=t.default.observable(!1),r.displayStats=t.default.observable(!1);var s=n.mid||(0,i.default)(window.location).segment(-1),c=n.aid,w=n.uri,M=w||s+"/files/"+c,E=!!n.aid,S=n.container,C=e(S),T=S.children[1];m(T);var R=T.offsetWidth,L=T.offsetHeight+11,P=null,k=null,N=null,O=null,z=null,D=null,I=null,F=null,B={id:null},U=null,H=null,V=new o.default,G=new o.default;(new u).load(M,function(e){var t=document.getElementsByClassName("loading-image")[0];t&&t.parentNode.removeChild(t),x(S,T,P,k,e,V,G,E),e.center(),e.computeBoundingSphere(),e.computeBoundingBox();var n=e.boundingSphere,i=e.boundingBox;(k=new a.PerspectiveCamera(75,R/L,.1,1e4)).position.x=i.max.x,k.position.y=i.max.y,k.position.z=i.max.z+4*n.radius,N=new a.Vector2,(O=new l.default(k,T)).rotateSpeed=r.controlsRotationSpeed(),O.zoomSpeed=r.controlsZoomingSpeed(),O.panSpeed=r.controlsPanningSpeed(),O.noZoom=!1,O.noPan=!1,O.staticMoving=!0,O.dynamicDampingFactor=r.controlsDynamicDampingFactor(),z=new a.Scene,D=new a.AmbientLight(r.ambientLightColor()),z.add(D),U=new a.PointLight(r.lightOneColor()),r.lightOneX(i.max.x+6*n.radius),r.lightOneY(i.max.y+6*n.radius),r.lightOneZ(i.max.z+6*n.radius),U.position.set(r.lightOneX(),r.lightOneY(),r.lightOneZ()),z.add(U),H=new a.PointLight(r.lightTwoColor()),r.lightTwoX(i.max.x-6*n.radius),r.lightTwoY(i.max.y-6*n.radius),r.lightTwoZ(i.max.z-6*n.radius),H.position.set(r.lightTwoX(),r.lightTwoY(),r.lightTwoZ()),z.add(H),F=new a.MeshLambertMaterial({color:r.materialColor()}),(I=new a.Mesh(e,F)).position.set(n.center.x,n.center.y,n.center.z),z.add(I),k.lookAt(I.position),(P=new a.WebGLRenderer({antialias:!0})).setClearColor(r.backgroundColor()),P.setPixelRatio(window.devicePixelRatio),P.setSize(R,L),T.appendChild(P.domElement),P.domElement.addEventListener("mousemove",function(e){f(N,e)}),g(B,P,z,k,O,V,G)});e(".slycat-content");r.show_settings=t.default.observable(!1).extend({notify:"always"}),r.show_settings.subscribe(function(t){var n=e("#"+r.settings_modal_id()),i=n.parent().hasClass("slycat-content");t&&!i&&(n.detach(),e("#model-pane").addClass("bootstrap-styles").prepend(n)),n.modal(t?"show":"hide")}),r.run_settings=function(e){r.settings(!1),r.settings(!0),r.show_settings(!0)},r.apply_settings=function(){P.setClearColor(r.backgroundColor()),D.color.setHex(h(r.ambientLightColor())),I.material.color.setHex(h(r.materialColor())),I.material.wireframe=r.wireframe(),I.material.transparent=r.transparency(),I.material.opacity=r.opacity(),U.color.setHex(h(r.lightOneColor())),U.position.set(r.lightOneX(),r.lightOneY(),r.lightOneZ()),H.color.setHex(h(r.lightTwoColor())),H.position.set(r.lightTwoX(),r.lightTwoY(),r.lightTwoZ()),O.zoomSpeed=r.controlsZoomingSpeed(),O.rotateSpeed=r.controlsRotationSpeed(),O.panSpeed=r.controlsPanningSpeed(),O.dynamicDampingFactor=r.controlsDynamicDampingFactor()},e(".slycat-3d-btn-reset",C).on("click",function(){return A(O,I),!1}),r.rotate=function(e,t){return cancelAnimationFrame(B.id),r.rotating()?g(B,P,z,k,O,V,G):v(B,S,P,z,k,I,O,V,G,r),r.rotating(!r.rotating()),!1},r.toggleStats=function(e,t){_(S,T,P,k,V,G,!r.displayStats(),E),r.displayStats(!r.displayStats())},r.toggleX=function(e,t){r.rotate_x(!r.rotate_x())},r.toggleY=function(e,t){r.rotate_y(!r.rotate_y())},r.toggleZ=function(e,t){r.rotate_z(!r.rotate_z())},e(window).on("resize",function(){p(S,T,P,k,E)})},template:r.default});var h=function(e){return"#"===e.charAt(0)?"0x"+e.slice(1,e.length):e},p=function(t,n,i,r,o){var a,s,l=0,c=0,u=0;o?($v=e(n),$v.height($v.height()+11),a=$v.outerWidth(),s=$v.outerHeight()):(l=e(t.firstChild).outerHeight(),c=e("#stats",e(t)).is(":visible")?e("#stats",e(t)).height():0,u=2,a=parseInt(t.parentNode.style.width,10),s=parseInt(t.parentNode.style.height,10)),r&&(r.aspect=a/s,r.updateProjectionMatrix()),i&&i.setSize(a-u,s-l-c-22)},f=function(e,t){e.x=t.clientX,e.y=t.clientY},m=function(t){var n=e(t),i=e(n.parent()).parent();n.css("height",i.height()-48)},g=function(e,t,n,i,r,o,a){!function s(){r.update(),t.render(n,i),e.id=requestAnimationFrame(s),o.update(),a.update()}()},v=function(e,t,n,i,r,o,a,s,l,c){!function t(){a.update(),n.render(i,r);var u=c.rotate_x(),d=c.rotate_y(),h=c.rotate_z();o&&u&&(o.rotation.x-=.01),o&&d&&(o.rotation.y-=.01),o&&h&&(o.rotation.z-=.01),e.id=requestAnimationFrame(t),s.update(),l.update()}()},A=function(e,t){e.reset(),t.rotation.x=0,t.rotation.y=0,t.rotation.z=0},y=function(){window.CanvasRenderingContext2D;return function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}()},b=function(t){var n=e("<div />").css("width",400).css("margin","5em auto 0px").css("padding","1.5em").css("background","white").css("text-align","center").text("Your browser and/or graphics card does not seem to support WebGL.");t.append(n)},x=function(t,n,i,r,o,a,s,l){a.setMode(0),s.setMode(1),a.domElement.style.position="relative",a.domElement.style.top="0px",a.domElement.style.display="inline-block",a.domElement.style.marginRight="5px",a.domElement.style.float="right",s.domElement.style.position="relative",s.domElement.style.top="0px",s.domElement.style.display="inline-block",s.domElement.style.marginRight="5px",s.domElement.style.float="right";var c=0;"BufferGeometry"===o.type?c=o.attributes.normal.array.length/9:"Geometry"===o.type&&(c=o.faces.length),e("#slycat-3d-face3-number",e(t)).text(c),_(t,n,i,r,a,s,!1,l),n.appendChild(s.domElement),n.appendChild(a.domElement)},_=function(t,n,i,r,o,a,s,l){var c=s?"block":"none",u=s?"inline-block":"none";o.domElement.style.display=c,a.domElement.style.display=c,e(".slycat-3d-stats",e(t)).css("display",u),p(t,n,i,r,l)}}).call(this,n(1))},function(e,t){e.exports='<div class="bootstrap-styles header-bar" style="padding: 10px 0 5px 10px; background-color: white;">\n  <div class="btn-group" role="group" aria-label="...">\n    <button class="btn btn-warning btn-xs slycat-3d-btn-reset">Reset</button>\n    <button class="btn btn-default btn-xs slycat-3d-btn-settings" data-bind="click: run_settings">Settings</button>\n    <button class="btn btn-default btn-xs slycat-3d-btn-rotate" data-bind="click: rotate, css: {active: rotating}">Rotate</button>\n    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="caret"></span>\n      <span class="sr-only">Toggle Dropdown</span>\n    </button>\n    <ul class="dropdown-menu">\n      <li class="dropdown-header">Axis of rotation</li>\n      <li data-bind="css: {active: rotate_x}, click: toggleX,"><a href="#">x</a></li>\n      <li data-bind="css: {active: rotate_y}, click: toggleY,"><a href="#">y</a></li>\n      <li data-bind="css: {active: rotate_z}, click: toggleZ,"><a href="#">z</a></li>\n      <li role="separator" class="divider"></li>\n      <li data-bind="css: {active: displayStats}, click: toggleStats,"><a href="#">Display performance statistics</a></li>\n    </ul>\n  </div>\n\n  \x3c!-- <button class="btn btn-default btn-xs slycat-3d-btn-settings" data-toggle="modal" data-target="#slycat-3d-modal">Settings</button> --\x3e\n  \n  <div class="slycat-3d-stats" style="display: none; float: right; margin-right: 25px;">\n    Number of faces: <span id="slycat-3d-face3-number"></span>\n  </div>\n\n  <div class="modal fade" data-bind="attr: { id: settings_modal_id }" data-backdrop="static">\n    <div class="modal-dialog" style="margin-top: 135px;">\n      <div class="modal-content zoom-sensitive">\n        <div data-bind="if: settings" style="height: 100%">\n          <div class="modal-header">\n            <h4 class="modal-title" id="slycat-3d-modal-label">STL Model Settings</h4>\n          </div>\n\n          <div class="modal-body">\n            <ul class="nav nav-tabs" role="tablist" style="margin-bottom: 25px;">\n              <li role="presentation" class="active"><a data-bind="attr: { href: settings_scene_href, \'action-controls\': settings_scene_id}" role="tab" data-toggle="tab">Scene</a></li>\n              <li role="presentation"><a data-bind="attr: { href: settings_geometry_href, \'action-controls\': settings_geometry_id}" role="tab" data-toggle="tab">Geometry</a></li>\n              <li role="presentation"><a data-bind="attr: { href: settings_lights_href, \'action-controls\': settings_lights_id}" role="tab" data-toggle="tab">Lights</a></li>\n              <li role="presentation"><a data-bind="attr: { href: settings_controls_href, \'action-controls\': settings_controls_id}" role="tab" data-toggle="tab">Controls</a></li>\n            </ul>\n\n            <div class="tab-content">\n              <div role="tabpanel" class="tab-pane active" data-bind="attr: { id: settings_scene_id }" style="height: 90px;">\n                <form class="form-horizontal">\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Background:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: backgroundColor" placeholder="Background color i.e. #000000" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Ambient light:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: ambientLightColor" placeholder="Ambient light color i.e. #000000">\n                    </div>\n                  </div>\n                </form>\n              </div>\n\n              <div role="tabpanel" class="tab-pane" data-bind="attr: { id: settings_geometry_id }" style="height: 165px;">\n                <form class="form-horizontal">\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Material:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: materialColor" placeholder="Material color i.e. #000000" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Wireframe:</label>\n                    <div class="col-sm-8">\n                      <input type="checkbox" data-bind="checked: wireframe" style="margin: 12px 0px 10px 0px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Transparency:</label>\n                    <div class="col-sm-8">\n                      <input type="checkbox" data-bind="checked: transparency" style="margin: 12px 0px 18px 0px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Opacity:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: opacity" placeholder="Value is between 0 and 1">\n                    </div>\n                  </div>\n                </form>\n              </div>\n\n              <div role="tabpanel" class="tab-pane" data-bind="attr: { id: settings_lights_id }" style="height: 350px;">\n                <form class="form-horizontal">\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 1:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightOneColor" placeholder="Light 1 color i.e. #000000" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 1 X:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightOneX" placeholder="Light 1 x-position" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 1 Y:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightOneY" placeholder="Light 1 y-position" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 1 Z:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightOneZ" placeholder="Light 1 z-position" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 2:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightTwoColor" placeholder="Light 2 color i.e. #000000" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 2 X:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightTwoX" placeholder="Light 2 x-position" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group" style="margin-bottom: 10px;">\n                    <label class="col-sm-3 control-label">Light 2 Y:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightTwoY" placeholder="Light 2 y-position" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Light 2 Z:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: lightTwoZ" placeholder="Light 2 z-position" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                </form>\n              </div>\n\n              <div role="tabpanel" class="tab-pane" data-bind="attr: { id: settings_controls_id }" style="height: 187px">\n                <form class="form-horizontal">\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Rotation:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: controlsRotationSpeed" placeholder="Rotation speed" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Zooming:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: controlsZoomingSpeed" placeholder="Zooming speed" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Panning:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: controlsPanningSpeed" placeholder="Panning speed" style="margin-bottom: 10px;">\n                    </div>\n                  </div>\n                  <div class"form-group">\n                    <label class="col-sm-3 control-label">Dynamic damping factor:</label>\n                    <div class="col-sm-8">\n                      <input type="text" class="form-control" data-bind="value: controlsDynamicDampingFactor" placeholder="Dynamic damping factor" style="margin-top: 9px;">\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n            <button type="button" class="btn btn-primary" data-bind="click: apply_settings">Apply</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="slycat-3d-viewer" class="bootstrap-styles" style="width: 100%;"></div>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){var t=0,n=document.createElement("div");function i(e){return n.appendChild(e.dom),e}function r(e){for(var i=0;i<n.children.length;i++)n.children[i].style.display=i===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(e){e.preventDefault(),r(++t%n.children.length)},!1);var o=(performance||Date).now(),a=o,s=0,l=i(new e.Panel("FPS","#0ff","#002")),c=i(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=i(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:n,addPanel:i,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-o,200),e>=a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:n,setMode:r}};i.Panel=function(e,t,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,d=3*a,h=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,c,u),g.fillRect(d,h,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d,h,p,f),{dom:m,update:function(l,v){i=Math.min(i,l),r=Math.max(r,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,h),g.fillStyle=t,g.fillText(o(l)+" "+e+" ("+o(i)+"-"+o(r)+")",c,u),g.drawImage(m,d+a,h,p-a,f,d,h,p-a,f),g.fillRect(d+p-a,h,a,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d+p-a,h,a,o((1-l/v)*f))}}},t.default=i},function(e,t){e.exports=function(e){var t=function(t){this.manager=void 0!==t?t:e.DefaultLoadingManager};return t.prototype={constructor:e.STLLoader,load:function(t,n,i,r){var o=this,a=new e.FileLoader(o.manager);a.setResponseType("arraybuffer"),a.load(t,function(e){n(o.parse(e))},i,r)},parse:function(e){var t=this.ensureBinary(e);return function(){var e;if(84+50*(e=new DataView(t)).getUint32(80,!0)===e.byteLength)return!0;for(var n=[115,111,108,105,100],i=0;i<5;i++)if(n[i]!=e.getUint8(i,!1))return!0;return!1}()?this.parseBinary(t):this.parseASCII(this.ensureString(e))},parseBinary:function(t){for(var n,i,r,o,a,s,l,c,u=new DataView(t),d=u.getUint32(80,!0),h=!1,p=0;p<70;p++)1129270351==u.getUint32(p,!1)&&82==u.getUint8(p+4)&&61==u.getUint8(p+5)&&(h=!0,o=[],a=u.getUint8(p+6)/255,s=u.getUint8(p+7)/255,l=u.getUint8(p+8)/255,c=u.getUint8(p+9)/255);for(var f=new e.BufferGeometry,m=[],g=[],v=0;v<d;v++){var A=84+50*v,y=u.getFloat32(A,!0),b=u.getFloat32(A+4,!0),x=u.getFloat32(A+8,!0);if(h){var _=u.getUint16(A+48,!0);0==(32768&_)?(n=(31&_)/31,i=(_>>5&31)/31,r=(_>>10&31)/31):(n=a,i=s,r=l)}for(var w=1;w<=3;w++){var M=A+12*w;m.push(u.getFloat32(M,!0)),m.push(u.getFloat32(M+4,!0)),m.push(u.getFloat32(M+8,!0)),g.push(y,b,x),h&&o.push(n,i,r)}}return f.addAttribute("position",new e.BufferAttribute(new Float32Array(m),3)),f.addAttribute("normal",new e.BufferAttribute(new Float32Array(g),3)),h&&(f.addAttribute("color",new e.BufferAttribute(new Float32Array(o),3)),f.hasColors=!0,f.alpha=c),f},parseASCII:function(t){var n,i,r,o,a,s;n=new e.BufferGeometry,i=/facet([\s\S]*?)endfacet/g;for(var l=[],c=[],u=new e.Vector3;null!==(a=i.exec(t));){for(s=a[0],r=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(a=r.exec(s));)u.x=parseFloat(a[1]),u.y=parseFloat(a[3]),u.z=parseFloat(a[5]);for(o=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(a=o.exec(s));)l.push(parseFloat(a[1]),parseFloat(a[3]),parseFloat(a[5])),c.push(u.x,u.y,u.z)}return n.addAttribute("position",new e.BufferAttribute(new Float32Array(l),3)),n.addAttribute("normal",new e.BufferAttribute(new Float32Array(c),3)),n},ensureString:function(e){if("string"!=typeof e){for(var t=new Uint8Array(e),n=[],i=0;i<e.byteLength;i++)n.push(String.fromCharCode(t[i]));return n.join("")}return e},ensureBinary:function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}},t}},function(e,t,n){var i,r=window.THREE||n(339);e.exports=i=function(e,t){var n=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new r.Vector3;var o=new r.Vector3,a=i.NONE,s=i.NONE,l=new r.Vector3,c=new r.Vector2,u=new r.Vector2,d=new r.Vector3,h=0,p=new r.Vector2,f=new r.Vector2,m=0,g=0,v=new r.Vector2,A=new r.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var y={type:"change"},b={type:"start"},x={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var _=function(){var e=new r.Vector2;return function(t,i){return e.set((t-n.screen.left)/n.screen.width,(i-n.screen.top)/n.screen.height),e}}(),w=function(){var e=new r.Vector2;return function(t,i){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-i))/n.screen.width),e}}();function M(e,t){return Array.isArray(e)?-1!==e.indexOf(t):e===t}function E(e){!1!==n.enabled&&(window.removeEventListener("keydown",E),s=a,a===i.NONE&&(M(n.keys[i.ROTATE],e.keyCode)&&!n.noRotate?a=i.ROTATE:M(n.keys[i.ZOOM],e.keyCode)&&!n.noZoom?a=i.ZOOM:M(n.keys[i.PAN],e.keyCode)&&!n.noPan&&(a=i.PAN)))}function S(e){!1!==n.enabled&&(a=s,window.addEventListener("keydown",E,!1))}function C(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a===i.NONE&&(a=e.button),a!==i.ROTATE||n.noRotate?a!==i.ZOOM||n.noZoom?a!==i.PAN||n.noPan||(v.copy(_(e.pageX,e.pageY)),A.copy(v)):(p.copy(_(e.pageX,e.pageY)),f.copy(p)):(u.copy(w(e.pageX,e.pageY)),c.copy(u)),document.addEventListener("mousemove",T,!1),document.addEventListener("mouseup",R,!1),n.dispatchEvent(b))}function T(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a!==i.ROTATE||n.noRotate?a!==i.ZOOM||n.noZoom?a!==i.PAN||n.noPan||A.copy(_(e.pageX,e.pageY)):f.copy(_(e.pageX,e.pageY)):(c.copy(u),u.copy(w(e.pageX,e.pageY))))}function R(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a=i.NONE,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",R),n.dispatchEvent(x))}function L(e){if(!1!==n.enabled){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:p.y-=.025*e.deltaY;break;case 1:p.y-=.01*e.deltaY;break;default:p.y-=25e-5*e.deltaY}n.dispatchEvent(b),n.dispatchEvent(x)}}function P(e){if(!1!==n.enabled){switch(e.touches.length){case 1:a=i.TOUCH_ROTATE,u.copy(w(e.touches[0].pageX,e.touches[0].pageY)),c.copy(u);break;default:a=i.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;g=m=Math.sqrt(t*t+r*r);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,s=(e.touches[0].pageY+e.touches[1].pageY)/2;v.copy(_(o,s)),A.copy(v)}n.dispatchEvent(b)}}function k(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:c.copy(u),u.copy(w(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;g=Math.sqrt(t*t+i*i);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;A.copy(_(r,o))}}function N(e){if(!1!==n.enabled){switch(e.touches.length){case 0:a=i.NONE;break;case 1:a=i.TOUCH_ROTATE,u.copy(w(e.touches[0].pageX,e.touches[0].pageY)),c.copy(u)}n.dispatchEvent(x)}}function O(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new r.Vector3,i=new r.Quaternion,o=new r.Vector3,a=new r.Vector3,s=new r.Vector3,p=new r.Vector3;return function(){p.set(u.x-c.x,u.y-c.y,0),(e=p.length())?(l.copy(n.object.position).sub(n.target),o.copy(l).normalize(),a.copy(n.object.up).normalize(),s.crossVectors(a,o).normalize(),a.setLength(u.y-c.y),s.setLength(u.x-c.x),p.copy(a.add(s)),t.crossVectors(p,l).normalize(),e*=n.rotateSpeed,i.setFromAxisAngle(t,e),l.applyQuaternion(i),n.object.up.applyQuaternion(i),d.copy(t),h=e):!n.staticMoving&&h&&(h*=Math.sqrt(1-n.dynamicDampingFactor),l.copy(n.object.position).sub(n.target),i.setFromAxisAngle(d,h),l.applyQuaternion(i),n.object.up.applyQuaternion(i)),c.copy(u)}}(),this.zoomCamera=function(){var e;a===i.TOUCH_ZOOM_PAN?(e=m/g,m=g,l.multiplyScalar(e)):(1!==(e=1+(f.y-p.y)*n.zoomSpeed)&&e>0&&l.multiplyScalar(e),n.staticMoving?p.copy(f):p.y+=(f.y-p.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new r.Vector2,t=new r.Vector3,i=new r.Vector3;return function(){e.copy(A).sub(v),e.lengthSq()&&(e.multiplyScalar(l.length()*n.panSpeed),i.copy(l).cross(n.object.up).setLength(e.x),i.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(i),n.target.add(i),n.staticMoving?v.copy(A):v.add(e.subVectors(A,v).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(l.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,l.setLength(n.maxDistance)),p.copy(f)),l.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,l.setLength(n.minDistance)),p.copy(f)))},this.update=function(){l.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,l),n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(y),o.copy(n.object.position))},this.reset=function(){a=i.NONE,s=i.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),l.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(y),o.copy(n.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",O,!1),this.domElement.removeEventListener("mousedown",C,!1),this.domElement.removeEventListener("wheel",L,!1),this.domElement.removeEventListener("touchstart",P,!1),this.domElement.removeEventListener("touchend",N,!1),this.domElement.removeEventListener("touchmove",k,!1),document.removeEventListener("mousemove",T,!1),document.removeEventListener("mouseup",R,!1),window.removeEventListener("keydown",E,!1),window.removeEventListener("keyup",S,!1)},this.domElement.addEventListener("contextmenu",O,!1),this.domElement.addEventListener("mousedown",C,!1),this.domElement.addEventListener("wheel",L,!1),this.domElement.addEventListener("touchstart",P,!1),this.domElement.addEventListener("touchend",N,!1),this.domElement.addEventListener("touchmove",k,!1),window.addEventListener("keydown",E,!1),window.addEventListener("keyup",S,!1),this.handleResize(),this.update()},i.prototype=Object.create(r.EventDispatcher.prototype)},function(e,t,n){"use strict";(function(e){var t=a(n(303)),i=a(n(42)),r=a(n(203));n(280);var o=a(n(370));function a(e){return e&&e.__esModule?e:{default:e}}n(254),e.widget("parameter_image.controls",{options:{mid:null,model_name:null,aid:null,metadata:null,"x-variable":null,"y-variable":null,"image-variable":null,"color-variable":null,"auto-scale":!0,x_variables:[],y_variables:[],image_variables:[],color_variables:[],rating_variables:[],category_variables:[],selection:[],hidden_simulations:[],indices:[],disable_hide_show:!1,open_images:[],"video-sync":!1,"video-sync-time":0},_create:function(){var e=[],n=!0,a=!1,s=void 0;try{for(var l,c=(0,t.default)(this.options.x_variables);!(n=(l=c.next()).done);n=!0){var u=l.value;e.push({key:u,name:this.options.metadata["column-names"][u]})}}catch(e){a=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(a)throw s}}var d=[],h=!0,p=!1,f=void 0;try{for(var m,g=(0,t.default)(this.options.y_variables);!(h=(m=g.next()).done);h=!0){var v=m.value;d.push({key:v,name:this.options.metadata["column-names"][v]})}}catch(e){p=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(p)throw f}}var A=[],y=!0,b=!1,x=void 0;try{for(var _,w=(0,t.default)(this.options.color_variables);!(y=(_=w.next()).done);y=!0){var M=_.value;A.push({key:M,name:this.options.metadata["column-names"][M]})}}catch(e){b=!0,x=e}finally{try{!y&&w.return&&w.return()}finally{if(b)throw x}}var E=[];E.push({key:-1,name:"None"});var S=!0,C=!1,T=void 0;try{for(var R,L=(0,t.default)(this.options.image_variables);!(S=(R=L.next()).done);S=!0){var P=R.value;E.push({key:P,name:this.options.metadata["column-names"][P]})}}catch(e){C=!0,T=e}finally{try{!S&&L.return&&L.return()}finally{if(C)throw T}}var k=[{id:"x-axis-dropdown",label:"X Axis",title:"Change X Axis Variable",state_label:"x_variable",trigger:"x-selection-changed",items:e,selected:this.options["x-variable"]},{id:"y-axis-dropdown",label:"Y Axis",title:"Change Y Axis Variable",state_label:"y_variable",trigger:"y-selection-changed",items:d,selected:this.options["y-variable"]},{id:"color-dropdown",label:"Point Color",title:"Change Point Color",state_label:"color_variable",trigger:"color-selection-changed",items:A,selected:this.options["color-variable"]},{id:"image-dropdown",label:"Media Set",title:"Change Media Set Variable",state_label:"media_variable",trigger:"images-selection-changed",items:E,selected:this.options["image-variable"]}],N=i.default.createElement(o.default,{element:this.element,dropdowns:k,auto_scale:this.options["auto-scale"],hidden_simulations:this.options.hidden_simulations,disable_hide_show:this.options.disable_hide_show,open_images:this.options.open_images,selection:this.options.selection,mid:this.options.mid,aid:this.options.aid,model_name:this.options.model_name,metadata:this.options.metadata,indices:this.options.indices,media_variables:this.options.image_variables,rating_variables:this.options.rating_variables,video_sync:this.options["video-sync"],video_sync_time:this.options["video-sync-time"]});this.ControlsBarComponent=r.default.render(N,document.getElementById("react-controls"))},_setOption:function(e,t){this.options[e]=t,"x-variable"==e?this.ControlsBarComponent.setState({x_variable:Number(this.options["x-variable"])}):"y-variable"==e?this.ControlsBarComponent.setState({y_variable:Number(this.options["y-variable"])}):"image-variable"==e?this.ControlsBarComponent.setState({media_variable:Number(this.options["image-variable"])}):"color-variable"==e?this.ControlsBarComponent.setState({color_variable:Number(this.options["color-variable"])}):"selection"==e?this.ControlsBarComponent.setState({selection:this.options.selection.slice()}):"hidden_simulations"==e?this.ControlsBarComponent.setState({hidden_simulations:this.options.hidden_simulations.slice()}):"open_images"==e?this.ControlsBarComponent.setState({open_images:this.options.open_images.slice()}):"disable_hide_show"==e?this.ControlsBarComponent.setState({disable_hide_show:this.options.disable_hide_show}):"video-sync-time"==e&&this.ControlsBarComponent.setState({video_sync_time:this.options["video-sync-time"],video_sync_time_value:this.options["video-sync-time"]})}})}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=A(n(303)),r=A(n(205)),o=A(n(206)),a=A(n(207)),s=A(n(208)),l=A(n(209)),c=A(n(42)),u=A(n(371)),d=A(n(340)),h=A(n(372)),p=A(n(373)),f=A(n(374)),m=A(n(341)),g=A(n(327)),v=A(n(375));function A(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));n.state={auto_scale:n.props.auto_scale,hidden_simulations:n.props.hidden_simulations,disable_hide_show:n.props.disable_hide_show,open_images:n.props.open_images,selection:n.props.selection,video_sync:n.props.video_sync,video_sync_time:n.props.video_sync_time,video_sync_time_value:n.props.video_sync_time};var a=!0,l=!1,c=void 0;try{for(var u,d=(0,i.default)(n.props.dropdowns);!(a=(u=d.next()).done);a=!0){var h=u.value;n.state[h.state_label]=h.selected}}catch(e){l=!0,c=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw c}}return n.set_selected=n.set_selected.bind(n),n.set_auto_scale=n.set_auto_scale.bind(n),n.set_video_sync=n.set_video_sync.bind(n),n.set_video_sync_time=n.set_video_sync_time.bind(n),n.set_video_sync_time_value=n.set_video_sync_time_value.bind(n),n.trigger_show_all=n.trigger_show_all.bind(n),n.trigger_close_all=n.trigger_close_all.bind(n),n.trigger_hide_selection=n.trigger_hide_selection.bind(n),n.trigger_hide_unselected=n.trigger_hide_unselected.bind(n),n.trigger_show_selection=n.trigger_show_selection.bind(n),n.trigger_pin_selection=n.trigger_pin_selection.bind(n),n.trigger_jump_to_start=n.trigger_jump_to_start.bind(n),n.trigger_frame_back=n.trigger_frame_back.bind(n),n.trigger_play=n.trigger_play.bind(n),n.trigger_pause=n.trigger_pause.bind(n),n.trigger_frame_forward=n.trigger_frame_forward.bind(n),n.trigger_jump_to_end=n.trigger_jump_to_end.bind(n),n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"set_selected",value:function(e,t,n,i){if(t!==this.state[e]){var r={};r[e]=t,this.setState(function(e,t){return r}),this.props.element.trigger(n,t)}}},{key:"set_auto_scale",value:function(e){var t=this;this.setState(function(e,n){var i=!e.auto_scale;return t.props.element.trigger("auto-scale",i),{auto_scale:i}})}},{key:"set_video_sync",value:function(e){var t=this;this.setState(function(e,n){var i=!e.video_sync;return t.props.element.trigger("video-sync",i),{video_sync:i}})}},{key:"set_video_sync_time",value:function(e){var t=this;this.setState(function(n,i){return t.props.element.trigger("video-sync-time",e),{video_sync_time:e,video_sync_time_value:e}})}},{key:"set_video_sync_time_value",value:function(e){var t=e.target.value;this.setState(function(e,n){return{video_sync_time_value:t}})}},{key:"trigger_show_all",value:function(e){this.props.element.trigger("show-all")}},{key:"trigger_close_all",value:function(e){this.props.element.trigger("close-all")}},{key:"trigger_hide_selection",value:function(e){this.state.disable_hide_show||this.props.element.trigger("hide-selection",this.state.selection)}},{key:"trigger_hide_unselected",value:function(e){this.state.disable_hide_show||this.props.element.trigger("hide-unselected",this.state.selection)}},{key:"trigger_show_selection",value:function(e){this.state.disable_hide_show||this.props.element.trigger("show-selection",this.state.selection)}},{key:"trigger_pin_selection",value:function(e){this.state.disable_hide_show||this.props.element.trigger("pin-selection",this.state.selection)}},{key:"trigger_jump_to_start",value:function(e){this.props.element.trigger("jump-to-start")}},{key:"trigger_frame_back",value:function(e){this.props.element.trigger("frame-back")}},{key:"trigger_play",value:function(e){this.props.element.trigger("play")}},{key:"trigger_pause",value:function(e){this.props.element.trigger("pause")}},{key:"trigger_frame_forward",value:function(e){this.props.element.trigger("frame-forward")}},{key:"trigger_jump_to_end",value:function(e){this.props.element.trigger("jump-to-end")}},{key:"render",value:function(){var e=this,t=0==this.state.hidden_simulations.length||this.state.disable_hide_show,n=t?"There are currently no hidden scatterplot points to show.":"Show All Hidden Scatterplot Points",r=0==this.state.open_images.length,o=!(this.state.media_variable&&this.state.media_variable>=0),a=!(this.props.media_variables.length>0),s=this.props.dropdowns.map(function(t){return t.items.length>1&&c.default.createElement(d.default,{key:t.id,id:t.id,label:t.label,title:t.title,state_label:t.state_label,trigger:t.trigger,items:t.items,selected:e.state[t.state_label],set_selected:e.set_selected})}),l=!1,A=!1,y=!1,b=!1,x=!0,_=!1,w=void 0;try{for(var M,E=(0,i.default)(this.state.open_images);!(x=(M=E.next()).done);x=!0){var S=M.value;if(S.video){if(l=!0,S.current_frame&&(y=!0,S.playing)){b=!0,A=!0;break}S.playing&&(A=!0)}if(l&&y&&A&&b)break}}catch(e){_=!0,w=e}finally{try{!x&&E.return&&E.return()}finally{if(_)throw w}}var C=!(this.state.video_sync||y),T=this.state.video_sync&&A||!this.state.video_sync&&b;return c.default.createElement(c.default.Fragment,null,c.default.createElement(f.default,{id:"scatterplot-controls"},s),c.default.createElement(f.default,{id:"selection-controls"},c.default.createElement(m.default,{title:"Auto Scale",icon:"fa-external-link",active:this.state.auto_scale,set_active_state:this.set_auto_scale}),c.default.createElement(p.default,{trigger_hide_selection:this.trigger_hide_selection,trigger_hide_unselected:this.trigger_hide_unselected,trigger_show_selection:this.trigger_show_selection,trigger_pin_selection:this.trigger_pin_selection,disable_hide_show:this.state.disable_hide_show,disable_pin:o,hide_pin:a,selection:this.state.selection,rating_variables:this.props.rating_variables,metadata:this.props.metadata,element:this.props.element}),c.default.createElement(g.default,{label:"Show All",title:n,disabled:t,click:this.trigger_show_all}),c.default.createElement(g.default,{label:"Close All Pins",title:"",disabled:r,click:this.trigger_close_all}),c.default.createElement(v.default,{selection:this.state.selection,hidden_simulations:this.state.hidden_simulations,aid:this.props.aid,mid:this.props.mid,model_name:this.props.model_name,metadata:this.props.metadata,indices:this.props.indices})),c.default.createElement(f.default,{id:"video-controls",class:"input-group input-group-xs"},c.default.createElement(h.default,{video_sync:this.state.video_sync,set_video_sync:this.set_video_sync,video_sync_time_value:this.state.video_sync_time_value,set_video_sync_time_value:this.set_video_sync_time_value,set_video_sync_time:this.set_video_sync_time,any_video_open:l})),c.default.createElement(f.default,{id:"playback-controls"},c.default.createElement(u.default,{trigger_jump_to_start:this.trigger_jump_to_start,trigger_frame_back:this.trigger_frame_back,trigger_play:this.trigger_play,trigger_pause:this.trigger_pause,trigger_frame_forward:this.trigger_frame_forward,trigger_jump_to_end:this.trigger_jump_to_end,any_video_open:l,disabled:C,playing:T})))}}]),t}(c.default.Component);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(42)),r=o(n(327));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return e.any_video_open?i.default.createElement(i.default.Fragment,null,i.default.createElement(r.default,{title:"Jump to beginning",icon:"fa-fast-backward",disabled:e.disabled,click:e.trigger_jump_to_start}),i.default.createElement(r.default,{title:"Skip one frame back",icon:"fa-backward",disabled:e.disabled,click:e.trigger_frame_back}),i.default.createElement(r.default,{title:"Play",icon:"fa-play",hidden:e.playing,disabled:e.disabled,click:e.trigger_play}),i.default.createElement(r.default,{title:"Pause",icon:"fa-pause",hidden:!e.playing,disabled:e.disabled,click:e.trigger_pause}),i.default.createElement(r.default,{title:"Skip one frame forward",icon:"fa-forward",disabled:e.disabled,click:e.trigger_frame_forward}),i.default.createElement(r.default,{title:"Jump to end",icon:"fa-fast-forward",disabled:e.disabled,click:e.trigger_jump_to_end})):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(205)),r=u(n(206)),o=u(n(207)),a=u(n(208)),s=u(n(209)),l=u(n(42)),c=u(n(341));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.handleKeypressBlur=n.handleKeypressBlur.bind(n),n}return(0,s.default)(t,e),(0,o.default)(t,[{key:"handleKeypressBlur",value:function(e){if("blur"===e.type||"keypress"===e.type&&13===e.which){var t=Math.abs(parseFloat(e.target.value));isNaN(t)&&(t=0),this.props.set_video_sync_time(t)}}},{key:"render",value:function(){return this.props.any_video_open?l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{className:"input-group-btn"},l.default.createElement(c.default,{title:this.props.video_sync?"Unsync videos":"Sync videos",icon:"fa-video-camera",active:this.props.video_sync,set_active_state:this.props.set_video_sync})),l.default.createElement("input",{type:"text",className:"form-control input-xs video-sync-time",placeholder:"Time",value:this.props.video_sync_time_value,onChange:this.props.set_video_sync_time_value,onBlur:this.handleKeypressBlur,onKeyPress:this.handleKeypressBlur})):null}}]),t}(l.default.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(3)),r=o(n(42));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.rating_variables.map(function(t){return r.default.createElement(r.default.Fragment,{key:t},r.default.createElement("li",{role:"presentation",className:"dropdown-header"},e.metadata["column-names"][t]),r.default.createElement("li",{role:"presentation"},r.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:function(n){return function t(n,r,o,a){i.default.prompt({title:"Set Values",message:"Set values for "+n+":",value:"",alert:a,buttons:[{className:"btn-default",label:"Cancel"},{className:"btn-primary",label:"Apply"}],callback:function(i,o){if("Apply"===i.label){var a=a().trim(),s="string"!==e.metadata["column-types"][r],l=a.length>0;if(l&&s&&isNaN(Number(a))&&(l=!1),l)e.element.trigger("set-value",{selection:e.selection,variable:r,value:s?a:'"'+a+'"'});else{var c="Please enter a value.";s&&(c="Please enter a numeric value."),t(n,r,0,c)}}}})}(e.metadata["column-names"][t],t)}},"Set")))});return r.default.createElement("div",{className:"btn-group btn-group-xs"},r.default.createElement("button",{className:"btn btn-default dropdown-toggle "+(e.selection.length>0?"":"disabled"),type:"button",id:"selection-dropdown","data-toggle":"dropdown","aria-expanded":"true",title:"Perform Action On Selection"},"Selection Action ",r.default.createElement("span",{className:"caret"})),r.default.createElement("ul",{id:"selection-switcher",className:"dropdown-menu",role:"menu","aria-labelledby":"selection-dropdown"},t,r.default.createElement("li",{role:"presentation",className:"dropdown-header"},"Scatterplot Points"),r.default.createElement("li",{role:"presentation",className:e.disable_hide_show?"disabled":""},r.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:e.trigger_hide_selection},"Hide")),r.default.createElement("li",{role:"presentation",className:e.disable_hide_show?"disabled":""},r.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:e.trigger_hide_unselected},"Hide Unselected")),r.default.createElement("li",{role:"presentation",className:e.disable_hide_show?"disabled":""},r.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:e.trigger_show_selection},"Show")),!e.hide_pin&&r.default.createElement("li",{role:"presentation",className:e.disable_pin?"disabled":""},r.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:e.trigger_pin_selection},"Pin"))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(205)),r=c(n(206)),o=c(n(207)),a=c(n(208)),s=c(n(209)),l=c(n(42));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return l.default.createElement("div",{id:this.props.id,className:(this.props.class?this.props.class:"btn-group btn-group-xs")+" ControlsGroup"},this.props.children)}}]),t}(l.default.Component);t.default=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(328)),r=g(n(62)),o=g(n(205)),a=g(n(206)),s=g(n(207)),l=g(n(208)),c=g(n(209)),u=g(n(329)),d=g(n(15)),h=g(n(47)),p=n(3),f=g(n(42)),m=g(n(327));function g(e){return e&&e.__esModule?e:{default:e}}var v=function(t){function n(e){(0,a.default)(this,n);var t=(0,l.default)(this,(n.__proto__||(0,o.default)(n)).call(this,e));return t.handleClick=t.handleClick.bind(t),t}return(0,c.default)(n,t),(0,s.default)(n,[{key:"handleClick",value:function(){0===this.props.selection.length&&0===this.props.hidden_simulations.length?this._write_data_table():this.openCSVSaveChoiceDialog()}},{key:"_write_data_table",value:function(t){var i=this;e.ajax({type:"POST",url:d.default+"models/"+this.props.mid+"/arraysets/"+this.props.aid+"/data",data:(0,r.default)({hyperchunks:"0/.../..."}),contentType:"application/json",success:function(e){n._write_csv(i._convert_to_csv(e,t),i.props.model_name+"_data_table.csv")},error:function(e,t,n){window.alert("Error retrieving data table: "+n)}})}},{key:"_convert_to_csv",value:function(e,t){var n=h.default.zip.apply(h.default,(0,i.default)(e));void 0!==t&&t.length>0&&(t.sort(),n=h.default.at(n,t));var r=this.props.metadata["column-names"].slice(0,-1);return n.unshift(r),u.default.unparse(n)}},{key:"openCSVSaveChoiceDialog",value:function(){var e=this,t="",n=[{className:"btn-default",label:"Cancel"},{className:"btn-primary",label:"Save Entire Table",icon_class:"fa fa-table"}];(this.props.selection.length>0&&(t+="You have "+this.props.selection.length+" rows selected. ",n.splice(n.length-1,0,{className:"btn-primary",label:"Save Selected",icon_class:"fa fa-check"})),this.props.hidden_simulations.length>0)&&(t+="You have "+(this.props.metadata["row-count"]-this.props.hidden_simulations.length)+" rows visible. ",n.splice(n.length-1,0,{className:"btn-primary",label:"Save Visible",icon_class:"fa fa-eye"}));t+="What would you like to do?",(0,p.dialog)({title:"Download Choices",message:t,buttons:n,callback:function(t){"Save Entire Table"===t.label?e._write_data_table():"Save Selected"===t.label?e._write_data_table(e.props.selection):"Save Visible"===t.label&&e._write_data_table(e._filterIndices())}})}},{key:"_filterIndices",value:function(){for(var t=this.props.indices,i=this.props.hidden_simulations,r=n._cloneArrayBuffer(t),o=t.length-1;o>=0;o--){e.inArray(t[o],i)>-1&&r.splice(o,1)}return r}},{key:"render",value:function(){return f.default.createElement(m.default,{icon:"fa-download",title:"Download Data Table",click:this.handleClick})}}],[{key:"_write_csv",value:function(e,t){var n=new Blob([e],{type:"application/csv;charset=utf-8;"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.style="visibility:hidden",r.download=t||"slycatDataTable.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"_cloneArrayBuffer",value:function(e){for(var t=[],n=0;n<e.length;n++)t.concat([e[n]]);return t}}]),n}(f.default.Component);t.default=v}).call(this,n(1))},,,,,function(e,t,n){"use strict";(function(e){var t=function(e){return e&&e.__esModule?e:{default:e}}(n(281)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(282));n(280),n(292),n(293),n(294),n(295),n(296),n(297),n(298),e.widget("parameter_image.table",{options:{"server-root":"",mid:null,aid:null,metadata:null,inputs:[],outputs:[],others:[],images:[],ratings:[],categories:[],"row-selection":[],"variable-selection":[],"sort-variable":null,"sort-order":null,"image-variable":null,"x-variable":null,"y-variable":null,x_y_variables:{x:null,y:null},colorscale:null,hidden_simulations:[]},_create:function(){var e=this;function n(e){return null==e?"&nbsp;":(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(e,i,r,o,a){return o.colorscale?"<div class='highlightWrapper"+(null==r?" null":"")+(t.default.hcl(o.colorscale(r)).l>50?" light":" dark")+"' style='background:"+o.colorscale(r)+"'>"+n(r)+"</div>":null==r?"<div class='highlightWrapper"+(null==r?" null":"")+"'>"+n(r)+"</div>":n(r)}function r(t,n){e.data.set_sort(t,n),e.data.get_indices("sorted",e.options["row-selection"],function(i){e.grid.invalidate(),e.trigger_row_selection=!1,e.grid.setSelectedRows(i),e.grid.resetActiveCell(),i.length&&e.grid.scrollRowToTop(Math.min.apply(Math,i)),e.element.trigger("variable-sort-changed",[t,n])})}function o(t,n,i,r){var o={id:t,field:t,name:e.options.metadata["column-names"][t],toolTip:e.options.metadata["column-names"][t],sortable:!1,headerCssClass:n,cssClass:i,formatter:r,width:100,header:{buttons:[{cssClass:e.options["sort-variable"]==t?"asc"==e.options["sort-order"]?"icon-sort-ascending":"icon-sort-descending":"icon-sort-off",tooltip:e.options["sort-variable"]==t&&"asc"==e.options["sort-order"]?"Sort descending":"Sort ascending",command:e.options["sort-variable"]==t&&"asc"==e.options["sort-order"]?"sort-descending":"sort-ascending"}]}};return e.options.images.indexOf(t)>-1?(o.headerCssClass+=" headerImage",o.header.buttons.push({cssClass:e.options["image-variable"]==t?"icon-image-on":"icon-image-off",tooltip:e.options["image-variable"]==t?"Current image variable":"Set as image variable",command:e.options["image-variable"]==t?"":"image-on"})):e.options.metadata["column-count"]-1!=t&&(o.headerCssClass+=" headerNumeric",o.header.buttons.push({cssClass:e.options["x-variable"]==t?"icon-x-on":"icon-x-off",tooltip:e.options["x-variable"]==t?"Current x variable":"Set as x variable",command:e.options["x-variable"]==t?"":"x-on"},{cssClass:e.options["y-variable"]==t?"icon-y-on":"icon-y-off",tooltip:e.options["y-variable"]==t?"Current y variable":"Set as y variable",command:e.options["y-variable"]==t?"":"y-on"})),o}for(var a in e.options.x_y_variables.x=e.options["x-variable"],e.options.x_y_variables.y=e.options["y-variable"],e.columns=[],e.columns.push(o(e.options.metadata["column-count"]-1,"headerSimId","rowSimId",i)),e.options.inputs)e.columns.push(o(e.options.inputs[a],"headerInput","rowInput",i));for(var a in e.options.outputs)e.columns.push(o(e.options.outputs[a],"headerOutput","rowOutput",i));for(var a in e.options.others)e.columns.push(o(e.options.others[a],"headerOther","rowOther",i));e.data=new e._data_provider({api_root:e.options.api_root,mid:e.options.mid,aid:e.options.aid,metadata:e.options.metadata,sort_column:e.options["sort-variable"],sort_order:e.options["sort-order"],inputs:e.options.inputs,outputs:e.options.outputs,indexOfIndex:e.options.metadata["column-count"]-1,hidden_simulations:e.options.hidden_simulations,x_y_variables:e.options.x_y_variables}),e.trigger_row_selection=!0,e.grid=new Slick.Grid(e.element,e.data,e.columns,{explicitInitialization:!0,enableColumnReorder:!1,editable:!0,editCommandHandler:e._editCommandHandler}),e.data.onDataLoaded.subscribe(function(t,n){for(var i=n.from;i<=n.to;i++)e.grid.invalidateRow(i);e.grid.render()});var s=new Slick.Plugins.HeaderButtons;s.onCommand.subscribe(function(t,n){var i=n.column,o=n.button,a=n.command,s=n.grid;if("sort-ascending"==a||"sort-descending"==a)for(var l in e.columns)e.columns[l].header.buttons[0].cssClass="icon-sort-off",e.columns[l].header.buttons[0].tooltip="Sort ascending",e.columns[l].header.buttons[0].command="sort-ascending",s.updateColumnHeader(e.columns[l].id);if("sort-ascending"==a)o.cssClass="icon-sort-ascending",o.command="sort-descending",o.tooltip="Sort descending",r(i.id,"asc");else if("sort-descending"==a)o.cssClass="icon-sort-descending",o.command="sort-ascending",o.tooltip="Sort ascending",r(i.id,"desc");else if("image-on"==a){for(l=0;l<e.options.images.length;l++){var c=s.getColumnIndex(e.options.images[l]);e.columns[c].header.buttons[1].cssClass="icon-image-off",e.columns[c].header.buttons[1].tooltip="Set as image variable",e.columns[c].header.buttons[1].command="image-on",s.updateColumnHeader(e.columns[c].id)}o.cssClass="icon-image-on",o.command="",o.tooltip="Current image variable",e.element.trigger("images-selection-changed",i.id)}else if("x-on"==a){for(var l in e.columns)-1==e.options.images.indexOf(e.columns[l].id)&&e.options.metadata["column-count"]-1!=e.columns[l].id&&(e.columns[l].header.buttons[1].cssClass="icon-x-off",e.columns[l].header.buttons[1].tooltip="Set as x variable",e.columns[l].header.buttons[1].command="x-on",s.updateColumnHeader(e.columns[l].id));o.cssClass="icon-x-on",o.command="",o.tooltip="Current x variable",e.options["x-variable"]=i.id,e.options.x_y_variables.x=i.id,s.invalidate(),e.element.trigger("x-selection-changed",i.id)}else if("y-on"==a){for(var l in e.columns)-1==e.options.images.indexOf(e.columns[l].id)&&e.options.metadata["column-count"]-1!=e.columns[l].id&&(e.columns[l].header.buttons[2].cssClass="icon-y-off",e.columns[l].header.buttons[2].tooltip="Set as y variable",e.columns[l].header.buttons[2].command="y-on",s.updateColumnHeader(e.columns[l].id));o.cssClass="icon-y-on",o.command="",o.tooltip="Current y variable",e.options["y-variable"]=i.id,e.options.x_y_variables.y=i.id,s.invalidate(),e.element.trigger("y-selection-changed",i.id)}}),e.grid.registerPlugin(s),e.grid.registerPlugin(new Slick.AutoTooltips({enableForHeaderCells:!0})),e.grid.setSelectionModel(new Slick.RowSelectionModel),e.grid.onSelectedRowsChanged.subscribe(function(t,n){e.trigger_row_selection&&e.data.get_indices("unsorted",n.rows,function(t){e.options["row-selection"]=t,e.element.trigger("row-selection-changed",[t])}),e.trigger_row_selection=!0}),e.grid.onHeaderClick.subscribe(function(t,n){e._array_equal([n.column.field],e.options["variable-selection"])||-1!=e.options.images.indexOf(n.column.field)||(e.options["variable-selection"]=[n.column.field],e.element.trigger("variable-selection-changed",[e.options["variable-selection"]]))}),e._color_variables(e.options["variable-selection"]),e.grid.init(),e.data.get_indices("sorted",e.options["row-selection"],function(t){e.trigger_row_selection=!1,e.grid.setSelectedRows(t),e.grid.resetActiveCell(),t.length&&e.grid.scrollRowToTop(Math.min.apply(Math,t))})},resize_canvas:function(){this.grid.resizeCanvas()},update_data:function(){var e=this;e.data.invalidate(),e.grid.invalidate(),e.data.get_indices("sorted",e.options["row-selection"],function(t){e.trigger_row_selection=!1,e.grid.setSelectedRows(t),e.grid.resetActiveCell(),t.length&&e.grid.scrollRowToTop(Math.min.apply(Math,t))})},_setOption:function(e,t){var n=this;if("row-selection"==e)n.options[e]=t,n.data.get_indices("sorted",t,function(e){n.trigger_row_selection=!1,n.grid.setSelectedRows(e),n.grid.resetActiveCell(),e.length&&n.grid.scrollRowToTop(Math.min.apply(Math,e))});else if("variable-selection"==e){if(n._array_equal(n.options[e],t))return;n.options[e]=t,n._color_variables(t)}else"colorscale"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"x-variable"==e?(n.options[e]=t,n.options.x_y_variables.x=t,n._set_selected_x()):"y-variable"==e?(n.options[e]=t,n.options.x_y_variables.y=t,n._set_selected_y()):"image-variable"==e?(n.options[e]=t,n._set_selected_image()):"metadata"==e?(n.options[e]=t,n._color_variables(n.options["variable-selection"])):"hidden_simulations"==e?(n.options[e]=t,n.data.invalidate(),n.grid.invalidate()):"jump_to_simulation"==e&&n.data.get_indices("sorted",[t],function(e){if(e.length){var t=Math.min.apply(Math,e);n.grid.scrollRowToTop(t),n.grid.getColumns().forEach(function(e){n.grid.flashCell(t,n.grid.getColumnIndex(e.id))})}})},_set_selected_x:function(){for(var e in this.columns)-1==this.options.images.indexOf(this.columns[e].id)&&this.options.metadata["column-count"]-1!=this.columns[e].id&&(this.columns[e].id==this.options["x-variable"]?(this.columns[e].header.buttons[1].cssClass="icon-x-on",this.columns[e].header.buttons[1].tooltip="Current x variable",this.columns[e].header.buttons[1].command=""):(this.columns[e].header.buttons[1].cssClass="icon-x-off",this.columns[e].header.buttons[1].tooltip="Set as x variable",this.columns[e].header.buttons[1].command="x-on"),this.grid.updateColumnHeader(this.columns[e].id));this.grid.invalidate()},_set_selected_y:function(){for(var e in this.columns)-1==this.options.images.indexOf(this.columns[e].id)&&this.options.metadata["column-count"]-1!=this.columns[e].id&&(this.columns[e].id==this.options["y-variable"]?(this.columns[e].header.buttons[2].cssClass="icon-y-on",this.columns[e].header.buttons[2].tooltip="Current y variable",this.columns[e].header.buttons[2].command=""):(this.columns[e].header.buttons[2].cssClass="icon-y-off",this.columns[e].header.buttons[2].tooltip="Set as y variable",this.columns[e].header.buttons[2].command="y-on"),this.grid.updateColumnHeader(this.columns[e].id));this.grid.invalidate()},_set_selected_image:function(){for(var e=0;e<this.options.images.length;e++){var t=this.grid.getColumnIndex(this.options.images[e]);this.columns[t].id==this.options["image-variable"]?(this.columns[t].header.buttons[1].cssClass="icon-image-on",this.columns[t].header.buttons[1].tooltip="Current image variable",this.columns[t].header.buttons[1].command=""):(this.columns[t].header.buttons[1].cssClass="icon-image-off",this.columns[t].header.buttons[1].tooltip="Set as image variable",this.columns[t].header.buttons[1].command="image-on"),this.grid.updateColumnHeader(this.columns[t].id)}},_color_variables:function(t){var n=this.grid.getColumns();for(var i in n){var r=n[i];null!==this.options.colorscale&&-1!=e.inArray(r.id,t)?(r.colorscale=this.options.colorscale,r.cssClass=r.cssClass.split(" ")[0]+" highlight"):(r.colorscale=null,r.cssClass=r.cssClass.split(" ")[0])}this.grid.invalidate()},_editCommandHandler:function(e,t,n){console.log("editCommandHandler called"),n.execute()},_data_provider:function(n){var r=this;r.api_root=n.api_root,r.mid=n.mid,r.aid=n.aid,r.metadata=n.metadata,r.sort_column=n.sort_column,r.sort_order=n.sort_order,r.inputs=n.inputs,r.outputs=n.outputs,r.analysis_columns=r.inputs.concat(r.outputs),r.indexOfIndex=n.indexOfIndex,r.hidden_simulations=n.hidden_simulations,r.ranked_indices={},r.x_y_variables=n.x_y_variables,r.pages={},r.pages_in_progress={},r.page_size=50,r.onDataLoaded=new Slick.Event,r.getLength=function(){return r.metadata["row-count"]},r.getItem=function(t){var n=r.metadata["column-count"],i=Math.floor(t/r.page_size),o=i*r.page_size;if(r.pages_in_progress[i])return null;if(!(i in r.pages)){r.pages_in_progress[i]=!0;var a=o,s=(i+1)*r.page_size,l="";if(null!==r.sort_column&&null!==r.sort_order){var c="a"+r.sort_column,u=r.sort_order;"ascending"==u?u="asc":"descending"==u&&(u="desc"),r.sort_column==r.metadata["column-count"]-1&&(c="index(0)"),l="/order: rank("+c+', "'+u+'")'}return e.ajax({type:"GET",url:r.api_root+"models/"+r.mid+"/arraysets/"+r.aid+"/data?hyperchunks=0/0:"+(n-1)+"|index(0)"+l+"/"+a+":"+s,success:function(e){r.pages[i]=[];for(var t=0;t<e[0].length;t++){for(var o={},l=0;l!=n;++l)o[l]=e[l][t];r.pages[i].push(o)}r.pages_in_progress[i]=!1,r.onDataLoaded.notify({from:a,to:s})},error:function(e,t,n){console.log("error",e,t,n)}}),null}return r.pages[i][t-o]},r.getItemMetadata=function(t){var n=Math.floor(t/r.page_size);if(r.pages_in_progress[n]||!(n in r.pages))return null;var i=this.getItem(t),o=(r.analysis_columns.length,"");return null!=i[r.x_y_variables.x]&&null!=i[r.x_y_variables.y]||(o+="hiddenRow "),-1!=e.inArray(i[r.indexOfIndex],r.hidden_simulations)&&(o+="hiddenRow "),""!=o?{cssClasses:o}:null},r.set_sort=function(e,t){e==r.sort_column&&t==r.sort_order||(r.sort_column=e,r.sort_order=t,r.pages={})},r.get_indices=function(e,n,o){if(0!=n.length)if(null==r.sort_column||null==r.sort_order)o(n);else if(r.ranked_indices[r.sort_column]){var a=r.ranked_indices[r.sort_column];if("desc"==r.sort_order){for(var s=[],l=0;l<a.length;l++)s.push(a[l]);a=s.reverse()}var c=[];for(l=0;l<n.length;l++)"unsorted"==e?c.push(a[n[l]]):"sorted"==e&&c.push(a.indexOf(n[l]));o(new Int32Array(c))}else if(r.sort_column==r.metadata["column-count"]-1)r.ranked_indices[r.sort_column]=new Int32Array(t.default.range(r.metadata["row-count"])),r.get_indices(e,n,o);else{var u=new XMLHttpRequest;u.open("GET",r.api_root+"models/"+r.mid+"/arraysets/data-table/data?hyperchunks=0/rank(a"+r.sort_column+',"asc")/...&byteorder='+(i.is_little_endian()?"little":"big")),u.responseType="arraybuffer",u.direction=e,u.rows=n,u.callback=o,u.onload=function(e){for(var t=[],n=new Int32Array(this.response),i=0;i<n.length;i+=2)t.push(n[i]);r.ranked_indices[r.sort_column]=new Int32Array(t),r.get_indices(this.direction,this.rows,this.callback)},u.send()}else o([])},r.invalidate=function(){r.pages={}}},_array_equal:function(t,n){return 0==e(t).not(n).length&&0==e(n).not(t).length}})}).call(this,n(1))},function(e,t,n){"use strict";(function(e){var t=d(n(281));n(280);var i=d(n(42)),r=d(n(203)),o=d(n(382)),a=d(n(383)),s=n(342),l=d(n(392)),c=d(n(393)),u=d(n(394));function d(e){return e&&e.__esModule?e:{default:e}}e.widget("slycat.colorswitcher",{options:{colormap:"day",selection:null},_create:function(){var t=this;this.color_maps=c.default;var n=[{id:"color-switcher",label:"Color",title:"Change color scheme",state_label:"color",trigger:"colormap-changed",items:u.default,selected:t.options.colormap,single:!0}],d=(0,s.createStore)(l.default),h=i.default.createElement(o.default,{element:t.element,dropdown:n,selection:t.options.selection}),p=i.default.createElement(a.default,{store:d,element:t.element,dropdown:n,selection:t.options.selection});t.color_bar=r.default.render(h,document.getElementById("color-switcher")),t.color_switcher_redux=r.default.render(p,document.getElementById("redux-test"));var f=[],m=[];e.each(this.color_maps,function(e,n){for(var i=t.get_gradient_data(e),r=[],o=0;o<i.length;o++)r.push(i[o].color+" "+i[o].offset+"%");var a=t.get_background(e);f.push(r),m.push(a)});for(var g=0;g<f.length;g++)e("#color-switcher a").eq(g).css({"background-image":"linear-gradient(to bottom, "+f[g].join(", ")+"), linear-gradient(to bottom, "+m[g]+", "+m[g]+")","background-size":"5px 75%, 50px 100%","background-position":"right 10px center, right 5px center","background-repeat":"no-repeat, no-repeat","padding-right":"70px"})},_setOption:function(e,t){"color"===e&&self.color_bar.setState({colormap:Number(self.options.colormap)})},get_background:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].background},get_null_color:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].null_color},get_opacity:function(e){return void 0===e&&(e=this.options.colormap),this.color_maps[e].opacity},get_color_scale:function(e,n,i){void 0===(e=this.color_bar.get_selected_colormap())&&(e=this.options.colormap),void 0===n&&(n=0),void 0===i&&(i=1);var r=[],o=t.default.scale.linear().domain([0,this.color_maps[e].colors.length-1]).range([n,i]);for(var a in this.color_maps[e].colors)r.push(o(a));return t.default.scale.linear().domain(r).range(this.color_maps[e].colors)},get_color_map:function(e,t,n){return this.get_color_scale(e,t,n)},get_color_scale_ordinal:function(e,n){void 0===e&&(e=this.options.colormap),void 0===n&&(n=[0,1]);for(var i=t.default.scale.ordinal().domain(n).rangePoints([0,100],0),r=this.get_color_scale(e,0,100),o=[],a=0;a<n.length;a++)o.push(r(i(n[a])));return t.default.scale.ordinal().domain(n).range(o)},get_color_map_ordinal:function(e,t){return this.get_color_scale_ordinal(e,t)},get_gradient_data:function(e){void 0===e&&(e=this.options.colormap);for(var t=this.color_maps[e].colors,n=t.length,i=[],r=0;r<n;r++)i.push({offset:r*(100/(n-1)),color:t[n-1-r]});return i},setUpColorMapsForAllColumns:function(e,t){for(var n=0;n!==t.length;++n)t[n].colorMap=this.get_color_scale(e,t[n].columnMin,t[n].columnMax)}})}).call(this,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(205)),r=u(n(206)),o=u(n(207)),a=u(n(208)),s=u(n(209)),l=u(n(42)),c=u(n(340));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={selection:n.props.dropdown[0].selected},n.state[n.props.dropdown.state_label]=n.props.dropdown.selected,n.set_selected=n.set_selected.bind(n),n}return(0,s.default)(t,e),(0,o.default)(t,[{key:"set_selected",value:function(e,t,n,i){if(t!=this.state[e]){var r={};r[e]=t,this.setState(function(e,t){return r}),this.state.selection=t,this.props.element.trigger(n,t)}}},{key:"get_selected_colormap",value:function(){return null==this.state.selection?"night":this.state.selection}},{key:"render",value:function(){return l.default.createElement(c.default,{key:this.props.dropdown[0].id,id:this.props.dropdown[0].id,label:this.props.dropdown[0].label,title:this.props.dropdown[0].title,state_label:this.props.dropdown[0].state_label,trigger:this.props.dropdown[0].trigger,items:this.props.dropdown[0].items,selected:this.state.selection,single:this.props.dropdown[0].single,set_selected:this.set_selected})}}]),t}(l.default.Component);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(42)),r=o(n(384));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.store,n=(e.element,e.dropdown),o=e.selection;e.whatsUp,e.stateObject,e.saySomething;return i.default.createElement(r.default,{key:n[0].id,id:n[0].id,label:n[0].label,title:n[0].title,state_label:n[0].state_label,trigger:n[0].trigger,items:n[0].items,selected:o,single:n[0].single,set_selected:n[0].selected,store:t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(205)),r=d(n(206)),o=d(n(207)),a=d(n(208)),s=d(n(209)),l=d(n(42)),c=n(426),u=n(391);function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this,t=this.props.items.map(function(t){return l.default.createElement("li",{role:"presentation",key:t.key,className:t.key==e.props.selected?"active":""},l.default.createElement("a",{role:"menuitem",tabIndex:"-1",onClick:e.saySomething},t.name))}),n=l.default.createElement(l.default.Fragment,null,l.default.createElement("button",{className:"btn btn-default dropdown-toggle",type:"button",id:this.props.id,"data-toggle":"dropdown","aria-expanded":"true",title:this.props.title},this.props.label," ",l.default.createElement("span",{className:"caret"})),l.default.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":this.props.id},t));return l.default.createElement(l.default.Fragment,null,1!=this.props.single?l.default.createElement("div",{className:"btn-group btn-group-xs"},n):l.default.createElement(l.default.Fragment,null,n))}}]),t}(l.default.Component);h=(0,c.connect)(function(e){return{whatsUp:e.say,stateObject:e}},function(e){return{saySomething:function(){console.log("Yo"),e((0,u.colorSwitcherAction)())}}})(h),t.default=h},function(e,t,n){"use strict";var i={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,u=c&&c(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var h=c(n);h&&h!==u&&e(t,h,d)}var p=a(n);s&&(p=p.concat(s(n)));for(var f=0;f<p.length;++f){var m=p[f];if(!(i[m]||r[m]||d&&d[m])){var g=l(n,m);try{o(t,m,g)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,o,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(210))},function(e,t,n){"use strict";(function(e,i){var r,o=n(390);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:i;var a=Object(o.a)(r);t.a=a}).call(this,n(210),n(389)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.colorSwitcherAction=function(){return{type:"SWITCH_COLOR"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(arguments[1].type){case"SWITCH_COLOR":return{state:e,say:"Change the color"};default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(281));var r={night:{label:"Night",background:i.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.5",colors:[i.default.rgb(59,76,192),i.default.rgb(68,90,204),i.default.rgb(77,104,215),i.default.rgb(87,117,225),i.default.rgb(98,130,234),i.default.rgb(108,142,241),i.default.rgb(119,154,247),i.default.rgb(130,165,251),i.default.rgb(141,176,254),i.default.rgb(152,185,255),i.default.rgb(163,194,255),i.default.rgb(174,201,253),i.default.rgb(184,208,249),i.default.rgb(194,213,244),i.default.rgb(204,217,238),i.default.rgb(213,219,230),i.default.rgb(221,221,221),i.default.rgb(229,216,209),i.default.rgb(236,211,197),i.default.rgb(241,204,185),i.default.rgb(245,196,173),i.default.rgb(247,187,160),i.default.rgb(247,177,148),i.default.rgb(247,166,135),i.default.rgb(244,154,123),i.default.rgb(241,141,111),i.default.rgb(236,127,99),i.default.rgb(229,112,88),i.default.rgb(222,96,77),i.default.rgb(213,80,66),i.default.rgb(203,62,56),i.default.rgb(192,40,47),i.default.rgb(180,4,38)]},day:{label:"Day",background:i.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[i.default.rgb(100,108,234),i.default.rgb(115,118,240),i.default.rgb(128,128,244),i.default.rgb(140,138,248),i.default.rgb(151,147,250),i.default.rgb(161,155,251),i.default.rgb(169,163,251),i.default.rgb(177,170,250),i.default.rgb(184,177,248),i.default.rgb(189,182,245),i.default.rgb(193,187,241),i.default.rgb(197,191,236),i.default.rgb(199,194,230),i.default.rgb(200,196,224),i.default.rgb(201,198,216),i.default.rgb(200,199,208),i.default.rgb(198,198,198),i.default.rgb(210,197,195),i.default.rgb(220,194,192),i.default.rgb(229,191,187),i.default.rgb(236,186,181),i.default.rgb(243,181,175),i.default.rgb(248,175,168),i.default.rgb(251,168,160),i.default.rgb(254,159,152),i.default.rgb(255,150,143),i.default.rgb(255,140,133),i.default.rgb(253,129,123),i.default.rgb(250,117,112),i.default.rgb(246,105,101),i.default.rgb(240,91,90),i.default.rgb(233,75,78),i.default.rgb(225,57,66)]},rainbow:{label:"Rainbow Night",background:i.default.rgb(128,128,128),null_color:"rgb(75,75,75)",opacity:"0.6",colors:[i.default.rgb(0,0,255),i.default.rgb(0,255,255),i.default.rgb(255,255,0),i.default.rgb(255,0,0)]},rainbow_day:{label:"Rainbow Day",background:i.default.rgb(255,255,255),null_color:"gray",opacity:"0.7",colors:[i.default.rgb(0,0,255),i.default.rgb(0,255,255),i.default.rgb(255,255,0),i.default.rgb(255,0,0)]}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=[{key:"night",name:"Night"},{key:"day",name:"Day"},{key:"rainbow",name:"Rainbow Night"},{key:"rainbow_day",name:"Rainbow Day"}]},function(e,t,n){"use strict";o(n(5));var i=o(n(0)),r=(o(n(4)),o(n(396)));function o(e){return e&&e.__esModule?e:{default:e}}i.default.components.register("slycat-range-slider",{viewModel:function(e){var t=this;t.axis=i.default.unwrap(e.axis)||"vertical",t.invert=e.invert||i.default.observable(!1),t.reverse=i.default.unwrap(e.reverse)||!1,t.length=e.length||i.default.observable(500),t.low_thumb={length:e.thumb_length||i.default.observable(12),dragging:e.dragging||i.default.observable(!1),last_drag:null},t.high_thumb={length:e.thumb_length||i.default.observable(12),dragging:e.dragging||i.default.observable(!1),last_drag:null},t.domain={min:e.min||i.default.observable(0),low_value:e.low||i.default.observable(.33),high_value:e.high||i.default.observable(.66),max:e.max||i.default.observable(1)},t.low_range={min:i.default.observable(0)},t.low_range.max=i.default.pureComputed(function(){return t.length()-t.low_thumb.length()-t.high_thumb.length()}),t.high_range={},t.high_range.min=i.default.pureComputed(function(){return t.low_thumb.length()}),t.high_range.max=i.default.pureComputed(function(){return t.length()-t.high_thumb.length()}),t.low_range.value=i.default.pureComputed(function(){var e=t.domain.min(),n=t.domain.low_value(),i=t.domain.max(),r=t.low_range.min();return(n-e)/(i-e)*(t.low_range.max()-r)+r}),t.high_range.value=i.default.pureComputed(function(){var e=t.domain.min(),n=t.domain.high_value(),i=t.domain.max(),r=t.high_range.min();return(n-e)/(i-e)*(t.high_range.max()-r)+r}),t.css=i.default.pureComputed(function(){return t.axis+(t.low_thumb.dragging()||t.high_thumb.dragging()||t.range.dragging()?" dragging":"")+(t.invert()?" invert":"")}),t.style=i.default.pureComputed(function(){var e={};return e["vertical"==t.axis?"height":"width"]=t.length()+"px",e}),t.range={dragging:e.dragging||i.default.observable(!1),last_drag:null},t.range.style=i.default.pureComputed(function(){var e=t.axis,n=t.reverse,i=t.low_range.value()+t.low_thumb.length()/2,r=t.high_range.value()+t.high_thumb.length()/2,o={};return o["vertical"==e?n?"bottom":"top":n?"right":"left"]=i+"px",o["vertical"==e?"height":"width"]=r-i+"px",o}),t.low_thumb.style=i.default.pureComputed(function(){var e=t.axis,n=t.reverse,i={};return i["vertical"==e?"height":"width"]=t.low_thumb.length()+"px",i["vertical"==e?n?"bottom":"top":n?"right":"left"]=t.low_range.value()+"px",i}),t.high_thumb.style=i.default.pureComputed(function(){var e=t.axis,n=t.reverse,i={};return i["vertical"==e?"height":"width"]=t.high_thumb.length()+"px",i["vertical"==e?n?"bottom":"top":n?"right":"left"]=t.high_range.value()+"px",i}),t.low_thumb.mousedown=function(e,n){t.low_thumb.dragging(!0),t.low_thumb.last_drag=[n.pageX,n.pageY],window.addEventListener("mousemove",t.low_thumb.mousemove,!0),window.addEventListener("mouseup",t.low_thumb.mouseup,!0)},t.high_thumb.mousedown=function(e,n){t.high_thumb.dragging(!0),t.high_thumb.last_drag=[n.pageX,n.pageY],window.addEventListener("mousemove",t.high_thumb.mousemove,!0),window.addEventListener("mouseup",t.high_thumb.mouseup,!0)},t.range.mousedown=function(e,n){t.range.dragging(!0),t.range.last_drag=[n.pageX,n.pageY],window.addEventListener("mousemove",t.range.mousemove,!0),window.addEventListener("mouseup",t.range.mouseup,!0)},t.low_thumb.mousemove=function(e){var n=t.domain.min(),i=t.domain.max(),r=t.low_range.min(),o=t.low_range.value(),a=t.low_range.max(),s=t.reverse,l="vertical"==t.axis?e.pageY-t.low_thumb.last_drag[1]:e.pageX-t.low_thumb.last_drag[0];s&&(l=-l);var c=(o+l-r)/(a-r)*(i-n)+n;t.domain.low_value(Math.max(n,Math.min(i,t.domain.high_value(),c))),t.low_thumb.last_drag=[e.pageX,e.pageY]},t.high_thumb.mousemove=function(e){var n=t.domain.min(),i=t.domain.max(),r=t.high_range.min(),o=t.high_range.value(),a=t.high_range.max(),s=t.reverse,l="vertical"==t.axis?e.pageY-t.high_thumb.last_drag[1]:e.pageX-t.high_thumb.last_drag[0];s&&(l=-l);var c=(o+l-r)/(a-r)*(i-n)+n;t.domain.high_value(Math.max(n,t.domain.low_value(),Math.min(i,c))),t.high_thumb.last_drag=[e.pageX,e.pageY]},t.range.mousemove=function(e){var n=t.domain.min(),i=t.domain.max(),r=t.low_range.min(),o=t.low_range.value(),a=t.low_range.max(),s=t.high_range.min(),l=t.high_range.value(),c=t.high_range.max(),u=t.domain.high_value()-t.domain.low_value(),d=t.reverse,h="vertical"==t.axis?e.pageY-t.range.last_drag[1]:e.pageX-t.range.last_drag[0];d&&(h=-h);var p=(l+h-s)/(c-s)*(i-n)+n,f=(o+h-r)/(a-r)*(i-n)+n;t.domain.low_value(Math.max(n,Math.min(i-u,t.domain.high_value(),f))),t.domain.high_value(Math.max(n+u,t.domain.low_value(),Math.min(i,p))),t.range.last_drag=[e.pageX,e.pageY]},t.low_thumb.mouseup=function(e){t.low_thumb.dragging(!1),window.removeEventListener("mousemove",t.low_thumb.mousemove,!0),window.removeEventListener("mouseup",t.low_thumb.mouseup,!0)},t.high_thumb.mouseup=function(e){t.high_thumb.dragging(!1),window.removeEventListener("mousemove",t.high_thumb.mousemove,!0),window.removeEventListener("mouseup",t.high_thumb.mouseup,!0)},t.range.mouseup=function(e){t.range.dragging(!1),window.removeEventListener("mousemove",t.range.mousemove,!0),window.removeEventListener("mouseup",t.range.mouseup,!0)}},template:r.default})},function(e,t){e.exports='<div class="slycat-range-slider" data-bind="css:css,style:style" style="position: relative">\n  <div class="domain" style="position: absolute">\n  </div>\n  <div class="range" data-bind="event:{mousedown: range.mousedown}, style:range.style" style="position: absolute">\n  </div>\n  <div class="low thumb" data-bind="event:{mousedown: low_thumb.mousedown}, style:low_thumb.style" style="position: absolute">\n  </div>\n  <div class="high thumb" data-bind="event:{mousedown: high_thumb.mousedown}, style:high_thumb.style" style="position: absolute">\n  </div>\n</div>\n'},function(e,t,n){"use strict";var i=o(n(0)),r=(o(n(4)),o(n(47)),o(n(398)));function o(e){return e&&e.__esModule?e:{default:e}}i.default.components.register("slycat-category-select",{viewModel:function(e){var t=this;t.categories=e.categories,t.selectedCategories=i.default.observableArray(),t.length=e.length||i.default.observable(500),this.isSelected=function(e){e=e;return i.default.pureComputed(function(){return-1!==t.selectedCategories.indexOf(e)})},this.toggle=function(e,t){t.currentTarget.classList.add("fresh"),e.selected()?e.selected(!1):e.selected(!0)},this.mouseOut=function(e,t){t.currentTarget.classList.remove("fresh")},this.mouseOver=function(e,t){var n=t.currentTarget,i=n.firstElementChild,r="";i.clientWidth<i.scrollWidth&&(r=e.value()),n.title=r},t.style=i.default.pureComputed(function(){var e={};return e.height=t.length()+10+"px",e})},template:r.default})},function(e,t){e.exports='\x3c!-- Copyright (c) 2013, 2018 National Technology and Engineering Solutions of Sandia, LLC . Under the terms of Contract  DE-NA0003525 with National Technology and Engineering Solutions of Sandia, LLC, the U.S. Government  retains certain rights in this software. --\x3e\n\n<div class="slycat-category-filter" data-bind="style:style">\n  <div data-bind="foreach: categories" class="slycat-category-select" role="group" style="position: relative">\n    <div class="category-button" data-bind="\n    \tcss: { active: selected }, \n    \tclick: $parent.toggle, \n    \tevent: { mouseout: $parent.mouseOut, mouseover: $parent.mouseOver, }, \n    \t">\n    \t<div data-bind="text: value"><div>\n    </div>\n  </div>\n</div>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(42),r=n(102),o=n.n(r),a=o.a.shape({trySubscribe:o.a.func.isRequired,tryUnsubscribe:o.a.func.isRequired,notifyNestedSubs:o.a.func.isRequired,isSubscribed:o.a.func.isRequired}),s=o.a.shape({subscribe:o.a.func.isRequired,dispatch:o.a.func.isRequired,getState:o.a.func.isRequired});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||t+"Subscription",r=function(e){function r(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return o[t]=n.store,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),r.prototype.getChildContext=function(){var e;return(e={})[t]=this[t],e[n]=null,e},r.prototype.render=function(){return i.Children.only(this.props.children)},r}(i.Component);return r.propTypes={store:s.isRequired,children:o.a.element.isRequired},r.childContextTypes=((e={})[t]=s.isRequired,e[n]=a,e),r}var c=l(),u=n(385),d=n.n(u),h=n(386),p=n.n(h);var f=null,m={notify:function(){}};var g=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=m}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var e=[],t=[];return{clear:function(){t=f,e=f},notify:function(){for(var n=e=t,i=0;i<n.length;i++)n[i]()},get:function(){return t},subscribe:function(n){var i=!0;return t===e&&(t=e.slice()),t.push(n),function(){i&&e!==f&&(i=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=m)},e}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var A=0,y={};function b(){}function x(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.getDisplayName,l=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,c=r.methodName,u=void 0===c?"connectAdvanced":c,h=r.renderCountProp,f=void 0===h?void 0:h,m=r.shouldHandleStateChanges,x=void 0===m||m,_=r.storeKey,w=void 0===_?"store":_,M=r.withRef,E=void 0!==M&&M,S=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),C=w+"Subscription",T=A++,R=((t={})[w]=s,t[C]=a,t),L=((n={})[C]=a,n);return function(t){p()("function"==typeof t,"You must pass a component to the function returned by "+u+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",r=l(n),o=v({},S,{getDisplayName:l,methodName:u,renderCountProp:f,shouldHandleStateChanges:x,storeKey:w,withRef:E,displayName:r,wrappedComponentName:n,WrappedComponent:t}),a=function(n){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t));return i.version=T,i.state={},i.renderCount=0,i.store=e[w]||t[w],i.propsMode=Boolean(e[w]),i.setWrappedInstance=i.setWrappedInstance.bind(i),p()(i.store,'Could not find "'+w+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+w+'" as a prop to "'+r+'".'),i.initSelector(),i.initSubscription(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n),a.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[C]=t||this.context[C],e},a.prototype.componentDidMount=function(){x&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},a.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=b,this.store=null,this.selector.run=b,this.selector.shouldComponentUpdate=!1},a.prototype.getWrappedInstance=function(){return p()(E,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},a.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},a.prototype.initSelector=function(){var t=e(this.store.dispatch,o);this.selector=function(e,t){var n={run:function(i){try{var r=e(t.getState(),i);(r!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=r,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},a.prototype.initSubscription=function(){if(x){var e=(this.propsMode?this.props:this.context)[C];this.subscription=new g(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(y)):this.notifyNestedSubs()},a.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.prototype.addExtraProps=function(e){if(!(E||f||this.propsMode&&this.subscription))return e;var t=v({},e);return E&&(t.ref=this.setWrappedInstance),f&&(t[f]=this.renderCount++),this.propsMode&&this.subscription&&(t[C]=this.subscription),t},a.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(i.createElement)(t,this.addExtraProps(e.props))},a}(i.Component);return a.WrappedComponent=t,a.displayName=r,a.childContextTypes=L,a.contextTypes=R,a.propTypes=R,d()(a,t)}}var _=Object.prototype.hasOwnProperty;function w(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function M(e,t){if(w(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!_.call(t,n[r])||!w(e[n[r]],t[n[r]]))return!1;return!0}var E=n(342),S=n(387),C="object"==typeof self&&self&&self.Object===Object&&self,T=(S.a||C||Function("return this")()).Symbol,R=Object.prototype;R.hasOwnProperty,R.toString,T&&T.toStringTag;Object.prototype.toString;T&&T.toStringTag;Object.getPrototypeOf,Object;var L=Function.prototype,P=Object.prototype,k=L.toString;P.hasOwnProperty,k.call(Object);function N(e){return function(t,n){var i=e(t,n);function r(){return i}return r.dependsOnOwnProps=!1,r}}function O(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function z(e,t){return function(t,n){n.displayName;var i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e)};return i.dependsOnOwnProps=!0,i.mapToProps=function(t,n){i.mapToProps=e,i.dependsOnOwnProps=O(e);var r=i(t,n);return"function"==typeof r&&(i.mapToProps=r,i.dependsOnOwnProps=O(r),r=i(t,n)),r},i}}var D=[function(e){return"function"==typeof e?z(e):void 0},function(e){return e?void 0:N(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?N(function(t){return Object(E.bindActionCreators)(e,t)}):void 0}];var I=[function(e){return"function"==typeof e?z(e):void 0},function(e){return e?void 0:N(function(){return{}})}],F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function B(e,t,n){return F({},n,e,t)}var U=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var i=n.pure,r=n.areMergedPropsEqual,o=!1,a=void 0;return function(t,n,s){var l=e(t,n,s);return o?i&&r(l,a)||(a=l):(o=!0,a=l),a}}}(e):void 0},function(e){return e?void 0:function(){return B}}];function H(e,t,n,i){return function(r,o){return n(e(r,o),t(i,o),o)}}function V(e,t,n,i,r){var o=r.areStatesEqual,a=r.areOwnPropsEqual,s=r.areStatePropsEqual,l=!1,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0;function f(r,l){var f=!a(l,u),m=!o(r,c);return c=r,u=l,f&&m?(d=e(c,u),t.dependsOnOwnProps&&(h=t(i,u)),p=n(d,h,u)):f?(e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(i,u)),p=n(d,h,u)):m?function(){var t=e(c,u),i=!s(t,d);return d=t,i&&(p=n(d,h,u)),p}():p}return function(r,o){return l?f(r,o):function(r,o){return d=e(c=r,u=o),h=t(i,u),p=n(d,h,u),l=!0,p}(r,o)}}function G(e,t){var n=t.initMapStateToProps,i=t.initMapDispatchToProps,r=t.initMergeProps,o=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=i(e,o),l=r(e,o);return(o.pure?V:H)(a,s,l,e,o)}var j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function W(e,t,n){for(var i=t.length-1;i>=0;i--){var r=t[i](e);if(r)return r}return function(t,i){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function q(e,t){return e===t}var X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?x:t,i=e.mapStateToPropsFactories,r=void 0===i?I:i,o=e.mapDispatchToPropsFactories,a=void 0===o?D:o,s=e.mergePropsFactories,l=void 0===s?U:s,c=e.selectorFactory,u=void 0===c?G:c;return function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=o.pure,c=void 0===s||s,d=o.areStatesEqual,h=void 0===d?q:d,p=o.areOwnPropsEqual,f=void 0===p?M:p,m=o.areStatePropsEqual,g=void 0===m?M:m,v=o.areMergedPropsEqual,A=void 0===v?M:v,y=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),b=W(e,r,"mapStateToProps"),x=W(t,a,"mapDispatchToProps"),_=W(i,l,"mergeProps");return n(u,j({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:b,initMapDispatchToProps:x,initMergeProps:_,pure:c,areStatesEqual:h,areOwnPropsEqual:f,areStatePropsEqual:g,areMergedPropsEqual:A},y))}}();n.d(t,"Provider",function(){return c}),n.d(t,"createProvider",function(){return l}),n.d(t,"connectAdvanced",function(){return x}),n.d(t,"connect",function(){return X})}])]);
//# sourceMappingURL=ui_parameter_image_module.js.map